if (self.CavalryLogger) { CavalryLogger.start_js(["sinzn"]); }

__d("PhotosUploadWaterfallErrorCodes",[],(function(a,b,c,d,e,f){e.exports={SECURITY:1,FILE_IO:2,IMAGE_IO:3,UPLOAD_IO:4,INVALID_SERVER_RESULT:5,RESIZE_FAILURE:6,ENCODE_FAILURE:7,INVALID_DOMAIN:8,BAD_JPEG_MARKERS:9,BAD_SERVER_RESPONSE:10,EXTERNAL_INTERFACE_UNAVAILABLE:11,JS_CALL_FAILED:12,UNCAUGHT_ERROR:13,UPLOAD_SWF_FAILED_LOAD:14,FILE_IO_TIMEOUT:15,IMAGE_SECURITY:16,BAD_IMAGE_FILE:17,IMAGE_IO_TIMEOUT:18,BLACK_PHOTO:19,EMPTY_FILE_LOADED:20,FILE_READ_DISABLED:21,BAD_NETWORK:22,FLASH_LOAD_TIMEOUT:23,FLASH_LOAD_FAILURE:24,FLASH_UPGRADE_REQUIRED:25,SPHERICAL_CHECK_FAILED:26,SPHERICAL_CHECK_TIMEOUT:27}}),null);
__d("ReactComposerJSONCollageLayoutData",[],(function(a,b,c,d,e,f){e.exports={1:[{validActors:3,photoLayouts:[[0,1,1,0]]}],2:[{validActors:3,photoLayouts:[[0,3,3,0],[0,6,3,3]]},{validActors:3,photoLayouts:[[0,6,3,0],[3,6,6,0]]},{validActors:3,photoLayouts:[[0,3,6,0],[0,6,6,3]]},{validActors:1,photoLayouts:[[0,6,2,0],[2,6,4,0]]}],3:[{validActors:3,photoLayouts:[[0,6,3,0],[3,3,6,0],[3,6,6,3]]},{validActors:3,photoLayouts:[[0,3,6,0],[0,6,3,3],[3,6,6,3]]},{validActors:2,photoLayouts:[[0,2,2,0],[0,4,2,2],[0,6,2,4]]},{validActors:1,photoLayouts:[[0,6,4,0],[4,3,6,0],[4,6,6,3]]},{validActors:1,photoLayouts:[[0,4,6,0],[0,6,3,4],[3,6,6,4]]},{validActors:1,photoLayouts:[[0,6,2,0],[2,6,4,0],[4,6,6,0]]},{validActors:1,photoLayouts:[[0,2,6,0],[0,4,6,2],[0,6,6,4]]}],4:[{validActors:3,photoLayouts:[[0,3,3,0],[0,6,3,3],[3,3,6,0],[3,6,6,3]]},{validActors:3,photoLayouts:[[0,6,4,0],[4,2,6,0],[4,4,6,2],[4,6,6,4]]},{validActors:3,photoLayouts:[[0,4,6,0],[0,6,2,4],[2,6,4,4],[4,6,6,4]]}],5:[{validActors:1,photoLayouts:[[0,3,3,0],[3,3,6,0],[0,6,2,3],[2,6,4,3],[4,6,6,3]]},{validActors:1,photoLayouts:[[0,3,3,0],[0,6,3,3],[3,2,5,0],[3,4,5,2],[3,6,5,4]]}]}}),null);
__d("SphericalPhotoConstants",[],(function(a,b,c,d,e,f){e.exports={QE_SPHERICAL_PHOTO_UNIVERSE:"spherical_photo",QE_WWW_UNIVERSE:"spherical_photo_www_universe",QE_WWW_COMPOSER_UNIVERSE:"spherical_photo_www_composer_universe",FEED_TRACKING_KEY:"spherical_photo_interaction"}}),null);
__d("VideoCopyrightMatchStatus",[],(function(a,b,c,d,e,f){e.exports={NEW_MATCH:"NEW_MATCH",REPORTED:"REPORTED",ALLOWED:"ALLOWED",ADDED_MATCH:"ADDED_MATCH",REMOVED:"REMOVED",IN_DISPUTE:"IN_DISPUTE",BLOCKED:"BLOCKED",CLAIMED:"CLAIMED",MONITORED:"MONITORED",MANUAL_REVIEW:"MANUAL_REVIEW",REPORTED_OR_REMOVED:"REPORTED_OR_REMOVED",OTHER:"OTHER"}}),null);
__d("VideoCopyrightRuleGraphFields",[],(function(a,b,c,d,e,f){e.exports={ID:"id",NAME:"name",MIGRATION_RULE_ID:"migration_rule_id",COPYRIGHTS:"copyrights",CONDITION_GROUPS:"condition_groups",CREATOR:"creator",CREATED_DATE:"created_date",COPYRIGHTS_COUNT:"copyrights_count",MATCHES_COUNT:"matches_count",IS_IN_MIGRATION:"is_in_migration",IS_NEW_VERSION_RULE:"is_new_version_rule",EXCLUDED_COPYRIGHT_IDS:"excluded_copyright_ids",ACTION:"action",CONDITIONS:"conditions",VALIDITY_STATUS:"validity_status",TYPE:"type",OPERATOR:"operator",VALUE:"value"}}),null);
__d("VideoReferenceMatchState",[],(function(a,b,c,d,e,f){e.exports={CONFLICT:"CONFLICT",DISPUTED:"DISPUTED",DISPUTE_ACCEPTED:"DISPUTE_ACCEPTED",DISPUTE_REJECTED:"DISPUTE_REJECTED",CONFLICT_RESOLVED:"CONFLICT_RESOLVED",AUTO_RESOLVED:"AUTO_RESOLVED",INACTIVE:"INACTIVE",DISPUTE_EXPIRED:"DISPUTE_EXPIRED",OPS_RESOLVED:"OPS_RESOLVED",CONFLICT_EXPIRED:"CONFLICT_EXPIRED",POSSIBLE_CONFLICT:"POSSIBLE_CONFLICT",OWNERSHIP_ASSERTED:"OWNERSHIP_ASSERTED"}}),null);
__d("PageContentTabRightsManagerStore",["Arbiter","EventEmitter","PageContentTabConstants"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$PageContentTabRightsManagerStore1="";b.$PageContentTabRightsManagerStore2="DEFAULT";b.$PageContentTabRightsManagerStore3=!1;b.$PageContentTabRightsManagerStore4=!1;b.$PageContentTabRightsManagerStore5=0;b.$PageContentTabRightsManagerStore6=0;return b}var d=c.prototype;d.init=function(a,b,c,d,e,f){this.$PageContentTabRightsManagerStore1=a,this.$PageContentTabRightsManagerStore2=b,this.$PageContentTabRightsManagerStore3=c,this.$PageContentTabRightsManagerStore4=d,this.$PageContentTabRightsManagerStore5=e,this.$PageContentTabRightsManagerStore6=f};d.getIsRMLite=function(){return this.$PageContentTabRightsManagerStore2==="LITE"};d.getIsRM4P=function(){return this.$PageContentTabRightsManagerStore2==="MUSIC_PUBLISHER"};d.setRMVersion=function(a){this.$PageContentTabRightsManagerStore2=a};d.getHasUploadedReferenceFiles=function(){return this.$PageContentTabRightsManagerStore3};d.getHasSetUpMatchSettings=function(){return this.$PageContentTabRightsManagerStore4};d.getUserAccessToken=function(){return this.$PageContentTabRightsManagerStore1};d.getNumVideosImported=function(){return this.$PageContentTabRightsManagerStore5};d.getTotalVideosToImport=function(){return this.$PageContentTabRightsManagerStore6};d.setHasUploadedReferenceFiles=function(){this.$PageContentTabRightsManagerStore3||(this.$PageContentTabRightsManagerStore3=!0,this.emit("change"))};d.setHasSetUpMatchSettings=function(){this.$PageContentTabRightsManagerStore4||(this.$PageContentTabRightsManagerStore4=!0,this.emit("change"),b("Arbiter").inform("reloadContentTabInBackground/"+b("PageContentTabConstants").TABS.ALL_REFERENCE_FILES))};d.setTotalVideosToImport=function(a){this.$PageContentTabRightsManagerStore6=a,this.emit("change")};d.setImportFinished=function(){this.$PageContentTabRightsManagerStore5=0,this.$PageContentTabRightsManagerStore6=0,this.emit("change")};return c}(b("EventEmitter"));e.exports=new a()}),null);
__d("RightsManagerFbt",["fbt"],(function(a,b,c,d,e,f,g){"use strict";e.exports={ALLOWED:g._("Allowed"),ATTRIBUTION_SECTION_TITLE:g._("Select Ownership Link"),ATTRIBUTION_SECTION_TITLE_LITE:g._("Destination Page"),BLOCKED:g._("Blocked"),CLAIMED:g._("Claimed"),INSIGHTS:g._("Details"),MATCHES:g._("Matches"),MANUAL_REVIEW:g._("Manual Review"),MONITORED:g._("Monitored"),OWNERSHIP_LINK:g._("Ownership Link"),MANUAL_CLAIMS:g._("Manual Claims"),PROTECTED_VIDEO:g._("Protected Videos"),PROTECTED_VIDEOS:g._("Protected Videos"),REMOVED:g._("Removed"),REPORTED:g._("Reported"),STATUS:g._("Status"),YOUR_FILE:g._("Your File")}}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("exif-js-2.3.0",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g},i;function j(){(function(){var a=!1,b=this,c=function(a){if(a instanceof c)return a;if(!(this instanceof c))return new c(a);this.EXIFwrapped=a};typeof g!=="undefined"?(typeof h!=="undefined"&&h.exports&&(g=h.exports=c),g.EXIF=c):b.EXIF=c;var d=c.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},e=c.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},f=c.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},j=c.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},k=c.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function l(a){return!!a.exifdata}function m(a,b){b||a.match(/^data\:([^\;]+)\;base64,/im)[1]||"";a=a.replace(/^data\:([^\;]+)\;base64,/gim,"");b=atob(a);a=b.length;var c=new ArrayBuffer(a),d=new Uint8Array(c);for(var e=0;e<a;e++)d[e]=b.charCodeAt(e);return c}function n(a,b){var c=new XMLHttpRequest();c.open("GET",a,!0);c.responseType="blob";c.onload=function(a){(this.status==200||this.status===0)&&b(this.response)};c.send()}function o(b,d){function e(a){var e=p(a);b.exifdata=e||{};e=q(a);b.iptcdata=e||{};if(c.isXmpEnabled){e=z(a);b.xmpdata=e||{}}d&&d.call(b)}if(b.src)if(/^data\:/i.test(b.src)){var f=m(b.src);e(f)}else if(/^blob\:/i.test(b.src)){var g=new FileReader();g.onload=function(a){e(a.target.result)};n(b.src,function(a){g.readAsArrayBuffer(a)})}else{var h=new XMLHttpRequest();h.onload=function(){if(this.status==200||this.status===0)e(h.response);else throw"Could not load image";h=null};h.open("GET",b.src,!0);h.responseType="arraybuffer";h.send(null)}else if(self.FileReader&&(b instanceof self.Blob||b instanceof self.File)){var g=new FileReader();g.onload=function(b){a&&!1,e(b.target.result)};g.readAsArrayBuffer(b)}}function p(b){var c=new DataView(b);a&&!1;if(c.getUint8(0)!=255||c.getUint8(1)!=216){a&&!1;return!1}var d=2;b=b.byteLength;var e;while(d<b){if(c.getUint8(d)!=255){a&&!1;return!1}e=c.getUint8(d+1);a&&!1;if(e==225){a&&!1;return y(c,d+4,c.getUint16(d+2)-2)}else d+=2+c.getUint16(d+2)}}function q(b){var c=new DataView(b);a&&!1;if(c.getUint8(0)!=255||c.getUint8(1)!=216){a&&!1;return!1}var d=2,e=b.byteLength,f=function(a,b){return a.getUint8(b)===56&&a.getUint8(b+1)===66&&a.getUint8(b+2)===73&&a.getUint8(b+3)===77&&a.getUint8(b+4)===4&&a.getUint8(b+5)===4};while(d<e){if(f(c,d)){var g=c.getUint8(d+7);g%2!==0&&(g+=1);g===0&&(g=4);var h=d+8+g;g=c.getUint16(d+6+g);return s(b,h,g);break}d++}}var r={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function s(a,b,c){a=new DataView(a);var d={},e,f,g=b;while(g<b+c)a.getUint8(g)===28&&a.getUint8(g+1)===2&&(f=a.getUint8(g+2),f in r&&(e=a.getInt16(g+3),f=r[f],e=x(a,g+5,e),d.hasOwnProperty(f)?d[f]instanceof Array?d[f].push(e):d[f]=[d[f],e]:d[f]=e)),g++;return d}function t(b,c,d,e,f){var g=b.getUint16(d,!f),h={},i,j,k;for(k=0;k<g;k++)i=d+k*12+2,j=e[b.getUint16(i,!f)],!j&&a&&!1,h[j]=u(b,i,c,d,f);return h}function u(a,b,c,d,e){d=a.getUint16(b+2,!e);var f=a.getUint32(b+4,!e);c=a.getUint32(b+8,!e)+c;var g,h,i,j;switch(d){case 1:case 7:if(f==1)return a.getUint8(b+8,!e);else{d=f>4?c:b+8;g=[];for(i=0;i<f;i++)g[i]=a.getUint8(d+i);return g}case 2:d=f>4?c:b+8;return x(a,d,f-1);case 3:if(f==1)return a.getUint16(b+8,!e);else{d=f>2?c:b+8;g=[];for(i=0;i<f;i++)g[i]=a.getUint16(d+2*i,!e);return g}case 4:if(f==1)return a.getUint32(b+8,!e);else{g=[];for(i=0;i<f;i++)g[i]=a.getUint32(c+4*i,!e);return g}case 5:if(f==1){d=a.getUint32(c,!e);j=a.getUint32(c+4,!e);h=new Number(d/j);h.numerator=d;h.denominator=j;return h}else{g=[];for(i=0;i<f;i++)d=a.getUint32(c+8*i,!e),j=a.getUint32(c+4+8*i,!e),g[i]=new Number(d/j),g[i].numerator=d,g[i].denominator=j;return g}case 9:if(f==1)return a.getInt32(b+8,!e);else{g=[];for(i=0;i<f;i++)g[i]=a.getInt32(c+4*i,!e);return g}case 10:if(f==1)return a.getInt32(c,!e)/a.getInt32(c+4,!e);else{g=[];for(i=0;i<f;i++)g[i]=a.getInt32(c+8*i,!e)/a.getInt32(c+4+8*i,!e);return g}}}function v(a,b,c){var d=a.getUint16(b,!c);return a.getUint32(b+2+d*12,!c)}function w(a,b,c,d){c=v(a,b+c,d);if(!c)return{};else if(c>a.byteLength)return{};c=t(a,b,b+c,j,d);if(c.Compression)switch(c.Compression){case 6:if(c.JpegIFOffset&&c.JpegIFByteCount){d=b+c.JpegIFOffset;b=c.JpegIFByteCount;c.blob=new Blob([new Uint8Array(a.buffer,d,b)],{type:"image/jpeg"})}break;case 1:break;default:}else c.PhotometricInterpretation==2;return c}function x(a,b,c){var d="";for(var e=b;e<b+c;e++)d+=String.fromCharCode(a.getUint8(e));return d}function y(b,c){if(x(b,c,4)!="Exif"){a&&!1;return!1}var g,h,i,j;c=c+6;if(b.getUint16(c)==18761)g=!1;else if(b.getUint16(c)==19789)g=!0;else{a&&!1;return!1}if(b.getUint16(c+2,!g)!=42){a&&!1;return!1}var l=b.getUint32(c+4,!g);if(l<8){a&&!1;return!1}h=t(b,c,c+l,e,g);if(h.ExifIFDPointer){j=t(b,c,c+h.ExifIFDPointer,d,g);for(i in j){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":j[i]=k[i][j[i]];break;case"ExifVersion":case"FlashpixVersion":j[i]=String.fromCharCode(j[i][0],j[i][1],j[i][2],j[i][3]);break;case"ComponentsConfiguration":j[i]=k.Components[j[i][0]]+k.Components[j[i][1]]+k.Components[j[i][2]]+k.Components[j[i][3]];break}h[i]=j[i]}}if(h.GPSInfoIFDPointer){j=t(b,c,c+h.GPSInfoIFDPointer,f,g);for(i in j){switch(i){case"GPSVersionID":j[i]=j[i][0]+"."+j[i][1]+"."+j[i][2]+"."+j[i][3];break}h[i]=j[i]}}h.thumbnail=w(b,c,l,g);return h}function z(b){if(!("DOMParser"in self))return;var c=new DataView(b);a&&!1;if(c.getUint8(0)!=255||c.getUint8(1)!=216){a&&!1;return!1}var d=2;b=b.byteLength;var e=new DOMParser();while(d<b-4)if(x(c,d,4)=="http"){var f=d-1,g=c.getUint16(d-2)-1;f=x(c,f,g);g=f.indexOf("xmpmeta>")+8;f=f.substring(f.indexOf("<x:xmpmeta"),g);g=f.indexOf("x:xmpmeta")+10;f=f.slice(0,g)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+f.slice(g);g=e.parseFromString(f,"text/xml");return B(g)}else d++}function A(a){var b={};if(a.nodeType==1){if(a.attributes.length>0){b["@attributes"]={};for(var c=0;c<a.attributes.length;c++){var d=a.attributes.item(c);b["@attributes"][d.nodeName]=d.nodeValue}}}else if(a.nodeType==3)return a.nodeValue;if(a.hasChildNodes())for(var d=0;d<a.childNodes.length;d++){c=a.childNodes.item(d);var e=c.nodeName;if(b[e]==null)b[e]=A(c);else{if(b[e].push==null){var f=b[e];b[e]=[];b[e].push(f)}b[e].push(A(c))}}return b}function B(a){try{var b={};if(a.children.length>0)for(var c=0;c<a.children.length;c++){var d=a.children.item(c),e=d.attributes;for(var f in e){var g=e[f],h=g.nodeName;g=g.nodeValue;h!==void 0&&(b[h]=g)}h=d.nodeName;if(typeof b[h]=="undefined")b[h]=A(d);else{if(typeof b[h].push=="undefined"){g=b[h];b[h]=[];b[h].push(g)}b[h].push(A(d))}}else b=a.textContent;return b}catch(a){}}c.enableXmp=function(){c.isXmpEnabled=!0};c.disableXmp=function(){c.isXmpEnabled=!1};c.getData=function(a,b){if((self.Image&&a instanceof self.Image||self.HTMLImageElement&&a instanceof self.HTMLImageElement)&&!a.complete)return!1;!l(a)?o(a,b):b&&b.call(a);return!0};c.getTag=function(a,b){if(!l(a))return;return a.exifdata[b]};c.getIptcTag=function(a,b){if(!l(a))return;return a.iptcdata[b]};c.getAllTags=function(a){if(!l(a))return{};var b;a=a.exifdata;var c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};c.getAllIptcTags=function(a){if(!l(a))return{};var b;a=a.iptcdata;var c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};c.pretty=function(a){if(!l(a))return"";var b;a=a.exifdata;var c="";for(b in a)a.hasOwnProperty(b)&&(typeof a[b]=="object"?a[b]instanceof Number?c+=b+" : "+a[b]+" ["+a[b].numerator+"/"+a[b].denominator+"]\r\n":c+=b+" : ["+a[b].length+" values]\r\n":c+=b+" : "+a[b]+"\r\n");return c};c.readFromBinaryFile=function(a){return p(a)};typeof i==="function"&&i.amd&&i("exif-js",[],function(){return c})}).call(this)}var k=!1,l=function(){k||(k=!0,j());return h.exports};a=function(a){switch(a){case void 0:return l()}};e.exports=a}),null);
__d("exif-js",["exif-js-2.3.0"],(function(a,b,c,d,e,f){e.exports=b("exif-js-2.3.0")()}),null);
__d("ImageExif",["exif-js"],(function(a,b,c,d,e,f){b("exif-js").enableXmp();function g(a){var b=function(b){return a.charCodeAt(b)&255};this.getByteAt=b;this.getShortAt=function(a,b){a=this.getSShortAt(a,b);return a>0?a:a+65536};this.getSShortAt=function(a,c){var d=b(a);a=b(a+1);return c?(d<<8)+a:(a<<8)+d};this.getLongAt=function(a,b){a=this.getSLongAt(a,b);return a>0?a:a+4294967296};this.getSLongAt=function(a,c){var d=b(a),e=b(a+1),f=b(a+2);a=b(a+3);return c?(((d<<8)+e<<8)+f<<8)+a:(((a<<8)+f<<8)+e<<8)+d};this.getStringAt=function(b,c){return a.substr(b,c)};this.getLength=function(){return a.length}}a={readFromFile:function(a,b){var c=this,d=new FileReader();d.addEventListener("load",function(a){a=a.target.result;a=a instanceof ArrayBuffer?c.readFromArrayBuffer(a):c.readFromBinaryString(a);b(a)},!1);window.DataView?d.readAsArrayBuffer(a):d.readAsBinaryString(a)},readFromBinaryString:function(a){return b("exif-js").readFromBinaryFile(new g(a))},readFromArrayBuffer:function(a){return b("exif-js").readFromBinaryFile(a)}};e.exports=a}),null);
__d("StringEncoding",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=new Uint8Array(a);var c=0,d=[];while(c<a.length){var e=a[c],f=void 0;if(e>>7===0)f=1;else if(e>>5===6)e&=31,f=2;else if(e>>4===14)e&=15,f=3;else if(e>>3===30)e&=7,f=4;else if(e>>2===62)e&=3,f=5;else if(e>>1===126)e&=1,f=6;else throw new Error("Cannot decode as UTF-8 - unrecognised codepoint header");if(c+f>a.length)throw new Error("Cannot decode as UTF-8 - incomplete codepoint");for(var g=1;g<f;g++){var h=a[c+g];if(h>>6!==2)throw new Error("Cannot decode as UTF-8 - unrecognised codepoint subsequent byte");h&=63;e<<=6;e|=h}if(e>1114111)throw new Error("Cannot decode as UTF-8 - JavaScript doesn't support codepoints over 0x10FFFF");if(!e)switch(b){case"error":throw new Error("Cannot decode as UTF-8 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,d);case"include":break}d.push(e);c+=f}return String.fromCodePoint.apply(String,d)}function g(a){return(a&255)<<8|a>>8}function b(a,b){if(a.byteLength%2!==0)throw new Error("Cannot decode as UTF-16 - data length mod 2 != 0");a=new Uint16Array(a);var c=0,d=[],e=!1;a[0]===65279?++c:a[0]==65534&&(++c,e=!0);while(c<a.length){var f=a[c];e&&(f=g(f));var h=f;if(f>55295&&f<57344){if((f&64512)!==55296)throw new Error("Cannot decode as UTF-16 - incorrect signature for high surrogate");if(c+1>=a.length)throw new Error("Cannot decode as UTF-16 - incomplete codepoint");++c;var i=a[c];e&&(i=g(i));if((i&64512)!==56320)throw new Error("Cannot decode as UTF-16 - incorrect signature for low surrogate");h=((f&1023)<<10|i&1023)+65536}if(!h)switch(b){case"error":throw new Error("Cannot decode as UTF-16 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,d);case"include":break}d.push(h);++c}return String.fromCodePoint.apply(String,d)}function h(a){return(a&255)<<24|(a&255<<8)<<8|(a&255<<16)>>8|a>>>24}function c(a,b){if(a.byteLength%4!==0)throw new Error("Cannot decode as UTF-32 - data length mod 4 != 0");a=new Uint32Array(a);var c=0,d=[],e=!1;a[0]===65279?++c:a[0]==4294836224&&(++c,e=!0);while(c<a.length){var f=a[c];e&&(f=h(f));if(f&2147483648)throw new Error("Cannot decode as UTF-32 - invalid codepoint");if(f>1114111)throw new Error("Cannot decode as UTF-32 - JavaScript doesn't support codepoints over 0x10FFFF");if(!f)switch(b){case"error":throw new Error("Cannot decode as UTF-32 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,d);case"include":break}d.push(f);++c}return String.fromCodePoint.apply(String,d)}var i={"utf-8":a,"utf-16":b,"utf-32":c};d=function(){function a(a,b){a?this.$1=a:this.$1=["utf-8","utf-16","utf-32"];b||(b="error");this.$2=b;for(var a=this.$1,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;this.$3(d)}}var b=a.prototype;b.getPrecedence=function(){return this.$1};b.decode=function(a){var b=[];for(var c=this.$1,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f=this.$3(f);try{return f(a,this.$2)}catch(a){b.push(a)}}throw new Error(b.join(", "))};b.$3=function(a){var b=i[a];if(!b)throw new Error("Unknown encoding "+a);return b};return a}();e.exports.Decoder=d}),null);
__d("ImageMetadata",["regeneratorRuntime","Promise","ImageExif","StringEncoding","emptyFunction"],(function(a,b,c,d,e,f){"use strict";c=function(){function c(a){this.$4="",this.$6=a,this.$7=new Uint8Array(a),this.$8()}var d=c.prototype;d.$8=function(){var a=0;while(a<this.$7.length){a=this.$9(a);if(a===-1)return;var b=this.$7[a+1];b=g[b];if(!b)return;var c=b.length;c===void 0&&(c=this.$7[a+2]*256+this.$7[a+3]);this.$10(a,c,b);if(b.name==="SOS")return;a+=2+c}};d.$10=function(a,b,c){switch(c.name){case"APP1":this.$11(a+4,h)?(this.$1||(this.$1=a,this.$2=b),this.$12(a+4+h.length,b-2-h.length)):this.$11(a+4,i)?(this.$1=a,this.$2=b,this.$13(a+4+i.length,b-2-i.length)):this.$11(a+4,j)&&this.$14(a+4+j.length,b-2-j.length);break;case"SOF0":case"SOF1":case"SOF2":case"SOF3":case"SOF5":case"SOF6":case"SOF7":case"JPG":case"SOF9":case"SOF10":case"SOF11":case"SOF13":case"SOF14":case"SOF15":this.$15(a+4,b-2);break}};d.$15=function(a,b){b=this.$7[a+3]*256+this.$7[a+4];a=this.$7[a+1]*256+this.$7[a+2];b>0&&a>0&&(this.$5={x:b,y:a})};d.$12=function(a,c){a=emptyFunction;try{emptyFunction=b("emptyFunction");c=b("ImageExif").readFromArrayBuffer(this.$6)||{}}finally{emptyFunction=a}a={};for(var d in c){var e=c[d];typeof e==="string"&&(e=e.trim());a[d.trim()]=e}this.$3=a};d.$13=function(a,c){var d=new(b("StringEncoding").Decoder)(null,"truncate");try{d=d.decode(this.$6.slice(a,a+c));this.$4=d}catch(a){return}};d.$14=function(a){};d.$11=function(a,b){var c=this;return b.split("").every(function(b){return c.$7[a++]===b.charCodeAt(0)})};d.$9=function(a){for(var a=a;a+1<this.$7.length;++a)if(this.$7[a]===255&&this.$7[a+1]!==0&&this.$7[a+1]!==255)return a;return-1};d.hasAPP1=function(){return Boolean(this.$1)};d.hasExif=function(){return Boolean(this.$3)};d.hasXMP=function(){return Boolean(this.$4)};d.hasSize=function(){return Boolean(this.$5)};d.getAPP1Location=function(){return!this.hasAPP1()?null:this.$1};d.getAPP1Length=function(){return!this.hasAPP1()?null:this.$2};d.getExif=function(){if(!this.$3)throw new Error("Image has no Exif data");return this.$3};d.getXMPString=function(){return this.$4};d.getSize=function(){if(!this.$5)throw new Error("Could not find size data?!");return this.$5};d.getBufferLength=function(){if(!this.$6)throw new Error("Do not find buffer data!");return this.$6.byteLength};c.genMetadataFromBlob=function(a){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.t0=c;d.next=3;return b("regeneratorRuntime").awrap(c.$16(a));case 3:d.t1=d.sent;return d.abrupt("return",new d.t0(d.t1));case 5:case"end":return d.stop()}},null,this)};c.$16=function(c){return new(b("Promise"))(function(b,d){var e=new a.FileReader();e.onabort=d;e.onerror=d;e.onload=b;e.readAsArrayBuffer(c)})};return c}();var g=[];g[216]={name:"SOI",length:0};g[192]={name:"SOF0"};g[193]={name:"SOF1"};g[194]={name:"SOF2"};g[195]={name:"SOF3"};g[197]={name:"SOF5"};g[198]={name:"SOF6"};g[199]={name:"SOF7"};g[200]={name:"JPG"};g[201]={name:"SOF9"};g[202]={name:"SOF10"};g[203]={name:"SOF11"};g[205]={name:"SOF13"};g[206]={name:"SOF14"};g[207]={name:"SOF15"};g[196]={name:"DHT"};g[219]={name:"DQT"};g[221]={name:"DRI",length:2};g[218]={name:"SOS"};g[208]={name:"RST0",length:0};g[209]={name:"RST1",length:0};g[210]={name:"RST2",length:0};g[211]={name:"RST3",length:0};g[212]={name:"RST4",length:0};g[213]={name:"RST5",length:0};g[214]={name:"RST6",length:0};g[215]={name:"RST7",length:0};g[224]={name:"APP0"};g[225]={name:"APP1"};g[226]={name:"APP2"};g[227]={name:"APP3"};g[228]={name:"APP4"};g[229]={name:"APP5"};g[230]={name:"APP6"};g[231]={name:"APP7"};g[232]={name:"APP8"};g[233]={name:"APP9"};g[234]={name:"APP10"};g[235]={name:"APP11"};g[236]={name:"APP12"};g[237]={name:"APP13"};g[238]={name:"APP14"};g[239]={name:"APP15"};g[254]={name:"COM"};g[217]={name:"EOI",length:0};var h="Exif\0\0",i="http://ns.adobe.com/xap/1.0/\0",j="http://ns.adobe.com/xmp/extension/\0";e.exports=c}),null);
__d("XSphericalPhotoSphereMetadataAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/spherical_media/photo/metadata/",{})}),null);
__d("SphericalImageUtils",["Promise","ImageMetadata","XAsyncRequest","XSphericalPhotoSphereMetadataAsyncController"],(function(a,b,c,d,e,f){"use strict";var g=2048;c={genArrayBufferFromBlob:function(c){return new(b("Promise"))(function(b,d){if(a.FileReader){var e=new a.FileReader();e.onabort=d;e.onerror=d;e.onload=function(a){b(a.target.result)};e.readAsArrayBuffer(c)}else d(new Error("global.FileReader doesn't exit"))})},shouldCheckInServer:function(a){if(!a.hasExif()&&!a.hasXMP()||!a.hasSize())return!1;var b=a.getXMPString();if(this.getMayContainSphericalMetadata(b))return!0;var c=a.getSize(),d=c.x;c=c.y;if(Math.max(d,c)<g||d/c<2&&c/d<2)return!1;c=a.hasExif()?a.getExif():{};return b===""&&(!c.Make||!c.Model)?!1:!0},genPhotosphereMetadata:function(a){var c=this;return new(b("Promise"))(function(d,e){c.genArrayBufferFromBlob(a).done(function(a){try{var f=new(b("ImageMetadata"))(a);c.shouldCheckInServer(f)?c.genPhotosphereMetadataFromServer(f.hasSize()?f.getSize():{x:0,y:0},f.getXMPString(),f.hasExif()?f.getExif():{}).done(function(a){a=a.payload;d({photoSphereMetadata:a,imageMetadata:f})},e):d({})}catch(a){a.__manual=!0,e(a)}},e)})},genPhotosphereMetadataFromServer:function(a,c,d){var e=this;return new(b("Promise"))(function(f,g){new(b("XAsyncRequest"))(b("XSphericalPhotoSphereMetadataAsyncController").getURIBuilder().getURI()).setMethod("POST").setData({exif_string:e.getExifString(d),height:a.y,width:a.x,xmp:c}).setHandler(f).setErrorHandler(g).send()})},getExifString:function(a){return JSON.stringify(a,function(a,b){return a==="FocalLength"&&b.numerator&&b.denominator?b.numerator+"/"+b.denominator:b})},getMayContainSphericalMetadata:function(a){return a!==""&&a.indexOf("GPano:")>-1}};e.exports=c}),null);
__d("SphericalImage",["regeneratorRuntime","SphericalImageUtils"],(function(a,b,c,d,e,f){"use strict";var g="ProjectionType";a=function(){function a(a){this.props=a}a.createFromBlob=function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(b("SphericalImageUtils").genPhotosphereMetadata(a));case 2:c=d.sent;return d.abrupt("return",new this(c));case 4:case"end":return d.stop()}},null,this)};var c=a.prototype;c.isSpherical=function(){return Boolean(this.props.photoSphereMetadata)};c.getImageMetadata=function(){return this.props.imageMetadata};c.getPhotoSphereMetadata=function(){return this.props.photoSphereMetadata};c.getSize=function(){return this.props.imageMetadata?this.props.imageMetadata.getSize():null};c.getBufferLength=function(){return this.props.imageMetadata?this.props.imageMetadata.getBufferLength():null};c.getProjectionType=function(){var a="";this.props.photoSphereMetadata&&this.props.photoSphereMetadata[g]&&(a=this.props.photoSphereMetadata[g]);return a};return a}();e.exports=a}),null);
__d("SphericalPhotoUploadHelper",[],(function(a,b,c,d,e,f){"use strict";e.exports={shouldResize360:function(a,b,c){return b&&Math.max(b.x,b.y)<=c||a==="cubestrip"?!1:!0},shouldRecompress360:function(a,b,c){return b==null||b<=c||a==="cubestrip"?!1:!0}}}),null);
__d("XComposerPhotoUploader",["regeneratorRuntime","Promise","AsyncUploadRequest","FileInputUploader","PhotosMimeType","PhotosUploadID","ReactComposerMediaFilterUtils","SphericalImage","SphericalPhotoTypedConfig","SphericalPhotoUploadHelper","curry","emptyFunction","performanceNow","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g,h=b("SphericalPhotoUploadHelper").shouldRecompress360,i=b("SphericalPhotoUploadHelper").shouldResize360,j=a.URL||a.webkitURL||{};c=function(){function a(a){this.$2=a.uploadData||{},this.$1=a.uploadEndpoint,this.$3=a.retryLimit,this.$4=a.concurrentLimit,this.$5=a.resizer,this.$6=a.onUploadEnqueued||b("emptyFunction"),this.$7=a.onUploadsEnqueued||b("emptyFunction"),this.$8=a.onResizeStart||b("emptyFunction"),this.$11=a.onResizeProgress||b("emptyFunction"),this.$9=a.onResizeSuccess||b("emptyFunction"),this.$10=a.onResizeFailure||b("emptyFunction"),this.$12=a.onSphericalCheckFailure||b("emptyFunction"),this.$13=a.onSphericalCheckSuccess||b("emptyFunction"),this.$14=a.onUploadIsSpherical||b("emptyFunction"),this.$15=a.onUploadSent||b("emptyFunction"),this.$16=a.onUploadStart||b("emptyFunction"),this.$17=a.onUploadProgress||b("emptyFunction"),this.$18=a.onUploadSuccess||b("emptyFunction"),this.$19=a.onUploadFailure||b("emptyFunction")}var c=a.prototype;c.setUploadEndpoint=function(a){this.$1=a};c.upload=function(a,c){var d=this;c||0;c=Object.assign({},this.$2);var e=null;if(!this.$20(a)){var f=b("PhotosUploadID").getNewID();a.uploadID=f;c.upload_id=f;this.$6({uploadID:f,fileName:a.value.split("/").pop().split("\\").pop(),fileURL:j.createObjectURL?j.createObjectURL(a):null})}else{e=Array.from(a.files);e=e.filter(function(a){return!b("ReactComposerMediaFilterUtils").hasVideos([a.name])});if(e.length===0)return;e.forEach(function(a){a.uploadID||(a.uploadID=b("PhotosUploadID").getNewID()),d.$6({uploadID:a.uploadID,fileName:a.name,isSpherical:!1,fileURL:j.createObjectURL?j.createObjectURL(a):null})})}this.$7();f=new(b("FileInputUploader"))(a).setURI(this.$1).setData(c).setAllowCrossOrigin(!0).setNetworkErrorRetryLimit(this.$3).setUploadInParallel(!0);e&&e.length>0&&(f.setFiles({farr:e}),this.$5?f.setPreprocessHandler(this.$21.bind(this)):f.setPreprocessHandler(this.$22.bind(this)),this.$4&&f.setConcurrentLimit(this.$4));f.subscribe("progress",function(b,c){return d.$17(d.$23(c,a),c)});f.subscribe("failure",function(b,c){return d.$19(d.$23(c,a),c,e)});f.subscribe("start",function(b,c){return d.$16(d.$23(c,a),c)});f.subscribe("success",function(b,c){return d.$18(d.$23(c,a),c)});try{f.send(),this.$15(a)}catch(a){throw a}};c.uploadFiles=function(a){var c=this;a=Array.from(a);var d=[];a.forEach(function(a){var e=b("PhotosUploadID").getNewID();c.$6({fileName:a.name,fileURL:j.createObjectURL?j.createObjectURL(a):null,isSpherical:!1,uploadID:e});d.push(e)});a=this.getAsyncFileUploadRequest(a,d);a.send()};c.getAsyncFileUploadRequest=function(a,b,c){var d=this;c=this.$24(a,c);c.subscribe("start",function(c,e){c=d.$25(a,b,e);d.$16(c,{upload:e})});c.subscribe("progress",function(c,e){c=d.$25(a,b,e);d.$17(c,{upload:e,event:e.getProgressEvent()})});c.subscribe("success",function(c,e){c=d.$25(a,b,e);d.$18(c,{upload:e,response:e.getResponse()})});c.subscribe("failure",function(c,e){c=d.$25(a,b,e);d.$19(c,{upload:e,response:e.getResponse()},a)});return c};c.getAsyncUploadRequest=function(a,b){var c=this;b=this.$24(a,b);b.subscribe("start",function(a,b){return c.$16(b.getFile().uploadID,{upload:b})});b.subscribe("progress",function(a,b){return c.$17(b.getFile().uploadID,{upload:b,event:b.getProgressEvent()})});b.subscribe("success",function(a,b){return c.$18(b.getFile().uploadID,{upload:b,response:b.getResponse()})});b.subscribe("failure",function(b,d){return c.$19(d.getFile().uploadID,{upload:d,response:d.getResponse()},a)});return b};c.$24=function(a,c){c=new(b("AsyncUploadRequest"))().setData(Object.assign({},c&&c.data,this.$2)).setFiles({farr:a}).setAllowCrossOrigin(!0).setURI(this.$1);this.$4&&c.setLimit(this.$4);this.$5&&c.setPreprocessHandler(this.$21.bind(this));return c};c.$25=function(a,b,c){c=c.getFile();a=a.indexOf(c);return b[a]};c.$23=function(a,b){if(a.upload)return a.upload.getFile().uploadID;else return b.uploadID};c.$22=function(a,c){var d=this;b("promiseDone")(function(){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(d.$26(a,c));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},null,this)}())};c.$26=function(a,c){var d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d=a.getFile();f.next=3;return b("regeneratorRuntime").awrap(this.$27(d));case 3:e=f.sent,e&&e.isSpherical()?this.$14(d,e.isSpherical(),e.getProjectionType()):this.$14(d,!1,""),c(a);case 6:case"end":return f.stop()}},null,this)};c.$21=function(a,c){var d=this;b("promiseDone")(function(){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(d.$28(a,c));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},null,this)}())};c.$27=function(a){var c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=(g||(g=b("performanceNow")))();e.prev=1;e.next=4;return b("regeneratorRuntime").awrap(b("SphericalImage").createFromBlob(a));case 4:d=e.sent;this.$13(a,(g||(g=b("performanceNow")))()-c,d);return e.abrupt("return",d);case 9:e.prev=9;e.t0=e["catch"](1);this.$12(a,(g||(g=b("performanceNow")))()-c);return e.abrupt("return",null);case 14:case"end":return e.stop()}},null,this,[[1,9]])};c.$29=function(a){return this.$30(this.$5.resizeBlob.bind(this.$5),a)};c.$31=function(a,c){c===void 0&&(c=b("SphericalPhotoTypedConfig").upload_size_limit);return this.$30(this.$5.resize360Blob.bind(this.$5),a,c)};c.$32=function(a){return new(b("Promise"))(function(b,c){var d=new Image();d.onload=function(){b({width:d.width,height:d.height})};d.onerror=function(a){c(a)};d.src=j.createObjectURL(a)})};c.$30=function(a,c,d){var e=this,f=b("curry")(this.$11,c.uploadID),g=b("curry")(this.$8,c),h=function(){return e.$32(c).then(g)};return new(b("Promise"))(function(b,e){h(),a(c,function(a,c,d,f,g,h,i){a?e(a):d?b({originalWidth:f,originalHeight:g}):b({blob:c,originalWidth:f,originalHeight:g,outputWidth:h,outputHeight:i})},f,d)})};c.$28=function(a,c){var d,e,f,j,k,l,m,n,o,p,q,r;return b("regeneratorRuntime").async(function(s){while(1)switch(s.prev=s.next){case 0:d=a.getFile();if(!(!d||!b("PhotosMimeType").isJpeg(d.type))){s.next=6;break}this.$14(d,!1,"");d&&b("promiseDone")(this.$32(d).then(function(b){a.getAdditionalData().set("js_resized",!1).set("original_file_size",d.size).set("original_width",b==null?void 0:b.width).set("original_height",b==null?void 0:b.height).set("upload_width",b==null?void 0:b.width).set("upload_height",b==null?void 0:b.height)},b("emptyFunction")));c(a);return s.abrupt("return");case 6:e=(g||(g=b("performanceNow")))();s.prev=7;k=null;s.next=11;return b("regeneratorRuntime").awrap(this.$27(d));case 11:k=s.sent;if(!(k&&k.isSpherical())){s.next=32;break}this.$14(d,!0,k.getProjectionType());l=k.getSize();m=b("SphericalPhotoTypedConfig").upload_size_limit;n=k.getProjectionType();o=!1;o=h(n,k.getBufferLength(),b("SphericalPhotoTypedConfig").upload_bytes_limit);p=i(n,l,m);if(!(l&&(p||o))){s.next=30;break}if(p){s.next=27;break}s.next=24;return b("regeneratorRuntime").awrap(this.$31(d,Math.max(l.x,l.y)-1));case 24:f=s.sent;s.next=30;break;case 27:s.next=29;return b("regeneratorRuntime").awrap(this.$31(d));case 29:f=s.sent;case 30:s.next=36;break;case 32:this.$14(d,!1,"");s.next=35;return b("regeneratorRuntime").awrap(this.$29(d));case 35:f=s.sent;case 36:f&&(f.blob!=null&&(j=f.blob,j.uploadID=d.uploadID,j.name=d.name,a.setFile(j)),a.getAdditionalData().set("js_resized",!0).set("original_file_size",d.size).set("original_width",f.originalWidth).set("original_height",f.originalHeight).set("upload_width",f.outputWidth).set("upload_height",f.outputHeight));q=j===null;a.getFile().filename=d.name;this.$9(d,j||d,q,(g||(g=b("performanceNow")))()-e,a.getAdditionalData().get("original_width"),a.getAdditionalData().get("original_height"),a.getAdditionalData().get("upload_width"),a.getAdditionalData().get("upload_height"));s.next=47;break;case 42:s.prev=42,s.t0=s["catch"](7),r=(g||(g=b("performanceNow")))()-e,this.$10(d,j||d,s.t0,r);case 47:c(a);case 48:case"end":return s.stop()}},null,this,[[7,42]])};c.$20=function(a){return!!a.files&&b("AsyncUploadRequest").isSupported()};return a}();e.exports=c}),null);
__d("ReactComposerCollageLayoutActor",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({USER:1,PAGE:2})}),null);
__d("ReactComposerMediaAspectTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LANDSCAPE:"landscape",PORTRAIT:"portrait",SQUARE:"square",PANORAMA_TESTING_ONLY:"panorama",VERTICAL_PANORAMA_TESTING_ONLY:"vertical_panorama"})}),null);
__d("ReactComposerMediaAspect",["ReactComposerMediaAspectTypes"],(function(a,b,c,d,e,f){"use strict";e.exports={fromRect:function(a){return this._fromWidthAndHeight(a.w(),a.h())},fromDimensions:function(a){return this._fromWidthAndHeight(a[0],a[1])},_fromWidthAndHeight:function(a,c){if(a>c)return b("ReactComposerMediaAspectTypes").LANDSCAPE;else if(a<c)return b("ReactComposerMediaAspectTypes").PORTRAIT;else return b("ReactComposerMediaAspectTypes").SQUARE}}}),null);
__d("ReactComposerCollageLayoutModel",["regeneratorRuntime","ReactComposerCollageLayoutActor","ReactComposerMediaAspect"],(function(a,b,c,d,e,f){"use strict";var g=b("regeneratorRuntime").mark(i),h=b("regeneratorRuntime").mark(j);function i(a,c){var d,e;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:d=a.next();e=c.next();if(!(d.done||e.done)){b.next=5;break}return b.abrupt("break",9);case 5:b.next=7;return[d.value,e.value];case 7:b.next=0;break;case 9:case"end":return b.stop()}},g,this)}function j(a){var c,d,e,f,g;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:c=a,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 1:if(!d){b.next=7;break}if(!(e>=c.length)){b.next=4;break}return b.abrupt("break",16);case 4:f=c[e++];b.next=11;break;case 7:e=c.next();if(!e.done){b.next=10;break}return b.abrupt("break",16);case 10:f=e.value;case 11:g=f;b.next=14;return g;case 14:b.next=1;break;case 16:case"end":return b.stop()}},h,this)}a=function(){function a(a,c){this.$1=!!(a&b("ReactComposerCollageLayoutActor").USER),this.$2=!!(a&b("ReactComposerCollageLayoutActor").PAGE),this.$3=[],c&&this.addPhotoLayouts(c)}var c=a.prototype;c.addPhotoLayout=function(a){this.$3.push(a);return this};c.addPhotoLayouts=function(a){var b=this;a.forEach(function(a){return b.$3.push(a)});return this};c.getNumPhotoLayouts=function(){return this.$3.length};c.getPhotoLayouts=function(){return this.$3};c.getIsValidForPages=function(){return this.$2};c.getIsValidForUsers=function(){return this.$1};c.getIsValidFor=function(a){switch(a){case b("ReactComposerCollageLayoutActor").USER:return this.getIsValidForUsers();case b("ReactComposerCollageLayoutActor").PAGE:return this.getIsValidForPages()}return!1};c.hasMatchingCollagePhotoLayoutType=function(a){var c=b("ReactComposerMediaAspect").fromRect(this.$3[0]);a=b("ReactComposerMediaAspect").fromDimensions(a);return c===a};c.score=function(a){var b=0;for(var a=i(j(this.getPhotoLayouts()),a.values()),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];if(!e)continue;var g=f.w();f=f.h();var h=e[0];e=e[1];var k=0;if(h===0||e===0)k=0;else if(g*e/h>=f){var l=g*e/h;k=(l-f)/l}else if(f*h/e>g){l=f*h/e;k=(l-g)/l}b-=k*100;e===h?b-=k*5:g>f?h>e?b+=k*25:b-=k*25:g<f?h<e?b+=k*25:b-=k*25:g===f&&(b-=k*5)}b+=200*this.getNumPhotoLayouts();return b};return a}();e.exports=a}),null);
__d("ReactComposerCollageLayoutData",["ReactComposerCollageLayoutModel","ReactComposerJSONCollageLayoutData","Rect"],(function(a,b,c,d,e,f){"use strict";var g=[];Object.keys(b("ReactComposerJSONCollageLayoutData")).forEach(function(a){b("ReactComposerJSONCollageLayoutData")[a].forEach(function(a){g.push(new(b("ReactComposerCollageLayoutModel"))(a.validActors,a.photoLayouts.map(function(a){return new(Function.prototype.bind.apply(b("Rect"),[null].concat(a)))()})))})});e.exports=g}),null);
__d("ReactComposerCollageLayoutSelection",["FBIDCheck","ReactComposerCollageLayoutActor","ReactComposerCollageLayoutData"],(function(a,b,c,d,e,f){"use strict";e.exports={MAX_NUM_COLS:6,MAX_NUM_ROWS:6,_getCollageLayoutsFor:function(a){return b("ReactComposerCollageLayoutData").filter(function(b){return b.getIsValidFor(a)})},getMaxPhotosSupported:function(){return Math.max.apply(Math,b("ReactComposerCollageLayoutData").map(function(a){return a.getNumPhotoLayouts()}))},getMaxPhotosSupportedFor:function(a){return Math.max.apply(Math,this._getCollageLayoutsFor(a).map(function(a){return a.getNumPhotoLayouts()}))},getCollageLayout:function(a,c){if(!c)return this.getBestUserCollageLayout(a);c=b("FBIDCheck").isUser_deprecated(c)?this.getBestUserCollageLayout(a):this.getBestPageCollageLayout(a);return c},getBestPageCollageLayout:function(a){if(a.size==0)return new Map();var c=a.values().next().value,d=Math.min(this.getMaxPhotosSupportedFor(b("ReactComposerCollageLayoutActor").PAGE),a.size),e=this._getCollageLayoutsFor(b("ReactComposerCollageLayoutActor").PAGE).filter(function(a){return a.getNumPhotoLayouts()===d});if(!e.length)throw new Error("no valid layout for these media");e=e.filter(function(a){return a.hasMatchingCollagePhotoLayoutType(c)});if(!e.length)throw new Error("no valid layout for these media starts with a suitable aspect");e=e[0];var f=new Map(),g=0;e=e.getPhotoLayouts();for(var a=a.keys(),h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;var k=e[g++];k&&f.set(j,k)}return f},getBestUserCollageLayout:function(a){var c=this._getCollageLayoutsFor(b("ReactComposerCollageLayoutActor").USER).filter(function(b){return b.getNumPhotoLayouts()<=a.size});if(!c.length)throw new Error("no valid layout for these media");c=this._bestLayoutByScore(c,a);if(!c)throw new Error("no best layout? Should not happen!");var d=new Map(),e=0;c=c.getPhotoLayouts();for(var f=a.keys(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=c[e++];j&&d.set(i,j)}return d},_bestLayoutByScore:function(a,b){a=a.map(function(a){return[a,a.score(b)]});a=a.reduce(function(a,b){var c=a[0];a=a[1];var d=b[0];b=b[1];return a===null||b>a?[d,b]:[c,a]},[null,null]);a=a[0];return a}}}),null);
__d("VideoCopyrightMonitoringType",["fbt"],(function(a,b,c,d,e,f,g){a={VIDEO_AND_AUDIO:{intValue:1,value:"VIDEO_AND_AUDIO",label:g._("Video & Audio")},VIDEO_ONLY:{intValue:2,value:"VIDEO_ONLY",label:g._("Video Only")},AUDIO_ONLY:{intValue:3,value:"AUDIO_ONLY",label:g._("Audio Only")}};e.exports=a}),null);
__d("VideoCopyrightPublisherType",["fbt"],(function(a,b,c,d,e,f,g){a={PAGE:{value:"page",label:g._("Pages"),summaryLabel:g._("Pages")},PERSON:{value:"person",label:g._("Profiles"),summaryLabel:g._("Profiles")}};e.exports=a}),null);
__d("CopyrightReferenceFileGraphFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONTENT_TYPE:"content_type",DOWNLOAD_HD_URL:"download_hd_url",DURATION_IN_SEC:"duration_in_sec",ENCODING_STATUS:"encoding_status",ID:"id",LIVE_STATUS:"live_status",PUBLISHED_TIME:"published_time",COPYRIGHT_CREATION_TIME:"copyright_creation_time",THUMBNAIL_URL:"thumbnail_url",THUMBNAIL_URL_WHILE_ENCODING:"thumbnail_url_while_encoding",TITLE:"title",METADATA:"metadata",UNIVERSAL_CONTENT_ID:"universal_content_id",ISWC:"iswc",WRITER_NAMES:"writer_names",DISPLAY_ARTIST:"display_artist",SUB_TITLE:"sub_title"})}),null);
__d("XRightsManagerInstagramUserNameToIDController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/copyright/ig_user_name_to_id/",{page_id:{type:"FBID",required:!0},user_names:{type:"StringSet",required:!0}})}),null);
__d("IGUserDataFetcher",["regeneratorRuntime","AsyncRequest","XRightsManagerInstagramUserNameToIDController"],(function(a,b,c,d,e,f){"use strict";e.exports={gen:function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:d=b("XRightsManagerInstagramUserNameToIDController").getURIBuilder().setFBID("page_id",c).setStringSet("user_names",a).getURI();return e.abrupt("return",new(b("AsyncRequest"))(d).setMethod("GET").setURI(d).setReadOnly(!0).exec());case 2:case"end":return e.stop()}},null,this)}}}),null);
__d("VideoCopyrightTrustedPartnerInfoGraphFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CAN_CONFIRM_BLOCK:"can_confirm_block",CONFIRM_BLOCK_TIME:"confirm_block_time",CAN_CONFIRM_ACTION:"can_confirm_action",CONFIRM_ACTION_TIME:"confirm_action_time",IS_TRUSTED_PARTNER_MATCH:"is_trusted_partner_match",IS_FLAGGED_ENTITY_MATCH:"is_flagged_entity_match"})}),null);
__d("XVideoCopyrightMatchDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/copyright/match/dialog/",{id:{type:"Int",required:!0},source:{type:"Enum",required:!0,enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("VideoCopyrightUtils",["ix","cx","fbt","invariant","regeneratorRuntime","ActorURI","AdsGenericFilter","AdsGenericFilterField","AdsGenericFilterFieldType","AdsGenericFilterSet","AsyncDialog","AsyncRequest","CopyrightReferenceFileGraphFields","GraphAPIFieldUtils","IGUserDataFetcher","Image.react","PageContentTabConstants","PageContentTabLogger","PageContentTabRightsManagerStore","React","RightsManagerFbt","TooltipData","VideoCopyrightGraphAPIVersion","VideoCopyrightMatchStatus","VideoCopyrightMonitoringType","VideoCopyrightPublisherType","VideoCopyrightRuleActionType","VideoCopyrightRuleGraphFields","VideoCopyrightSegmentSource","VideoCopyrightTrustedPartnerInfoGraphFields","VideoReferenceMatchState","XVideoCopyrightMatchDialogController","asset","fbglyph","joinClasses","parseISODate"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b("React"),l=b("PageContentTabConstants").TABS,m=20,n=86400,o=3600,p=60,q=1e3,r={GRAPH_API_VERSION:b("VideoCopyrightGraphAPIVersion").graph_api_version,DEFAULT_MONITORING_TYPE:b("VideoCopyrightMonitoringType").VIDEO_ONLY.value,DEFAULT_LIVE_MONITORING_TYPE:b("VideoCopyrightMonitoringType").VIDEO_AND_AUDIO.value,DEFAULT_PUBLISHER_TYPE:b("VideoCopyrightPublisherType").PAGE.value,DEFAULT_RULE_ID:"DEFAULT",formatNumber:function(a){return a>=1e6?Math.round(a/1e6)+"M":a>=1e3?Math.round(a/1e3)+"K":a.toString()},getAudioReleaseGraphAPIFields:function(a){a===void 0;a=["id","album_title","created_time","displayed_artist","ean","upc","grid","isrc","label_name","proprietary_id","parental_warning_type","genre","audio_release_image_uri","original_release_date"];a.push("availability_status");return a},apiToAvailabilityStatus:function(a){return a==null?null:{status:a.status,type:a.type,release:a.release,status_reasons:a.status_reasons}},apiToAssetAvailabilityStatus:function(a){if(a==null)return null;var b={};for(var c=0;c<a.length;c++){var d,e,f=a[c];e=(e=f)!=null?(e=e.value)!=null?e.asset_availability:e:e;d=(d=f)!=null?(d=d.value)!=null?d.availability_by_geo:d:d;var g={};for(var h=0;d!=null&&h<d.length;h++){var i,j=d[h];g[j.key]={status:(i=j)!=null?(i=i.value)!=null?i.status:i:i,type:(i=j)!=null?(i=i.value)!=null?i.type:i:i,release:(i=j)!=null?(i=i.value)!=null?i.release:i:i,status_reasons:(i=j)!=null?(i=i.value)!=null?i.status_reasons:i:i}}b[f.key]={asset_availability:e,availability_by_geo:g}}return b},getAvailableActionsForRMVersion:function(a){switch(a){case"MUSIC_PUBLISHER":case"MUSIC_LABEL":return[b("VideoCopyrightRuleActionType").MANUAL_REVIEW,b("VideoCopyrightRuleActionType").TRACK,b("VideoCopyrightRuleActionType").BLOCK];case"DEFAULT":return[b("VideoCopyrightRuleActionType").MANUAL_REVIEW,b("VideoCopyrightRuleActionType").TRACK,b("VideoCopyrightRuleActionType").BLOCK,b("VideoCopyrightRuleActionType").MONETIZE,b("VideoCopyrightRuleActionType").TAKEDOWN];case"LITE":return[b("VideoCopyrightRuleActionType").TRACK,b("VideoCopyrightRuleActionType").BLOCK,b("VideoCopyrightRuleActionType").TAKEDOWN];default:return[]}},getCopyrightAttributionGraphAPIFields:function(){return["id","title","creator","copyright_count","link_title","match_count","attribution_type","attribution_target_id","status","is_enabled","attribution_uri","creation_time","attribution_target_name"]},getGraphAPIFields:function(a){var c;c=["match_status","active_match_data_id","matched_video_asset","expiration_days",(c=b("GraphAPIFieldUtils")).getFieldWithSubfields("last_modified_user",["name"]),"last_modified_time","added_to_dashboard_time","is_viewed","notes","audit_log","applied_actions","sibling_applied_actions","action_requiring_manual_review","review_report_id",c.getFieldWithSubfields("match_data",["id","excluded_ownership_segments","video_copyright_id","video_matched_segments","audio_matched_segments","total_match_duration",c.getFieldWithSubfields("reference_asset",["content_type","download_hd_url","duration_in_sec","id","live_status","metadata","published_time","thumbnail_url","thumbnail_url_while_encoding","title","universal_content_id","iswc","writer_names","display_artist","copyright_creation_time","sub_title"]),"monitoring_type","match_rule","is_manual_match","applied_actions",c.getFieldWithSubfields("music_work_associated_audio_asset",["id","display_artist","download_hd_url","title","subtitle",c.getFieldWithSubfields("audio_isrc",["isrc"])])]),"is_anonymous","muted_segments_from_other_publishers","dispute","publisher_can_restore","matched_video_overlap_duration_in_sec","available_ui_actions"];a.copyright_geo_actions_enabled&&c.push("ownership_countries");a.show_attributions_tab&&c.push(b("GraphAPIFieldUtils").getFieldWithSubfields("attribution",["title"]));(a.can_see_trusted_partner_match||a.can_see_flagged_entity_match)&&c.push(b("GraphAPIFieldUtils").getFieldWithSubfields("trusted_partner_info",Object.values(b("VideoCopyrightTrustedPartnerInfoGraphFields")).map(function(a){return String(a)})));a.can_see_is_business_page_match&&c.push("is_business_page_match");return c},getDefaultMatchRule:function(){var a={};a[b("VideoCopyrightRuleGraphFields").ID]=this.DEFAULT_RULE_ID;return a},getMatchGraphFields:function(){var a;return[(a=b("VideoCopyrightRuleGraphFields")).ID,a.NAME,a.CONDITION_GROUPS,a.CREATED_DATE,a.CREATOR,a.COPYRIGHTS_COUNT,a.MATCHES_COUNT,a.IS_IN_MIGRATION,a.IS_NEW_VERSION_RULE]},getFBPopularVideoSearchGraphFields:function(){return["id","created_time","title","description","thumbnails","post_views","from","length"]},getIGPopularVideoSearchGraphFields:function(){return["id","timestamp","caption","source","permalink","thumbnail_url","like_count","comments_count"]},getReferenceMatchGraphFields:function(){return["reference_asset","reference_owner_name","reference_owner_id","reference_copyright","matched_reference_asset","matched_reference_owner_id","matched_reference_owner_name","matched_reference_copyright",b("GraphAPIFieldUtils").getFieldWithSubfields("match_data",["id","excluded_ownership_segments","video_copyright_id","video_matched_segments","audio_matched_segments","original_video_matched_segments","original_audio_matched_segments","total_match_duration","reference_asset","monitoring_type","match_rule","is_manual_match","applied_actions"]),"conflicting_countries","match_state","creation_time","expiration_time","modification_history","dispute_form_data","rejection_form_data","is_viewed","is_disputable","is_possible_conflict"]},getReferenceFileGraphFields:function(a){a=["id","reference_owner_id","monitoring_type",b("GraphAPIFieldUtils").getFieldWithSubfields("attribution",["id","title","is_enabled","attribution_type","attribution_target_id","attribution_target_name"]),"ops_override_monitoring_type","reference_file_disabled_by_ops","reference_file_disabled","displayed_matches_count","displayed_fb_matches_count","displayed_ig_matches_count","copyright_content_id","rule_ids","whitelisted_ids","ownership_countries","monitoring_status","creator","in_conflict",b("GraphAPIFieldUtils").getFieldWithSubfields("reference_file",Object.values(b("CopyrightReferenceFileGraphFields")).map(function(a){return String(a)})),"reference_file_insights_key_id","content_category","excluded_ownership_segments"];return a},getSoundRecordingGraphFields:function(){return["id","isrc","creation_time","displayed_matches_count","reference_file_status","ridge_monitoring_status",b("GraphAPIFieldUtils").getFieldWithSubfields("audio_asset",["title","subtitle","display_artist","duration_in_ms"])]},getMusicWorkGraphFields:function(){return["id","creation_time","status",b("GraphAPIFieldUtils").getFieldWithSubfields("music_work",["id","custom_id","iswc","title"])]},getMusicVideoGraphFields:function(){return["id","isrc","creation_time","displayed_matches_count","reference_file_status","ridge_monitoring_status",b("GraphAPIFieldUtils").getFieldWithSubfields("video_asset",["title","thumbnail_url","duration_in_sec"])]},getDeletedVideoAsset:function(){var a={};a.title=i._("Deleted");a.published_time=0;a.thumbnail_url="";a.duration_in_sec=0;a.description="";a.owner_name="";a.view_count=0;a.is_private=!1;return a},_getTabFromMatchStatus:function(a,c){switch(a){case b("VideoCopyrightMatchStatus").REMOVED:return l.TAKEDOWNS;case b("VideoCopyrightMatchStatus").REPORTED:return b("PageContentTabRightsManagerStore").getIsRMLite()?l.TAKEDOWNS:l.REPORTED;case b("VideoCopyrightMatchStatus").ALLOWED:return l.TRACKED;case b("VideoCopyrightMatchStatus").ADDED_MATCH:return l.UNSENT_REPORTS;case b("VideoCopyrightMatchStatus").BLOCKED:return l.BLOCKED;case b("VideoCopyrightMatchStatus").CLAIMED:return l.CLAIMED;case b("VideoCopyrightMatchStatus").MONITORED:return l.TRACKED;default:return l.MANUAL_REVIEW}},logDataError:function(a,c,d){d=r._getTabFromMatchStatus(a.match_status,d);b("PageContentTabLogger").log("data_error",d,{error:JSON.stringify(c),post_id:a.id})},logAPIError:function(a,c,d,e){a=r._getTabFromMatchStatus(a,e);b("PageContentTabLogger").log("api_error",a,{error:c+" : "+JSON.stringify(d)})},isMajorityUnseen:function(a){var b=0;a.forEach(function(a){a.is_viewed?b+=1:b-=1});return b<0},getMatchedOwnerFilter:function(a){var c=new(b("AdsGenericFilterField"))("static_matched_owner_id",b("AdsGenericFilterFieldType").STRING_SET);a=a.matched_video_asset;a=a.owner_name;a.length>m&&(a=a.substring(0,m));return new(b("AdsGenericFilterSet"))([new(b("AdsGenericFilter"))(c,"CONTAIN",a)])},getActiveMatchDataFromMatch:function(a){var b=a.match_data,c=a.active_match_data_id;a=b.filter(function(a){return c==a.id});if(a.length===1)return a[0];else return b[0]},getReferenceVideoFilter:function(a){a=this.getActiveMatchDataFromMatch(a);var c=new(b("AdsGenericFilterField"))("static_reference_video_id",b("AdsGenericFilterFieldType").STRING_SET);a=a.reference_asset;return new(b("AdsGenericFilterSet"))([new(b("AdsGenericFilter"))(c,"EQUAL",a.id)])},getCopyrightInUnixDateFormat:function(a,c){a=a;var d=a.reference_file,e=d.published_time;e=b("parseISODate")(e);d.published_time=e.getTime()/1e3;e=d.live_status===0;var f=d.encoding_status;f=f&&f.video_status==="processing";c&&e&&f&&(d.live_status=1);return a},openMatchComparisonDialog:function(a,c){a=b("ActorURI").create(b("XVideoCopyrightMatchDialogController").getURIBuilder().setInt("id",a).setEnum("source","dashboard").getURI(),c);b("AsyncDialog").send(new(b("AsyncRequest"))(a))},sortableColumnToField:function(a,c){var d=this.getActiveMatchDataFromMatch(c);switch(a){case b("PageContentTabConstants").COLUMNS.VIDEO_VIEWS:return c.matched_video_asset.view_count;case b("PageContentTabConstants").COLUMNS.OVERLAP:return d.total_match_duration;case b("PageContentTabConstants").COLUMNS.EXPIRES_DAYS:case b("PageContentTabConstants").COLUMNS.DISPUTE_EXPIRES_DAYS:return c.expiration_days;case b("PageContentTabConstants").COLUMNS.REFERENCE_VIDEO:return d.reference_asset.title;case b("PageContentTabConstants").COLUMNS.LAST_MODIFIED_BY:return c.last_modified_time;case b("PageContentTabConstants").COLUMNS.DATE_FOUND:return c.added_to_dashboard_time}j(0,3678)},convertGraphAPIAssetToVideoCopyrightVideoMetadata:function(a){if(!a)return null;var b=a.ad_break_offsets_in_ms;return{id:a.id,title:a.title,durationInSec:a.duration_in_sec,width:a.width,height:a.height,permalinkURL:a.permalink_url,thumbnailSrc:a.thumbnail_url,ownerPictureSrc:a.owner_picture_url,ownerPublicName:a.owner_name||"",ownerProfileURL:a.owner_url,publishedTime:a.published_time,isPrivate:a.is_private,description:a.description,viewsCount:a.view_count,commentsCount:a.comment_count,sharesCount:a.share_count,followersCount:a.followers_count,likesCount:a.like_count,liveStatus:a.live_status,privacyExplanation:a.privacy_explanation,adBreakOffsets:b,containsAdBreaks:b&&b.length>0,monetizingOwnerCount:a.monetizing_owner_count,platform:a.platform,isStory:a.is_story,storyExpirationHours:a.story_expiration_hours,videoId:a.video_id,referenceMatchAssetType:"VIDEO"}},getDefaultReferenceFileType:function(){return{id:"",title:"",durationInSec:0,thumbnailSrc:"",liveStatus:2,contentType:"video",metadata:{},universalContentID:"",publishedTime:0}},convertGraphAPIAssetToReferenceFileMetadata:function(a){return!a?this.getDefaultReferenceFileType():{id:a.id,title:a.title,downloadHdUrl:a.download_hd_url,durationInSec:a.duration_in_sec,thumbnailSrc:a.thumbnail_url,liveStatus:a.live_status,contentType:a.content_type,metadata:a.metadata,publishedTime:a.published_time,universalContentID:a.universal_content_id,iswc:a.iswc,writer_names:a.writer_names,copyrightCreationTime:a.copyright_creation_time,subTitle:a.sub_title,referenceMatchAssetType:"VIDEO"}},convertGraphAPIAuditLogToVideoMetadata:function(a){var b=[];a.forEach(function(a){b.push({userName:a.user_name,timestamp:a.timestamp,matchState:a.match_state,reason:a.reason,appliedActions:a.applied_actions||[]})});return b},convertGraphAPIDisputeToMetadata:function(a){return{id:a.id,disputeType:a.dispute_type,status:a.status,expirationTime:a.expiration_time,timeCreated:a.time_created,timeAppealed:a.time_appealed,timeUpdated:a.time_updated,disputeFormData:a.dispute_form_data,appealFormData:a.appeal_form_data}},convertGraphAPIMatchToVideoCopyrightMatch:function(a){var b=a.matched_video_asset,c=a.last_modified_user,d=a.audit_log,e=a.dispute,f=a.muted_segments_from_other_publishers;return{attribution:a.attribution,matchID:a.id,is_viewed:a.is_viewed,status:a.match_status,expirationInDays:a.expiration_days,matchedVideoAsset:b?this.convertGraphAPIAssetToVideoCopyrightVideoMetadata(b):null,lastModifiedUserName:c?c.name:" ",lastModifiedTime:a.last_modified_time,auditLog:d?this.convertGraphAPIAuditLogToVideoMetadata(d):null,notes:a.notes,appliedActions:a.applied_actions||[],siblingAppliedActions:a.sibling_applied_actions||[],dispute:e?this.convertGraphAPIDisputeToMetadata(e):null,actionRequiringManualReview:a.action_requiring_manual_review,matchData:this.convertGraphAPIMatchDataToMetadata(a),addedToDashboardTime:a.added_to_dashboard_time,reviewReportID:a.review_report_id,ownershipCountries:a.ownership_countries,isAnonymous:a.is_anonymous,matchedAssetPlatform:b?b.platform:"FB",mutedSegmentsFromOtherPublishers:this.convertGraphAPIMutedSegmentsFromOtherPublishers(f),trustedPartnerInfo:a.trusted_partner_info,isBusinessPageMatch:a.is_business_page_match,publisherCanRestore:a.publisher_can_restore,matchedVideoOverlapDurationInSec:a.matched_video_overlap_duration_in_sec}},convertGraphAPIMutedSegmentsFromOtherPublishers:function(a){var b=[];if(!a)return b;a.forEach(function(a){var c=a.publisher_name,d=a.start_time_in_sec,e=a.duration_in_sec;a=a.segment_source;b.push({publisherName:c,startTimeInSec:d,durationInSec:e,segmentSource:a})});return b},convertGraphAPIReferenceHistoryToMetadata:function(a){var b=[];if(!a)return b;a.forEach(function(a){b.push({timestamp:a.timestamp,matchState:a.match_state})});return b},convertGraphAPIMatchToVideoReferenceMatch:function(a,b){b=b==a.matched_reference_owner_id;var c=b?a.matched_reference_copyright:a.reference_copyright;return{id:a.id,history:this.convertGraphAPIReferenceHistoryToMetadata(a.modification_history),matchState:a.match_state,matchData:this.convertGraphAPIMatchDataToMetadataImpl(a.match_data),matchedAsset:a.matched_reference_asset?this.convertGraphAPIAssetToReferenceFileMetadata(a.matched_reference_asset):null,referenceAsset:a.reference_asset?this.convertGraphAPIAssetToReferenceFileMetadata(a.reference_asset):null,matchedReferenceOwnerID:a.matched_reference_owner_id,matchedReferenceOwnerName:a.matched_reference_owner_name,referenceOwnerID:a.reference_owner_id,referenceOwnerName:a.reference_owner_name,conflictingCountries:a.conflicting_countries,ownershipCountries:c?c.ownership_countries:null,disputeFormData:JSON.parse(a.dispute_form_data),rejectionFormData:JSON.parse(a.rejection_form_data),expirationTime:a.expiration_time,isDisputable:a.is_disputable,isMatchedOwner:b,isPossibleConflict:a.is_possible_conflict,matchedReferenceCopyrightID:(c=a)!=null?(c=c.matched_reference_copyright)!=null?c.id:c:c,referenceCopyrightID:(b=a)!=null?(b=b.matched_reference_copyright)!=null?b.id:b:b}},convertGraphAPIMatchDataToMetadata:function(a){var b=a.match_data,c=[];b&&b.length&&b.forEach(function(b){var d=r.convertGraphAPIMatchDataToMetadataImpl(b);b.id.toString()===a.active_match_data_id?c.unshift(d):c.push(d)});return c},convertMatchedSegmentsToCopyrightSegments:function(a,c,d){a=a[c?d?"original_video_matched_segments":"video_matched_segments":d?"original_audio_matched_segments":"audio_matched_segments"]||[];c=a.map(function(a){return{referenceStartTimeInSec:a.reference_start_time_in_sec,matchedStartTimeInSec:a.matched_start_time_in_sec,durationInSec:a.duration_in_sec,refDurationInSec:a.ref_duration_in_sec,errorType:a.error_type,mediaType:a.media_type,segmentSource:a.segment_source||b("VideoCopyrightSegmentSource").RIDGE_MATCHES,included:!0}});return c},convertExcludedSegmentsToCopyrightSegments:function(a){a=a.map(function(a){return{referenceStartTimeInSec:a.start_time_in_sec,matchedStartTimeInSec:a.start_time_in_sec,durationInSec:a.duration_in_sec,refDurationInSec:a.duration_in_sec,mediaType:a.media_type,included:!!a.included,segmentSource:b("VideoCopyrightSegmentSource").PUBLISHER_DEFINED}});return a},convertCopyrightSegmentsToExcludedSegments:function(a){var c=[];a.forEach(function(a){if(a.segmentSource!==b("VideoCopyrightSegmentSource").PUBLISHER_DEFINED)return;a={start_time_in_sec:a.referenceStartTimeInSec,duration_in_sec:a.durationInSec,media_type:a.mediaType,segment_source:a.segmentSource,included:!!a.included};c.push(a)});return c},convertGraphAPIMatchDataToMetadataImpl:function(a){var b=a.excluded_ownership_segments||[];return{id:a.id,excludedSegments:this.convertExcludedSegmentsToCopyrightSegments(b),monitoringType:a.monitoring_type,appliedActions:a.applied_actions,matchRule:a.match_rule,matchedDurationInSec:a.total_match_duration,videoSegments:this.convertMatchedSegmentsToCopyrightSegments(a,!0,!1),audioSegments:this.convertMatchedSegmentsToCopyrightSegments(a,!1,!1),originalVideoSegments:this.convertMatchedSegmentsToCopyrightSegments(a,!0,!0),originalAudioSegments:this.convertMatchedSegmentsToCopyrightSegments(a,!1,!0),referenceAsset:this.convertGraphAPIAssetToReferenceFileMetadata(a.reference_asset),isManualMatch:a.is_manual_match,videoCopyrightID:a.video_copyright_id,musicWorkAssociatedAudioAsset:a.music_work_associated_audio_asset,assetType:"VIDEO"}},getExpirationLabelFromExpirationTime:function(a){var b,c;a=a-Date.now()/q;a<o?(b=Math.ceil(a/p),c=b===1?"minute":"minutes"):a<n?(b=Math.ceil(a/o),c=b===1?"hour":"hours"):(b=Math.ceil(a/n),c=b===1?"day":"days");if(b<0)return null;else return i._({"*":{"day":"{time before expiration} day","days":"{time before expiration} days","hour":"{time before expiration} hour","hours":"{time before expiration} hours","minute":"{time before expiration} minute","minutes":"{time before expiration} minutes"}},[i._param("time before expiration",b,[0]),i._enum(c,{day:"day",days:"days",hour:"hour",hours:"hours",minute:"minute",minutes:"minutes"})])},getIsReferenceMatchStateActionable:function(a,c){return c===b("VideoReferenceMatchState").CONFLICT||c===b("VideoReferenceMatchState").DISPUTED||c===b("VideoReferenceMatchState").POSSIBLE_CONFLICT||a&&c===b("VideoReferenceMatchState").DISPUTE_REJECTED},getIsPassiveReferenceResolution:function(a,c){if(a)return c===b("VideoReferenceMatchState").CONFLICT_EXPIRED||c===b("VideoReferenceMatchState").DISPUTE_REJECTED;else return c===b("VideoReferenceMatchState").DISPUTE_EXPIRED},getAppliedActionLabel:function(a){a=a.map(function(a){return a.action});var c=a.indexOf(b("VideoCopyrightRuleActionType").BLOCK)!==-1;if(c)return b("RightsManagerFbt").BLOCKED;c=a.indexOf(b("VideoCopyrightRuleActionType").MONETIZE)!==-1;if(c)return i._("Claim ad earnings");c=a.indexOf(b("VideoCopyrightRuleActionType").TRACK)!==-1;return c?b("RightsManagerFbt").MONITORED:b("RightsManagerFbt").CLAIMED},getActionRequiringManualReviewLabel:function(a){switch(a){case b("VideoCopyrightRuleActionType").BLOCK:return i._("Block not applied");case b("VideoCopyrightRuleActionType").MONETIZE:return i._("Claim ad earnings not applied");default:return i._("Manually review")}},getReferenceMatchStateLabel:function(a,c){switch(a){case b("VideoReferenceMatchState").CONFLICT:case b("VideoReferenceMatchState").POSSIBLE_CONFLICT:return i._("Conflict detected");case b("VideoReferenceMatchState").OWNERSHIP_ASSERTED:return i._("Ownership asserted");case b("VideoReferenceMatchState").DISPUTED:return c?i._("Dispute submitted"):i._("Ownership disputed");case b("VideoReferenceMatchState").DISPUTE_ACCEPTED:return c?i._("Dispute accepted"):i._("Dispute accepted by you");case b("VideoReferenceMatchState").DISPUTE_REJECTED:return c?i._("Dispute rejected"):i._("Dispute rejected by you");case b("VideoReferenceMatchState").CONFLICT_RESOLVED:return i._("Conflict resolved");case b("VideoReferenceMatchState").CONFLICT_EXPIRED:return i._("Conflict expired");case b("VideoReferenceMatchState").DISPUTE_EXPIRED:return c?i._("Dispute accepted"):i._("Dispute expired");default:return i._("Unknown")}},getShouldShowReferenceMatchExpirationTime:function(a,c){return c?a===b("VideoReferenceMatchState").CONFLICT||a===b("VideoReferenceMatchState").POSSIBLE_CONFLICT:a===b("VideoReferenceMatchState").DISPUTED},getReferenceMatchExpirationTooltip:function(a,c,d,e){if(c){if(a===b("VideoReferenceMatchState").CONFLICT||a===b("VideoReferenceMatchState").POSSIBLE_CONFLICT)return null}else if(a===b("VideoReferenceMatchState").DISPUTED)return null;return i._("{conflicting publisher} has {time before expiration} to respond to your dispute. You'll be notified when they respond.",[i._param("conflicting publisher",e),i._param("time before expiration",d)])},logToPageContentTabLoggerWithDetails:function(a,c,d){b("PageContentTabLogger").log("action_taken_main_view",d,{page_id:c,action:a})},renderOldVersionRuleIndicator:function(a,c){return c?null:k.jsx(b("Image.react"),{className:b("joinClasses")(a,"_5u-h"),"data-tooltip-content":i._("This match rule needs to be replaced with a new match rule due to recent updates. Assign reference files associated with it to a different or new match rule."),"data-hover":"tooltip","data-tooltip-position":"right",src:g("132175")})},dedupeSegments:function(a,b){var c=0,d=[],e=null;a.sort(function(a,c){a=b?a.referenceStartTimeInSec:a.matchedStartTimeInSec;c=b?c.referenceStartTimeInSec:c.matchedStartTimeInSec;return a>c?1:-1}).forEach(function(a){var f=a.durationInSec,g=b?a.referenceStartTimeInSec:a.matchedStartTimeInSec;f=g+f;if(e&&g<c){e.durationInSec+=Math.max(0,f-c);c=Math.max(c,f);return}g=babelHelpers["extends"]({},a);e=g;d.push(g);c=Math.max(c,f)});return d},convertIGUserNameToIDs:function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!(c.length===0)){e.next=2;break}return e.abrupt("return",[]);case 2:e.next=4;return b("regeneratorRuntime").awrap(b("IGUserDataFetcher").gen(c,a));case 4:d=e.sent;return e.abrupt("return",Object.values(d.payload));case 6:case"end":return e.stop()}},null,this)},getMatchedOwnerBadge:function(a,c){if(a)return k.jsx(b("Image.react"),babelHelpers["extends"]({className:"_4gyc",src:g("540419")},b("TooltipData").propsFor(i._("Trusted partner"),"above")));return c?k.jsx(b("Image.react"),babelHelpers["extends"]({className:"_4gyc",src:g("499172")},b("TooltipData").propsFor(i._("This Page identifies as a business"),"above"))):null},getGeoActionReasonName:function(a){switch(a){case"unauthorized_commercial_use":return i._("Unauthorized Commercial Use");case"restricted_content":return i._("Restricted Content");case"objectionable_content":return i._("Objectionable Content");case"artist_objection":return i._("Artist Objection");case"prerelease_content":return i._("Pre-release Content");case"product_parameters":return i._("Product Parameters");case"premium_music_video":return i._("Premium Music Video");default:return null}},getGeoActionReasonTootip:function(a){switch(a){case"unauthorized_commercial_use":return i._("Includes recordings that are not licensed for business use");case"restricted_content":return i._("Includes recordings from restricted artists or restricted writers");case"objectionable_content":return i._("Includes violence, pornography or other objectionable content");case"artist_objection":return i._("Includes content that the artist has a formal objection to");case"prerelease_content":return i._("Includes recordings that have not been officially released");case"product_parameters":return i._("A type of video that isn't included in your license (still image video, DJ mix, streaming service or other restricted format)");case"premium_music_video":return i._("Includes any part of a premium music video");default:return null}},getGeoActionReasonList:function(){return["unauthorized_commercial_use","restricted_content","objectionable_content","artist_objection","prerelease_content","product_parameters","premium_music_video"]},getGeoActionReasonListMMRM:function(a){var b=["unauthorized_commercial_use","restricted_content","objectionable_content","artist_objection","prerelease_content","product_parameters"];a==="MUSIC_LABEL"&&b.push("premium_music_video");return b}};e.exports=r}),null);
__d("CollageLayoutConfig",[],(function(a,b,c,d,e,f){var g=4;a=function(){"use strict";function a(a,b,c,d){c===void 0&&(c=g),this.$2=c,this.$3=b,this.$5=d,this.$6(a)}var b=a.prototype;b.getItemStyleInfos=function(){return this.$1};b.getIndexForPoint=function(a,b){var c=this.$1.findIndex(function(c){return c.left<=a&&c.top<=b&&c.left+c.width>=a&&c.top+c.height>=b});return c===-1?null:c};b.getCalculatedHeight=function(){return this.$4};b.getSpacing=function(){return this.$2};b.getWidth=function(){return this.$3};b.$6=function(a){var b=this,c=this.$7(a),d=this.$8(a),e=this.$2*(d-1),f=Math.ceil((this.$3-e)/d);this.$4=this.$5||(f+this.$2)*c-this.$2;e=this.$2*(c-1);var g=Math.ceil((this.$4-e)/c);this.$1=[];a.forEach(function(a){a={left:(f+b.$2)*a.x,top:(g+b.$2)*a.y,width:(f+b.$2)*a.width-b.$2,height:(g+b.$2)*a.height-b.$2};a.left+a.width>b.$3&&(a.width=b.$3-a.left);b.$1.push(a)})};b.$8=function(a){var b=0;a.forEach(function(a){b=Math.max(b,a.x+a.width)});return b};b.$7=function(a){var b=0;a.forEach(function(a){b=Math.max(b,a.y+a.height)});return b};return a}();e.exports=a}),null);
__d("Emscripten",[],(function(a,b,c,d,e,f){e.exports={isSupported:function(){return typeof Int32Array!=="undefined"&&typeof Float64Array!=="undefined"&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set}}}),null);
__d("PUWErrorCodes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BAD_JPEG:9901,WORKER_TERMINATED:9902,UNKNOWN_RESIZE_ERROR:9903,WORKER_ABORT:9904})}),null);
__d("PooledWebWorker",["WebWorker"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(b,c,d){d=a.call(this,d)||this;d.$PooledWebWorker1=c;d.$PooledWebWorker2=b;return d}var c=b.prototype;c.getIndex=function(){return this.$PooledWebWorker1};c.getPool=function(){return this.$PooledWebWorker2};return b}(b("WebWorker"));e.exports=a}),null);
__d("WebWorkerPool",["PooledWebWorker","emptyFunction"],(function(a,b,c,d,e,f){a=function(){"use strict";a.isSupported=function(){return b("PooledWebWorker").isSupported()};function a(a,c){this.$1=[];for(var d=0;d<c;d++)this.$1.push(new(b("PooledWebWorker"))(this,d,a).setErrorHandler(this.$2).setMessageHandler(this.$3).execute());this.$4=0}var c=a.prototype;c.setMessageHandler=function(a){this.$5=a||b("emptyFunction");return this};c.setAllowCrossPageTransition=function(a){this.$1.forEach(function(b){return b.setAllowCrossPageTransition(a)});return this};c.setErrorHandler=function(a){this.$6=a||b("emptyFunction");return this};c.postMessage=function(){var a=this.getWorker();for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];a.postMessage.apply(a,c);return a};c.$3=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b.unshift(this);this.getPool().$5.apply(this.getPool(),b)};c.$2=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b.unshift(this);return this.getPool().$6.apply(this.getPool(),b)};c.getWorker=function(){var a=this.$1[this.$4];this.$4=(this.$4+1)%this.$1.length;return a};return a}();e.exports=a}),null);
__d("JpegResizer",["Emscripten","JpegResizerConfig","JpegResizeWorkerResource","PUWErrorCodes","WebWorker","WebWorkerPool"],(function(a,b,c,d,e,f){var g=null;a=function(){"use strict";a.isSupported=function(){return b("WebWorkerPool").isSupported()&&b("Emscripten").isSupported()&&!b("JpegResizerConfig").isGKBlacklisted};a.getSingleton=function(b){g||(g=new a(b||a.DEFAULT_POOL_SIZE).setAllowCrossPageTransition(!0));return g};a.prepareResource=function(a){b("WebWorker").prepareResource(b("JpegResizeWorkerResource"),a)};function a(c){c=c||a.DEFAULT_POOL_SIZE,b("WebWorker").prepareResource(b("JpegResizeWorkerResource")),this.$1=new(b("WebWorkerPool"))(b("JpegResizeWorkerResource"),c).setErrorHandler(this.$2.bind(this)).setMessageHandler(this.$3.bind(this)),this.$4={},this.$5=a.DEFAULT_RESIZE_HEIGHT,this.$6=a.DEFAULT_RESIZE_WIDTH,this.$7=0,this.$8=85}var c=a.prototype;c.setHighQuality=function(b){b?(this.$5=a.DEFAULT_RESIZE_HEIGHT,this.$6=a.DEFAULT_RESIZE_WIDTH):(this.$5=a.LOW_QUALITY_RESIZE_HEIGHT,this.$6=a.LOW_QUALITY_RESIZE_WIDTH);return this};c.setMaxWidth=function(a){this.$6=a;return this};c.setMaxHeight=function(a){this.$5=a;return this};c.setEncodeQuality=function(a){this.$8=a;return this};c.setUndershoot=function(a){this.$7=a;return this};c.setAllowCrossPageTransition=function(a){this.$1.setAllowCrossPageTransition(a);return this};c.resizeBlob=function(a,b,c){return this.$9(a,this.$6,this.$5,b,c)};c.resize360Blob=function(a,b,c,d){var e=this.$6*3,f=this.$5*3;d&&(e=d,f=d);return this.$9(a,e,f,b,c)};c.$9=function(a,c,d,e,f){var g=this.$1.getWorker();if(g.isCurrentState("terminated")){var h=new Error("Worker terminated");h.code=b("PUWErrorCodes").WORKER_TERMINATED;e(h);return this}h=g.postMessage({blob:a,height:d,width:c,quality:this.$8,undershoot:this.$7}).getIndex();this.$10(h).unshift({done:e,progress:f});return this};c.$10=function(a){Object.prototype.hasOwnProperty.call(this.$4,a)||(this.$4[a]=[]);return this.$4[a]};c.$2=function(a,b){a.terminate();a=this.$10(a.getIndex());this.$11(b);a.forEach(function(a){return a.done(b)});a.length=0};c.$3=function(a,b){b.error&&this.$11(b.error);if(b.done)this.$10(a.getIndex()).pop().done(b.error,b.blob,b.skipped,b.originalWidth,b.originalHeight,b.outputWidth,b.outputHeight);else{a=this.$10(a.getIndex());a=a[a.length-1].progress;a&&a({written:b.written,total:b.total})}};c.$11=function(a){var c=a.message;c&&c.indexOf("Not a JPEG file")!==-1?a.code=b("PUWErrorCodes").BAD_JPEG:c&&c.indexOf("abort()")!==-1?a.code=b("PUWErrorCodes").WORKER_ABORT:a.code=b("PUWErrorCodes").UNKNOWN_RESIZE_ERROR};return a}();a.DEFAULT_POOL_SIZE=3;a.DEFAULT_RESIZE_HEIGHT=2048;a.DEFAULT_RESIZE_WIDTH=2048;a.LOW_QUALITY_RESIZE_HEIGHT=960;a.LOW_QUALITY_RESIZE_WIDTH=960;e.exports=a}),null);