if (self.CavalryLogger) { CavalryLogger.start_js(["Oltil"]); }

__d("MessengerDesktopAppLinks",[],(function(a,b,c,d,e,f){e.exports={macOSX:"https://apps.apple.com/app/messenger/id1480068668",windows:"https://www.microsoft.com/p/messenger/9wzdncrf0083"}}),null);
__d("MessengerStoriesRingPresenceMessageQueryContainerQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"threadFBID",type:"ID!"}],b=[{kind:"Variable",name:"id",variableName:"threadFBID"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessengerStoriesRingPresenceMessageQueryContainerQuery",selections:[{alias:null,args:b,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MessengerStoriesRingPresenceMontageQueryContainer_messageThread"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessengerStoriesRingPresenceMessageQueryContainerQuery",selections:[{alias:null,args:b,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThread",kind:"LinkedField",name:"montage_thread",plural:!1,selections:[{alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null}],storageKey:null},c],storageKey:null},c],storageKey:null}]},params:{id:"2316808138401460",metadata:{},name:"MessengerStoriesRingPresenceMessageQueryContainerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("StickersPackInTrayQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"stickerInterface",type:"StickerInterfaces"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"StickerStore",kind:"LinkedField",name:"sticker_store",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"first",value:1e4},{kind:"Variable",name:"interface",variableName:"stickerInterface"}],concreteType:"PacksInTrayConnection",kind:"LinkedField",name:"tray_packs",plural:!1,selections:[{alias:null,args:null,concreteType:"PacksInTrayEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"StickerPack",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"StickersPackInTrayQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"StickersPackInTrayQuery",selections:b},params:{id:"2650439741646983",metadata:{},name:"StickersPackInTrayQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MercuryAudioPlayer",["DOM","Event"],(function(a,b,c,d,e,f){var g=200;function h(){var a=b("DOM").create("audio"),c=!1;try{a.canPlayType&&(a.canPlayType("video/mp4;").replace(/^no$/,"")&&(c=!0))}finally{return c}}var i=function(){this.interval=null,this.arbiterInstance=null,this.audio=b("DOM").create("audio"),b("Event").listen(this.audio,"playing",function(){this.informAttachment("playing",this.audio.currentTime),this.interval=window.setInterval(function(){this.informAttachment("playing",this.audio.currentTime)}.bind(this),g)}.bind(this)),b("Event").listen(this.audio,"ended",function(){window.clearInterval(this.interval),this.informAttachment("finished")}.bind(this))};Object.assign(i.prototype,{setAudio:function(a,b){this.audio.setAttribute("src",a),this.arbiterInstance=b},informAttachment:function(a,b){this.arbiterInstance&&this.arbiterInstance.inform(a,b)},play:function(){this.audio.play(),this.informAttachment("played")},resume:function(){this.audio.play(),this.informAttachment("played")},pause:function(){this.audio.pause(),window.clearInterval(this.interval),this.informAttachment("paused")},getType:function(){return"html5"}});function j(){return h()?new i():!1}var k=null,l=null,m=0;function a(a,b){this.src=a;this.arbiterInstance=b;this.audio_id=++m;k!==null||(k=j());if(!k)return!1}Object.assign(a.prototype,{getType:function(){if(!k)return!1;else return k.getType()},play:function(a){a&&l==this.audio_id?k.resume():(this.pause(),l=this.audio_id,k.setAudio(this.src,this.arbiterInstance),k.play())},pause:function(){k.pause()}});e.exports=a}),null);
__d("MercuryAttachmentAudioClip.react",["cssVar","cx","fbt","Arbiter","ArbiterMixin","CurrentUser","LeftRight.react","Link.react","MercuryAudioPlayer","MercuryShareAttachmentRenderLocations","React","SubscriptionsHandler","createReactClass_DEPRECATED","joinClasses","prop-types","shield"],(function(a,b,c,d,e,f,g,h,i){var j=b("React"),k="MercuryAttachmentAudioClip/play",l="progress-bar";c=b("createReactClass_DEPRECATED")({displayName:"AudioClip",mixins:[b("ArbiterMixin")],propTypes:{customColor:(a=b("prop-types")).string,duration:a.number,isChat:a.bool,isFromViewer:a.bool,location:a.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()),onAttachmentLoad:a.func,rootClassName:a.string,showHelp:a.bool,src:a.string.isRequired,width:a.number},getInitialState:function(){this.logged=!1;return{time:0,playing:!1,started:!1,duration:this.props.duration,audioPlayer:new(b("MercuryAudioPlayer"))(this.props.src,this)}},componentDidMount:function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad(),this._subscriptionsHandler=new(b("SubscriptionsHandler"))(),this._subscriptionsHandler.addSubscriptions(this.subscribe("playing",this.updateTime),this.subscribe("played",b("shield")(this.setState,this,{playing:!0,started:!0})),this.subscribe("paused",b("shield")(this.setState,this,{playing:!1})),this.subscribe("finished",b("shield")(this.setState,this,{playing:!1,started:!1,time:this.props.duration})),b("Arbiter").subscribe(k,function(a,b){this.props.src!=b&&this.setState({time:0})}.bind(this)))},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release()},updateTime:function(a,b){this.setState({time:b})},play:function(){this.state.playing?this.state.audioPlayer.pause():(this.state.audioPlayer.play(this.state.started),b("Arbiter").inform(k,this.props.src),this.logged||(this.logged=!0))},_formatSeconds:function(a){if(a){a=Math.round(a);var b=a%60;b<10&&(b="0"+b);a=Math.floor(a/60);return a+":"+b}else return null},_renderPlayer:function(a,c,d){var e=this.props.isFromViewer,f=this.props.isChat,g=b("CurrentUser").isWorkUser(),h=d===l,k=f&&e&&!h,m=this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER;g=g?"#373e4c":"#4080ff";g=d||g;a={width:a};k&&(a.backgroundColor=g);k=d&&d!==l&&!f?{color:d}:{};g={};h&&(g["aria-hidden"]=!0);return j.jsxs(b("Link.react"),babelHelpers["extends"]({"aria-label":i._("Voice Message"),className:"_1miz _2e-1"+(m?"":" _3_om")+(e&&f?" _3e5f":""),role:"button",style:a,onClick:this.play},g,{children:[j.jsx("span",{className:"_1mi- _2e-2",children:j.jsx("i",{className:"_1mi_ _2e-3"})}),j.jsx("span",{style:k,className:"_1mj0 _2e-4 _3oh-",children:c}),j.jsx("div",{className:"_1mj1 _2e-5"})]}))},render:function(){var a=this.state.time,c=this.state.playing,d=this._formatSeconds(this.state.duration),e=this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER,f=this.props.width||170;if(e){var g=this.props.duration;g>10?f=240:g>5?f=200:g>2?f=160:f=120}g=null;var h=Math.ceil(a*(f+2)/this.state.duration);e&&(h=Math.ceil(a*(f+24)/this.state.duration));if(this.state.audioPlayer&&this.state.audioPlayer.getType()){var k=this._renderPlayer(f,d,this.props.customColor);f=this._renderPlayer(f,d,l);c="_1mj2 _2e-6"+(c&&a!==0?" _1mj3":"")+(c&&a===0?" _4g4x":"");g=j.jsxs("div",{className:c,children:[k,j.jsx("div",{className:"_1mj4 _2e-7",style:{width:h},children:f})]})}else g=j.jsx("div",{className:"_1mj2",children:j.jsx("div",{className:"_1miz",children:j.jsxs(b("LeftRight.react"),{children:[j.jsxs("a",{className:"_1mj5",href:this.props.src,children:[j.jsx("span",{className:"_3qi6",children:j.jsx("i",{className:"_1mj6"})}),j.jsx("span",{className:"_1mj7",children:i._("Voice Message")}),j.jsx("span",{className:"_1mj8",children:d})]}),j.jsx("a",{href:this.props.src,className:"_1mj9",children:j.jsx("i",{className:"_1mja"})})]})})});return j.jsx("div",{className:b("joinClasses")("_1mjb"+(e?" _454y":""),this.props.rootClassName),children:g})}});e.exports=c}),null);
__d("PagesMessengerCreatorInfo.react",["cx","React","UFICreatorInfo.react","XUIGrayText.react","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("XUIGrayText.react"),{className:"_ajk"+(this.props.isNote?" _45l2":""),display:"inline",shade:"light",size:"meta1",children:h.jsx(b("UFICreatorInfo.react"),{creatorID:this.props.creator_info.creatorID,creatorType:this.props.creator_info.creatorType,creatorName:this.props.creator_info.creatorName,labelType:this.props.creator_info.labelType,pageID:this.props.creator_info.pageID,profileURI:this.props.creator_info.profileURI})})};return c}(h.Component);a.propTypes={creator_info:(c=b("prop-types")).shape({creatorID:c.string.isRequired,creatorName:c.string.isRequired,creatorType:c.string.isRequired,labelType:c.string.isRequired,pageID:c.string.isRequired,profileURI:c.string}).isRequired};e.exports=a}),null);
__d("FBRTCCallabilityActions",["keyMirror"],(function(a,b,c,d,e,f){"use strict";var g=b("keyMirror")({CALLABILITY_FETCHED:null,CALLABILITY_FETCH_ERROR:null});a=function(){function a(a){this.$1=a}var b=a.prototype;b.callabilityFetched=function(a,b){this.$1.dispatch({type:g.CALLABILITY_FETCHED,userID:a,callability:b})};b.callabilityFetchError=function(a){this.$1.dispatch({type:g.CALLABILITY_FETCH_ERROR,userID:a})};return a}();a.Types=g;e.exports=a}),null);
__d("XRTCCallabilityController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/rtc/callability/",{user_id:{type:"FBID",required:!0}})}),null);
__d("FBRTCCallabilityDataManager",["AsyncRequest","FBRTCCallabilityActions","TimeSlice","XRTCCallabilityController"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=new(b("FBRTCCallabilityActions"))(a)}var c=a.prototype;c.fetchCallability=function(a){var c=this;b("TimeSlice").guard(function(){var d=b("XRTCCallabilityController").getURIBuilder().setFBID("user_id",a).getURI(),e=c.$2.bind(c,a),f=c.$3.bind(c,a);new(b("AsyncRequest"))().setURI(d).setHandler(e).setErrorHandler(f).setAllowCrossPageTransition(!0).send()},"Chat Tab RTC Callability Check",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};c.$2=function(a,b){this.$1.callabilityFetched(a,b.payload)};c.$3=function(a,b){this.$1.callabilityFetchError(a)};return a}();e.exports=a}),null);
__d("RTCCallabilityStore",["fbt","Cache","FBRTCCallabilityActions","FBRTCCallabilityDataManager","FluxStore","MercuryThreadInfo"],(function(a,b,c,d,e,f,g){"use strict";var h=.5,i=5;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$RTCCallabilityStore2=new(b("FBRTCCallabilityDataManager"))(c);d.$RTCCallabilityStore1=new(b("Cache"))();return d}var d=c.prototype;d.__onDispatch=function(a){var c=a.type;switch(c){case b("FBRTCCallabilityActions").Types.CALLABILITY_FETCHED:c=a.userID;var d=a.callability;this.$RTCCallabilityStore1.set(c,{callable:d.is_callable,isBlocked:d.is_blocked},null,d.is_callable?i:h);this.__emitChange();break;case b("FBRTCCallabilityActions").Types.CALLABILITY_FETCH_ERROR:this.$RTCCallabilityStore1.set(a.userID,{callable:!1,isBlocked:!1},null,h);this.__emitChange();break}};d.isCallable=function(a,b){b=b?b.message_count>0&&b.folder==="inbox":!1;a=this.fetchUserFromCache(a);return a&&a.callable||b};d.isBlocked=function(a,c){c=c?b("MercuryThreadInfo").canReply(c):!0;a=this.fetchUserFromCache(a);return a&&a.isBlocked||!c};d.fetchUserFromCache=function(a){this.$RTCCallabilityStore1.has(a)||(this.$RTCCallabilityStore2.fetchCallability(a),this.$RTCCallabilityStore1.set(a,{callable:!1,isBlocked:!1},null,h));return this.$RTCCallabilityStore1.get(a)};d.callButtonTooltip=function(a,b,c,d){c===void 0&&(c=!0);return!this.isBlocked(a,d)&&(c||this.isCallable(a))?g._("Start a video chat with {shortname}",[g._param("shortname",b)]):g._("{shortname} is currently unavailable for video calling",[g._param("shortname",b)])};d.voiceCallButtonTooltip=function(a,b,c,d){c===void 0&&(c=!0);return!this.isBlocked(a,d)&&(c||this.isCallable(a))?g._("Start a voice call with {shortname}",[g._param("shortname",b)]):g._("{shortname} is currently unavailable for voice calling",[g._param("shortname",b)])};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=a}),null);
__d("ZenonUpsellLinks",["CurrentUser","MessengerDesktopAppLinks","UserAgent","qex"],(function(a,b,c,d,e,f){"use strict";function g(){if(b("UserAgent").isPlatform("Mac OS X"))return b("MessengerDesktopAppLinks").macOSX;else if(b("UserAgent").isPlatform("Windows"))return b("MessengerDesktopAppLinks").windows;return null}function a(){var a=g(),c=a!=null&&!b("CurrentUser").isWorkUser()&&!!b("qex")._("1431495");return c?a:null}e.exports={getDesktopUpsellLinkForPlatform:g,getDesktopUpsellLinkIfEnabledForCalls:a}}),null);
__d("MessengerProfileLinkTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAction=function(a){this.$1.action=a;return this};c.setDomain=function(a){this.$1.domain=a;return this};c.setLinkLocation=function(a){this.$1.link_location=a;return this};c.setTargetID=function(a){this.$1.target_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={action:!0,domain:!0,link_location:!0,target_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("RepliedToMessageContent.react",["ix","cx","fbt","Bootloader","CurrentUser","FantaTabActions","FBLogger","Image.react","JSResource","LineClamp.react","MessengerMathUtils","MessengerTextWithEntities.react","React","RepliedToMessageStatusForGraphQL","asset","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$4=function(){d.$5();if(d.props.repliedToMessageData.status!==b("RepliedToMessageStatusForGraphQL").VALID)return;var a=d.props.threadID;d.props.isMessengerUI?d.props.scrollToRepliedMessage&&d.props.scrollToRepliedMessage(d.props.repliedToMessageData.message.message_id):a!==null&&a!==void 0&&b("FantaTabActions").jumpToMessage(a,d.props.repliedToMessageData.message.message_id)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props,c=a.isFromViewer,d=a.isMessengerUI;a=a.repliedToMessageData;var e=a.status===b("RepliedToMessageStatusForGraphQL").VALID;if(e&&!a.message){b("FBLogger")("message_replies").mustfix("invalid message reply: Status is Valid but replied_to_message is missing");return null}e=e?a.message.body:this.$1(a);var f=null;!e&&a.message.attachments&&(f=this.$2(a.message.attachments,c,d),e=this.$3(a.message.attachments));c=null;a=e!=null&&b("MessengerMathUtils").isMathBlock(e);if(a&&e!=null){a=b("MessengerMathUtils").getMathBlockInner(e);var g=b("lazyLoadComponent")(b("JSResource")("MessengerMath.react").__setRef("RepliedToMessageContent.react"));c=j.jsx(j.Suspense,{fallback:j.jsx("div",{children:e}),children:j.jsx(g,{body:a,fallbackBody:e,stripDelimiters:!0,className:"_1e4d"})})}else c=j.jsx(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:e});g=j.jsx(b("LineClamp.react"),{className:"_4k7e",lines:2,fitHeightToShorterText:!0,children:c});if(!this.props.replyInOneBubble)return j.jsxs("div",{className:(!!f&&d?"_6e7n":"")+(!!f&&!d?" _6e6m":""),children:[g,f]});a=j.jsxs("blockquote",{className:"_pye"+(!!f&&d?" _6e7n":"")+(!!f&&!d?" _6e6m":""),children:[j.jsx("div",{className:"_pyf"}),g,f]});return!this.props.isLinkified?a:j.jsx("a",{className:"_6e6n",href:"#",onClick:this.$4,children:a})};d.$1=function(a){switch(a.status){case b("RepliedToMessageStatusForGraphQL").DELETED:return b("CurrentUser").isWorkUser()?i._("This message was deleted").toString():i._("Message removed").toString();case b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE:default:return i._("Message is temporarily unavailable").toString()}};d.$2=function(a,c,d){d=d?"_6e6o":"_6e6y";if(a.length===1&&a[0].attach_type)switch(a[0].attach_type){case"photo":case"sticker":case"third_party_sticker":case"animated_image":return!this.props.replyInOneBubble?j.jsx(b("Image.react"),{className:d,src:g("602383")}):c===!0?j.jsx(b("Image.react"),{className:d,src:g("544881")}):j.jsx(b("Image.react"),{className:d,src:g("596859")});case"video":return!this.props.replyInOneBubble?j.jsx(b("Image.react"),{className:d,src:g("602399")}):c===!0?j.jsx(b("Image.react"),{className:d,src:g("504242")}):j.jsx(b("Image.react"),{className:d,src:g("596875")});default:return!this.props.replyInOneBubble?j.jsx(b("Image.react"),{className:d,src:g("562396")}):c===!0?j.jsx(b("Image.react"),{className:d,src:g("555222")}):j.jsx(b("Image.react"),{className:d,src:g("596853")})}else if(a.length>1)return!this.props.replyInOneBubble?j.jsx(b("Image.react"),{className:d,src:g("602390")}):c===!0?j.jsx(b("Image.react"),{className:d,src:g("504171")}):j.jsx(b("Image.react"),{className:d,src:g("596866")});else return null};d.$3=function(a){var b=a.length;if(b===1&&a[0].attach_type)switch(a[0].attach_type){case"photo":return i._("Photo").toString();case"video":return i._("Video").toString();case"sticker":case"third_party_sticker":return i._("Sticker").toString();case"animated_image":return i._("GIF").toString();default:return i._("Attachment").toString()}else if(b>1)return i._({"*":"{number of attachments} Attachments","_1":"{number of attachments} Attachment"},[i._param("number of attachments",b),i._plural(b)]).toString();else return null};d.$5=function(){b("Bootloader").loadModules(["MessageReplyTypedLogger","MessageReplyEvent"],function(a,c){a=new a();a.setEvent(c.SCROLL_TO_ORIGINAL_MESSAGE).setIsWorkplace(b("CurrentUser").isWorkUser()).log()},"RepliedToMessageContent.react")};return c}(j.Component);e.exports=a}),null);
__d("MessengerSharedPhotoReact.bs",["cx","fbt","bs_curry","React","Link.react","CssBackgroundImage.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j={height:"100%"};function a(a){var c=a.className,d=a.fbid,e=a.onClick,f=a.uri;a=a.isSpherical;var g=function(a){a.preventDefault();return b("bs_curry")._1(e,d)},k=h._("photo");if(f!==void 0){f=f;a=a?i.jsx("div",{className:"_3603 _64ks"}):null;return i.jsx(b("Link.react"),{"aria-label":k,className:c,href:f,onClick:g,children:i.jsx(b("CssBackgroundImage.react"),{className:c,imageURI:f,backgroundPosition:"center",style:j,children:a})})}else return i.jsx(b("Link.react"),{"aria-label":k,className:c,onClick:g,role:"button"})}c=a;f.style100pct=j;f.make=c}),null);
__d("MessengerSharedPhotoReact.re",["MessengerSharedPhotoReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerSharedPhotoReact.bs").make;f.make=a}),null);
__d("ChatPhotoViewFooterHScroll.react",["cx","Animation","MessengerSharedPhotoReact.re","React","SphericalPhotoUtils","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerSharedPhotoReact.re").make,i=b("React"),j=b("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings,k=200,l=74,m=140,n=30;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.state={currentPhoto:"",prevScrollLeft:0,scrollLeft:0},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.props.width&&this.props.updateNumberInOneBatch(this.$2(this.props.width)),this.$1=new(b("Animation"))(this.refs.childContainer).to("scrollLeft",0).duration(k).go()};d.UNSAFE_componentWillReceiveProps=function(a){if(a.photoID!=this.state.currentPhoto||this.props.sharedPhotos.length!==a.sharedPhotos.length){var b=a.width?(a.width-l)/2-m:0,c=a.sharedPhotos.findIndex(function(b){return b.node.id===a.photoID});this.setState({currentPhoto:a.photoID,prevScrollLeft:this.state.scrollLeft,scrollLeft:c*l-b})}a.width!=this.props.width&&this.props.updateNumberInOneBatch(this.$2(a.width))};d.componentDidUpdate=function(){this.$1&&this.$1.from("scrollLeft",this.state.prevScrollLeft).to("scrollLeft",this.state.scrollLeft).duration(k).go()};d.componentWillUnmount=function(){this.$1&&this.$1.stop()};d.shouldComponentUpdate=function(a,b){return a.photoID!=this.state.currentPhoto||a.sharedPhotos.length!==this.props.sharedPhotos.length?!0:!1};d.render=function(){var a=this,b=this.props.sharedPhotos;b=b.map(function(b){var c,d=b.node.photo_encodings?b.node.photo_encodings.length!==0:!1;c=(c=b)!=null?(c=c.node)!=null?(c=c.image1)!=null?c.uri:c:c:c;if(d){var e=j(b.node.photo_encodings);e=e.smallThumbnail;c=e||c}return!c?null:i.jsx("div",{className:"_1oyb",children:i.jsx(h,{className:"_1oyc"+(a.state.currentPhoto!==b.node.id?" _1oyd":""),fbid:b.node.legacy_attachment_id,onClick:a.props.onScroll,uri:c,isSpherical:d})},b.node.legacy_attachment_id)});return i.jsx("div",{className:"_1oye",children:i.jsx("div",{className:"_1oyf",ref:"childContainer",children:i.jsx("div",{className:"_1oyh",ref:"scrollable",children:b})})})};d.$2=function(a){return a?Math.ceil((a-m*2)/l):n};return c}(i.Component);a.propTypes={onScroll:(c=b("prop-types")).func,photoID:c.string,sharedPhotos:c.array,updateNumberInOneBatch:c.func,width:c.number};e.exports=a}),null);
__d("XForwardingNUXSeenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/forwarding_nux_seen/",{})}),null);
__d("MessagingForwardingButtonNUX.react",["AsyncRequest","ChatConfig","React","XForwardingNUXSeenController","XUIAmbientNUX.react","prop-types"],(function(a,b,c,d,e,f){var g=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showNUX:!b("ChatConfig").get("seen_forwarding_nux")},d.$1=function(){if(!d.state.showNUX)return;b("ChatConfig").set("seen_forwarding_nux",!0);new(b("AsyncRequest"))(b("XForwardingNUXSeenController").getURIBuilder().getURI()).send();d.setState({showNUX:!1})},d.close=function(){d.$1()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return g.jsx(b("XUIAmbientNUX.react"),{contextRef:this.props.contextRef,onCloseButtonClick:this.$1,position:"left",width:"auto",shown:this.state.showNUX,children:this.props.children})};return c}(g.Component);a.propTypes={contextRef:b("prop-types").func.isRequired};e.exports=a}),null);
__d("MessengerPhotoViewCloseLinkReact.bs",["cx","fbt","bs_curry","React","TooltipLink.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=a.onClick;a=i.jsx("span",{children:h._("Press Esc to close")});return i.jsx(b("TooltipLink.react"),{children:i.jsx("div",{className:"_387s"}),className:"_51ok _50-m _51an",onClick:function(a){return b("bs_curry")._1(c,0)},tooltip:a})}c=a;f.make=c}),null);
__d("MessengerPhotoViewCloseLinkReact.re",["MessengerPhotoViewCloseLinkReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerPhotoViewCloseLinkReact.bs").make;f.make=a}),null);
__d("SpotlightViewerBottomBarLink",["cx","Link.react","React"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.className||"_4_8j _4_8k";return h.jsx(b("Link.react"),babelHelpers["extends"]({},this.props,{className:a,children:this.props.children}))};return c}(h.Component);e.exports=a}),null);
__d("ChatPhotoViewHeader.react",["cx","fbt","CurrentUser","MessagingForwardingButtonNUX.react","MessengerPhotoViewCloseLinkReact.re","React","SpotlightViewerBottomBarLink","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerPhotoViewCloseLinkReact.re").make,j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=function(){c.$2(),c.props.showForwardDialog&&c.props.showForwardDialog()},c.$4=function(){c.$2(),c.props.showShareDialog&&c.props.showShareDialog()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return j.jsxs("div",{className:"_51an _50-m _3h_t _5l-3",role:"banner",children:[this.$1(),j.jsx(i,{onClick:this.props.onClose})]})};d.$2=function(){this.refs.forwardNUX&&this.refs.forwardNUX.close()};d.$1=function(){var a=this,c,d,e;this.props.disableForward||(c=j.jsxs(b("SpotlightViewerBottomBarLink"),{className:"_3h_u",onClick:this.$3,ref:"forwardButton",children:[j.jsx("div",{className:"_3h_v _3h_w"}),h._("Forward")]}),d=j.jsx(b("MessagingForwardingButtonNUX.react"),{contextRef:function(){return a.refs.forwardButton},ref:"forwardNUX",children:h._("Send this image to other people in separate messages.")}));this.props.enableShareToFB&&(e=j.jsxs("div",{className:"_3h_u",onClick:this.$4,ref:"shareButton",role:"button",tabIndex:"0",children:[j.jsx("div",{className:"_3tth _3h_w"}),this.$5()]}));return j.jsxs("div",{ref:"buttons",children:[j.jsxs(b("SpotlightViewerBottomBarLink"),{className:"_3h_u",rel:"async",ajaxify:this.props.url,ref:"downloadButton",children:[j.jsx("div",{className:"_3h_x _3h_w"}),h._("Download")]}),c,d,e,j.jsxs("div",{className:"_3h_u",onClick:this.props.openInfo,ref:"moreInfo",role:"link",tabIndex:"0",children:[j.jsx("div",{className:"_3h_y _3h_w"}),h._("Info")]})]},"buttonsContainer")};d.$5=function(){if(b("CurrentUser").isWorkUser())return h._("Share to Workplace");else return h._("Share to Facebook")};return c}(j.PureComponent);a.propTypes={disableForward:(c=b("prop-types")).bool,enableShareToFB:c.bool,onClose:c.func,openInfo:c.func,showForwardDialog:c.func,showShareDialog:c.func,url:c.object};e.exports=a}),null);
__d("ChatSpeakingSticker.react",["React","ReactDOM","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){var a=b("ReactDOM").findDOMNode(d.refs.stickerVideo);a.play()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return g.jsx("div",{onClick:this.$1,role:"presentation",children:g.jsx("video",{height:this.props.videoSize.height,ref:"stickerVideo",width:this.props.videoSize.width,children:g.jsx("source",{src:this.props.videoURI})})})};return c}(g.PureComponent);a.propTypes={videoURI:(c=b("prop-types")).string.isRequired,videoSize:c.shape({height:c.number,width:c.number}).isRequired};e.exports=a}),null);
__d("EmojiSticker.react",["cx","Image.react","React","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad()};d.render=function(){var a=this.props.emojiImage?this.props.emojiImage:h.jsx(b("Image.react"),{src:this.props.sourceURI});return h.jsx("div",{"aria-label":this.props.emoji,className:b("joinClasses")(this.props.className,"_383m"),tabIndex:"0",children:a})};return c}(h.Component);a.propTypes={emoji:(c=b("prop-types")).string,emojiImage:c.any,onAttachmentLoad:c.func,sourceURI:c.string.isRequired};e.exports=a}),null);
__d("MercuryShareAttachmentReactShape",["React","prop-types"],(function(a,b,c,d,e,f){"use strict";b("React");c=(a=b("prop-types")).shape({share_id:a.string,description:a.string,media:a.shape({image:a.string,image_size:a.shape({height:a.number,width:a.number}),duration:a.number,playable:a.bool,source:a.string}),source:a.string,style_list:a.arrayOf(a.string),subattachments:a.array,target:a.object,title:a.string,properties:a.object,uri:a.string,action_links:a.array,messaging_attribution:a.shape({attribution_type:a.string,attribution_id:a.string,name:a.string,icon_url:a.string}),messenger_ctas:a.arrayOf(a.shape({id:a.string,page_id:a.string,action_title:a.string,action_url:a.string,action_open_type:a.number,is_high_confidence:a.bool,is_mutable_by_server:a.bool,user_confirmation:a.bool,native_url:a.string,is_disabled:a.bool,nested_ctas:a.array,webview_metadata:a.object}))}).isRequired;e.exports=c}),null);
__d("MercuryAnimatedShareSnippet.react",["cx","fbt","ix","Image.react","React","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.isViewerSender?h._("You sent a GIF."):h._("{sender name} sent a GIF.",[h._param("sender name",this.props.senderName)]);return j.jsxs("span",{className:"uiIconText _3l6h",children:[j.jsx(b("Image.react"),{src:i("81849")}),a]})};return c}(j.Component);a.propTypes={isViewerSender:(c=b("prop-types")).bool,senderName:c.oneOfType([c.string,c.object])};e.exports=a}),null);
__d("MercuryCrisisListingShareSnippet.react",["fbt","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return h.jsx("span",{children:this.props.isViewerSender?g._("You shared a post."):g._("{sender_name} shared a post.",[g._param("sender_name",this.props.senderName)])})};return b}(h.Component);e.exports=a}),null);
__d("MercuryFallbackShareAttachmentSnippet.react",["cx","fbt","ix","Image.react","React","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;this.props.isViewerSender?a=h._("You sent a link."):a=h._("{sender name} sent a link.",[h._param("sender name",this.props.senderName)]);return j.jsxs("span",{className:"uiIconText _3l6h",children:[j.jsx(b("Image.react"),{src:i("86988")}),a]})};return c}(j.Component);a.propTypes={isViewerSender:(c=b("prop-types")).bool,senderName:c.oneOfType([c.string,c.object])};e.exports=a}),null);
__d("MercuryFormProgressShareAttachmentSnippet.react",["fbt","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.$1=function(){var a;return(a=this.props)!=null?(a=a.attachment)!=null?(a=a.target)!=null?a.progress:a:a:a};c.render=function(){var a=this.$1(),b;a===null?b=g._("A form was sent."):this.props.isViewerSender?a===100?b=g._("{sender name} submitted a form.",[g._param("sender name",this.props.senderName)]):b=g._("You sent a form."):a===100?b=g._("You submitted a form."):b=g._("{sender name} sent a form.",[g._param("sender name",this.props.senderName)]);return h.jsx("span",{children:b})};return b}(h.Component);e.exports=a}),null);
__d("MercuryFundraiserShareSnippet.react",["cx","fbt","ix","Image.react","React","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.isViewerSender?h._("You shared a fundraiser"):h._("{sender name} shared a fundraiser",[h._param("sender name",this.props.senderName)]);return j.jsxs("span",{className:"uiIconText _3l6h",children:[j.jsx(b("Image.react"),{src:i("40052")}),a]})};return c}(j.Component);a.propTypes={isViewerSender:(c=b("prop-types")).bool,senderName:c.oneOfType([c.string,c.object])};e.exports=a}),null);
__d("MercuryInstantGameShareSnippet.react",["cx","fbt","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){var a,b=this.props.isViewerSender?h._("You shared a game."):h._("{sender name} shared a game to you.",[h._param("sender name",this.props.senderName)]),c=this.props.attachment;a=(a=c)!=null?(a=a.style_list)!=null?a[0]:a:a;if(a==="instant_games_custom_update"){c=(a=c)!=null?a.title:a;c&&(b=c)}return i.jsx("span",{className:"uiIconText _3l6h",children:b})};return b}(i.Component);e.exports=a}),null);
__d("MercuryLeadFormUserInfoShareAttachmentSnippet.react",["ix","cx","fbt","Image.react","React","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.isViewerSender?i._("You submitted a form."):i._("{sender name} submitted your form.",[i._param("sender name",this.props.senderName)]);return j.jsxs("span",{className:"uiIconText _3l6h",children:[j.jsx(b("Image.react"),{src:g("404223")}),a]})};return c}(j.Component);e.exports=a}),null);
__d("MercuryMBirthdayReminderShareAttachmentSnippet.react",["MercuryShareAttachmentReactShape","React","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){var a=this.props.attachment.title.split(" ")[0];return g.jsx("span",{children:"Wish "+a+" a happy birthday."})};return b}(g.Component);a.propTypes={attachment:b("prop-types").object};e.exports=a}),null);
__d("MercuryMessageLiveLocationShareAttachmentSnippet.react",["cx","fbt","ix","Image.react","React","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;this.props.isViewerSender?a=h._("You sent a live location."):a=h._("{sender name} sent a live location.",[h._param("sender name",this.props.senderName)]);return j.jsxs("span",{className:"uiIconText _3l6h",children:[j.jsx(b("Image.react"),{src:i("87068")}),a]})};return c}(j.Component);a.propTypes={isViewerSender:(c=b("prop-types")).bool,senderName:c.oneOfType([c.string,c.object])};e.exports=a}),null);
__d("MercuryMessageLocationShareAttachmentSnippet.react",["cx","fbt","ix","Image.react","React"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;this.props.isViewerSender?a=h._("You sent a location."):a=h._("{sender name} sent a location.",[h._param("sender name",this.props.senderName)]);return j.jsxs("span",{className:"uiIconText _3l6h",children:[j.jsx(b("Image.react"),{src:i("87068")}),a]})};return c}(j.Component);e.exports=a}),null);
__d("MercuryMessengerInviteShareAttachmentSnippet.react",["cx","MercuryShareAttachmentReactShape","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return h.jsx("span",{className:"_3l6h",children:this.props.attachment.title})};return b}(h.Component);a.propTypes={attachment:b("MercuryShareAttachmentReactShape")};e.exports=a}),null);
__d("MercuryMontageDirectShareSnippet.react",["cx","fbt","React","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){var a;a=(a=this.props)!=null?(a=a.attachment)!=null?(a=a.media)!=null?a.source:a:a:a;var b;this.props.isViewerSender?b=a?h._("You sent a video."):h._("You sent a photo."):b=a?h._("{sender name} sent a video.",[h._param("sender name",this.props.senderName)]):h._("{sender name} sent a photo.",[h._param("sender name",this.props.senderName)]);return i.jsx("span",{className:"uiIconText _3l6h",children:b})};return b}(i.Component);a.propTypes={isViewerSender:(c=b("prop-types")).bool,senderName:c.oneOfType([c.string,c.object]),attachment:c.object};e.exports=a}),null);
__d("MercuryMusicIntegrationAttachmentSnippet.react",["fbt","MercuryFallbackShareAttachmentSnippet.react","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a,c=this.props.attachment.target;if(!c)return h.jsx(b("MercuryFallbackShareAttachmentSnippet.react"),babelHelpers["extends"]({},this.props));var d=c.title;c=c.app_name;this.props.isViewerSender?a=g._("You shared \"{music title}\" from {music servvice}.",[g._param("music title",d),g._param("music servvice",c)]):a=g._("{sender name} shared \"{music title}\" from {music servvice}.",[g._param("sender name",this.props.senderName),g._param("music title",d),g._param("music servvice",c)]);return h.jsx("span",{children:a})};return c}(h.PureComponent);a.propTypes={attachment:(c=b("prop-types")).object,isViewerSender:c.bool,senderName:c.oneOfType([c.string,c.object])};e.exports=a}),null);
__d("MercuryPaymentPlatformSnippet.react",["cx","ix","Image.react","MercuryShareAttachmentReactShape","React","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;a=(a=this.props)!=null?(a=a.attachment)!=null?(a=a.target)!=null?(a=a.payment_snippet)!=null?a.text:a:a:a:a;return!a?null:i.jsxs("span",{className:"uiIconText _3l6h",children:[i.jsx(b("Image.react"),{src:h("86988")}),a]})};return c}(i.Component);a.propTypes={attachment:b("MercuryShareAttachmentReactShape"),isSenderViewer:(c=b("prop-types")).bool,senderName:c.oneOfType([c.string,c.object])};e.exports=a}),null);
__d("MercuryPhotoShareSnippet.react",["cx","fbt","ix","Image.react","React","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.isViewerSender?h._("You sent a photo."):h._("{sender name} sent a photo.",[h._param("sender name",this.props.senderName)]);return j.jsxs("span",{className:"uiIconText _3l6h",children:[j.jsx(b("Image.react"),{src:i("81849")}),a]})};return c}(j.Component);a.propTypes={isViewerSender:(c=b("prop-types")).bool,senderName:c.oneOfType([c.string,c.object])};e.exports=a}),null);
__d("MercuryPromotionShareAttachmentSnippet.react",["cx","fbt","ix","Image.react","React"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a,c=this.props.attachment,d=c&&c.target,e;a=(a=c)!=null?(a=a.style_list)!=null?a[0]:a:a;this.props.isViewerSender!=null?e=h._("You sent an attachment."):e=h._("{sender name} sent an attachment.",[h._param("sender name",this.props.senderName)]);a==="instant_games_leaderboard_update"&&(e=c.title);c=(a=d==null?void 0:d.message)!=null?a:e;return j.jsxs("span",{className:"uiIconText _3l6h",children:[j.jsx(b("Image.react"),{src:i("86988")}),c]})};return c}(j.Component);e.exports=a}),null);
__d("MercurySaleGroupProductItemShareSnippet.react",["cx","fbt","ix","Image.react","React","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.isViewerSender?h._("You sent a for sale item."):h._("{sender name} sent a for sale item.",[h._param("sender name",this.props.senderName)]);return j.jsxs("span",{className:"uiIconText _3l6h",children:[j.jsx(b("Image.react"),{src:i("86988")}),a]})};return c}(j.Component);a.propTypes={isViewerSender:(c=b("prop-types")).bool,senderName:c.oneOfType([c.string,c.object])};e.exports=a}),null);
__d("MercuryVideoShareSnippet.react",["cx","fbt","ix","Image.react","React","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.isViewerSender?h._("You sent a video."):h._("{sender name} sent a video.",[h._param("sender name",this.props.senderName)]);return j.jsxs("span",{className:"uiIconText _3l6h",children:[j.jsx(b("Image.react"),{src:i("82423")}),a]})};return c}(j.Component);a.propTypes={isViewerSender:(c=b("prop-types")).bool,senderName:c.oneOfType([c.string,c.object])};e.exports=a}),null);
__d("MercuryWECAttachmentSnippet.react",["cx","fbt","ix","Image.react","MercuryShareAttachmentReactShape","React","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){if(this.props.attachment.subattachments.length===0||this.props.attachment.subattachments[0].target===null||this.props.attachment.subattachments[0].target===void 0)return null;var a=this.props.attachment.subattachments[0].target.attach_type;if(a=="photo"){a=this.props.isViewerSender?h._({"*":"You sent {number} photos .","_1":"You sent 1 photo ."},[h._plural(this.props.attachment.subattachments.length,"number",this.props.attachment.subattachments.length===1?"a":this.props.attachment.subattachments.length.toString())]):h._({"*":"{sender name} sent {number} photos.","_1":"{sender name} sent 1 photo."},[h._param("sender name",this.props.senderName),h._plural(this.props.attachment.subattachments.length,"number",this.props.attachment.subattachments.length===1?"a":this.props.attachment.subattachments.length.toString())]);return j.jsxs("span",{className:"uiIconText _3l6h",children:[j.jsx(b("Image.react"),{src:i("81849")}),a]})}return null};return c}(j.Component);a.propTypes={isViewerSender:(c=b("prop-types")).bool,senderName:c.oneOfType([c.string,c.object]),attachment:b("MercuryShareAttachmentReactShape")};e.exports=a}),null);
__d("MessengerLightweightActionSnippet.react",["cx","MercuryShareAttachmentReactShape","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return h.jsx("span",{className:"_3l6h",children:this.props.attachment.title})};return b}(h.PureComponent);a.propTypes={attachment:b("MercuryShareAttachmentReactShape")};e.exports=a}),null);
__d("MessengerMomentsAppSnippet.react",["cx","ix","Image.react","MercuryShareAttachmentReactShape","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.attachment;return!a||!a.target?null:i.jsxs("span",{className:"uiIconText _3l6h",children:[i.jsx(b("Image.react"),{src:h("86988")}),a.target.snippet]})};return c}(i.Component);a.propTypes={attachment:b("MercuryShareAttachmentReactShape")};e.exports=a}),null);
__d("NeoKidInitiateFriendingMercuryShareAttachmentSnippet.react",["fbt","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){var a=this.props.isViewerSender?g._("You sent a contact request."):g._("{sender name} sent a contact request.",[g._param("sender name",this.props.senderName)]);return h.jsx("span",{children:a})};return b}(h.Component);e.exports=a}),null);
__d("MercuryAttachmentSnippetType",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,SHARE:null,ERROR:null,MIXED:null,GIFT:null,THIRDPARTYSTICKER:null,FILE:null,LIKE_STICKER:null});e.exports=a}),null);
__d("MercuryGiftSnippetRenderer",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={renderText:function(a,b){return a?g._("You sent a valentine."):g._("{name} sent a valentine.",[g._param("name",b)])}};e.exports=a}),null);
__d("P2PSnippetStringUtils",["fbt"],(function(a,b,c,d,e,f,g){a={getRequestCanceledSnippet:function(a,b,c,d,e){if(a)return g._("Your request for {payment request amount} from {receiver's name} was canceled.",[g._param("payment request amount",e),g._param("receiver's name",d)]);else if(b)return g._("{requester's name}'s request for {payment request amount} was canceled.",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{requester's name}'s request for {payment request amount} from {receiver's name} was canceled.",[g._param("requester's name",c),g._param("payment request amount",e),g._param("receiver's name",d)])},getRequestDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver's name} declined your request for {payment request amount}.",[g._param("receiver's name",d),g._param("payment request amount",e)]);else if(b)return g._("You declined {requester's name}'s request for {payment request amount}.",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{receiver's name} declined {sender's name}'s request for {payment request amount}.",[g._param("receiver's name",d),g._param("sender's name",c),g._param("payment request amount",e)])},getRequestSentSnippet:function(a,b,c,d,e){if(a)return g._("You requested {amount} from {requestee name}.",[g._param("amount",e),g._param("requestee name",d)]);else if(b)return g._("{requester name} requested {amount} from you.",[g._param("requester name",c),g._param("amount",e)]);else return g._("{name} requested {amount} from {requestee name}.",[g._param("name",c),g._param("amount",e),g._param("requestee name",d)])},getRequestSnippetByStatus:function(a,b,c,d,e,f){a=a||1;b=[b,c,d,e,f];switch(a){case 2:return this.getRequestDeclinedSnippet.apply(this,b);case 5:case 6:return this.getRequestCanceledSnippet.apply(this,b)}return this.getRequestSentSnippet.apply(this,b)},getTransferCanceledSnippet:function(a,b,c,d,e){if(a)return g._("Your {amount} payment to {receiver_name} was canceled.",[g._param("amount",e),g._param("receiver_name",d)]);else if(b)return g._("{sender name}'s {amount} payment was canceled.",[g._param("sender name",c),g._param("amount",e)]);else return g._("{sender_name}'s {amount} payment to {receiver_name} was canceled.",[g._param("sender_name",c),g._param("amount",e),g._param("receiver_name",d)])},getTransferDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver_name} didn't accept your {amount} payment.",[g._param("receiver_name",d),g._param("amount",e)]);else if(b)return g._("You didn't accept {sender name}'s {amount} payment.",[g._param("sender name",c),g._param("amount",e)]);else return g._("{receiver_name} didn't accept {sender_name}'s {amount} payment.",[g._param("receiver_name",d),g._param("sender_name",c),g._param("amount",e)])},getTransferSentSnippet:function(a,b,c,d,e){if(a)return g._("You sent {receiver name} {amount}.",[g._param("receiver name",d),g._param("amount",e)]);else if(b)return g._("{name} sent you {amount}.",[g._param("name",c),g._param("amount",e)]);else return g._("{sender name} sent {receiver name} {amount}.",[g._param("sender name",c),g._param("receiver name",d),g._param("amount",e)])},getTransferSnippetByStatus:function(a,b,c,d,e,f){b=[b,c,d,e,f];c=a||15;switch(c){case 5:return this.getTransferDeclinedSnippet.apply(this,b);case 3:case 10:case 11:case 12:case 16:return this.getTransferCanceledSnippet.apply(this,b)}return this.getTransferSentSnippet.apply(this,b)}};e.exports=a}),null);
__d("MercuryAttachmentSnippetRenderer",["fbt","CurrentUser","MercuryAttachmentSnippetType","MercuryAudioType","MercuryGiftSnippetRenderer","MessengerLightweightActionUtils","P2PSnippetStringUtils","StickerConstants"],(function(a,b,c,d,e,f,g){"use strict";a={getAttachmentSnippetType:function(a){if(this._hasOnlyPhotos(a))return b("MercuryAttachmentSnippetType").PHOTO;if(this._hasOnlyAnimatedImages(a))return b("MercuryAttachmentSnippetType").GIF;if(this._hasOnlyVideo(a))return b("MercuryAttachmentSnippetType").VIDEO;if(this._hasAudioClip(a))return b("MercuryAttachmentSnippetType").AUDIO_CLIP;if(this._hasLikeSticker(a))return b("MercuryAttachmentSnippetType").LIKE_STICKER;if(this._hasSticker(a))return b("MercuryAttachmentSnippetType").STICKER;if(this._hasThirdPartySticker(a))return b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER;if(this._hasShare(a))return b("MercuryAttachmentSnippetType").SHARE;if(this._hasGift(a))return b("MercuryAttachmentSnippetType").GIFT;if(this._hasError(a))return b("MercuryAttachmentSnippetType").ERROR;return this._hasFile(a)?b("MercuryAttachmentSnippetType").FILE:b("MercuryAttachmentSnippetType").MIXED},renderAttachmentSnippetText:function(a,c,d,e){switch(a){case b("MercuryAttachmentSnippetType").PHOTO:return this._renderPhotoAttachmentSnippetText(c,d,this._getPhotoAttachments(e));case b("MercuryAttachmentSnippetType").GIF:return this._renderAnimatedImagesAttachmentSnippetText(c,d,this._getAnimatedImageAttachments(e));case b("MercuryAttachmentSnippetType").VIDEO:return c?g._("You sent a video."):g._("{sender name} sent a video.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").AUDIO_CLIP:return c?g._("You sent a voice message."):g._("{name} sent a voice message.",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").STICKER:case b("MercuryAttachmentSnippetType").LIKE_STICKER:case b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER:return c?g._("You sent a sticker."):g._("{name} sent a sticker.",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").SHARE:if(e&&this._hasP2PPayment(e))return this._renderP2PPaymentSnippetText(e[0]);if(e&&this._hasP2PPaymentRequest(e))return this._renderP2PPaymentRequestSnippetText(e[0]);if(e&&this._hasBusinessMessage(e))return this._renderBusinessMessageSnippetText(e[0],d);if(e&&this._hasLocation(e))return c?g._("You sent a location."):g._("{sender name} sent a location.",[g._param("sender name",d)]);if(e&&this._hasLiveLocation(e))return c?g._("You sent a live location."):g._("{sender name} sent a live location.",[g._param("sender name",d)]);if(e&&this._hasMontageDirect(e)){a=e[0];a=(a=a)!=null?(a=a.share)!=null?(a=a.media)!=null?a.source:a:a:a;return c?a?g._("You sent a video."):g._("You sent a photo."):a?g._("View {sender name}'s disappearing video.",[g._param("sender name",d)]):g._("View {sender name}'s disappearing photo.",[g._param("sender name",d)])}if(e&&e.length===1&&b("MessengerLightweightActionUtils").isLWAAttachment(e[0]))return b("MessengerLightweightActionUtils").getLWASnippetText(e);return e&&e.length===1&&this._isGloballyRemovedMessageAttachment(e[0])?e[0].share.description:c?g._("You sent a link."):g._("{sender name} sent a link.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").GIFT:return b("MercuryGiftSnippetRenderer").renderText(c,d);case b("MercuryAttachmentSnippetType").FILE:return c?g._("You sent an attachment."):g._("{sender name} sent an attachment.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").MIXED:return c?g._("You sent some attachments."):g._("{sender name} sent some attachments.",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").ERROR:return c?g._("You sent an attachment."):g._("{sender name} sent an attachment.",[g._param("sender name",d)]);default:return""}},_isGloballyRemovedMessageAttachment:function(a){return a.share&&a.share.style_list&&a.share.style_list.includes("globally_deleted_message_placeholder")},_hasOnlyPhotos:function(a){return this._getPhotoAttachments(a).length===a.length},_hasThirdPartySticker:function(a){return a.length===1&&a[0].attach_type==="third_party_sticker"},_hasOnlyAnimatedImages:function(a){return this._getAnimatedImageAttachments(a).length===a.length},_hasOnlyVideo:function(a){return a.length===1&&a[0].attach_type==="video"},_hasAudioClip:function(a){var c=a[0].metadata&&a[0].metadata.type;return a.length===1&&(c===b("MercuryAudioType").AudioClip||c===b("MercuryAudioType").VoiceMessageWithTranscript)},_hasBusinessMessage:function(a){return this._hasSingleShareAttachmentOfStyle(a,"business_message_items")},_hasSticker:function(a){return a.length===1&&a[0].attach_type==="sticker"},_hasLikeSticker:function(a){if(a.length<1)return!1;var c=a[0].metadata&&a[0].metadata.stickerID;return a.length===1&&(c==b("StickerConstants").LIKE_STICKER_ID||c==b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||c==b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID||c==b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID)},_hasLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,"message_location")},_hasLiveLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,"message_live_location")},_hasMontageDirect:function(a){return this._hasSingleShareAttachmentOfStyle(a,"montage_direct")},_hasP2PPayment:function(a){return this._hasSingleShareAttachmentOfStyle(a,"orion")},_hasP2PPaymentRequest:function(a){return this._hasSingleShareAttachmentOfStyle(a,"orion_request")},_hasSingleShareAttachmentOfStyle:function(a,b){return a.length===1&&a[0].attach_type==="share"&&a[0].share&&a[0].share.style_list.indexOf(b)>=0},_hasShare:function(a){return a.length===1&&a[0].attach_type==="share"},_hasError:function(a){return a.length===1&&a[0].attach_type==="error"},_hasGift:function(a){return a.length===1&&a[0].attach_type==="gift"},_hasFile:function(a){return a.length===1&&a[0].attach_type==="file"},_getPhotoAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type==="photo"})},_getAnimatedImageAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type==="animated_image"})},_renderPhotoAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("You sent a photo.");else return g._("{name} sent a photo.",[g._param("name",b)]);else if(a)return g._({"*":"You sent {num_photos} photos."},[g._param("num_photos",c.length,[0])]);else return g._({"*":"{name} sent {num_photos} photos."},[g._param("name",b),g._param("num_photos",c.length,[0])])},_renderAnimatedImagesAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("You sent a GIF.");else return g._("{name} sent a GIF.",[g._param("name",b)]);else if(a)return g._("You sent {num_animated_images} GIFs.",[g._param("num_animated_images",c.length)]);else return g._("{name} sent {num_animated_images} GIFs.",[g._param("name",b),g._param("num_animated_images",c.length)])},_renderBusinessMessageSnippetText:function(a,b){a=a.share.target;a=a&&a.message||g._("{sender name} sent an attachment.",[g._param("sender name",b)]);return a},_renderP2PPaymentSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentSnippetText(b("CurrentUser").getID()===a.sender.id,a.sender.name,a.amountWithSymbol,a.status,b("CurrentUser").getID()===a.receiver.id,a.receiver.name)},_renderP2PPaymentRequestSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentRequestSnippetText(b("CurrentUser").getID()===a.requester.id,a.requester.name,a.amountWithSymbol,a.currentStatus,b("CurrentUser").getID()===a.requestee.id,a.requestee.name)},renderP2PPaymentSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getTransferSnippetByStatus(e,a,f||!1,c||"",g||"",d)},renderP2PPaymentRequestSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getRequestSnippetByStatus(e,a,f||!1,c||"",g||"",d)}};e.exports=a}),null);
__d("P2PMercuryAttachmentSnippetRendererBase.react",["cx","ix","Image.react","React","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return i.jsxs("span",{className:"uiIconText _3l6h _3_io",children:[i.jsx(b("Image.react"),{height:12,src:h("94348"),width:12}),this.props.text]})};return c}(i.Component);a.propTypes={text:b("prop-types").node};e.exports=a}),null);
__d("P2PMercuryAttachmentSnippet.react",["CurrentUser","MercuryAttachmentSnippetRenderer","P2PMercuryAttachmentSnippetRendererBase.react","React","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MercuryAttachmentSnippetRenderer").renderP2PPaymentSnippetText(b("CurrentUser").getID()===this.props.sender.id,this.props.sender.name,this.props.amountWithSymbol,this.props.status,b("CurrentUser").getID()===this.props.receiver.id,this.props.receiver.name);return g.jsx(b("P2PMercuryAttachmentSnippetRendererBase.react"),{text:a})};return c}(g.Component);a.propTypes={amountWithSymbol:(c=b("prop-types")).string,receiver:c.object,sender:c.object,status:c.number};a.defaultProps={sender:{},receiver:{}};e.exports=a}),null);
__d("P2PMercuryShareAttachmentSnippet.react",["MercuryShareAttachmentReactShape","P2PMercuryAttachmentSnippet.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.attachment?this.props.attachment.target:{};return g.jsx(b("P2PMercuryAttachmentSnippet.react"),babelHelpers["extends"]({},a))};return c}(g.Component);a.propTypes={attachment:b("MercuryShareAttachmentReactShape")};e.exports=a}),null);
__d("P2PPaymentRequestMercuryAttachmentSnippet.react",["CurrentUser","MercuryAttachmentSnippetRenderer","P2PMercuryAttachmentSnippetRendererBase.react","React","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MercuryAttachmentSnippetRenderer").renderP2PPaymentRequestSnippetText(b("CurrentUser").getID()===this.props.requester.id,this.props.requester.name,this.props.formattedAmount,this.props.status,b("CurrentUser").getID()===this.props.requestee.id,this.props.requestee.name);return g.jsx(b("P2PMercuryAttachmentSnippetRendererBase.react"),{text:a})};return c}(g.Component);a.propTypes={formattedAmount:(c=b("prop-types")).string.isRequired,requestee:c.object.isRequired,requester:c.object.isRequired,status:c.number.isRequired};e.exports=a}),null);
__d("P2PPaymentRequestMercuryShareAttachmentSnippet.react",["P2PMercuryAttachmentSnippetRendererBase.react","P2PPaymentRequestMercuryAttachmentSnippet.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.attachment,c=a.target;return!c?g.jsx(b("P2PMercuryAttachmentSnippetRendererBase.react"),{text:a.title}):g.jsx(b("P2PPaymentRequestMercuryAttachmentSnippet.react"),{formattedAmount:c.amountWithSymbol,requestee:c.requestee,requester:c.requester,status:c.currentStatus})};return c}(g.Component);e.exports=a}),null);
__d("MercuryShareStyleMap",["cx","requireCond","CurrentUser","JSResource","MercuryShareAttachmentRenderLocations","cr:1030824","emptyFunction","gkx","MercuryFallbackShareAttachmentSnippet.react","P2PMercuryShareAttachmentSnippet.react","P2PPaymentRequestMercuryShareAttachmentSnippet.react","MercuryPhotoShareSnippet.react","NeoKidInitiateFriendingMercuryShareAttachmentSnippet.react","MercuryInstantGameShareSnippet.react","MercuryPromotionShareAttachmentSnippet.react","MessengerMomentsAppSnippet.react","MercuryVideoShareSnippet.react","MercuryMessageLocationShareAttachmentSnippet.react","MercuryMessageLiveLocationShareAttachmentSnippet.react","MercuryAnimatedShareSnippet.react","MercurySaleGroupProductItemShareSnippet.react","MercuryPaymentPlatformSnippet.react","MercuryMusicIntegrationAttachmentSnippet.react","MercuryFundraiserShareSnippet.react","MercuryCrisisListingShareSnippet.react","MercuryMessengerInviteShareAttachmentSnippet.react","MessengerLightweightActionSnippet.react","MercuryLeadFormUserInfoShareAttachmentSnippet.react","MercuryWECAttachmentSnippet.react","MercuryMBirthdayReminderShareAttachmentSnippet.react","MercuryFormProgressShareAttachmentSnippet.react","ServicesGenericAdminTextAttachmentSnippet.react","MercuryMontageDirectShareSnippet.react"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map();h.set("fallback",{componentName:"MercuryFallbackShareAttachment.react",componentLoader:b("JSResource")("MercuryFallbackShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryFallbackShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]])});b("CurrentUser").isWorkUser()?h.set("event",{componentName:"MercuryWorkEventShareAttachment.react",componentLoader:b("JSResource")("MercuryWorkEventShareAttachment.react").__setRef("MercuryShareStyleMap")}):h.set("event",{componentName:"MercuryEventShareAttachment.react",componentLoader:b("JSResource")("MercuryEventShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryFallbackShareAttachmentSnippet.react")}});a={componentName:"P2PMercuryShareAttachmentContainer.react",componentLoader:b("JSResource")("P2PMercuryShareAttachmentContainer.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("P2PMercuryShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _3-50"]])};h.set("event_attendance_confirmation",{componentName:"MercuryEventAttendanceConfirmationAttachment.react",componentLoader:b("JSResource")("MercuryEventAttendanceConfirmationAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _7jp4"]]),getSnippetComponent:function(){return b("MercuryFallbackShareAttachmentSnippet.react")}});h.set("orion",a);if(b("gkx")("678645")){c={componentName:"P2PServerDrivenMercuryShareAttachmentContainer.react",componentLoader:b("JSResource")("P2PServerDrivenMercuryShareAttachmentContainer.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryFallbackShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _3-50"]])};h.set("PAYMENT_BUBBLE_VIEW",c);h.set("p2p_server_bubble",c)}h.set("orion_request",{componentName:"P2PPaymentRequestMercuryShareAttachmentContainer.react",componentLoader:b("JSResource")("P2PPaymentRequestMercuryShareAttachmentContainer.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("P2PPaymentRequestMercuryShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _3-50"]])});h.set("insights_chart",{componentName:"MercuryImageShareAttachment.react",componentLoader:b("JSResource")("MercuryImageShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPhotoShareSnippet.react")},unwrapInStory:b("emptyFunction").thatReturnsTrue});h.set("retail_receipt",{componentName:"MNCommerceReceiptMercuryShareAttachment.react",componentLoader:b("JSResource")("MNCommerceReceiptMercuryShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d"]])});h.set("neo_draw_and_guess_game_request",{componentName:"NeoDrawAndGuessRequestMercuryShareAttachment.react",componentLoader:b("JSResource")("NeoDrawAndGuessRequestMercuryShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_205d _4p_r _5i_d"]])});h.set("NEO_INVITATION",{componentName:"NeoInvitationMercuryShareAttachment.react",componentLoader:b("JSResource")("NeoInvitationMercuryShareAttachment.react").__setRef("MercuryShareStyleMap")});h.set("parent_approved_plain_text_bot_message",{componentName:"ParentApprovedPlainTextBotMessageMercuryShareAttachment.react",componentLoader:b("JSResource")("ParentApprovedPlainTextBotMessageMercuryShareAttachment.react").__setRef("MercuryShareStyleMap")});h.set("NEO_KID_INITIATE_FRIENDING",{componentName:"NeoKidInitiateFriendingMercuryShareAttachment.react",componentLoader:b("JSResource")("NeoKidInitiateFriendingMercuryShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("NeoKidInitiateFriendingMercuryShareAttachmentSnippet.react")}});h.set("retail_cancellation",{componentName:"MNCommerceCancelationMercuryShareAttachment.react",componentLoader:b("JSResource")("MNCommerceCancelationMercuryShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d"]])});h.set("retail_shipment",{componentName:"MNCommerceRetailShipmentShareAttachment.react",componentLoader:b("JSResource")("MNCommerceRetailShipmentShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d"]])});h.set("retail_shipment_tracking_event",{componentName:"MNCommerceShipmentTrackingEventShareAttachment.react",componentLoader:b("JSResource")("MNCommerceShipmentTrackingEventShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d"]])});h.set("retail_now_in_stock",{componentName:"MNCommerceProductSubscriptionMercuryShareAttachment.react",componentLoader:b("JSResource")("MNCommerceProductSubscriptionMercuryShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d"]])});h.set("retail_promotion",{componentName:"MNCommercePromotionMercuryShareAttachment.react",componentLoader:b("JSResource")("MNCommercePromotionMercuryShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d _28rg"]])});b("gkx")("678262")&&(h.set("instant_games_share_message",{componentName:"MessengerGamesShareAttachment.react",componentLoader:b("JSResource")("MessengerGamesShareContainer.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryInstantGameShareSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _4niv _205d _28rg"]])}),h.set("instant_games_share_score_message",{componentName:"MessengerGamesScoreShareContainer.react",componentLoader:b("JSResource")("MessengerGamesScoreShareContainer.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _4niv _205d _28rg"]])}),h.set("instant_games_custom_update",{componentName:"MessengerGamesScoreShareContainer.react",componentLoader:b("JSResource")("MessengerGamesScoreShareContainer.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryInstantGameShareSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _4niv _205d _28rg"]])}));h.set("mobile_game_thread_share",{componentName:"MessengerMobileGameThreadShareMessage.react",componentLoader:b("JSResource")("MessengerMobileGameThreadShareMessage.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryInstantGameShareSnippet.react")}});h.set("retail_item",{componentName:"MNCommercePromotionMercuryShareAttachment.react",componentLoader:b("JSResource")("MNCommercePromotionMercuryShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d _28rg"]])});h.set("business_message_items",{componentName:"MNCommercePromotionMercuryShareAttachment.react",componentLoader:b("JSResource")("MNCommercePromotionMercuryShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPromotionShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d _28rg"]])});h.set("messenger_platform_media_attachment",{componentName:"MNCommercePromotionMercuryShareAttachment.react",componentLoader:b("JSResource")("MNCommercePromotionMercuryShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPromotionShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_205d _28rg _4jj7"]])});h.set("h_scroll",{componentName:"MNCommerceHScrollMessageAttachment.react",componentLoader:b("JSResource")("MNCommerceHScrollMessageAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPromotionShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d _8ka"]])});h.set("messenger_platform_compact_item",{componentName:"MessengerPlatformVerticalListItemAttachment.react",componentLoader:b("JSResource")("MessengerPlatformVerticalListItemAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPromotionShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_205d _28rg"]])});h.set("messenger_platform_cover_item",{componentName:"MessengerPlatformVerticalListItemAttachment.react",componentLoader:b("JSResource")("MessengerPlatformVerticalListItemAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPromotionShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_205d _28rg"]])});h.set("messenger_platform_button_list",{componentName:"MNCommercePromotionMercuryShareAttachment.react",componentLoader:b("JSResource")("MNCommercePromotionMercuryShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPromotionShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_205d _28rg"]])});h.set("vertical_attachment_list",{componentName:"MessengerPlatformVerticalListAttachment.react",componentLoader:b("JSResource")("MessengerPlatformVerticalListAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPromotionShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_205d _5i_d _28rg"]])});h.set("ride_ordered",{componentName:"MercuryFallbackShareAttachment.react",componentLoader:b("JSResource")("MercuryFallbackShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryFallbackShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]])});h.set("living_room",{componentName:"MercuryLivingRoomShareAttachment.react",componentLoader:b("JSResource")("MercuryLivingRoomShareAttachment.react").__setRef("MercuryShareStyleMap"),unwrapInStory:b("emptyFunction").thatReturnsTrue});h.set("ride_receipt",{componentName:"MercuryFallbackShareAttachment.react",componentLoader:b("JSResource")("MercuryFallbackShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryFallbackShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]])});h.set("airline_update",{componentName:"MNAirlineUpdateMercuryAttachment.react",componentLoader:b("JSResource")("MNAirlineUpdateMercuryAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d _8kb"]])});h.set("airline_itinerary",{componentName:"MNAirlineItineraryMercuryAttachment.react",componentLoader:b("JSResource")("MNAirlineItineraryMercuryAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d _8kb"]])});h.set("airline_checkin_reminder",{componentName:"MNAirlineCheckInMercuryAttachment.react",componentLoader:b("JSResource")("MNAirlineCheckInMercuryAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d _8kb"]])});h.set("airline_boarding_pass",{componentName:"MNAirlineBoardingPassMercuryAttachment.react",componentLoader:b("JSResource")("MNAirlineBoardingPassMercuryAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d _8kb"]])});d={componentName:"MessengerMomentsAppShareAttachment.react",componentLoader:b("JSResource")("MessengerMomentsAppShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MessengerMomentsAppSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]])};h.set("moments_app_invitation",d);h.set("moments_app_photo_request",d);h.set("genie_message",{componentName:"GenieMessageShareAttachment.react",componentLoader:b("JSResource")("GenieMessageShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_2wrf"]]),getSnippetComponent:function(){return b("MercuryFallbackShareAttachmentSnippet.react")}});h.set("movie_bot_movie_list",{componentName:"MovieBotMovieListShareAttachment.react",componentLoader:b("JSResource")("MovieBotMovieListShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]])});h.set("movie_bot_movie_showtime_list",{componentName:"MovieBotMovieShowtimeListShareAttachment.react",componentLoader:b("JSResource")("MovieBotMovieShowtimeListShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]])});h.set("share_large_image",{componentName:"MercuryShareLargeImageAttachment.react",componentLoader:b("JSResource")("MercuryShareLargeImageAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPhotoShareSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]]),unwrapInStory:b("emptyFunction").thatReturnsTrue});b("CurrentUser").isWorkUser()?h.set("image_share",{componentName:"MercuryImageShareAttachment.react",componentLoader:b("JSResource")("MercuryImageShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPhotoShareSnippet.react")}}):h.set("image_share",{componentName:"MercuryImageShareAttachment.react",componentLoader:b("JSResource")("MercuryImageShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPhotoShareSnippet.react")},unwrapInStory:b("emptyFunction").thatReturnsTrue});b("CurrentUser").isWorkUser()?(h.set("photo_link_share",{componentName:"MercuryImageShareAttachment.react",componentLoader:b("JSResource")("MercuryImageShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPhotoShareSnippet.react")}}),h.set("video",{componentName:"MercuryStoryShareAttachment.react",componentLoader:b("JSResource")("MercuryStoryShareAttachment.react").__setRef("MercuryShareStyleMap")})):h.set("video",{componentName:"MercuryVideoShareAttachment.react",componentLoader:b("JSResource")("MercuryVideoShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryVideoShareSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_3duc"]]),unwrapInStory:b("emptyFunction").thatReturnsTrue});h.set("message_location",{componentName:"MercuryMessageLocationShareAttachment.react",componentLoader:b("JSResource")("MercuryMessageLocationShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryMessageLocationShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]])});h.set("message_live_location",{componentName:"MercuryMessageLiveLocationShareAttachment.react",componentLoader:b("JSResource")("MercuryMessageLiveLocationShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryMessageLiveLocationShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]])});h.set("animated_image_share",{componentName:"MercuryAnimatedShareAttachment.react",componentLoader:b("JSResource")("MercuryAnimatedShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryAnimatedShareSnippet.react")},unwrapInStory:b("emptyFunction").thatReturnsFalse});h.set("group_sell_product_item",{componentName:"MercurySaleGroupProductItemShareAttachment.react",componentLoader:b("JSResource")("MercurySaleGroupProductItemShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercurySaleGroupProductItemShareSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]]),unwrapInStory:b("emptyFunction").thatReturnsTrue});h.set("commerce_attachment",{componentName:"MercurySaleGroupProductItemShareAttachment.react",componentLoader:b("JSResource")("MercurySaleGroupProductItemShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercurySaleGroupProductItemShareSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]]),unwrapInStory:b("emptyFunction").thatReturnsTrue});h.set("commerce_product_item",{componentName:"MercuryCommerceProductItemShareAttachment.react",componentLoader:b("JSResource")("MercuryCommerceProductItemShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryFallbackShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]]),unwrapInStory:b("emptyFunction").thatReturnsTrue});h.set("payment_platform",{componentName:"MercuryPaymentPlatformShareAttachment.react",componentLoader:b("JSResource")("MercuryPaymentPlatformShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPaymentPlatformSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]])});h.set("financial_bill_payment_request",{componentName:"MNBillPaymentRequestMercuryShareAttachment.react",componentLoader:b("JSResource")("MNBillPaymentRequestMercuryShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _205d"]])});h.set("music_aggregation",{componentName:"MercuryMusicAttachment.react",componentLoader:b("JSResource")("MercuryMusicAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryMusicIntegrationAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _4p_r"]])});h.set("video_share_youtube",{componentName:"MercuryVideoShareYoutubeAttachment.react",componentLoader:b("JSResource")("MercuryVideoShareYoutubeAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]])});h.set("rtc_call_log",{componentName:"MercuryRTCShareAttachment.react",componentLoader:b("JSResource")("MercuryRTCShareAttachment.react").__setRef("MercuryShareStyleMap")});h.set("fundraiser_person_for_person",{componentName:"MercuryFundraiserAttachment.react",componentLoader:b("JSResource")("MercuryFundraiserAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryFundraiserShareSnippet.react")}});h.set("fundraiser_person_to_charity",{componentName:"MercuryFundraiserAttachment.react",componentLoader:b("JSResource")("MercuryFundraiserAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryFundraiserShareSnippet.react")}});h.set("crisis_listing",{componentName:"MercuryCrisisListingAttachment.react",componentLoader:b("JSResource")("MercuryCrisisListingAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryCrisisListingShareSnippet.react")}});h.set("messenger_team_bot_share",{componentName:"MessengerTeamBotShareAttachment.react",componentLoader:b("JSResource")("MessengerTeamBotShareAttachment.react").__setRef("MercuryShareStyleMap")});h.set("messenger_invite",{componentName:"MercuryMessengerInviteShareAttachment.react",componentLoader:b("JSResource")("MercuryMessengerInviteShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_3thf"]]),getSnippetComponent:function(){return b("MercuryMessengerInviteShareAttachmentSnippet.react")},unwrapInStory:b("emptyFunction").thatReturnsTrue});h.set("high_school_community_invite",{componentName:"MercuryHighSchoolCommunityInviteAttachment.react",componentLoader:b("JSResource")("MercuryHighSchoolCommunityInviteAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_3y64"]]),unwrapInStory:b("emptyFunction").thatReturnsTrue});h.set("pages_platform_booking_message",{componentName:"PagesPlatformBookingMessageAttachment.react",componentLoader:b("JSResource")("PagesPlatformBookingMessageAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _3fk6"]]),unwrapInStory:b("emptyFunction").thatReturnsTrue});h.set("friend_request",{componentName:"MercuryMessengerFriendRequestAttachment.react",componentLoader:b("JSResource")("MercuryMessengerFriendRequestAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]]),unwrapInStory:b("emptyFunction").thatReturnsTrue});h.set("cultural_moment_holiday_card",{componentName:"MercuryCulturalMomentHolidayCardAttachment.react",componentLoader:b("JSResource")("MercuryCulturalMomentHolidayCardAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_3duc"]]),unwrapInStory:b("emptyFunction").thatReturnsTrue});h.set("pages_platform_lead_gen",{componentName:"PagesPlatformLeadGenMercuryShareAttachmentContainer.react",componentLoader:b("JSResource")("PagesPlatformLeadGenMercuryShareAttachmentContainer.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_b4_"]]),unwrapInStory:b("emptyFunction").thatReturnsTrue});h.set("lightweight_action",{componentName:"MessengerLightweightActionAttachment.react",componentLoader:b("JSResource")("MessengerLightweightActionAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MessengerLightweightActionSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]])});h.set("job_search_job_application",{componentName:"JobApplicationMessageBubbleWrapperContainer.react",componentLoader:b("JSResource")("JobApplicationMessageBubbleWrapperContainer.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _1zrz"]]),unwrapInStory:b("emptyFunction").thatReturnsTrue});h.set("page_messenger_attachment",{componentName:"PageMessengerShareAttachment.react",componentLoader:b("JSResource")("PageMessengerShareAttachment.react").__setRef("MercuryShareStyleMap")});h.set("lead_form_user_info",{componentName:"MercuryLeadFormUserInfoShareAttachment.react",componentLoader:b("JSResource")("MercuryLeadFormUserInfoShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryLeadFormUserInfoShareAttachmentSnippet.react")}});h.set("ICE_BREAKER",{componentName:"MercuryIceBreakerMessageShareAttachment.react",componentLoader:b("JSResource")("MercuryIceBreakerMessageShareAttachment.react").__setRef("MercuryShareStyleMap")});h.set("wec_message",{componentName:"MercuryWECMessageAttachment.react",componentLoader:b("JSResource")("MercuryWECMessageAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryWECAttachmentSnippet.react")}});h.set("m_birthday_reminder",{componentName:"MercuryMBirthdayReminderShareAttachment.react",componentLoader:b("JSResource")("MercuryMBirthdayReminderShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryMBirthdayReminderShareAttachmentSnippet.react")}});h.set("personal_reminder",{componentName:"MercuryMPersonalReminderShareAttachment.react",componentLoader:b("JSResource")("MercuryMPersonalReminderShareAttachment.react").__setRef("MercuryShareStyleMap")});h.set("personal_reminder_list",{componentName:"MercuryMPersonalRemindersListShareAttachment.react",componentLoader:b("JSResource")("MercuryMPersonalRemindersListShareAttachment.react").__setRef("MercuryShareStyleMap")});h.set("article_message",{componentName:"MercuryArticleMessageShareAttachment.react",componentLoader:b("JSResource")("MercuryArticleMessageShareAttachment.react").__setRef("MercuryShareStyleMap"),cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]])});h.set("messenger_form_progress_attachment",{componentName:"MercuryFormProgressShareAttachment.react",componentLoader:b("JSResource")("MercuryFormProgressShareAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryFormProgressShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d"]])});h.set("services_generic_admin_text",{componentName:"ServicesGenericAdminTextAttachment.react",componentLoader:b("JSResource")("ServicesGenericAdminTextAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("ServicesGenericAdminTextAttachmentSnippet.react")}});h.set("fbpay_offer",{componentName:"MecuryMessageOfferShareAttachment.react",componentLoader:b("JSResource")("MecuryMessageOfferShareAttachment.react").__setRef("MercuryShareStyleMap")});b("CurrentUser").isWorkUser()&&h.set("joinable_call",{componentName:"WorkChatCallAttachment.react",componentLoader:b("JSResource")("WorkChatCallAttachment.react").__setRef("MercuryShareStyleMap")});b("CurrentUser").isWorkUser()&&(b("gkx")("1237084")?h.set("attached_story",{componentName:"WorkChatStoryShareAttachment.react",componentLoader:b("JSResource")("WorkChatStoryShareAttachment.react").__setRef("MercuryShareStyleMap")}):h.set("attached_story",{componentName:"MercuryStoryShareAttachment.react",componentLoader:b("JSResource")("MercuryStoryShareAttachment.react").__setRef("MercuryShareStyleMap")}));b("CurrentUser").isWorkUser()&&h.set("avatar",{componentName:"MercuryAvatarShareAttachment.react",componentLoader:b("JSResource")("MercuryAvatarShareAttachment.react").__setRef("MercuryShareStyleMap")});b("CurrentUser").isWorkUser()&&h.set("unavailable",{componentName:"MercuryUnavailableShareAttachment.react",componentLoader:b("JSResource")("MercuryUnavailableShareAttachment.react").__setRef("MercuryShareStyleMap")});h.set("montage_direct",{componentName:"MontageDirectAttachment.react",componentLoader:b("JSResource")("MontageDirectAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryMontageDirectShareSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_1ti9"]])});h.set("mentorship_curriculum_step",{componentName:"MentorshipCurriculumStepShareAttachment.react",componentLoader:b("JSResource")("MentorshipCurriculumStepShareAttachment.react").__setRef("MercuryShareStyleMap")});h.set("marketplace_generic_admin_text",{componentName:"MarketplaceGenericAdminTextAttachment.react",componentLoader:b("JSResource")("MarketplaceGenericAdminTextAttachment.react").__setRef("MercuryShareStyleMap")});h.set("mentorship_discussion_topic_set",{componentName:"MentorshipDiscussionTopicSetAttachment.react",componentLoader:b("JSResource")("MentorshipDiscussionTopicSetAttachment.react").__setRef("MercuryShareStyleMap")});h.set("mentorship_h_scroll",{componentName:"MentorshipHScrollAttachment.react",componentLoader:b("JSResource")("MentorshipHScrollAttachment.react").__setRef("MercuryShareStyleMap"),getSnippetComponent:function(){return b("MercuryPromotionShareAttachmentSnippet.react")},cx:new Map([[b("MercuryShareAttachmentRenderLocations").MESSENGER,"_5i_d _7qm8 _7qmd"]])});h.set("mentorship_xma",{componentName:"MentorshipGenericXMAShareAttachment.react",componentLoader:b("JSResource")("MentorshipGenericXMAShareAttachment.react").__setRef("MercuryShareStyleMap")});b("CurrentUser").isWorkUser()&&b("gkx")("990297")&&h.set("file_upload",{componentName:"MercuryWorkContentAppShareAttachment.react",componentLoader:b("JSResource")("MercuryWorkContentAppShareAttachment.react").__setRef("MercuryShareStyleMap")});b("cr:1030824")!==null&&h.set("montage_share",b("cr:1030824"));f={getStyleFactory:function(a){if(!a||!a.style_list)return null;if(a.style_list[0]==="attached_story"){var b=a.subattachments,c=b&&b.length?b[0].style_list:[],d=c.length?this._getStyleMapEntry(c):null,e=b[0];if(Array.isArray(c)&&c.find(function(a){return a==="video"})){c={video_title:a.title,description:a.description,source:a.source};e=Object.assign({},b[0],c)}if(d&&d.unwrapInStory&&d.unwrapInStory())return{attachment:e,factory:d}}b=this._getStyleMapEntry(a.style_list);return!b?null:{attachment:a,factory:b}},_getStyleMapEntry:function(a){for(var b=0;b<a.length;b++){var c=h.get(a[b]);if(c)return c}return null}};e.exports=f}),null);
__d("MessengerErrorBoundary.react",["cx","fbt","ChatReliabilityInstrumentation","ErrorBoundary.react","LogHistory","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("LogHistory").getInstance("messenger_error_boundary"),k=function(a){return h._({"conversation list":"Could not display conversation list.","conversation":"Could not display conversation.","composer":"Could not display composer.","conversation information":"Could not display conversation information.","attachment":"Could not display attachment.","pinned conversation list":"Could not display pinned conversation list.","video":"Could not display video."},[h._enum(a,{"conversation list":"conversation list",conversation:"conversation",composer:"composer","conversation information":"conversation information",attachment:"attachment","pinned conversation list":"pinned conversation list",video:"video"})])},l=function(a,c){return function(){return i.jsx("div",{className:b("joinClasses")("_5jpt",c),children:a})}};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a,c){var e="React error in "+c+" got "+a.message;j.error(e,JSON.stringify(a));b("ChatReliabilityInstrumentation").logERROR(e);d.props.onHandleError&&d.props.onHandleError(a,c)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props,c=a.className,d=a.component;a=babelHelpers.objectWithoutPropertiesLoose(a,["className","component"]);return i.jsx(b("ErrorBoundary.react"),babelHelpers["extends"]({},a,{fallbackComponent:l(k(d),c),onHandleError:this.$1,bigRedBox:!0}))};return c}(i.Component);e.exports=a}),null);
__d("MercuryShareAttachment.react",["cx","BootloadedComponent.react","DOM","Event","FlexLayout.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MercuryShareStyleMap","MessengerErrorBoundary.react","React","ReactDOM","WorkChatRedesignedMessageListCheck.re","emptyFunction","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$3=function(a){d.$1(a),b("DOM").scry(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d)),"img").forEach(function(a){var c=b("Event").listen(a,"load",function(){d.$1(a.height),c.remove()})})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1()};d.$2=function(a,c){this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER&&!this.props.isSubattachment&&(c=b("joinClasses")((b("WorkChatRedesignedMessageListCheck.re").enabled?"":"_52mr")+" _2poz _ui9","_4skb",c));return h.jsxs("div",{className:c,children:[a,this.props.afterDecorators!=null&&this.props.afterDecorators.length>1?h.jsx(b("FlexLayout.react"),{align:"center",className:"_7moe",children:this.props.afterDecorators}):this.props.afterDecorators]})};d.render=function(){var a=b("MercuryShareStyleMap").getStyleFactory(this.props.attachment);if(!a)return null;var c=a.attachment;a=a.factory;return this.$2(h.jsx(b("MessengerErrorBoundary.react"),babelHelpers["extends"]({},this.props,{component:"attachment",children:h.createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({},this.props,{attachment:c,bootloadLoader:a.componentLoader,bootloadPlaceholder:h.jsx("div",{}),key:(c=this)!=null?(c=c.props)!=null?(c=c.attachment)!=null?c.share_id:c:c:c,module:a.componentName,onComponentLoad:this.$3}))})),a.cx&&a.cx.get(this.props.location))};d.$1=function(a){this.props.onComponentLoaded(a)};return c}(h.Component);a.propTypes={attachment:b("MercuryShareAttachmentReactShape"),isFromViewer:(c=b("prop-types")).bool,isPageMessage:c.bool,isSponsored:c.bool,isSubattachment:c.bool,isVisible:c.bool,location:c.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()),messageID:c.string,onComponentLoaded:c.func.isRequired,onSelect:c.func,pageID:c.string,threadID:c.string.isRequired,afterDecorators:c.array,timestamp:c.number,author:c.string};a.defaultProps={onComponentLoaded:b("emptyFunction")};e.exports=a}),null);
__d("MessengerErrorAttachment.react",["cx","fbt","CurrentUser","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.attachment.error_msg||h._("This attachment could not be loaded.");return i.jsx("div",{className:"_1o12 _52mr",children:i.jsxs("div",{className:"_1o13",children:[a,this.$1()]})})};d.$1=function(){return!this.props.attachment.error_msg&&b("CurrentUser").isEmployee()&&b("CurrentUser").hasWorkUser()&&!b("CurrentUser").isWorkUser()?i.jsx("div",{children:h._("It was probably meant for your \u0040workplace account.")}):null};return c}(i.PureComponent);e.exports=a}),null);
__d("MessengerFileAttachment.bs",["cx","React","Link.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a=a.attachment;var c=a.name;c=c==null?null:c;a=a.url;if(a==null)return null;else return h.jsxs(b("Link.react"),{className:"_4pcn _2uf4",href:a.toString(),target:"_blank",children:[h.jsx("div",{className:"_2uf5"}),c]})}c=a;f.make=c}),null);
__d("MessengerFileAttachment.re",["MessengerFileAttachment.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerFileAttachment.bs").make;f.make=a}),null);
__d("MessengerFromViewerUtils",["CurrentUser","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.author===b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID())}e.exports={isFromViewer:a}}),null);
__d("MessengerHotLikePreview.react",["cx","Animation","ChatConfig","CurrentUser","EmojiLikeConstants","HotLikeSound","MercuryShareAttachmentRenderLocations","MessengerDotComAndInboxM4Check.bs","MessengerHotLikeIconSVGM4React.bs","MessengerHotLikePreviewEvents","MessengerHotLikeSVGReact.re","MessengerHotLikeUtils","MessengerSupportedEmojiUtils","React","ReactDOM","StickerConstants","SubscriptionsHandler","gkx","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerHotLikeIconSVGM4React.bs").makeWithGradient,i=b("MessengerHotLikeSVGReact.re").make,j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$5=function(){d.$6=new(b("Animation"))(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d))),(!b("ChatConfig").getBool("chat_tab_has_gradients")||d.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER)&&(d.$7(-2,2,150,1e3),d.$7(-4,4,100,1e3),d.$7(-10,10,75,1e3)),d.$6.go()},d.$2=function(a,c){var e=c?b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION:b("MessengerHotLikePreviewEvents").FINISH_ANIMATION;if(d.$8)return;d.$8=!0;c=Date.now()-d.props.since;var f=null;d.props.customLike&&(f=b("MessengerHotLikeUtils").getEmojiSizeForTime(c));var g=b("MessengerHotLikeUtils").getStickerIDForTime(c);b("HotLikeSound").snap(g);c=b("MessengerHotLikeUtils").getMetadataForHotLike(f||g);d.$6.stop();var h=30,i=-10;(g===b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||b("ChatConfig").getBool("chat_tab_has_gradients"))&&(h=0,i=0);d.$4.stop().to("width",c.width*1.2).to("height",c.height*1.2).to("rotateZ",h).duration(100).checkpoint().to("width",c.width*.9).to("height",c.height*.9).to("rotateZ",i).duration(100).checkpoint().to("width",c.width).to("height",c.height).to("rotateZ",0).duration(100).ondone(function(){d.props.forGameChat||b("MessengerHotLikePreviewEvents").emit(e,a,g,f)}).go()},d.$3=function(a){b("HotLikeSound").pop(),d.$4.stop().to("width",0).to("height",0).duration(100).ondone(function(){b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").REMOVE,a)}).go()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a;this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions((a=b("MessengerHotLikePreviewEvents")).addListener(a.STOP,this.$2),a.addListener(a.STOP_EMOJI,this.$2),a.addListener(a.POP,this.$3));b("HotLikeSound").start();this.$4=new(b("Animation"))(b("ReactDOM").findDOMNode(this)).to("width",80).to("height",80).duration(3e3).go();this.$5()};d.componentWillUnmount=function(){this.$1&&this.$1.release()};d.render=function(){if(this.props.customLike){var a=this.props.customLike,c=b("MessengerSupportedEmojiUtils").getNewEmojiData(a.emoji,b("EmojiLikeConstants").size.LARGE);c=c?c.url:this.props.customLike.large;a.uri&&(c=a.uri);return j.jsx("div",{className:"_4a9g _383m",style:{backgroundImage:"url("+c+")"}})}a=(b("gkx")("1072568")||!b("CurrentUser").isWorkUser())&&this.props.thread!=null?j.jsx(h,{thread:this.props.thread}):j.jsx(i,{color:this.props.customColor});return j.jsx("div",{className:"_4a9g _576q",children:a})};d.$7=function(a,b,c,d){d=Math.floor(d/c);var e;for(var f=0;f<d;f++)e=f%2?a:b,this.$6.to("rotateZ",e).duration(c).checkpoint()};return c}(j.Component);a.propTypes={customLike:b("prop-types").object,forGameChat:b("prop-types").bool,since:b("prop-types").number};e.exports=a}),null);
__d("ChatSpeakingStickerReact.bs",["ReasonReact.bs","ChatSpeakingSticker.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("ChatSpeakingSticker.react"),{videoURI:a,videoSize:c},d)}f.make=a}),null);
__d("MercuryAttachmentPayload.bs",["bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){c=c!==void 0?b("bs_caml_option").valFromOption(c):null;return{app_attribution:null,attach_type:a,blurred_image_uri:null,deduplication_key:null,description:null,icon_type:null,key:c,large_preview_height:null,large_preview_width:null,large_preview_url:null,media:null,metadata:null,message_file_fbid:null,name:null,photo_encodings:null,preview_height:null,preview_uploading:null,preview_url:null,preview_width:null,rel:null,share:null,source:null,target:null,thumbnail_url:null,upload_id:null,uri:null,url:d,video_title:null}}f.create=a}),null);
__d("MessagesViewerSetID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"})}),null);
__d("MessengerAttachmentViewer",["Bootloader","MessagesViewer","React","Run","emptyFunction"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a={renderVideo:function(a){b("Bootloader").loadModules(["MessagingVideoViewer.react","MessengerForwardAttachmentDialogReact.bs"],function(c,d){d=d.jsComponent;b("MessagesViewer").renderVideo(g.jsx(c,babelHelpers["extends"]({},a,{forwardDialogComponent:d})))},"MessengerAttachmentViewer")},bootstrapWithConfig:function(a,c){b("Bootloader").loadModules(["SpotlightMessagesViewer","MessengerForwardAttachmentDialogReact.bs"],function(d,e){e=e.jsComponent;b("MessagesViewer").renderSpotlight(a,c,d,e)},"MessengerAttachmentViewer")},preload:function(){b("Run").onAfterLoad(function(){b("Bootloader").loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessengerForwardAttachmentDialogReact.bs"],b("emptyFunction"),"MessengerAttachmentViewer")})}};e.exports=a}),null);
__d("MessengerBusinessHideImageBootloaded.react",["cx","CssBackgroundImage.react","ErrorBoundary.react","JSResource","React","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("lazyLoadComponent")(b("JSResource")("MessengerBusinessHideImage.react").__setRef("MessengerBusinessHideImageBootloaded.react"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("ErrorBoundary.react"),{children:h.jsx(h.Suspense,{fallback:h.jsx(b("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:this.props.thumbnail,className:"_3v3t"}),children:h.jsx(i,{fbid:this.props.fbid,renderSmall:this.props.renderSmall})})})};return c}(h.Component);e.exports=a}),null);
__d("MessengerBusinessHideImageReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerBusinessHideImageBootloaded.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerBusinessHideImageBootloaded.react"),{fbid:b("bs_js_null_undefined").fromOption(a),renderSmall:d,thumbnail:b("bs_js_null_undefined").fromOption(c)},e)}f.make=a}),null);
__d("SphericalPhotoViewerInMessengerThreadBootloaded.react",["cx","BootloadedComponent.react","CssBackgroundImage.react","JSResource","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){if(this.props.photoEncodings&&this.props.thumbnail){var a=this.props.photoEncodings.find(function(a){return a.projection_type==="perspective"}),c=null,d=null;if(a&&a.thumbnails&&a.thumbnails.length>0){a=a.thumbnails;c=a[0]?a[0].uri:null;d=a[1]?a[1].uri:null}if(this.props.useRenderer&&this.props.width&&this.props.height&&this.props.fbid){a=d||c||this.props.thumbnail;return h.jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SphericalPhotoViewerInMessengerThreadWrapper.react").__setRef("SphericalPhotoViewerInMessengerThreadBootloaded.react"),bootloadPlaceholder:h.jsx(b("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:a,className:"_3v3t"}),height:this.props.height,width:this.props.width,fbid:this.props.fbid,thumbnail:a,photoEncodings:this.props.photoEncodings,isVisible:this.props.isVisible,onClickHandler:this.props.onClickHandler})}else{a=c||d||this.props.thumbnail;return h.jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SphericalPhotoMessengerThumbnail.react").__setRef("SphericalPhotoViewerInMessengerThreadBootloaded.react"),bootloadPlaceholder:h.jsx(b("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:a,className:"_3v3t"}),photoEncodings:this.props.photoEncodings,thumbnail:a})}}return null};return c}(h.Component);e.exports=a}),null);
__d("MessengerSphericalPhotoReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","SphericalPhotoViewerInMessengerThreadBootloaded.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){var k;return b("ReasonReact.bs").wrapJsForReason(b("SphericalPhotoViewerInMessengerThreadBootloaded.react"),{height:(k=b("bs_js_null_undefined")).fromOption(a),width:k.fromOption(c),fbid:k.fromOption(d),thumbnail:k.fromOption(e),photoEncodings:k.fromOption(f),isVisible:b("Utils.bs").optionBoolToBool(g),onClickHandler:h,useRenderer:i},j)}f.make=a}),null);
__d("MessengerPhotoReact.bs",["cx","fbt","bs_curry","Image.bs","React","Utils.bs","cssURL","Link.react","bs_caml_option","ReasonReact.bs","joinClasses","bs_caml_primitive","MercuryAttachmentType","MessengerSpinnerReact.bs","bs_caml_builtin_exceptions","MessengerSurfaceQuickChat.bs","MessengerSphericalPhotoReact.bs","MessengerBusinessHideImageReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function j(a,c){var d=a.metadata;if(d==null)return null;else if(a.attach_type===b("MercuryAttachmentType").VIDEO)if(c&&!(d.large_preview==null))return d.large_preview;else return d.inbox_preview;else if(c)return a.large_preview_url;else return a.preview_url}function k(a){if(a==null)return[null,null];else return[a.width,a.height]}function l(a){var c=window.screen.width>1800;if(b("Utils.bs").isTruthy(a.preview_uploading)){var d=function(a,b){if(a==null)return b;else return a};if(c&&!(a.large_preview_url==null))return{width:d(a.large_preview_width,480),height:d(a.large_preview_height,480),src:a.large_preview_url,renderLargePreview:c};else return{width:d(a.preview_width,280),height:d(a.preview_height,280),src:a.preview_url,renderLargePreview:c}}else{d=j(a,c);var e=!(d==null),f=a.metadata;if(e&&!(f==null)){e=c&&!(f.large_size==null)?f.large_size:f.inbox_size;f=k(e);return{width:f[0],height:f[1],src:d,renderLargePreview:c}}if(a.preview_url==null){e=a.media;if(e==null)return;else if(!(e.playable==null)&&!(e.animated_image==null)){f=k(e.animated_image_size);return{width:f[0],height:f[1],src:e.animated_image,renderLargePreview:c}}else{d=k(e.image_size);return{width:d[0],height:d[1],src:e.image,renderLargePreview:c}}}else if(c&&!(a.large_preview_url==null))return{width:a.large_preview_width,height:a.large_preview_height,src:a.large_preview_url,renderLargePreview:c};else return{width:a.preview_width,height:a.preview_height,src:a.preview_url,renderLargePreview:c}}}function m(a){var c=function(a){return""+(String(a)+"")};if(b("Utils.bs").isTruthy(a.preview_uploading))return c(a.preview_url==null?280:0);else{var d=function(a){var b=a[1];a=a[0];if(!(a==null)&&!(b==null))return[a,b]},e=function(a){if(a!==void 0){a=a;return d([a.width,a.height])}};e=a.media==null?d([a.preview_width,a.preview_height]):e(l(a));if(e!==void 0){a=e;return c(b("bs_caml_primitive").caml_float_min(a[1]*b("bs_caml_primitive").caml_float_min(1,450/a[0]),450))}else return}}function n(a){var c=a.metadata,d=a.isAnimated,e=a.className,f=a.attachment;a=a.isSingle;var g=b("MessengerSurfaceQuickChat.bs").useIsQuickChatSurface(0);b("Utils.bs").isTruthy(f.preview_uploading);var h=c.src;if(h==null||!a)return null;else{a=c.renderLargePreview?window.screen.height*.7:window.screen.height*.65;c=g?{maxHeight:""+(String(a)+""),maxWidth:"160px",width:"100%"}:{maxHeight:""+(String(a)+""),maxWidth:"100%",width:"100%"};if(g)a={maxWidth:"160px"};else{g=f.preview_width;f.preview_height;a=g==null?c:{width:g.toString()+"px"}}return i.createElement("div",{style:a},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(b("joinClasses")(e,d?"":"_5pf5"),"",void 0,void 0,h,void 0,void 0,void 0,b("bs_caml_option").some(c),[])))}}function a(a){var c=a.className,d=a.attachment,e=a.isSingle,f=a.isVisible,g=a.onAttachmentLoad,j=a.onClick;a=a.children;c=c!==void 0?c:"";i.useEffect(function(){g!==void 0&&b("bs_curry")._1(g,0);return},[]);var k=l(d);if(k!==void 0){k=k;var o=d.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE,p=!(d.app_attribution==null),q=d.photo_encodings;q=q==null?!1:q.length!==0;var r=d.blurred_image_uri;r=!(r==null);if((!o||!e)&&!q){var s=k.src;s=s==null?void 0:b("cssURL")(s);var t=e?m(d):void 0;s=[s,t]}else s=[void 0,void 0];t={};var u=s[0];u!==void 0&&(t.backgroundImage=b("bs_caml_option").valFromOption(u));u=s[1];u!==void 0&&(t.minHeight=b("bs_caml_option").valFromOption(u));s=t;u=b("Utils.bs").isTruthy(d.preview_uploading)?i.createElement("span",{className:"_7atr"},i.createElement(b("MessengerSpinnerReact.bs").make,{})):null;t=o?b("MercuryAttachmentType").ANIMATED_IMAGE:void 0;var v=function(a){if(j!==void 0)return b("bs_curry")._1(j,d);else return 0},w=function(a){a.preventDefault();return v(0)};if(q){var x=k.src,y=d.metadata,z;if(y==null)z=void 0;else{y=y.fbid;z=y==null?void 0:b("bs_caml_option").some(y)}y=d.photo_encodings;z=b("ReasonReact.bs").element(void 0,void 0,b("MessengerSphericalPhotoReact.bs").make(400,400,z,x==null?void 0:b("bs_caml_option").some(x),y==null?void 0:b("bs_caml_option").some(y),f,v,e,[]))}else if(r){x=d.metadata;if(x==null)y=void 0;else{f=x.fbid;y=f==null?void 0:b("bs_caml_option").some(f)}x=k.src;z=b("ReasonReact.bs").element(void 0,void 0,b("MessengerBusinessHideImageReact.bs").make(y,x==null?void 0:b("bs_caml_option").some(x),!1,[]))}else z=i.createElement(n,{metadata:k,isAnimated:e&&o,className:(p?"_mxz":"")+(e&&!p?" _52mr":"")+(e&&!p?" _1byr":""),attachment:d,isSingle:e});if(r)f=null;else{y={"aria-label":h._("Open Photo"),className:"_4tsl",children:a};x=b("bs_caml_option").nullable_to_opt(k.src);x!==void 0&&(y.href=b("bs_caml_option").valFromOption(x));f=i.createElement(b("Link.react"),y)}return i.cloneElement(i.createElement("div",{className:b("joinClasses")(c,"_4tsk"+(p?" _mxz":"")+(e&&!p?" _52mr":"")+(e&&!p?" _1byr":"")+(b("Utils.bs").isTruthy(d.preview_uploading)&&k.src==null?" _3etv":"")+(q&&!e?" _3603":"")),role:"presentation",style:s,onClick:w}),{"data-testid":t},i.createElement("div",{className:q&&!e?"_64ks":""}),f,z,u)}else return null}c=280;d=480;e=1800;g=450;var o=n;a=a;f.preview_thumbnail_size=c;f.preview_large_size=d;f.large_window_width=e;f.max_photo_width=g;f.getSrcFromAttachment=j;f.sizeToWidthHeight=k;f.extractPreviewMetadata=l;f.getMinHeightForAttachment=m;f.getImageFromMetadata=o;f.make=a}),null);
__d("MessengerSharedMediaActions",["MessengerFluxReduceDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g=b("keyMirror")({CURRENT_LOADED:null,DELETE_PHOTOS:null,LATEST_LOADED:null,LOAD_CURRENT:null,LOAD_MORE_LATEST:null,LOAD_MORE_PREVIOUS:null,PREVIOUS_LOADED:null}),h="MessengerSharedMedia";a={Types:g,Namespace:h,currentLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.CURRENT_LOADED,namespace:h,data:a})},deletePhotos:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:g.DELETE_PHOTOS,namespace:h,threadFBID:a,photoFBIDs:c})},loadCurrent:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_CURRENT,namespace:h,threadFBID:a,photoID:c})},loadMorePrevious:function(a,c,d){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_MORE_PREVIOUS,namespace:h,threadFBID:a,afterCursor:c,first:d})},loadMoreLatest:function(a,c,d){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_MORE_LATEST,namespace:h,threadFBID:a,beforeCursor:c,last:d})},previousLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.PREVIOUS_LOADED,namespace:h,data:a})},latestLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.LATEST_LOADED,namespace:h,data:a})}};e.exports=a}),null);
__d("MessengerThreadSharedMediaAfterWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1668947383157276"};b.getQueryID=function(){return"515216185516880"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerThreadSharedMediaBeforeWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1712143858865110"};b.getQueryID=function(){return"1694317194012102"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerThreadSharedMediaFindWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1933185426727404"};b.getQueryID=function(){return"237087923629184"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerSharedMediaReducer",["MessengerSharedMediaActions","MessengerThreadSharedMediaHelper"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerSharedMediaActions").Types;function a(a,c){switch(c.type){case g.LOAD_CURRENT:var d=a.get("sharedMedia").get(c.threadFBID);if(d){d=d.edges.find(function(a){return a.node.legacy_attachment_id===c.photoID});if(d)return a}d=a.get("isLoading").get(c.threadFBID);if(!!d&&d.curr)return a;d=l(a,c.threadFBID,"curr",!0);b("MessengerThreadSharedMediaHelper").search(c.threadFBID,c.photoID,function(a){return b("MessengerSharedMediaActions").currentLoaded(a)});return d}return a}function c(a,c){switch(c.type){case g.LOAD_MORE_PREVIOUS:var d=a.get("isLoading").get(c.threadFBID);if(!!d&&d.prev)return a;d=l(a,c.threadFBID,"prev",!0);if(d===null)return a;b("MessengerThreadSharedMediaHelper").loadMorePrevious(c.threadFBID,c.afterCursor,c.first,function(a){return b("MessengerSharedMediaActions").previousLoaded(a)});return d}return a}function d(a,c){switch(c.type){case g.LOAD_MORE_LATEST:var d=a.get("isLoading").get(c.threadFBID);if(!!d&&d.latest)return a;d=l(a,c.threadFBID,"latest",!0);if(d===null)return a;b("MessengerThreadSharedMediaHelper").loadMoreLatest(c.threadFBID,c.beforeCursor,c.last,function(a){return b("MessengerSharedMediaActions").latestLoaded(a)});return d}return a}function f(a,c){var d;switch(c.type){case g.CURRENT_LOADED:c=c.data;var e=Object.keys(c)[0];c=(c=c[e])!=null?c.message_shared_media:c;d=(d=c)!=null?(d=d.edges)!=null?d.length:d:d;var f=l(a,e,"curr",!1);if(d!==0&&c){d=k(a.get("sharedMedia").get(e),c,0);d=a.get("sharedMedia").set(e,d);f=f.set("sharedMedia",d);d=c.edges[0];b("MessengerThreadSharedMediaHelper").loadMorePrevious(e,d.cursor,10,function(a){return b("MessengerSharedMediaActions").previousLoaded(a)});b("MessengerThreadSharedMediaHelper").loadMoreLatest(e,d.cursor,10,function(a){return b("MessengerSharedMediaActions").latestLoaded(a)})}return f}return a}function h(a,b){switch(b.type){case g.PREVIOUS_LOADED:b=b.data;var c=Object.keys(b)[0];b=b[c].message_shared_media;var d=l(a,c,"prev",!1);b=k(a.get("sharedMedia").get(c),b,1);c=a.get("sharedMedia").set(c,b);d=d.set("sharedMedia",c);return d}return a}function i(a,b){switch(b.type){case g.LATEST_LOADED:b=b.data;var c=Object.keys(b)[0];b=b[c].message_shared_media;var d=l(a,c,"latest",!1);b=k(a.get("sharedMedia").get(c),b,-1);c=a.get("sharedMedia").set(c,b);d=d.set("sharedMedia",c);return d}return a}function j(a,b){switch(b.type){case g.DELETE_PHOTOS:var c=b.threadFBID;b=b.photoFBIDs;var d=a.get("sharedMedia").get(c);if(!d||!d.edges)break;var e=new Set(b.map(function(a){return a.toString()}));d.edges=d.edges.filter(function(a){return!e.has(a.node.legacy_attachment_id)});b=a.get("sharedMedia").set(c,d);c=a.set("sharedMedia",b);return c}return a}function k(a,b,c){var d={};d.count=b.count;if(c===1&&a){var e=a.edges;d.has_previous_page=a.has_previous_page;d.has_next_page=b.page_info.has_next_page;b.edges.length>0?d.edges=e.concat(b.edges):d.edges=e}else if(c===-1&&a){e=a.edges;d.has_previous_page=b.page_info.has_previous_page;d.has_next_page=a.has_next_page;b.edges.length>0?d.edges=b.edges.concat(e):d.edges=e}else d.has_previous_page=b.page_info.has_previous_page,d.has_next_page=b.page_info.has_next_page,b.edges.length>0&&(d.edges=b.edges);return d}function l(a,b,c,d){var e=a.get("isLoading").get(b);e===void 0?(e={},e[c]=d):e[c]=d;c=a.set("isLoading",a.get("isLoading").set(b,e));return c}f={currentLoaded:f,deletePhotos:j,latestLoaded:i,loadCurrent:a,loadMoreLatest:d,loadMorePrevious:c,previousLoaded:h};e.exports=f}),null);
__d("MessengerSharedMediaState",["immutable"],(function(a,b,c,d,e,f){"use strict";a={sharedMedia:b("immutable").Map({}),isLoading:b("immutable").Map({})};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("MessengerSharedMediaStore",["FluxReduceStore","MessengerFluxReduceDispatcher","MessengerSharedMediaActions","MessengerSharedMediaReducer","MessengerSharedMediaState"],(function(a,b,c,d,e,f){"use strict";var g=Object.keys(b("MessengerSharedMediaReducer"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("MessengerSharedMediaState"))()};d.reduce=function(a,c){if(c.namespace!==b("MessengerSharedMediaActions").Namespace)return a;g.forEach(function(d){a=b("MessengerSharedMediaReducer")[d](a,c)});return a};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("MessengerFluxReduceDispatcher"))}),null);
__d("MessengerSharedPhotosAlbumViewPhotoReact.bs",["fbt","bs_curry","React","cssURL","bs_belt_Option","bs_caml_option"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=h.forwardRef(function(a,c){var d=a.className,e=a.fbid,f=a.onClick,i=a.uri;a=a.children;c=c;a={children:a,"aria-label":g._("Photo"),className:d,style:{backgroundImage:b("cssURL")(i)},href:"#",onClick:function(a){return b("bs_curry")._1(f,e)}};d=b("bs_belt_Option").map(c==null?void 0:b("bs_caml_option").some(c),function(a){return a});d!==void 0&&(a.ref=b("bs_caml_option").valFromOption(d));return h.jsx("a",a)});f.make=a}),null);
__d("MessengerSharedPhotosAlbumViewVScrollReact.bs",["cx","FBID.bs","bs_curry","React","bs_string","ReactDOM","Animation","bs_caml_array","bs_caml_option","ReasonReact.bs","setInterval","clearInterval","bs_caml_builtin_exceptions","MessengerSharedMediaActions","MessengerSharedPhotosAlbumViewPhotoReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function i(a){var c=a.sharedPhotos,d=c.length;if(d<48){b("MessengerSharedMediaActions").loadMorePrevious(a.threadID,b("bs_caml_array").caml_array_get(c,c.length-1|0).cursor,48);return 0}else return 0}function j(a){if(a!==void 0){a=b("bs_caml_option").valFromOption(a);return(a.scrollTop+a.clientHeight|0)>=(a.scrollHeight-20|0)}else throw b("bs_caml_builtin_exceptions").not_found}function k(a){if(a!==void 0)return b("bs_caml_option").valFromOption(a).scrollTop<=20;else throw b("bs_caml_builtin_exceptions").not_found}function l(a){if(a!==void 0)return b("bs_caml_option").valFromOption(a).clientHeight;else throw b("bs_caml_builtin_exceptions").not_found}function m(a,c){if(a!==void 0){new(b("Animation"))(b("bs_caml_option").valFromOption(a)).to("scrollTop",c).duration(200).go();return 0}else return 0}function n(a){var c=a.child.contents;if(c!==void 0)return m(a.childContainer.contents,b("ReactDOM").findDOMNode(b("bs_caml_option").valFromOption(c)).offsetTop-70|0);else return 0}function o(a,c){a=c.retainedProps;var d=a.isLoading,e=a.sharedPhotos,f=a.threadID;c=c.state;var g=e.length;if(j(c.childContainer.contents))if(g<a.totalCount&&!d.prev){b("MessengerSharedMediaActions").loadMorePrevious(f,b("bs_caml_array").caml_array_get(e,e.length-1|0).cursor,48);return 0}else return 0;else if(k(c.childContainer.contents)&&!d.latest){b("MessengerSharedMediaActions").loadMoreLatest(f,b("bs_caml_array").caml_array_get(e,0).cursor,48);return 0}else return 0}function p(a){var c=a.state,d=c.childContainer.contents;if(d!==void 0){var e=b("bs_curry")._1(a.handle,o);b("bs_caml_option").valFromOption(d).addEventListener("scroll",e);b("bs_curry")._1(a.onUnmount,function(a){a=c.childContainer.contents;if(a!==void 0)return b("bs_caml_option").valFromOption(a).removeEventListener("scroll",e);else return 0})}i(a.retainedProps);d=function(a){if(l(c.scrollable.contents)>0){n(c);a=c.interval.contents;if(a!==void 0){b("clearInterval")(b("bs_caml_option").valFromOption(a));c.interval.contents=void 0;return 0}else return 0}else return 0};c.interval.contents=b("bs_caml_option").some(b("setInterval")(d,200));return 0}function q(a){a=a.state.interval.contents;if(a!==void 0){b("clearInterval")(b("bs_caml_option").valFromOption(a));return 0}else return 0}var r=b("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerSharedPhotosAlbumViewVScrollReact");function s(a,c){c.state.childContainer.contents=a==null?void 0:b("bs_caml_option").some(a);return 0}function t(a,c){c.state.scrollable.contents=a==null?void 0:b("bs_caml_option").some(a);return 0}function u(a,c){c.state.child.contents=a==null?void 0:b("bs_caml_option").some(a);return 0}function v(a,c,d,e,f,g,i){var j=function(a){return d.map(function(d){d=d.node;var e=d.photo_encodings;e=e==null?!1:e.length!==0;var f=d.photo_encodings,i,j=0;if(e&&!(f==null)){f=f.find(function(a){return a.projection_type==="perspective"});if(f!==void 0){f=f.thumbnails;if(f.length!==0)i=f[0].uri;else{f=d.image1;i=f==null?void 0:f.uri}}else{f=d.image1;i=f==null?void 0:f.uri}}else j=1;if(j===1){f=d.image1;i=f==null?void 0:f.uri}if(i!==void 0){j={className:"_3bly"+(e?" _3603":""),fbid:b("FBID.bs").ofStringExn(d.legacy_attachment_id),onClick:c,uri:i,children:h.createElement("div",{key:b("bs_string").concat("_",[d.legacy_attachment_id,["spherical_gradient",0]]),className:e?"_64ks":""})};f=d.legacy_attachment_id===g?b("bs_curry")._1(a.handle,u):void 0;f!==void 0&&(j.ref=b("bs_caml_option").valFromOption(f));return h.jsx(b("MessengerSharedPhotosAlbumViewPhotoReact.bs").make,j,d.legacy_attachment_id)}else return null})};return{debugName:r.debugName,reactClassInternal:r.reactClassInternal,handedOffState:r.handedOffState,getDerivedStateFromProps:r.getDerivedStateFromProps,didMount:p,didUpdate:r.didUpdate,willUnmount:q,shouldUpdate:r.shouldUpdate,render:function(a){return h.createElement("div",{ref:b("bs_curry")._1(a.handle,s),className:"_3xo8",onScroll:b("bs_curry")._1(a.handle,o)},h.createElement("div",{ref:b("bs_curry")._1(a.handle,t),className:"_3xoa"},j(a)))},initialState:function(a){return{interval:{contents:void 0},childContainer:{contents:void 0},child:{contents:void 0},scrollable:{contents:void 0}}},retainedProps:{threadID:e,sharedPhotos:d,totalCount:f,isLoading:a},reducer:function(a,b){return 0},jsElementWrapped:r.jsElementWrapped}}a=b("ReasonReact.bs").wrapReasonForJs(r,function(a){return v(a.isLoading,a.onClick,a.sharedPhotos,a.threadID,a.totalCount,a.viewedPhoto,[])});c=200;d=48;e=6;g=20;var w=70;f.animationDuration=c;f.imagesToLoad=d;f.photosPerRow=e;f.scrollToEdgeTolerance=g;f.headerHeight=w;f.graduallyLoadPhotos=i;f.isScrolledToBottom=j;f.isScrolledToTop=k;f.getScrollHeight=l;f.scrollTo=m;f.autoScrollWhenLoaded=n;f.handleScroll=o;f.didMount=p;f.willUnmount=q;f.component=r;f.setRefChildContainer=s;f.setRefScrollable=t;f.setRefChild=u;f.make=v;f.jsComponent=a}),null);
__d("MessengerSharedPhotosAlbumView.react",["cx","fbt","MessengerPhotoViewCloseLinkReact.re","MessengerSharedPhotosAlbumViewVScrollReact.bs","React","ShimButton.react","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerPhotoViewCloseLinkReact.re").make,j=b("MessengerSharedPhotosAlbumViewVScrollReact.bs").jsComponent,k=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$2=function(){c.props.onClick(c.props.viewedPhoto)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return k.jsxs("div",{className:"_3bl- _5l-3",ref:"window",children:[this.$1(),k.jsx(j,{isLoading:this.props.isLoading,onClick:this.props.onClick,sharedPhotos:this.props.sharedPhotos,threadID:this.props.threadID,totalCount:this.props.totalCount,viewedPhoto:this.props.viewedPhoto})]})};d.$1=function(){return k.jsxs("div",{className:"_3bm0 _5l-3",ref:"header",children:[k.jsxs(b("ShimButton.react"),{className:"_3bm2",onClick:this.$2,children:[k.jsx("div",{className:"_3bm3"}),h._("Back to photo")]}),k.jsx("div",{className:"_3bm4",children:h._("Shared Photos")}),k.jsx(i,{onClick:this.props.onCloseSharedPhotos})]})};return c}(k.Component);a.propTypes={onClick:(c=b("prop-types")).func.isRequired,onCloseSharedPhotos:c.func.isRequired,sharedPhotos:c.arrayOf(c.object).isRequired,totalCount:c.number.isRequired,viewedPhoto:c.string.isRequired,threadID:c.string.isRequired,isLoading:c.object.isRequired};e.exports=a}),null);
__d("MessengerSharedPhotosAlbumViewContainer.react",["FluxContainer","MessengerSharedMediaStore","MessengerSharedPhotosAlbumView.react","React","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={edges:[],count:0,isLoading:{}},b)||babelHelpers.assertThisInitialized(c)}c.getStores=function(){return[b("MessengerSharedMediaStore")]};c.calculateState=function(a,c){a=b("MessengerSharedMediaStore").getState();var d=a.sharedMedia;return{edges:d.get(c.threadID).edges,count:d.get(c.threadID).count,isLoading:a.isLoading.get(c.threadID)}};var d=c.prototype;d.render=function(){return this.state.edges.length===0?null:g.jsx(b("MessengerSharedPhotosAlbumView.react"),{onClick:this.props.onClick,onCloseSharedPhotos:this.props.onCloseSharedPhotos,sharedPhotos:this.state.edges,totalCount:this.state.count,viewedPhoto:this.props.viewedPhoto,threadID:this.props.threadID,isLoading:this.state.isLoading})};return c}(g.PureComponent);a.propTypes={onClick:(c=b("prop-types")).func.isRequired,onCloseSharedPhotos:c.func.isRequired,viewedPhoto:c.string.isRequired,threadID:c.string};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MessageShareType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IMAGE:"image",PLATFORM_SHARE_CTA:"platform_share_CTA"})}),null);
__d("MessengerComposeViewHeaderReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerComposeViewHeader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l){return b("ReasonReact.bs").wrapJsForReason(b("MessengerComposeViewHeader.react"),{className:b("bs_js_null_undefined").fromOption(a),forceHideClearButton:c,onClear:b("bs_js_null_undefined").fromOption(d),onAddRecipient:e,onRemoveRecipient:f,onResize:g,recipients:h,viewer:i,isWorkUser:j,tabIndex:b("bs_js_null_undefined").fromOption(k)},l)}f.make=a}),null);
__d("MessengerDialogReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogCancelButton.react"],(function(a,b,c,d,e,f){"use strict";function g(a){if(a!==void 0)switch(a){case 0:return"cancel";case 1:return"button";case 2:return"confirm"}}function h(a){if(a!==void 0)if(a)return"secondary";else return"primary"}function a(a,c,d,e,f,g,h,i,j,k,l){var m;return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialog.react"),{className:(m=b("bs_js_null_undefined")).fromOption(a),label:m.fromOption(c),onToggle:m.fromOption(d),repositionOnUpdate:m.fromOption(e),shown:m.fromOption(f),titleID:m.fromOption(g),type:m.fromOption(h),width:m.fromOption(i),removeDialogOnToggle:m.fromOption(j),causalElement:m.fromOption(k)},l)}a={make:a};var i={};function c(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogFooter.react"),{className:b("bs_js_null_undefined").fromOption(a),leftContent:b("bs_js_null_undefined").fromOption(c)},d)}c={make:c};var j={};function d(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogCancelButton.react"),{onClick:b("bs_js_null_undefined").fromOption(a)},c)}d={make:d};var k={};function e(a,c,d,e,f,i,j,k,l,m){var n;return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogButton.react"),{action:(n=b("bs_js_null_undefined")).fromOption(g(a)),label:n.fromOption(c),disabled:n.fromOption(d),use:n.fromOption(e),onClick:n.fromOption(f),type:n.fromOption(h(i)),className:n.fromOption(j),leftContent:n.fromOption(k),ariaLabel:n.fromOption(l)},m)}e={make:e};var l={},m={},n=0,o=0,p=0;f.stringOfButtonAction=g;f.stringOfButtonType=h;f.Dialog=a;f.Dialog2=i;f.Header=n;f.Title=o;f.Footer=c;f.Footer2=j;f.CancelButton=d;f.CancelButtonJsx3=k;f.Button=e;f.ButtonJsx3=l;f.Body=p;f.Body2=m}),null);
__d("XMessagingForwardAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/forward/",{})}),null);
__d("XMessengerPlatformShareCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/platform/share/",{})}),null);
__d("MessengerForwardAttachmentDialogReact.bs",["ix","cx","fbt","bs_block","bs_curry","Image.bs","React","immutable","bs_caml_option","CurrentUser","fbglyph","ReasonReact.bs","AsyncRequest","MercuryLocalIDs","MessageShareType","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerSpinnerReact.bs","MessengerDialogBodyReact.bs","MessengerDialogTitleReact.bs","MessengerDialogHeaderReact.bs","MessengerComposeViewHeaderReact.bs","XMessengerPlatformShareCTAController","XMessagingForwardAttachmentController"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=i._("Send"),l=b("ReasonReact.bs").reducerComponent("MessengerForwardAttachmentDialogReact");function m(a,c,d){new(b("AsyncRequest"))(a.getURIBuilder().getURI()).setMethod("POST").setHandler(d).setData(c).send();return 0}function n(a,c,d,e,f,h,n){var o=function(a){if(a)return 0;else{b("MessengerDialogs.bs").removeDialog(void 0,0);return b("bs_curry")._1(c,0)}},p=function(c,e){var f=e.send;c=function(a){if(a.payload.success)return b("bs_curry")._1(f,2);else return b("bs_curry")._1(f,b("bs_block").__(2,[b("bs_caml_option").nullable_to_opt(a.payload.error)]))};var g={};e.state.recipients.forEach(function(c,a,d){g[String(b("MercuryLocalIDs").generateOfflineThreadingID(void 0))]=c.getUniqueID();return!0});var i=0;h!==void 0&&d!==void 0&&b("bs_caml_option").valFromOption(h)===b("MessageShareType").PLATFORM_SHARE_CTA?m(b("XMessengerPlatformShareCTAController"),{cta_id:a,message_id:b("bs_caml_option").valFromOption(d),recipient_map:g},c):i=1;i===1&&m(b("XMessagingForwardAttachmentController"),{attachment_id:a,recipient_map:g},c);return b("bs_curry")._1(e.send,1)};return{debugName:l.debugName,reactClassInternal:l.reactClassInternal,handedOffState:l.handedOffState,getDerivedStateFromProps:l.getDerivedStateFromProps,didMount:l.didMount,didUpdate:l.didUpdate,willUnmount:l.willUnmount,shouldUpdate:l.shouldUpdate,render:function(a){var c=a.state,d=c.sending,h=c.sendError;if(d)d=j.createElement("div",void 0,j.createElement(b("MessengerSpinnerReact.bs").make,{}),j.createElement("span",{className:"_1e1n _3-99"},i._("Sending")));else if(h!==void 0){var l=g("141787");d=j.createElement("div",{className:"_1e1n"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,l,void 0,void 0,void 0,void 0,[])),j.createElement("span",{className:"_3-99"},h))}else d=null;l=c.recipients.isEmpty()||c.sending;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog.make(void 0,void 0,o,void 0,e,void 0,void 0,560,void 0,void 0,[j.createElement(b("MessengerDialogHeaderReact.bs").make,{children:j.createElement(b("MessengerDialogTitleReact.bs").make,{children:f})}),j.createElement(b("MessengerDialogBodyReact.bs").make,{children:b("ReasonReact.bs").element(void 0,void 0,b("MessengerComposeViewHeaderReact.bs").make("_1e1o",!1,function(c){return b("bs_curry")._1(a.send,0)},function(c){return b("bs_curry")._1(a.send,b("bs_block").__(0,[c]))},function(c){return b("bs_curry")._1(a.send,b("bs_block").__(1,[c]))},function(a){return 0},c.recipients,b("CurrentUser").getID(),b("CurrentUser").isWorkUser(),0,[]))}),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer.make(void 0,b("bs_caml_option").some(d),[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton.make(void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button.make(2,k,l,void 0,b("bs_curry")._1(a.handle,p),0,void 0,void 0,l?i._("Disabled send button"):k,[]))]))]))},initialState:function(a){return{recipients:b("immutable").List([]),sendError:void 0,sending:!1}},retainedProps:l.retainedProps,reducer:function(a){if(typeof a==="number")switch(a){case 0:return function(a){return b("bs_block").__(0,[{recipients:b("immutable").List([]),sendError:a.sendError,sending:a.sending}])};case 1:return function(a){return b("bs_block").__(0,[{recipients:a.recipients,sendError:void 0,sending:!0}])};case 2:b("bs_curry")._1(c,0);return function(a){return b("bs_block").__(0,[{recipients:b("immutable").List([]),sendError:void 0,sending:!1}])}}else switch(a.tag|0){case 0:var d=a[0];return function(a){return b("bs_block").__(0,[{recipients:a.recipients.push(d),sendError:a.sendError,sending:a.sending}])};case 1:var e=a[0];return function(a){return b("bs_block").__(0,[{recipients:a.recipients.filter(function(a){return a!==e}),sendError:a.sendError,sending:a.sending}])};case 2:var f=a[0];return function(a){return b("bs_block").__(0,[{recipients:a.recipients,sendError:f,sending:!1}])}}},jsElementWrapped:l.jsElementWrapped}}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return n(a.attachmentID,a.onClose,b("bs_caml_option").nullable_to_opt(a.messageID),a.shown,a.title,b("bs_caml_option").nullable_to_opt(a.shareType),[])});f.sendButtonLabel=k;f.component=l;f.sendData=m;f.make=n;f.jsComponent=a}),null);
__d("MessengerPhotoViewBottomBarReact.bs",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a=a.children;return h.jsx("div",{children:a,className:"_51an _50-m _16zz"})}c=a;f.make=c}),null);
__d("MessengerPhotoViewBottomBarReact.re",["MessengerPhotoViewBottomBarReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerPhotoViewBottomBarReact.bs").make;f.make=a}),null);
__d("MessengerPhotoViewHScroll.react",["cx","Animation","MessengerSharedPhotoReact.re","React","SphericalPhotoUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerSharedPhotoReact.re").make,i=b("React"),j=b("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings,k=200,l=80;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$2()};d.componentDidUpdate=function(){this.$2()};d.componentWillUnmount=function(){this.$1&&this.$1.stop(),this.$1=null};d.render=function(){var a=this,b=this.props.sharedPhotos;b=b.reduce(function(b,c){var d=c.node.image1===null?c.node.image:c.node.image1,e=c.node.photo_encodings?c.node.photo_encodings.length!==0:!1;if(d){d=d.uri;if(e){var f=j(c.node.photo_encodings);f=f.smallThumbnail;d=f||d}b.push(i.jsx("div",{className:"_4dy9",children:i.jsx(h,{className:"_42rl"+(a.props.photoID!==c.node.legacy_attachment_id?" _q1a":""),fbid:c.node.legacy_attachment_id,onClick:a.props.onScroll,uri:d,isSpherical:e})},c.node.legacy_attachment_id))}return b},[]);var c=(this.props.width-l)/2;return i.jsx("div",{className:"_463g",children:i.jsx("div",{className:"_463h",ref:"childContainer",children:i.jsx("div",{className:"_463j",style:{paddingLeft:c,paddingRight:c},ref:"scrollable",children:b})})})};d.$2=function(){var a=this,c=this.refs.childContainer?this.refs.childContainer.scrollLeft:0,d=this.props.sharedPhotos.findIndex(function(b){return b.node.legacy_attachment_id===a.props.photoID});d=d*l;this.$1||(this.$1=new(b("Animation"))(this.refs.childContainer));this.$1.from("scrollLeft",c).to("scrollLeft",d).duration(k).go()};return c}(i.PureComponent);e.exports=a}),null);
__d("MessengerPhotoViewHeader.react",["cx","fbt","MessagingForwardingButtonNUX.react","MessengerPhotoViewCloseLinkReact.re","React","SpotlightViewerBottomBarLink","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerPhotoViewCloseLinkReact.re").make,j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=function(){c.refs.forwardNUX&&c.refs.forwardNUX.close(),c.props.showForwardDialog&&c.props.showForwardDialog()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return j.jsxs("div",{className:"_51an _50-m _3c1i _5l-3",role:"banner",children:[this.$1(),this.$2()]})};d.$2=function(){var a;return j.jsx(i,{onClick:(a=this.props.onClose)!=null?a:b("emptyFunction")})};d.$1=function(){var a=this,c,d;this.props.disableForward!==!0&&(c=j.jsxs(b("SpotlightViewerBottomBarLink"),{className:"_3c1o",onClick:this.$3,ref:"forwardButton",children:[j.jsx("div",{className:"_2msr _3oo2"}),h._("Forward")]}),d=j.jsx(b("MessagingForwardingButtonNUX.react"),{contextRef:function(){return a.refs.forwardButton},ref:"forwardNUX",children:h._("Send this image to other people in separate messages.")}));return j.jsxs("div",{ref:"buttons",children:[j.jsxs(b("SpotlightViewerBottomBarLink"),{ajaxify:this.props.url,className:"_3c1o",rel:"async",children:[j.jsx("div",{className:"_3ooo _2msr"}),h._("Download")]}),c,d,j.jsxs(b("SpotlightViewerBottomBarLink"),{className:"_3c1o",href:"#",onClick:this.props.openInfo,ref:"moreInfo",children:[j.jsx("div",{className:"_3c1k _2msr"}),h._("Info")]})]},"buttonsContainer")};return c}(j.PureComponent);e.exports=a}),null);
__d("XMessagingVideoAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/video/",{video_id:{type:"String",required:!0},video_container_id:{type:"String",required:!0},width:{type:"Int",required:!0},height:{type:"Int",required:!0},start_muted:{type:"Bool",defaultValue:!1},no_fullscreen:{type:"Bool",defaultValue:!1},load_player_controller:{type:"Bool",defaultValue:!1},hide_controls_on_finish:{type:"Bool",defaultValue:!1},hide_url_menu_option:{type:"Bool",defaultValue:!1},is_share:{type:"Bool",defaultValue:!1},render_play_button:{type:"Bool",defaultValue:!1},start_timestamp:{type:"Int",defaultValue:0},native_thumbnail:{type:"Bool",defaultValue:!1}})}),null);
__d("MessengerVideoPlayer.react",["cx","ActorURI","AsyncRequest","BackgroundImage.react","Event","FullScreen","MessengerSpinner.react","React","ShimButton.react","SpotlightMercurySharedMediaViewer.react","SubscriptionsHandler","Vector","VideoPlayerReasonTransitionHelper","XMessagingVideoAttachmentController","cssURL","getFullScreenElement","guid","joinClasses","prop-types","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i="_ox1",j="_27db";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d,e;e=a.call(this,c)||this;e.$2=!0;e.$3=[];e.$4=-1;e.$5=!1;e.$6=!1;e.state={playerAPI:null,forcePause:!!((d=e.props.videoData)==null?void 0:d.disableAutoplay),loaded:!1};e.$10=function(a){if(e.isVideoControlClicked(a)){a.preventDefault();a.stopPropagation();return}if(!e.isVideoClicked(a))return;a.preventDefault();e.props.isOnStage?(a.stopPropagation(),e.isState("playing")?e.pause("user_initiated"):e.play("user_initiated")):(e.pause("user_initiated"),e.props.onClick&&e.props.onClick())};e.$11=function(a){if(!e.isRightClick(a))return;a.stopPropagation();a.preventDefault();b("setImmediate")(function(){e.props.onSelect&&e.props.onSelect()})};e.$8=function(){if(!e.$2||e.state.forcePause)return;e.$6&&(e.play(new(b("VideoPlayerReasonTransitionHelper"))("page_visibility_initiated")),e.$6=!1)};e.$7=function(){if(!e.$2||e.state.forcePause||!(e.state.playerAPI&&e.state.playerAPI.isMuted()))return;e.$6=!!e.state.playerAPI&&e.state.playerAPI.isState("playing");e.pause()};e.$1=b("guid")();e.$2=!((d=c.videoData)==null?void 0:d.disableAutoplay);e.props.isInThread&&(e.listeners=new(b("SubscriptionsHandler"))(),e.listeners.addSubscriptions(b("Event").listen(window,"blur",e.$7),b("Event").listen(window,"focus",e.$8)));return e}var d=c.prototype;d.shouldComponentUpdate=function(a){var c=document.getElementById(this.$1.toString()),d=b("FullScreen").isFullScreen();if(c!=null&&d&&c.children[0].children[0]===b("getFullScreenElement")())return!1;d=!!(a.stageDimensions&&a.stageDimensions!==this.props.stageDimensions);d&&(this.$4=this.getCurrentTimePosition(),this.$5=!this.isState("playing"));return!this.props.videoData||a.videoData.id!==this.props.videoData.id||d};d.UNSAFE_componentWillReceiveProps=function(a){if(!this.$2)return;this.props.isInThread&&a.isVisible!==this.props.isVisible&&(a.isVisible&&!this.state.forcePause?this.play(new(b("VideoPlayerReasonTransitionHelper"))("video_visibility_initiated")):this.pause())};d.componentDidMount=function(){this.props.videoData&&this.$9()};d.componentDidUpdate=function(){this.$3.forEach(function(a){return a.abandon()}),this.$3=[],this.props.videoData&&this.$9()};d.componentWillUnmount=function(){this.pause("unloaded"),this.seek(0),this.$3.forEach(function(a){return a.abandon()}),this.listeners&&this.listeners.release(),this.state.playerAPI&&this.state.playerAPI.detachRootNode(),this.state.playerAPI&&this.state.playerAPI.destroy&&this.state.playerAPI.destroy()};d.isVideoLoaded=function(){var a=!!this.state.playerAPI;!a;return this.isState("fallback")?!1:a};d.isVideoClicked=function(a){return a.target instanceof HTMLElement?a.target.classList.contains(i):!1};d.isVideoControlClicked=function(a){var b=document.getElementsByClassName(j);for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=a.target;if(e.contains(f))return!0}return!1};d.isRightClick=function(a){a=a||window.event;return a.button===2};d.play=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.play(a)};d.pause=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.pause(a)};d.seek=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.seek(a)};d.getCurrentTimePosition=function(){return this.isVideoLoaded()&&this.state.playerAPI?this.state.playerAPI.getCurrentTimePosition():-1};d.render=function(){var a=this.props.videoData,c=h.jsx("div",{ref:"placeholder",children:h.jsx(b("MessengerSpinner.react"),{color:"blue",size:b("MessengerSpinner.react").large_size})}),d={};if(a&&a.url){var e=a.original_dimensions;d.backgroundImage=this.state.loaded?b("cssURL")(a.url):"none";c=h.jsx("div",{ref:"placeholder",children:h.jsx(b("BackgroundImage.react"),{className:this.props.className,width:e.x,height:e.y,loadingIndicatorStyle:"large",backgroundSize:"cover",ref:"placeholder",style:d,src:a.url})})}return h.jsx(b("ShimButton.react"),{className:b("joinClasses")(this.props.className,"_4-od"),id:this.$1,onClick:this.$10,onMouseDown:this.$11,style:d,children:c})};d.$9=function(){var a=this,c=this.props.videoData;if(c){var d=c.original_dimensions;this.props.stageDimensions&&(d=b("SpotlightMercurySharedMediaViewer.react").getImageDimensionsForStage(new(b("Vector"))(c.original_dimensions.x,c.original_dimensions.y),this.props.stageDimensions));d=b("XMessagingVideoAttachmentController").getURIBuilder().setString("video_id",c.legacy_attachment_id).setString("video_container_id",this.$1).setInt("width",d.x).setInt("height",d.y).setInt("start_timestamp",this.$4>0?Math.round(this.$4):0).setBool("start_muted",c.start_muted).setBool("no_fullscreen",c.no_fullscreen).setBool("load_player_controller",!0).setBool("hide_controls_on_finish",c.hide_controls_on_finish).setBool("native_thumbnail",c.disableAutoplay).setBool("hide_url_menu_option",Boolean(c.hide_url_menu_option)).setBool("is_share",c.is_share).setBool("render_play_button",this.props.isInThread).getURI();c=this.props.attachment;c&&c.metadata&&c.metadata.pageid&&(d=b("ActorURI").create(d,c.metadata.pageid));var e=new(b("AsyncRequest"))();this.$3.push(e);e.setMethod("GET").setStatusElement(this.refs.placeholder).setURI(d).setRelativeTo(this).setReadOnly(!0).setHandler(function(b){a.$3=a.$3.filter(function(a){return a!==e})}).send()}};d.$12=function(){this.props.isVisible&&this.isState("finished")?(this.seek(0),this.play("loop_initiated")):this.props.isVisible&&this.isState("paused")&&!this.$6?this.setState({forcePause:!0}):this.isState("playing")&&this.setState({forcePause:!1})};d.onVideoLoaded=function(){var a=this;if(!this.$2)return;this.state.playerAPI&&this.state.playerAPI.addListener("stateChange",function(){return a.$12()});this.props.isVisible&&!this.$5&&!this.state.forcePause?this.play("autoplay_initiated"):this.pause();this.$4=-1;this.$5=!1};d.isState=function(a){return!!(this.state.playerAPI&&this.state.playerAPI.isState(a))};return c}(h.Component);a.propTypes={attachment:(c=b("prop-types")).object,className:c.string,isInThread:c.bool,isVisible:c.bool,isOnStage:c.bool,stageDimensions:c.instanceOf(b("Vector")),videoData:c.object,onClick:c.func,onSelect:c.func};a.invokeVideoLoaded=function(a,b,c){a.$2=c,b.setAllowCrossPageTransition(!0),b.isState("loading")?a.stateChangeListener=b.addListener("stateChange",function(){if(!b.isState("loading")){if(a.state&&a.state.playerAPI)return;a.setState({playerAPI:b},a.onVideoLoaded);a.stateChangeListener&&a.stateChangeListener.remove()}}):a.setState({playerAPI:b,loaded:!0},a.onVideoLoaded)};e.exports=a}),null);
__d("MessagingForwardAttachmentDialog.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return g.jsx(b("BootloadOnRender.react"),{component:g.jsx(b("LazyComponent.react"),babelHelpers["extends"]({},this.props)),loader:b("JSResource")("MessagingForwardAttachmentDialogImpl.react").__setRef("MessagingForwardAttachmentDialog.react"),placeholder:g.jsx("div",{})})};return c}(g.PureComponent);e.exports=a}),null);
__d("SpotlightMessagesViewerPagers.react",["cx","fbt","LeftRight.react","Link.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){return i.jsxs(b("LeftRight.react"),{children:[i.jsx(b("Link.react"),{"aria-disabled":a.disablePrevArrow,"aria-label":h._("Previous"),className:"_322u"+(a.disablePrevArrow?"":" _2bbb")+" _50-m",children:i.jsx("div",{className:(a.disablePrevArrow?"":"_4ksl")+(a.disablePrevArrow?"":" _4ksm")})}),i.jsx(b("Link.react"),{"aria-disabled":a.disableNextArrow,"aria-label":h._("Next"),className:"_322u"+(a.disableNextArrow?"":" _2bbc")+" _50-m",children:i.jsx("div",{className:(a.disableNextArrow?"":"_4ksl")+(a.disableNextArrow?"":" _4kso")})})]})};e.exports=a}),null);
__d("XMessagingPhotoDownloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/photo/",{photo_id:{type:"String",required:!0}})}),null);
__d("XMessagingShareAttachmentDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/share/dialog/",{__asyncDialog:{type:"Int"}})}),null);
__d("SpotlightMercurySharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","AsyncDialog","AsyncRequest","BootloadedComponent.react","ChatPhotoViewFooterHScroll.react","ChatPhotoViewHeader.react","Event","FunnelLogger","JSResource","KeyEventController","MessagingForwardAttachmentDialog.react","MessengerThreadSharedMediaHelper","MessengerVideoPlayer.react","Parent","PhotoUtils","React","SpotlightMessagesViewerPagers.react","SpotlightViewer","SpotlightViewerImage","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController","XMessagingShareAttachmentDialogController","lazyLoadComponent","prop-types"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b("React"),l=88,m=30,n="WWW_MESSENGER_SHARE_TO_FB_FUNNEL",o="_4-og";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=void 0,d.$2=[],d.state={hasPrevPage:!1,hasNextPage:!1,firstPhotoLoaded:!1,isLoading:!1,mediaData:[],numberInOneBatch:m,photoData:null,showForward:!1,showInfo:!1,stageDimensions:new(b("Vector"))()},d.$11=function(){return!d.state.photoData?null:k.jsx(b("ChatPhotoViewFooterHScroll.react"),{onScroll:d.$18,photoID:d.state.photoData.node.id,sharedPhotos:d.state.mediaData,updateNumberInOneBatch:d.$19,width:d.state.stageDimensions.x})},d.$19=function(a){d.setState({numberInOneBatch:a})},d.$18=function(a){if(!d.state.mediaData||d.state.isLoading)return;var b=d.state.mediaData.findIndex(function(b){return b.node.legacy_attachment_id===a});if(b<0)return;var c=d.state.mediaData[b];d.setState({photoData:c});d.$22(b)},d.$5=function(a,c){if(d.state.photoData==null||d.state.isLoading)return;if(c&&!!b("Parent").bySelector(c.target,"._170l"))return;c&&c.target instanceof HTMLElement&&c.target.className===o&&d.$10();c=d.state.mediaData.findIndex(function(a){d.state.photoData!=null||j(0,1033);return a.node.legacy_attachment_id===d.state.photoData.node.legacy_attachment_id});if(c<0||c===d.state.mediaData.length-1&&!d.state.hasNextPage&&a)return;if(c===0&&!a){d.setState({isLoading:!0},function(){return d.$7(d.state.photoData,1,function(b){if(b===0)return;d.$5(a)})});return}var e=a?d.state.mediaData[c+1]:d.state.mediaData[c-1];d.setState({photoData:e});d.$22(c)},d.$10=function(){if(d.props.photoID===null)return;d.setState({photoData:null});d.props.onClosePhotoView()},d.$16=function(){d.setState({showForward:!0})},d.$20=function(){d.setState({showForward:!1})},d.$15=function(){d.setState({showInfo:!0})},d.$21=function(){d.setState({showInfo:!1})},d.$17=function(){d.setState({showForward:!1,showInfo:!1});b("FunnelLogger").appendAction(n,"click");var a=d.state.photoData;if(!d.$14()||!(a&&a.node))return;a=a.node.legacy_attachment_id;var c=b("XMessagingShareAttachmentDialogController").getURIBuilder().getURI();c=new(b("AsyncRequest"))(c).setData({attachment_id:a}).setMethod("POST");b("AsyncDialog").send(c)},d.$23=function(a,b,c){var e=Object.keys(a)[0];a=a[e].message_shared_media;e=a.page_info;var f=a.edges.length;if(f!==0){var g=d.state.mediaData;switch(b){case 0:d.setState({photoData:a.edges[0],mediaData:[a.edges[0]],firstPhotoLoaded:!0});break;case 1:g=g.concat(a.edges);d.setState({hasNextPage:e.has_next_page,mediaData:g});break;case-1:g=a.edges;g=g.concat(d.state.mediaData);d.setState({mediaData:g,hasPrevPage:e.has_previous_page});break}}d.setState({isLoading:!1});c(f)},d.$3=function(){var a=new(b("Vector"))(b("Vector").getViewportDimensions().x,b("Vector").getViewportDimensions().y-l);return a},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getDefaultProps=function(){return{enableShareToFB:!1}};d.componentDidMount=function(){var a=this;this.setState({isLoading:!0,stageDimensions:this.$3()},function(){return a.$4(a.props.photoID)});this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("Event").listen(window,"resize",function(){a.setState({stageDimensions:a.$3()})}),b("KeyEventController").registerKey("LEFT",function(){a.$5(!1);return!1}),b("KeyEventController").registerKey("RIGHT",function(){a.$5(!0);return!1}));this.props.enableShareToFB&&b("FunnelLogger").startFunnel(n)};d.UNSAFE_componentWillUpdate=function(a,b){var c=this;b.firstPhotoLoaded!==this.state.firstPhotoLoaded&&this.setState({isLoading:!0},function(){c.$6(b.photoData,b.numberInOneBatch,function(){}),c.$7(b.photoData,b.numberInOneBatch,function(){})});b.numberInOneBatch!=this.state.numberInOneBatch&&!b.isLoading&&this.setState({isLoading:!0},function(){return c.$6(b.mediaData[b.mediaData.length-1],b.numberInOneBatch,function(){})})};d.componentWillUnmount=function(){this.$1&&this.$1.release(),this.$1=null,this.$2.forEach(function(a){return a.abandon()})};d.render=function(){var a=this,c=this.$8(),d=this.state.stageDimensions,e=this.state.isLoading||this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var f=this.state.mediaData.findIndex(function(b){a.state.photoData!=null||j(0,1033);return b.node.id===a.state.photoData.node.id});f=k.jsxs("div",{children:[this.$9(),this.props.disablepaging?null:k.jsx(b("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:f<=0&&!this.state.hasPrevPage,disableNextArrow:!this.state.hasNextPage&&f>=this.state.mediaData.length-1})]});return k.jsxs("span",{children:[k.jsxs(b("SpotlightViewer"),{className:"_53vs",onHide:this.$10,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName,children:[k.jsx(b("SpotlightViewport"),{active:!1,fadeInNOut:!0,media:c,onClick:this.$5,ref:"viewport",showLoadingIndicator:e,stageDimensions:d,useWidth:!0,children:f}),this.$11()]}),this.$12(),this.$13()]})};d.$9=function(){if(!this.state.photoData)return null;var a=this.state.photoData;a=a.node.legacy_attachment_id;a=b("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",a).getURI();this.props.actorid&&(a=b("ActorURI").create(a,this.props.actorid));return k.jsx(b("ChatPhotoViewHeader.react"),{disableForward:this.props.disableForward,enableShareToFB:this.$14(),onClose:this.$10,openInfo:this.$15,ref:"photoviewheader",showForwardDialog:this.$16,showShareDialog:this.$17,url:a})};d.$12=function(){if(!this.state.photoData||!this.state.showForward)return null;var a=i._("Forward in separate messages");return k.jsx(b("MessagingForwardAttachmentDialog.react"),{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$20,shown:this.state.showForward,title:a})};d.$13=function(){return this.state.showInfo?k.jsx(k.Suspense,{fallback:k.jsx("div",{}),children:k.jsx(p,{closeInfo:this.$21,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id})}):k.jsx("xhp",{})};d.$14=function(){var a=this.state.photoData;return!a?!1:!!this.props.enableShareToFB&&a.node.__typename==="MessageImage"&&a.node.image1.uri.indexOf(".gif")<0};d.$22=function(a){var b=this,c=this.state.numberInOneBatch,d=this.state.mediaData;a<=c/2?this.setState({isLoading:!0},function(){return b.$7(d[0],c,function(){})}):a>=d.length-c/2&&this.state.hasNextPage&&this.setState({isLoading:!0},function(){return b.$6(d[d.length-1],c,function(){})})};d.$4=function(a){var c=this;a=b("MessengerThreadSharedMediaHelper").search(this.props.threadID,String(a),function(a){return c.$23(a,0,function(){})});this.$2.push(a)};d.$6=function(a,c,d){var e=this;a=b("MessengerThreadSharedMediaHelper").loadMorePrevious(this.props.threadID,a.cursor,c||1,function(a){return e.$23(a,1,d)});this.$2.push(a)};d.$7=function(a,c,d){var e=this;a=a?a.cursor:null;a=b("MessengerThreadSharedMediaHelper").loadMoreLatest(this.props.threadID,a,c||1,function(a){return e.$23(a,-1,d)});this.$2.push(a)};d.$8=function(){if(this.state.photoData&&this.state.photoData.node){var a=this.state.photoData.node;if(a.__typename&&a.__typename==="MessageVideo")return this.$24();var d=this.state.stageDimensions,e=this.$25(a,d);if(!e)return null;if(a.photo_encodings&&a.photo_encodings.length!==0)return this.$26(a.legacy_attachment_id,e,a.photo_encodings,d);a=c.getImageDimensionsForStage(new(b("Vector"))(e.width,e.height),d);return this.$27(e,a)}else return null};d.$24=function(){return this.state.photoData?k.jsx(b("MessengerVideoPlayer.react"),{isOnStage:!0,isVisible:!0,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions}):null};d.$27=function(a,c){return k.jsx(b("SpotlightViewerImage"),{dimensions:c,ref:"image",src:a.uri})};d.$26=function(a,c,d,e){return k.jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SpotlightViewerSphericalPhoto.react").__setRef("SpotlightMercurySharedMediaViewer.react"),bootloadPlaceholder:k.jsx("div",{}),height:e.y,width:e.x,fbid:a,thumbnail:c.uri,photoEncodings:d,stageDimensions:this.state.stageDimensions})};d.$25=function(a,c){var d=null;a=b("PhotoUtils").getImagesFromData(a);a=a.sort(function(a,b){return a.width==null?b.width==null?0:1:b.width==null?-1:b.width-a.width});window.devicePixelRatio&&window.devicePixelRatio>1&&(c=new(b("Vector"))(c.x*window.devicePixelRatio,c.y*window.devicePixelRatio));for(var e=0;e<a.length;e++)(!d||a[e].width>=c.x||a[e].height>=c.y)&&(d=a[e]);return d};return c}(k.Component);a.propTypes={disableForward:(c=b("prop-types")).bool,enableShareToFB:c.bool,onClosePhotoView:c.func,photoID:c.string,rootClassName:c.string,threadID:c.string};a.getImageDimensionsForStage=function(a,c){var d=a.x;a=a.y;var e=c.x;c=c.y;var f=d/a,g=e/c;d>=e||a>=c?g<f?(d=e,a=Math.round(e/f)):g>f?(d=Math.round(c*f),a=c):(d=e,a=c):f<g?d=Math.round(a*f):a=Math.round(d/f);return new(b("Vector"))(d,a)};var p=b("lazyLoadComponent")(b("JSResource")("MessengerPhotoInfoDialogContainer.react").__setRef("SpotlightMercurySharedMediaViewer.react"));e.exports=a}),null);
__d("SpotlightMessengerSharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","BootloadedComponent.react","Event","JSResource","KeyEventController","MessengerForwardAttachmentDialogReact.bs","MessengerPhotoViewBottomBarReact.re","MessengerPhotoViewHeader.react","MessengerPhotoViewHScroll.react","MessengerSharedMediaActions","MessengerVideoPlayer.react","Parent","PhotoUtils","React","ScriptPath","SpotlightMessagesViewerPagers.react","SpotlightViewer","SpotlightViewerImage","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController","lazyLoadComponent","prop-types"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b("MessengerForwardAttachmentDialogReact.bs").jsComponent,l=b("MessengerPhotoViewBottomBarReact.re").make,m=b("React"),n=88,o=80,p=30,q="_4-og";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=void 0,d.$2=[],d.state={photoData:null,showForward:!1,showInfo:!1,stageDimensions:new(b("Vector"))()},d.$14=function(a){if(!d.props.sharedMedia)return;var b=d.props.sharedMedia.findIndex(function(b){return b.node.legacy_attachment_id===a});if(b<0)return;var c=d.props.sharedMedia[b];d.setState({photoData:c});d.$17(b)},d.$4=function(a,c){if(d.state.photoData==null)return;var e=d.state.photoData;if(c&&!!b("Parent").bySelector(c.target,"._170l"))return;c&&c.target instanceof HTMLElement&&c.target.className===q&&d.$7();c=d.props.sharedMedia.findIndex(function(a){return a.node.legacy_attachment_id===e.node.legacy_attachment_id});if(c<0||c===d.props.sharedMedia.length-1&&!d.props.hasNextPage&&a)return;if(c===0&&!a){b("MessengerSharedMediaActions").loadMoreLatest(d.props.threadID,d.props.sharedMedia[0].cursor,p);return}a=a?d.props.sharedMedia[c+1]:d.props.sharedMedia[c-1];d.setState({photoData:a});d.$17(c)},d.$7=function(){if(d.props.photoID===null)return;b("ScriptPath").closeOverlayView("spotlight_media_view");d.setState({photoData:null});d.props.onClosePhotoView()},d.$12=function(){d.setState({showForward:!0})},d.$15=function(){d.setState({showForward:!1})},d.$11=function(){d.setState({showInfo:!0})},d.$16=function(){d.setState({showInfo:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this,c=this.props.sharedMedia.find(function(b){return b.node.legacy_attachment_id===a.props.photoID});this.setState({photoData:c,stageDimensions:this.$3()});this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("Event").listen(window,"resize",function(){a.setState({stageDimensions:a.$3()})}),b("KeyEventController").registerKey("LEFT",function(){a.$4(!1);return!1}),b("KeyEventController").registerKey("RIGHT",function(){a.$4(!0);return!1}));b("ScriptPath").openOverlayView("spotlight_media_view",{photoID:this.props.photoID,threadID:this.props.threadID})};d.componentWillUnmount=function(){this.$1&&this.$1.release(),this.$1=null,this.$2.forEach(function(a){return a.abandon()})};d.render=function(){var a=this,c=this.$5(),d=this.state.stageDimensions,e=this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var f=this.props.sharedMedia.findIndex(function(b){a.state.photoData!=null||j(0,1033);return b.node.id===a.state.photoData.node.id});f=m.jsxs("div",{children:[this.$6(),this.props.disablepaging?null:m.jsx(b("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:f<=0&&!this.props.hasPrevPage,disableNextArrow:!this.props.hasNextPage&&f>=this.props.sharedMedia.length-1})]});return m.jsxs("span",{children:[m.jsxs(b("SpotlightViewer"),{className:"_53vs",onHide:this.$7,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName,children:[m.jsx(b("SpotlightViewport"),{active:!1,fadeInNOut:!0,media:c,onClick:this.$4,ref:"viewport",showLoadingIndicator:e,stageDimensions:d,useWidth:!0,children:f}),this.$8()]}),this.$9(),this.$10()]})};d.$6=function(){if(!this.state.photoData)return null;var a=this.state.photoData.node.legacy_attachment_id;a=b("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",a).getURI();this.props.actorid&&(a=b("ActorURI").create(a,this.props.actorid));return m.jsx(b("MessengerPhotoViewHeader.react"),{disableForward:this.props.disableForward,onClose:this.$7,openInfo:this.$11,photoID:this.props.photoID,ref:"photoviewheader",showForwardDialog:this.$12,url:a})};d.$13=function(a){return a?Math.ceil(a/o):p};d.$8=function(){var a=this;if(!this.state.photoData)return null;var c=this.state.photoData,d=m.jsx("button",{className:"_2n5b",onClick:function(){return a.props.openAlbum(c.node.legacy_attachment_id)},type:"button",children:m.jsx("div",{"aria-label":i._("Full-screen photo gallery"),className:"_3por"})});return m.jsxs(l,{children:[m.jsx(b("MessengerPhotoViewHScroll.react"),{onScroll:this.$14,photoID:c.node.legacy_attachment_id,sharedPhotos:this.props.sharedMedia,width:this.state.stageDimensions.x}),d]})};d.$9=function(){if(!this.state.photoData||this.props.disableForward)return null;var a=i._("Forward in separate messages");return m.jsx(k,{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$15,shown:this.state.showForward,title:a})};d.$10=function(){return this.state.showInfo?m.jsx(m.Suspense,{fallback:m.jsx("div",{}),children:m.jsx(r,{closeInfo:this.$16,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id})}):m.jsx("xhp",{})};d.$17=function(a){var c=this.$13(this.state.stageDimensions.x),d=this.props.sharedMedia;a<=c/2?(b("MessengerSharedMediaActions").loadMoreLatest(this.props.threadID,d[0].cursor,c),d.length<c&&this.props.hasNextPage&&b("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,d[d.length-1].cursor,c)):a>=d.length-c/2&&this.props.hasNextPage&&b("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,d[d.length-1].cursor,c)};d.$3=function(){var a=new(b("Vector"))(b("Vector").getViewportDimensions().x,b("Vector").getViewportDimensions().y-n);return a};d.$5=function(){if(this.state.photoData&&this.state.photoData.node){var a=this.state.photoData.node;if(a.__typename&&a.__typename==="MessageVideo")return this.$18();var d=this.state.stageDimensions,e=this.$19(a,d);if(!e)return null;if(a.photo_encodings&&a.photo_encodings.length!==0)return this.$20(a.legacy_attachment_id,e,a.photo_encodings,d);a=c.getImageDimensionsForStage(new(b("Vector"))(e.width,e.height),d);return this.$21(e,a)}else return null};d.$18=function(){return this.state.photoData?m.jsx(b("MessengerVideoPlayer.react"),{isVisible:!0,isOnStage:!0,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions}):null};d.$21=function(a,c){return m.jsx(b("SpotlightViewerImage"),{dimensions:c,ref:"image",src:a.uri})};d.$20=function(a,c,d,e){return m.jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SpotlightViewerSphericalPhoto.react").__setRef("SpotlightMessengerSharedMediaViewer.react"),bootloadPlaceholder:m.jsx("div",{}),height:e.y,width:e.x,fbid:a,thumbnail:c.uri,photoEncodings:d,stageDimensions:this.state.stageDimensions})};d.$19=function(a,c){c=b("PhotoUtils").getImagesFromData(a);return c[c.length-1]};return c}(m.Component);a.propTypes={disableForward:(c=b("prop-types")).bool,hasPrevPage:c.bool,hasNextPage:c.bool,onClosePhotoView:c.func,openAlbum:c.func,photoID:c.string,rootClassName:c.string,threadID:c.string,sharedMedia:c.arrayOf(c.object)};a.getImageDimensionsForStage=function(a,c){var d=a.x;a=a.y;var e=c.x;c=c.y;var f=d/a,g=e/c;d>=e||a>=c?g<f?(d=e,a=Math.round(e/f)):g>f?(d=Math.round(c*f),a=c):(d=e,a=c):f<g?d=Math.round(a*f):a=Math.round(d/f);return new(b("Vector"))(d,a)};var r=b("lazyLoadComponent")(b("JSResource")("MessengerPhotoInfoDialogContainer.react").__setRef("SpotlightMessengerSharedMediaViewer.react"));e.exports=a}),null);
__d("SpotlightMessengerSharedMediaViewerContainer.react",["FluxContainer","MessengerSharedMediaActions","MessengerSharedMediaStore","React","SpotlightMessengerSharedMediaViewer.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("MessengerSharedMediaStore")]};c.calculateState=function(a,c){a=b("MessengerSharedMediaStore").getState();var d=a.sharedMedia.get(c.threadID);a=a.isLoading.get(c.threadID);return{sharedMedia:d,isLoading:a}};var d=c.prototype;d.componentDidMount=function(){b("MessengerSharedMediaActions").loadCurrent(this.props.threadID,this.props.photoID)};d.render=function(){var a=this;if(!this.state.sharedMedia)return null;var c=this.state.sharedMedia&&this.state.sharedMedia.edges.find(function(b){return b.node.legacy_attachment_id===a.props.photoID});return!c?null:g.jsx(b("SpotlightMessengerSharedMediaViewer.react"),{disableForward:this.props.disableForward,hasPrevPage:this.state.sharedMedia&&this.state.sharedMedia.has_previous_page,hasNextPage:this.state.sharedMedia&&this.state.sharedMedia.has_next_page,onClosePhotoView:this.props.onClosePhotoView,openAlbum:this.props.openAlbum,photoID:this.props.photoID,rootClassName:this.props.rootClassName,sharedMedia:this.state.sharedMedia&&this.state.sharedMedia.edges,threadID:this.props.threadID})};return c}(g.PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MessengerThreadSharedPhotos.react",["cx","MessengerSharedPhotosAlbumViewContainer.react","React","SpotlightMessengerSharedMediaViewerContainer.react","SpotlightViewer","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={photoView:c.props.findFBID,albumView:""},c.$3=function(a){c.setState({albumView:a,photoView:""})},c.$4=function(){c.setState({albumView:""})},c.$5=function(a){c.setState({albumView:"",photoView:a})},c.$6=function(){c.setState({photoView:""})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidUpdate=function(){!this.state.photoView&&!this.state.albumView&&this.props.onCloseSharedPhotos()};d.render=function(){var a=this.state.photoView?this.$1():null,b=this.state.albumView?this.$2():null;return h.jsxs("div",{children:[b,a]})};d.$1=function(){return h.jsx(b("SpotlightMessengerSharedMediaViewerContainer.react"),{disableForward:!1,onClosePhotoView:this.$6,openAlbum:this.$3,photoID:this.state.photoView,rootClassName:"",threadID:this.props.threadFBID})};d.$2=function(){return h.jsx(b("SpotlightViewer"),{className:"_3ode",onHide:this.$4,open:!0,ref:"spotlightViewer",children:h.jsx(b("MessengerSharedPhotosAlbumViewContainer.react"),{onClick:this.$5,onCloseSharedPhotos:this.props.onCloseSharedPhotos,threadID:this.props.threadFBID,viewedPhoto:this.state.albumView})})};return c}(h.Component);a.propTypes={findFBID:b("prop-types").string,onCloseSharedPhotos:b("prop-types").func,threadFBID:b("prop-types").string};e.exports=a}),null);
__d("MessengerThreadSharedPhotosReact.bs",["ReasonReact.bs","MessengerThreadSharedPhotos.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadSharedPhotos.react"),{findFBID:a,onCloseSharedPhotos:c,threadFBID:d},e)}f.make=a}),null);
__d("MessengerVideoPlayerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerVideoPlayer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){var l;return b("ReasonReact.bs").wrapJsForReason(b("MessengerVideoPlayer.react"),{attachment:(l=b("bs_js_null_undefined")).fromOption(a),className:l.fromOption(c),isInThread:l.fromOption(d),isVisible:l.fromOption(e),isOnStage:l.fromOption(f),stageDimensions:l.fromOption(g),videoData:h,onClick:l.fromOption(i),onSelect:l.fromOption(j)},k)}f.make=a}),null);
__d("MessengerVideoReact.bs",["cx","ix","bs_curry","Image.bs","React","bs_caml_option","ReasonReact.bs","joinClasses","MessengerPhotoReact.bs","MessengerVideoPlayerReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function j(a){a=a.metadata;if(!(a==null)&&!(a.fbid==null)){var b=window.screen.width>1800&&!(a.large_size==null)&&!(a.large_preview==null),c=a.fbid,d=b?a.large_size:a.inbox_size;d=d==null?{x:0,y:0}:{x:d.width,y:d.height};b=b?a.large_preview:a.inbox_preview;return{legacy_attachment_id:c,original_dimensions:d,start_muted:!0,hide_controls_on_finish:!0,url:b,is_share:!1}}return{legacy_attachment_id:null,original_dimensions:null,start_muted:!0,hide_controls_on_finish:!0,url:null,is_share:!1}}function k(a){var b=a%60;return String(a/60|0)+(":"+((b<10?"0":"")+String(b)))}function a(a){var c=a.className,d=a.attachment,e=a.isSingle,f=a.onAttachmentLoad,g=a.isVisible,l=a.onClick,m=a.onSelect,n=c!==void 0?c:"";a=function(a){a=d.metadata;var c=d.media;c=a==null?c==null?void 0:b("bs_caml_option").nullable_to_opt(c.duration):b("bs_caml_option").nullable_to_opt(a.duration);if(c!==void 0)return k(c);else return null};var o=function(a){if(l!==void 0)return b("bs_curry")._1(l,d);else return 0};c=function(a){var c=a.legacy_attachment_id;if(c==null)return;else return b("bs_caml_option").some(b("ReasonReact.bs").element(void 0,void 0,b("MessengerVideoPlayerReact.bs").make(b("bs_caml_option").some(d),b("joinClasses")(n,"_ccq","_4tsk","_3o67",e?"_52mr":"",e?"_1byr":""),!0,g,void 0,void 0,a,o,m,[])))};var p=j(d);c=c(p);if(c!==void 0)return b("bs_caml_option").valFromOption(c);else{p={className:b("joinClasses")(n,"_ccq"),attachment:d,isSingle:e,children:[b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make("_ccr",void 0,void 0,void 0,h("27983"),void 0,void 0,void 0,void 0,[])),i.createElement("span",{className:"_ccs"},a(0))]};f!==void 0&&(p.onAttachmentLoad=b("bs_caml_option").valFromOption(f));l!==void 0&&(p.onClick=b("bs_caml_option").valFromOption(l));return i.createElement(b("MessengerPhotoReact.bs").make,p)}}c=1800;d=a;f.large_window_width=c;f.constructVideoData=j;f.formatDuration=k;f.make=d}),null);
__d("MessengerXMATextBlock.react",["cx","LineClamp.react","React","ShimButton.react","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=26;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){c.props.url!=null&&c.props.url!=""&&window.open(c.props.url)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){if(!this.props)return h.jsx("div",{className:"__6j"});var a=this.props.width!=null?{maxWidth:this.props.width-i,textAlign:"left"}:{textAlign:"left"},c={textDecoration:"none"};return h.jsx("div",{className:b("joinClasses")(this.props.className,"__6j _43kk _6ude"),style:a,children:h.jsxs(b("ShimButton.react"),{form:"link",onClick:this.$1,style:c,children:[this.renderTitle(),this.renderDescription(),this.renderSource()]})})};d.renderTitle=function(){return this.props.title==null?null:h.jsx("div",{className:"__6k",children:h.jsx(b("LineClamp.react"),{lines:2,lineHeight:16,children:this.props.title})})};d.renderDescription=function(){if(this.props.description==null)return null;var a=this.props.width!=null?{maxWidth:this.props.width-i}:{};return h.jsx("div",{className:"__6l",style:a,children:h.jsx(b("LineClamp.react"),{lines:2,lineHeight:15,children:this.props.description})})};d.renderSource=function(){return this.props.source==null?null:h.jsx("div",{className:"__6m",children:h.jsx(b("LineClamp.react"),{lines:1,lineHeight:14,children:this.props.source})})};return c}(h.Component);a.propTypes={className:(c=b("prop-types")).string,description:c.string,source:c.string,title:c.string,url:c.string,width:c.number,isFromViewer:c.bool,attachment:c.object};e.exports=a}),null);
__d("MessengerXMATextBlockReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerXMATextBlock.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){var l;return b("ReasonReact.bs").wrapJsForReason(b("MessengerXMATextBlock.react"),{className:(l=b("bs_js_null_undefined")).fromOption(a),description:l.fromOption(c),source:l.fromOption(d),title:l.fromOption(e),url:l.fromOption(f),width:l.fromOption(g),threadID:l.fromOption(h),isFromViewer:l.fromOption(i),attachment:l.fromOption(j)},k)}f.make=a}),null);
__d("MessengerVideoXMAReact.bs",["cx","React","bs_caml_option","ReasonReact.bs","joinClasses","MessengerVideoPlayerReact.bs","MessengerXMATextBlockReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function i(a){if(a==null)return null;else{var b=a.width>a.height?a.width:a.height,c=window.screen.width>1800?640:450;if(b<=c)return{x:a.width,y:a.height};else{c=c/b;b=a.width*c|0;a=a.height*c|0;return{x:b,y:a}}}}function j(a){var b=a.media;a=a.target;if(b==null||a==null||b.image_size==null||a.video_id==null)return;else{var c=b.image_size;return{legacy_attachment_id:a.video_id,original_dimensions:i(c),start_muted:!0,hide_controls_on_finish:!0,url:b.image,is_share:!0}}}function a(a){var c=a.className,d=a.attachment,e=a.isVisible,f=a.onSelect,g=a.threadID,i=a.isFromViewer,k=c!==void 0?c:"";a=function(a){if(a!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("MessengerVideoPlayerReact.bs").make(b("bs_caml_option").some(d),b("joinClasses")(k,"_ccq","_4tsk","_3o67","_52mr","_1byr"),!0,e,void 0,void 0,b("bs_caml_option").valFromOption(a),void 0,f,[]));else return null};c=function(a){var c;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerXMATextBlockReact.bs").make("_2f5n _4br2 _29ew _3dug",(c=b("bs_caml_option")).nullable_to_opt(d.description),c.nullable_to_opt(d.source),c.nullable_to_opt(d.video_title),c.nullable_to_opt(d.uri),a!==void 0?b("bs_caml_option").valFromOption(a).x:void 0,g,i,b("bs_caml_option").some(d),[]))};var l=j(d);a=a(l);return h.createElement("div",{className:"_3duc"},a,c(l!==void 0?b("bs_caml_option").nullable_to_opt(b("bs_caml_option").valFromOption(l).original_dimensions):void 0))}c=640;d=450;e=1800;g=a;f.large_preview_dim=c;f.thumbinail_inbox_dim=d;f.large_window_width=e;f.adjustSize=i;f.constructVideoData=j;f.make=g}),null);
__d("MessengerPhotosGroupReact.bs",["cx","URI","bs_block","bs_curry","React","Utils.bs","ActorURI","bs_belt_Array","LogHistory","MercuryIDs","bs_belt_Option","bs_caml_option","ReasonReact.bs","joinClasses","bs_caml_primitive","bs_js_null_undefined","MessagesViewerSetID","MessengerPhotoReact.bs","MessengerVideoReact.bs","MercuryAttachmentType","getPageIDFromThreadID","MessengerVideoXMAReact.bs","bs_caml_builtin_exceptions","ChatSpeakingStickerReact.bs","MercuryAttachmentPayload.bs","MessengerAttachmentViewer","MessengerThreadSharedPhotosReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j="empty-spacer";a=b("LogHistory").getInstance("messenger_photo_group");var k=b("ReasonReact.bs").reducerComponent("MessengerPhotosGroup");function l(a,c,d,e,f,g,l,m,n,o,p,q,r,s){var t=d!==void 0?d:"",u=function(a){a=a.length;var c=a===2||a===4;return b("joinClasses")(t,"_2n8h",a===1?"_2n8i":"",c?"_4ksk":"",a>1&&!c?"_2n8k":"","_5fk1")},v=function(a){if(m!==void 0){a=b("bs_caml_option").valFromOption(m);var c=a.thread_fbid;if(!(c==null)&&b("bs_caml_primitive").caml_string_compare(c,"")!==0)return c;else return b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id)}else return null},w=function(a,c){var d=v(0);c=c.metadata;c=c==null?null:c.fbid;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadSharedPhotosReact.bs").make(c,function(c){return b("bs_curry")._1(a.send,0)},d,[]))},x=function(d,k,m,s){var t=k.deduplication_key,u=k.metadata;if(t==null)if(u==null){var w=k.upload_id;w=w==null?"":w}else{u=u.fbid;w=u==null?"":u}else w=t;var x;if(m||f===!0)if(k.large_preview_url==null)x=void 0;else{var y=k.large_preview_url;x=function(a){return window.open(y)}}else{var z=k.metadata;u=0;z==null||z.fbid==null?u=1:x=k.app_attribution==null?function(a){return b("bs_curry")._1(d.send,[a])}:function(c){var d=z;c=c;if(b("Utils.bs").isTruthy(c.preview_uploading))return 0;else if(c.attach_type===b("MercuryAttachmentType").VIDEO){var f=d.dimensions;f=f==null?{x:null,y:null}:{x:f.width,y:f.height};var i=c.url;b("MessengerAttachmentViewer").renderVideo({pageID:b("bs_js_null_undefined").fromOption(p),rootClassName:"_1j1h",videoID:d.fbid,videoSize:f,videoURI:i==null?new(h||(h=b("URI")))(""):i});return 0}else if(c.attach_type===b("MercuryAttachmentType").PHOTO||c.attach_type===b("MercuryAttachmentType").THIRDPARTYSTICKER||c.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE){f=a.length===1;i=c.url;i=i==null?new(h||(h=b("URI")))(""):i;if(g!==!0&&c.attach_type===b("MercuryAttachmentType").PHOTO&&e!==void 0){var j=v(0),k=e===1;j=new(h||(h=b("URI")))("/ajax/messaging/attachments/sharedphotos.php").setQueryData({thread_id:j,image_id:d.fbid});j=p!==void 0?new(b("ActorURI").create)(j,b("bs_caml_option").valFromOption(p)):j;j=[b("MessagesViewerSetID").MESSAGES_VIEW_ALL_IN_THREAD,j,k]}else j=[null,i,f];b("MessengerAttachmentViewer").bootstrapWithConfig({actorid:b("bs_js_null_undefined").fromOption(p),dimensions:d.dimensions,disableForward:p!==void 0,disablePaging:j[2],endpoint:j[1],fbid:d.fbid,rootClassName:"_1j1h",setID:j[0],snapToPhoto:!0,src:c.preview_url});return 0}else if(c.uri==null)return 0;else return window.open(c.uri)};if(u===1)if(k.uri==null)x=void 0;else{var A=k.uri;x=function(a){return window.open(A)}}}t=b("bs_belt_Option").getWithDefault(c,k.attach_type);if(t===b("MercuryAttachmentType").PHOTO||t===b("MercuryAttachmentType").ANIMATED_IMAGE||t===b("MercuryAttachmentType").THIRDPARTYSTICKER){m={attachment:k,isSingle:s,children:[]};l!==void 0&&(m.isVisible=b("bs_caml_option").valFromOption(l));n!==void 0&&(m.onAttachmentLoad=b("bs_caml_option").valFromOption(n));x!==void 0&&(m.onClick=b("bs_caml_option").valFromOption(x));return i.jsx(b("MessengerPhotoReact.bs").make,m,w)}else if(t===b("MercuryAttachmentType").VIDEO){u=k.metadata;if(!(u==null)&&b("Utils.bs").isTruthy(u.render_as_sticker)){m=u.dimensions;u=m==null?{height:null,width:null}:{height:m.height,width:m.width};m=k.url;m=m==null?new(h||(h=b("URI")))(""):m;return b("ReasonReact.bs").element(void 0,void 0,b("ChatSpeakingStickerReact.bs").make(m,u,[]))}if(g===!0){m={attachment:k};l!==void 0&&(m.isVisible=b("bs_caml_option").valFromOption(l));o!==void 0&&(m.onSelect=b("bs_caml_option").valFromOption(o));q!==void 0&&(m.threadID=b("bs_caml_option").valFromOption(q));r!==void 0&&(m.isFromViewer=b("bs_caml_option").valFromOption(r));return i.jsx(b("MessengerVideoXMAReact.bs").make,m,w)}else{u={attachment:k,isSingle:s};n!==void 0&&(u.onAttachmentLoad=b("bs_caml_option").valFromOption(n));l!==void 0&&(u.isVisible=b("bs_caml_option").valFromOption(l));x!==void 0&&(u.onClick=b("bs_caml_option").valFromOption(x));o!==void 0&&(u.onSelect=b("bs_caml_option").valFromOption(o));return i.jsx(b("MessengerVideoReact.bs").make,u,w)}}else if(t===j){m={className:"_4tsk _4rf-"};s=b("bs_caml_option").nullable_to_opt(k.key);s!==void 0&&(m.key=b("bs_caml_option").valFromOption(s));return i.createElement("div",m)}else throw[b("bs_caml_builtin_exceptions").invalid_argument,t+" is not handled by MessengerPhotosGroup"]},y=function(c,a,d){if(a.length!==1){var e=a.length===2||a.length===4?2:3,f=[],g={contents:0},k=a.length;while(g.contents<k){var l=b("bs_caml_primitive").caml_int_min(e,k-g.contents|0);l=b("bs_belt_Array").makeBy(e,function(f){return function(i){if(i<f)return x(c,a[g.contents+i|0],d,!1);else{i="ghost"+String(e-i|0);i=b("MercuryAttachmentPayload.bs").create(j,b("bs_caml_option").some(i),new(h||(h=b("URI")))(""));return x(c,i,d,!1)}}}(l));f.push(i.createElement("div",{key:String(g.contents),className:"_2n8g"},l));g.contents=g.contents+e|0}return f}else{l=a[0];return x(c,l,d,!0)}};return{debugName:k.debugName,reactClassInternal:k.reactClassInternal,handedOffState:k.handedOffState,getDerivedStateFromProps:k.getDerivedStateFromProps,didMount:function(a){b("MessengerAttachmentViewer").preload();return 0},didUpdate:k.didUpdate,willUnmount:k.willUnmount,shouldUpdate:k.shouldUpdate,render:function(c){var d=m!==void 0?!(b("getPageIDFromThreadID")(b("bs_caml_option").valFromOption(m).thread_id)==null):!1;d=y(c,a,d);var e=c.state.findID;c=e!==void 0?w(c,b("bs_caml_option").valFromOption(e)):null;return i.createElement("div",{className:u(a),tabIndex:0},c,d)},initialState:function(a){return{findID:void 0}},retainedProps:k.retainedProps,reducer:function(a,c){if(a)return b("bs_block").__(0,[{findID:b("bs_caml_option").some(a[0])}]);else return b("bs_block").__(0,[{findID:void 0}])},jsElementWrapped:k.jsElementWrapped}}c=b("ReasonReact.bs").wrapReasonForJs(k,function(a){var c;return l(a.attachments,(c=b("bs_caml_option")).nullable_to_opt(a.attachType),c.nullable_to_opt(a.className),c.nullable_to_opt(a.count),c.nullable_to_opt(a.isPageMessage),c.nullable_to_opt(a.isXMA),c.nullable_to_opt(a.isVisible),c.nullable_to_opt(a.message),c.nullable_to_opt(a.onAttachmentLoad),c.nullable_to_opt(a.onSelect),c.nullable_to_opt(a.pageID),c.nullable_to_opt(a.threadID),c.nullable_to_opt(a.isFromViewer),[])});d=b("bs_belt_Option").getWithDefault;f.$pipe$question=d;f.empty_spacer_type=j;f.history=a;f.component=k;f.make=l;f.jsComponent=c}),null);
__d("MessengerPhotosGroup.react",["MessengerPhotosGroupReact.bs"],(function(a,b,c,d,e,f){"use strict";a=b("MessengerPhotosGroupReact.bs").jsComponent;e.exports=a}),null);
__d("MessengerStickerUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){return!!(a&&a.attach_type==="sticker")}function h(a){var b=a.attachments;return!!(a.is_like_preview||a.sticker_id||b&&b.length===1&&g(b[0]))}function a(a){return a.size===1&&h(a.first())}e.exports={isStickerMessageGroup:a,isStickerMessage:h,isStickerAttachment:g}}),null);
__d("MercuryShareAttachmentRenderLocations.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a!==void 0)return a===1;else return!1}function b(a){switch(a){case 0:return"chat";case 1:return"chat_preview";case 2:return"messenger";case 3:return"pages_inbox"}}f.isPreview=a;f.getValue=b}),null);
__d("MessengerVoiceClipAttachmentReact.bs",["cx","cssVar","React","ReactStyle.bs","bs_caml_option","MessengerColors","MessengerCustomColorUtils.bs","MessengerDotComAndInboxM4Check.bs","MercuryAttachmentAudioClip.react","WorkChatRedesignedMessageListCheck.bs","MercuryShareAttachmentRenderLocations.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=a.attachment,d=a.customColor,e=a.message;a=a.thread;var f=c.metadata,g;if(f==null)g=0;else{f=f.duration;g=f==null?0:f/1e3}f=c.app_attribution!==null;var h=d!==void 0;e="audio:"+e.message_id;c=c.url;var j;if(c==null)j=null;else{c={src:c.toString(),duration:g,location:b("MercuryShareAttachmentRenderLocations.bs").getValue(2),rootClassName:"_3czg"+(f?" _4yjw":"")+" _2poz _ui9",showHelp:!1,width:200};d!==void 0&&(c.customColor=b("bs_caml_option").valFromOption(d));j=i.jsx(b("MercuryAttachmentAudioClip.react"),c,e)}return i.jsx("div",{children:j,className:(b("WorkChatRedesignedMessageListCheck.bs").enabled?"":"_hh7")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ybn":"")+(b("WorkChatRedesignedMessageListCheck.bs").enabled?"":" _s1-")+(h?" _5sxi":"")+(f?"":" _52mr")+(f?" _mxz":"")+" _1fz8"+(f?" _1-wa":"")+" _1nqp",style:d!==void 0?b("MessengerDotComAndInboxM4Check.bs").yes?b("ReactStyle.bs").unsafeAddProp(b("MessengerColors").makeLinearGradient(a.gradient_colors,a.solid_color,b("MessengerCustomColorUtils.bs").defaultColor(0)),"backgroundAttachment","fixed"):{backgroundColor:d}:b("WorkChatRedesignedMessageListCheck.bs").enabled?{backgroundColor:"#ece9e7"}:{}})}c=a;f.make=c}),null);
__d("MessengerVoiceClipAttachmentReact.re",["MessengerVoiceClipAttachmentReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerVoiceClipAttachmentReact.bs").make;f.make=a}),null);
__d("XStickerInTrayController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/in_tray/",{pack_id:{type:"Int",required:!0}})}),null);
__d("StickersPackInTrayQuery",["Promise","AsyncRequest","RelayFBEnvironment","RelayModern","XStickerInTrayController","StickersPackInTrayQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayModern").fetchQuery;b("RelayModern").graphql;var i=g!==void 0?g:g=b("StickersPackInTrayQuery.graphql");a={onIsPackInTray:function(a,c,d){return h(b("RelayFBEnvironment"),i,{stickerInterface:c}).then(function(c){c=c&&c.length>0?c[0]:null;var e=c==null?void 0:(c=c.sticker_store)==null?void 0:(c=c.tray_packs)==null?void 0:c.edges;if(e)return new(b("Promise"))(function(b,c){return b({in_sticker_tray:e.filter(function(b){return b.node.id===a}).length>0})}).then(d);var f=b("XStickerInTrayController").getURIBuilder().setInt("pack_id",a).getURI();return new(b("Promise"))(function(a,c){return new(b("AsyncRequest"))(f).setHandler(function(b){return a(b.getPayload())}).setAllowCrossPageTransition(!0).send()}).then(d)})}};e.exports=a}),null);
__d("isRetina",[],(function(a,b,c,d,e,f){"use strict";e.exports=function(){return(window.devicePixelRatio||1)>1}}),null);
__d("MessengerAttachmentRenderer",["cx","CurrentUser","EmojiSticker.react","JSResource","MercuryAttachment","MercuryAudioType","MercuryIDs","MercuryShareAttachment.react","MercuryShareAttachmentRenderLocations","MessengerErrorAttachment.react","MessengerFileAttachment.re","MessengerFromViewerUtils","MessengerHotLikePreview.react","MessengerHotLikeUtils","MessengerPhotosGroup.react","MessengerStickerUtils","MessengerSupportedEmojiUtils","MessengerVoiceClipAttachmentReact.re","React","Sticker.react","StickerConstants","StickersActions","StickersPackInTrayQuery","StickersStoreController","StickerUtils","lazyLoadComponent","XStickerAssetController","isRetina"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerFileAttachment.re").make,i=b("MessengerVoiceClipAttachmentReact.re").make,j=b("React"),k=b("lazyLoadComponent")(b("JSResource")("WorkChatFileAttachment.react").__setRef("MessengerAttachmentRenderer")),l=700,m="sticker:",n="share:",o="_1c_u",p="_3o6m",q=function(a){return a===Object(a)};a={getAttachmentsInsideBubble:function(a,c){var d=this,e=b("MercuryAttachment").get(a).filter(q).filter(function(a){return!d.attachmentShouldAppearOutsideBubble(a)});return this._getAttachmentComponents(e,a,c)},getAttachmentsOutsideBubble:function(a,c,d,e,f){var g=this,h=b("MercuryAttachment").get(a).filter(q).filter(function(a){return g.attachmentShouldAppearOutsideBubble(a)});return this._getAttachmentComponents(h,a,c,d,e,f)},_getAttachmentComponents:function(a,c,d,e,f,g){var h=this,i=this._getPhotosGroup(a.filter(b("MercuryAttachment").isPhotoGroupAttachment),c,d,e);a=a.filter(function(a){return!b("MercuryAttachment").isPhotoGroupAttachment(a)}).map(function(a){return h._getAttachmentComponent(a,c,d,e,f,g)});i&&a.push(i);return a},_getAttachmentComponent:function(a,c,d,e,f,g){var h=e&&e.customColor,i=e&&e.onUnwrap,j=e&&e.isVisible,k=e&&e.isFromViewer,l=e&&e.isPageMessage;e=e&&e.onSelect;if(b("MessengerStickerUtils").isStickerAttachment(a))return this._getStickerComponent(a,c,h,i,g);if(this.isEmojiLikeAttachment(a))return this._getEmojiLikeAttachment(a,c,i);if(this.isVoiceClip(a))return this._getVoiceClip(a,c,h,i,g);if(this.isFileAttachment(a))return this._getFileComponent(a,c);if(this.isP2P(a)||this.isShareAttachment(a))return this._getShareAttachment(a,c,d,j,k,l,e,f);return this.isErrorAttachment(a)?this._getErrorAttachment(a,c):null},_getStickerComponent:function(a,c,d,e,f){if(c.is_like_preview)return j.jsx(b("MessengerHotLikePreview.react"),{customColor:d,customLike:c.customLike,since:c.like_preview_since,thread:f,location:b("MercuryShareAttachmentRenderLocations").MESSENGER},"hlp:"+c.like_preview_since);e=a.metadata;if(!e){e=b("MessengerHotLikeUtils").getMetadataForHotLike(c.sticker_id);if(!e){e={};a=b("StickerUtils").getScaledDimensions(b("StickerConstants").THREAD_SIZE,b("StickerConstants").THREAD_SIZE,b("StickerConstants").THREAD_SIZE);var g=a.height;a=a.width;e.height=g;e.width=a}e.stickerID=c.sticker_id}g=b("XStickerAssetController").getURIBuilder().setInt("sticker_id",e.stickerID);a=null;var h=null;b("isRetina")()?(a=e.paddedSpriteURI2x,h=e.spriteURI2x):(a=e.paddedSpriteURI,h=e.spriteURI);var i=e.stickerID.toString();d=j.jsx(b("Sticker.react"),{accessibilityLabel:e.accessibilityLabel,className:"_2poz _ui9",animationTrigger:"hover",customColor:(d=d)!=null?d:void 0,frameCount:e.frameCount||1,frameRate:e.frameRate||b("StickerConstants").DEFAULT_FRAME_RATE,framesPerCol:e.framesPerCol||1,framesPerRow:e.framesPerRow||1,onStickerClick:function(d,a){if(d==null)return;b("StickersPackInTrayQuery").onIsPackInTray(d,"messages",function(a){a.in_sticker_tray?(b("StickersActions").selectTrayPack(d),b("StickersActions").showStickerFlyout(c.thread_id)):b("StickersStoreController").showStore(d)})},packID:e.packID&&e.packID.toString(),paddedSpriteURI:a,sourceHeight:e.height,sourceURI:g.setEnum("image_type","BestEffortImage").getURI().toString(),sourceWidth:e.width,spriteURI:h,stickerID:i,testID:"sticker",thread:f},m+c.message_id);return d},_getEmojiLikeAttachment:function(a,c,d){d=b("MessengerSupportedEmojiUtils").transferSize(a.size);d=b("MessengerSupportedEmojiUtils").getHotLikeEmojiData(c.body,d)||b("MessengerSupportedEmojiUtils").getHotLikeEmojiDataTransition(c.body,d);if(!d)return this._getErrorAttachment(a,c);a=d.emoji;d=j.jsx(b("EmojiSticker.react"),{className:"_2poz _ui9",emoji:c.body,emojiImage:a,sourceURI:""},m+c.message_id);return d},_getShareAttachment:function(a,c,d,e,f,g,h,i){var k,m,o=null;c&&c.platform_xmd&&(o=JSON.parse(c.platform_xmd));m=(m=a)!=null?(m=m.share)!=null?(m=m.messenger_ctas)!=null?(m=m[0])!=null?m.page_id:m:m:m:m;k=(k=a)!=null?(k=k.share)!=null?(k=k.target)!=null?(k=k.items)!=null?(k=k[0])!=null?(k=k.call_to_actions)!=null?(k=k[0])!=null?k.page_id:k:k:k:k:k:k:k;m=m||k;k=m?b("MercuryIDs").getParticipantIDFromUserID(m):c.author;return j.jsx(b("MercuryShareAttachment.react"),{attachment:a.share,isFromViewer:f,isPageMessage:g,isSponsored:c.is_sponsored,isVisible:!!e,location:b("MercuryShareAttachmentRenderLocations").MESSENGER,maxWidth:l,messageID:c.message_id,mnMessageType:o&&o.template_type,onComponentLoaded:d,onSelect:h,pageID:k,threadID:c.thread_id,afterDecorators:i,timestamp:c.timestamp,author:c.author},n+c.message_id)},_getVoiceClip:function(a,c,d,e,f){d=b("MessengerFromViewerUtils").isFromViewer(c)?d||void 0:void 0;return j.jsx(i,{thread:f,attachment:a,customColor:d,message:c},"audio:"+c.message_id)},_getErrorAttachment:function(a,c){return j.jsx(b("MessengerErrorAttachment.react"),{attachment:a},"error:"+c.message_id)},_getPhotosGroup:function(a,c,d,e){if(!a.length)return null;var f=e&&e.onUnwrap,g=e&&e.isVisible,h=e&&e.onSelect,i=e&&e.isPageMessage;e=e&&e.pageID;return j.jsx(b("MessengerPhotosGroup.react"),{attachments:a,className:"_2poz _52mr _ui9",count:a.length,isPageMessage:i,isVisible:!!g,message:c,onSelect:h,onUnwrap:function(){f&&f()},pageID:e,onAttachmentLoad:d},"photos:"+c.message_id)},getVideoElem:function(a,b){b=b.getMessageElement(a);if(!b)return null;a=b.getElementsByClassName(o);return a&&a.length?a[0]:b},getSphericalPhotoElem:function(a,b){b=b.getMessageElement(a);if(!b)return null;a=b.getElementsByClassName(p);return a&&a.length?a[0]:b},_rendersWithoutAttribution:function(a){return a.length!=1||!b("MercuryAttachment").hasAttribution(a[0])},_getFileComponent:function(a,c){return b("CurrentUser").isWorkUser()?j.jsx(j.Suspense,{fallback:null,children:j.jsx(k,{attachment:a,message:c})},"file:"+a.url):j.jsx(h,{attachment:a},"file:"+a.url)},attachmentShouldAppearOutsideBubble:function(a){return b("MessengerStickerUtils").isStickerAttachment(a)||b("MercuryAttachment").isPhotoGroupAttachment(a)||this.isShareAttachment(a)||this.isP2P(a)||this.isVoiceClip(a)||this.isErrorAttachment(a)||this.isEmojiLikeAttachment(a)||this.isWorkFileAttachment(a)},isPhotosGroupAttachment:function(a){a=a.props.attachments;return!!a&&a.length>1&&a.some(function(a){return!!a&&b("MercuryAttachment").isPhotoGroupAttachment(a)})},isRenderedShareAttachment:function(a){return!!(a.key&&a.key.startsWith(n))},isFileAttachment:function(a){return a.attach_type==="file"},isShareAttachment:function(a){return!!(this._isStoryBased(a)&&!this.isP2P(a)&&(a.share.style_list.indexOf("share")>-1||a.share.style_list.indexOf("fallback")>-1))},isSharedVideoAttachment:function(a){a=a.attach_type==="share"&&a.share&&a.share.subattachments&&a.share.subattachments[0];return!!(a&&a.target&&a.target.video_id)},isP2P:function(a){return!!(this._isStoryBased(a)&&a.share.style_list.indexOf("orion")>-1)},_isStoryBased:function(a){return!!(a.attach_type==="share"&&a.share&&a.share.style_list)},isEmojiLikeAttachment:function(a){return a.attach_type==="emoji_like"},isWorkFileAttachment:function(a){return this.isFileAttachment(a)&&b("CurrentUser").isWorkUser()},isVoiceClip:function(a){a=a.metadata;return!!a&&(!!a.isAudio||a.type===b("MercuryAudioType").AudioClip||a.type===b("MercuryAudioType").VoiceMessageWithTranscript)},isVoiceClipAttachment:function(a){var c=this;a=b("MercuryAttachment").get(a).filter(q).filter(function(a){return c.isVoiceClip(a)});return!!a.length},isP2PAttachment:function(a){var c=this;a=b("MercuryAttachment").get(a).filter(function(a){return q(a)&&c.isP2P(a)});return!!a.length},isSingleVideoAttachment:function(a){a=b("MercuryAttachment").get(a).filter(q).filter(function(a){return b("MercuryAttachment").isVideoAttachment(a)});return a.length===1},isSharedVideoAttachmentMessage:function(a){var c=this;a=b("MercuryAttachment").get(a).filter(q).filter(function(a){return c.isSharedVideoAttachment(a)||c.isGenieSharedVideoAttachment(a)});return a.length===1},isGenieSharedVideoAttachment:function(a){return!!(a.attach_type==="share"&&a.share&&a.share.style_list.indexOf("genie_message")>-1&&a.share.target&&a.share.target.attachment&&this.isSharedVideoAttachment(a.share.target.attachment))},isSingleSphericalPhotoAttachment:function(a){a=b("MercuryAttachment").get(a).filter(q);if(a.length!==1)return!1;a=a.filter(function(a){return a.photo_encodings&&a.photo_encodings.length!==0}).length===1;return a},isErrorAttachment:function(a){return a.attach_type==="error"}};e.exports=a}),null);
__d("MessengerCodePasteUtils",["cx","BanzaiODS","MessengerBubble.react","MessengerFormattingUtils","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=/`{3,}/,j=3,k=/^\s+/,l=/\s+$/;function a(a){return!!(a!=null&&a.search(i)!==-1)}function m(a,b){var c=0;if(b-2>=0){c+=a[b-2].trim().length;var d=a[b-2].match(l);d&&(c+=d[0].length)}b-1>=0&&(c+=a[b-1].length+2*j);d=a[b].match(k);d&&(c+=d[0].length);return c}function n(a,b,c){if(a)return a.map(function(a){return Object.assign(Object.assign({},a),{offset:a.offset-b})}).filter(function(a){return 0<=a.offset&&a.offset<c});else return a}function o(a){a=a.split("\n");return a.length===1?{language:"",code:a[0]}:{language:a[0].replace(/[^a-zA-Z]+/g,""),code:a.slice(1).join("\n")}}function p(a){var c=b("MessengerFormattingUtils").getRanges(a).filter(function(a){return a.formatter===b("MessengerFormattingUtils").formatConfigs.blockquote.formatter||a.formatter===b("MessengerFormattingUtils").formatConfigs.blockcode.formatter}).sort(function(a,b){return a.offset!==b.offset?a.offset-b.offset:b.length-a.length}),d=[],e=0,f=0;for(var g=0;g<c.length;g++){var h=c[g];if(h.offset<f)continue;h.formatter===b("MessengerFormattingUtils").formatConfigs.blockcode.formatter&&(d.push(a.substring(e,h.offset)),d.push(h.innerText),e=h.offset+h.length);f=h.offset+h.length}d.push(a.substring(e));return d}function c(a,c,d,e,f,g){a=p(a);var i=[],j=0;for(var k=0;k<a.length;k+=2){var l=a[k].trim();if(l&&l.length>0){j+=m(a,k);var q=c?n(c,j,l.length):c;i.push(h.jsx(b("MessengerBubble.react"),{body:l,customColor:e!=null?e:void 0,className:"clearfix _3058 _ui9",isFromViewer:f,ranges:q,threadID:d,thread:g},k))}if(k+1<a.length&&a[k+1]){l=o(a[k+1]);q=l.code;b("BanzaiODS").bumpEntityKey(3303,"messenger_code_paste","render_bubble");i.push(h.jsx("div",{className:"_3058 _wu0 _52mr",children:q},k+1))}}return i}e.exports={containsCodeBlock:a,getCodeAndMessageBubbles:c}}),null);
__d("MNRTCCallabilityStore",["MessengerDispatcher","RTCCallabilityStore"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("RTCCallabilityStore"))(b("MessengerDispatcher"))}),null);
__d("shouldNotRenderSegoe",["MessengerConfig","UserAgent"],(function(a,b,c,d,e,f){"use strict";var g=new RegExp("[\u0530-\u05f4\u10a0-\u10ff]"),h=b("UserAgent").isBrowser("Chrome")&&b("UserAgent").isPlatform("Windows 10");e.exports=function(a){return!b("MessengerConfig").SegoeUIDisabled&&h&&g.test(a)}}),null);
__d("MessengerBubble.react",["cx","fbt","invariant","requireCond","EmojiOnlyMessage.react","FlexLayout.react","MercuryIDs","MercuryMessageBody.react","MercuryMessageRenderLocations","MessageReplyPermissions","MessengerActions","MessengerCodeBubble.re","MessengerColors","MessengerContactActions.bs","MessengerCustomColorUtils.bs","MessengerDecorator","MessengerDotComAndInboxM4Check.bs","MessengerEnvironment","cr:1398876","MessengerSupportedEmojiUtils","React","RepliedToMessageContent.react","SimpleXUIDialog","cr:1398877","WorkChatRedesignedMessageListCheck.re","gkx","goURI","immutable","joinClasses","prop-types","shouldNotRenderSegoe"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("MessengerCodeBubble.re").make,k=b("MessengerContactActions.bs").actions,l=b("React"),m=0;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,e;for(var f=arguments.length,g=new Array(f),j=0;j<f;j++)g[j]=arguments[j];return(c=e=a.call.apply(a,[this].concat(g))||this,e.state={emojis:void 0},e.$2=function(a,c,f){switch(a){case k.MESSAGE:e.$3(c,f);break;case k.PROFILE:a=b("MercuryIDs").getParticipantIDFromUserID(c.id);a=e.props.participants&&e.props.participants.get(a);if(a&&a.href){var g=b("MessengerEnvironment").messengerdotcom;g?window.open(a.href):b("goURI")(a.href)}else e.$3(c,f);break;case k.FREE_CALL:d(["FBRTCCore","MNRTCCallabilityStore"],function(a,d){var e=c.id;e||i(0,1247);a.isAvailableForWebrtcCalling(e)||d.isCallable(e)?a.startOutgoingCall(e,"messenger_bubble_free_call",!1):b("SimpleXUIDialog").show(h._("{firstname} can't be reached right now.",[h._param("firstname",c.contactName)]),h._("Can't Connect Call"))});break}},c)||babelHelpers.assertThisInitialized(e)}var e=c.prototype;e.componentDidMount=function(){if(!this.props.emojis){var a=this.props.body||"";a=b("MessengerSupportedEmojiUtils").getEmojiOnlyContents(a);a&&a.length&&this.setState({emojis:a})}};e.$1=function(){if(this.props.message!=null&&this.props.message.thread_id!=null&&this.props.message.tags!=null&&this.props.message.attachments!=null&&this.props.message.attachments.length>0){var a,b,c=this.props.message;a=(a=c.attachments[0].share)==null?void 0:(a=a.target)==null?void 0:a.sender_wec_number;b=(b=c.attachments[0].share)==null?void 0:(b=b.target)==null?void 0:b.sender_wec_number_formated;var d=c.thread_id.replace("user:",""),e=c.tags[m]!=="source:wa_callback",f=this.props.participants!=null&&this.props.participants.last()!=null&&this.props.participants.last().wec_group_participant_count==null;c=(c=c.attachments[0].share)==null?void 0:(c=c.target)==null?void 0:c.sender_wec_name;if(e||d===a||!this.props.wecFirstMessage||f)return null;if(a!=null&&c!=null)if(a===c)return l.jsx("div",{className:"_7ox8",children:b});else return l.jsxs("div",{className:"_7ox8",children:[b,"  ~",c]})}return null};e.render=function(){var a=this,c=!1,d=null;this.state.emojis?d=l.jsx(b("EmojiOnlyMessage.react"),{contents:this.state.emojis}):(c=!0,d=l.jsx(b("MercuryMessageBody.react"),{ref:this.props.bodyRef,body:this.props.body,className:"_3oh-"+(b("shouldNotRenderSegoe")(this.props.body||"")?" _2por":"")+" _58nk",threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,ranges:this.props.ranges,metaRanges:this.props.metaRanges,plainText:this.props.plainText,threadID:this.props.threadID,customLike:this.props.customLike,onContactSelect:this.$2,renderLocation:b("MercuryMessageRenderLocations").MESSENGER}));var e=[],f=[],g=this.props.message,h=!!this.props.isFromViewer;g&&!this.props.excludeAfterDecorators&&(b("MessengerDecorator").getAfterDecorators().forEach(function(b){b.check(g,h)&&(e.push(b.render(g,h,a.props)),f.push(b.getAdditionalClassNames()))}),b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(g,h)&&f.push(a.getAdditionalClassNames())}));var i=f.join(" "),k=null;this.props.body&&(this.props.containsCode?k=l.jsx(j,{body:this.props.body,className:this.props.className,customColor:this.props.customColor,isFromViewer:this.props.isFromViewer===!0,ranges:this.props.ranges||[],threadID:this.props.threadID||"",thread:this.props.thread}):this.props.is_forwarded&&b("gkx")("974812")?k=l.jsxs("blockquote",{className:"_8720",children:[l.jsx("div",{className:"_8721"}),d]}):k=l.jsxs("div",{className:"_aok"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7i2m":"")+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w6-":""),tabIndex:0,children:[d,this.props.attachments]}));var m=this.props.repliedToMessage&&b("MessageReplyPermissions").bubbleContainsRepliedToMessage(this.props.repliedToMessage,!!(!this.props.containsCode&&this.state.emojis))?l.jsx(b("RepliedToMessageContent.react"),{isFromViewer:this.props.isFromViewer,isLinkified:!0,isMessengerUI:!0,repliedToMessageData:this.props.repliedToMessage,scrollToRepliedMessage:this.props.scrollToRepliedMessage,replyInOneBubble:!0}):null,n=this.props.tooltip||{},o=this.props.isFromViewer&&!this.state.emojis&&!this.props.containsCode,p=b("MessengerDotComAndInboxM4Check.bs").yes&&this.props.thread&&o?babelHelpers["extends"]({backgroundAttachment:"fixed"},b("MessengerColors").makeLinearGradient(this.props.thread.gradient_colors,this.props.thread.solid_color,b("MessengerCustomColorUtils.bs").defaultColor())):{};return l.jsxs("div",babelHelpers["extends"]({},b("WorkChatRedesignedMessageListCheck.re").enabled?{}:n,{style:p,className:b("joinClasses")(i,this.props.className,(this.props.containsCode?"":"_hh7")+(b("MessengerDotComAndInboxM4Check.bs")&&!this.props.containsCode?" _6ybn":"")+(this.props.containsCode?" _4qoc":"")+(!this.props.isFromViewer&&this.props.containsCode?" _65sp":"")+(this.props.isFromViewer&&this.props.containsCode?" _65sq":"")+(this.props.containsCode?"":" _s1-")+(!this.props.containsCode&&!this.props.notBubblish?" _52mr":"")+(!this.props.containsCode&&this.props.isP2PAttachment?" _4z55":"")+(!this.props.containsCode&&!!this.state.emojis?" _2f5r":"")+(!this.props.containsCode&&!!this.state.emojis?" _581a":"")+(o?" _43by":"")+(b("MessengerDotComAndInboxM4Check.bs").yes&&o?" _6ybp":"")+(!this.props.containsCode&&c?" _3oh-":"")+(m?" _6uum":"")+(this.props.is_forwarded?" _8722":"")),children:[g==null||this.props.isPageMessage||this.props.isSavedView?null:b("cr:1398877")!=null?l.jsx(b("cr:1398877"),{message:g,hovered:this.props.isHovered,messageProps:{isFromViewer:this.props.isFromViewer===!0,onReplyToMessage:this.props.onReplyToMessage,handleToggleOriginal:this.props.handleToggleOriginal,hasFormatting:this.props.hasFormatting,isShowingOriginal:this.props.plainText}}):b("cr:1398876")!=null&&l.jsx(b("cr:1398876"),{className:"_1z_2",message:g,isFromViewer:!!this.props.isFromViewer,hovered:this.props.isHovered,onReactionSwap:this.props.onReactionSwap,onReplyToMessage:this.props.onReplyToMessage,messageProps:babelHelpers["extends"]({},this.props,{handleToggleOriginal:this.props.handleToggleOriginal,hasFormatting:this.props.hasFormatting,isShowingOriginal:this.props.plainText}),isSavedView:this.props.isSavedView}),m,this.$1(),k,k?null:d,k?null:this.props.attachments,e.length>1?l.jsx(b("FlexLayout.react"),{align:"center",className:"_7moe",children:e}):e]}))};e.$3=function(a,c){c&&c.preventDefault();c=b("MercuryIDs").getThreadIDFromUserID(a.id);c&&b("MessengerActions").selectThread(c)};return c}(l.PureComponent);a.propTypes={attachments:(c=b("prop-types")).instanceOf(b("immutable").List),body:c.string,customColor:c.string,customLike:c.object,excludeAfterDecorators:c.bool,isFromViewer:c.bool,message:c.object,metaRanges:c.array,notBubblish:c.bool,onUnwrap:c.func,participants:c.object,plainText:c.bool,ranges:c.array,threadID:c.string,threadCustomColor:c.string,onReactionSwap:c.func,onReplyToMessage:c.func,isHovered:c.bool,handleToggleOriginal:c.func,hasFormatting:c.func,isPageMessage:c.bool,isSavedView:c.bool,repliedToMessage:c.object,scrollToRepliedMessage:c.func,thread:c.object,wecFirstMessage:c.bool,is_forwarded:c.bool};e.exports=a}),null);
__d("MessengerCodeBubble.bs",["React","bs_caml_option","MessengerCodePasteUtils"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.body,d=a.className,e=a.customColor,f=a.isFromViewer,h=a.ranges,i=a.threadID;a=a.thread;c=b("MessengerCodePasteUtils").getCodeAndMessageBubbles(c,h,i,e,f,a);h={children:c};d!==void 0&&(h.className=b("bs_caml_option").valFromOption(d));return g.jsx("div",h)}c=a;f.make=c}),null);
__d("MessengerCodeBubble.re",["MessengerCodeBubble.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerCodeBubble.bs").make;f.make=a}),null);
__d("XMessengerDotComSettingsEditController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/settings/edit/",{})}),null);
__d("MessengerSettingsActions",["AsyncRequest","CurrentEnvironment","MessengerDesktopNotificationPermissions","MessengerDesktopNotifications","MessengerDispatcher","MessengerURIConstants","XMessengerDotComSettingsEditController","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g=b("keyMirror")({CHANGE_SETTINGS:null,CHANGE_DESKTOP_NOTIFS:null});a={Types:g,changeSettings:function(a){var c=b("XMessengerDotComSettingsEditController").getURIBuilder().getURI();b("CurrentEnvironment").facebookdotcom&&c.setPath(b("MessengerURIConstants").FACEBOOK_PREFIX+c.getPath());new(b("AsyncRequest"))().setData({settings:a}).setURI(c).send();b("MessengerDispatcher").dispatch({type:g.CHANGE_SETTINGS,newSettings:a})},changeDesktopNotifs:function(a,c){a&&!b("MessengerDesktopNotifications").isGranted()?b("MessengerDesktopNotifications").requestPermission(function(d){if(d!==b("MessengerDesktopNotificationPermissions").GRANTED){b("MessengerDesktopNotifications").checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED&&(c&&c());return}b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}):b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}};e.exports=a}),null);
__d("MessengerThreadSearchActions",["MessengerDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g=b("keyMirror")({CHANGE_RESULT_INDEX:null,GET_MORE_CONTEXT:null,GET_MORE_THREADS:null,UPDATE_THREAD_STATE:null,SCROLL_TO_MESSAGE:null});a={Types:g,selectPrevious:function(){b("MessengerDispatcher").dispatch({type:g.CHANGE_RESULT_INDEX,delta:1})},selectNext:function(){b("MessengerDispatcher").dispatch({type:g.CHANGE_RESULT_INDEX,delta:-1})},getMoreSearchContext:function(a,c){b("MessengerDispatcher").dispatch({type:g.GET_MORE_CONTEXT,direction:a,threadID:c})},updateThreadState:function(a,c){b("MessengerDispatcher").dispatch({type:g.UPDATE_THREAD_STATE,threadID:a,mid:c})},loadMoreThreads:function(){b("MessengerDispatcher").dispatch({type:g.GET_MORE_THREADS})},scrollToMessage:function(a){b("MessengerDispatcher").dispatch({type:g.SCROLL_TO_MESSAGE,messageID:a})}};e.exports=a}),null);
__d("MessengerBootloadedLogMessage.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx(b("BootloadOnRender.react"),{component:h.jsx(b("LazyComponent.react"),babelHelpers["extends"]({},this.props)),loader:b("JSResource")("MessengerLogMessage.react").__setRef("MessengerBootloadedLogMessage.react"),placeholder:h.jsx("div",{className:"_497p",children:"..."})})};return c}(h.PureComponent);e.exports=a}),null);
__d("MessengerBubbleBlock.react",["cx","React","WorkChatRedesignedMessageListCheck.re"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return h.jsx("div",{className:(b("WorkChatRedesignedMessageListCheck.re").enabled?"":"_52mr")+" _4h13"+(b("WorkChatRedesignedMessageListCheck.re").enabled?"":" _3058"),children:this.props.children})};return c}(h.Component);e.exports=a}),null);
__d("MessengerCollapsedLogMessageGroup.react",["cx","fbt","Link.react","React","WorkChatRedesignedMessageListCheck.re"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={collapsed:!0},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this,c=h._("See Latest Activity"),d=h._("See Less Activity");return i.jsxs("div",{className:"_497p"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w5v":""),children:[i.jsx(b("Link.react"),{className:"_4ea1",onClick:function(){return a.setState(function(a){return{collapsed:!a.collapsed}})},children:this.state.collapsed?c:d}),this.state.collapsed?null:i.jsxs("div",{children:[i.jsx("div",{className:"_4ea2"}),this.props.children,i.jsx("div",{className:"_4ea2"})]})]})};return c}(i.PureComponent);e.exports=a}),null);
__d("MessengerProfileLinkAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLICK:"click",HOVER:"hover"})}),null);
__d("MessengerProfileLinkDomain",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",FB_SLASH_MESSAGES:"fb_slash_messages",WORK_CHAT:"work_chat"})}),null);
__d("MessengerProfileLinkLogger.bs",["MessengerProfileLinkTypedLogger"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){new(b("MessengerProfileLinkTypedLogger"))().setTargetID(a).setDomain(c).setLinkLocation(d).setAction(e).log();return 0}f.logItemImpression=a}),null);
__d("ProfileLinkReact.bs",["ReasonReact.bs","bs_js_null_undefined","ProfileLink.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){var j;return b("ReasonReact.bs").wrapJsForReason(b("ProfileLink.react"),{className:(j=b("bs_js_null_undefined")).fromOption(a),href:j.fromOption(c),onClick:j.fromOption(d),onMouseEnter:j.fromOption(e),onMouseLeave:j.fromOption(f),target:j.fromOption(g),uid:h},i)}f.make=a}),null);
__d("MessengerProfileLink.bs",["cx","URI","bs_block","bs_curry","React","Arbiter","Link.react","Badge.react","bs_caml_option","CurrentUser","ReasonReact.bs","ProfileLinkReact.bs","isMessengerDotComURI","MessengerProfileLinkAction","MessengerProfileLinkDomain","MessengerProfileLinkLogger.bs"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j=b("ReasonReact.bs").reducerComponent("MessengerProfileLink");function k(a,c,d,e,f,g,k){var l=b("isMessengerDotComURI")(new(h||(h=b("URI")))(window.location.href)),m=b("CurrentUser").isWorkUser()?b("MessengerProfileLinkDomain").WORK_CHAT:l?b("MessengerProfileLinkDomain").MESSENGER_DOT_COM:b("MessengerProfileLinkDomain").FB_SLASH_MESSAGES,n=function(a){return b("MessengerProfileLinkLogger.bs").logItemImpression(f,m,d,b("MessengerProfileLinkAction").HOVER)},o=function(a){return b("MessengerProfileLinkLogger.bs").logItemImpression(f,m,d,b("MessengerProfileLinkAction").CLICK)};return{debugName:j.debugName,reactClassInternal:j.reactClassInternal,handedOffState:j.handedOffState,getDerivedStateFromProps:j.getDerivedStateFromProps,didMount:function(a){var c=b("Arbiter").subscribe("Hovercard/show",function(c,d){return b("bs_curry")._1(a.send,0)}),d=b("Arbiter").subscribe("Hovercard/hide",function(c,d){return b("bs_curry")._1(a.send,1)});return b("bs_curry")._1(a.onUnmount,function(a){c.unsubscribe();d.unsubscribe();return 0})},didUpdate:j.didUpdate,willUnmount:j.willUnmount,shouldUpdate:j.shouldUpdate,render:function(d){var h=i.jsxs("span",{children:[e,g?i.jsx(b("Badge.react"),{size:"medium",type:"verified"}):null]});return i.jsx("span",{children:a!==void 0?l?i.jsx(b("Link.react"),{href:a,onClick:function(a){d.state.isHovercardShown&&n(0);return o(0)},target:c,children:h}):b("ReasonReact.bs").element(void 0,void 0,b("ProfileLinkReact.bs").make(void 0,void 0,function(a){return o(0)},void 0,function(a){if(d.state.isHovercardShown)return n(0);else return 0},void 0,f,[h])):h,className:"_6ybk"})},initialState:function(a){return{isHovercardShown:!1}},retainedProps:j.retainedProps,reducer:function(a,c){if(a)return b("bs_block").__(0,[{isHovercardShown:!1}]);else return b("bs_block").__(0,[{isHovercardShown:!0}])},jsElementWrapped:j.jsElementWrapped}}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(b("bs_caml_option").nullable_to_opt(a.href),a.target,a.location,a.name,a.uid,a.isVerified,[])});f.component=j;f.make=k;f.jsComponent=a}),null);
__d("TimeSpentRoomTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP:"GROUP",EVENT:"EVENT",LOCAL_COMMUNITY:"LOCAL_COMMUNITY"})}),null);
__d("TimeSpentRoomTypeEnum$FbtEnum",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({GROUP:"Group",EVENT:"Event"});e.exports=a}),null);
__d("MessengerContextBanner.react",["cx","fbt","Badge.react","CurrentUser","Image.react","ImageBlock.react","Link.react","MercuryParticipantsConstants","MercuryParticipantsImage.react","MercuryShareAttachmentRenderLocations","MercuryThreadImage.react","MessengerProfileLink.bs","MessengerTextWithEmoticons.react","React","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum","immutable","prop-types","requireWeak"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerProfileLink.bs").jsComponent,j=b("React"),k;b("requireWeak")("MessengerThreadImageReact.bs",function(a){k=a.jsComponent});a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=j.jsxs(b("ImageBlock.react"),{className:"_llj"+(this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER?" _2eu-":"")+(this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?" _2eu_":""),spacing:"large",style:this.props.style,children:[this.$1(),j.jsxs("div",{className:"_lll",children:[this.$2(),this.$3(),this.$4()]})]}),c=this.props.associatedObject;c&&c.action_link&&(a=j.jsx(b("Link.react"),{href:c.action_link,target:"_blank",style:{textDecoration:"none"},children:a}));return a};d.$1=function(){var a=this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER,c=this.props.associatedObject,d=null;if(!this.props.contactName&&c&&a)d=j.jsx(b("Image.react"),{className:"_4ld- _1wrc",src:c.profile_picture});else if(this.props.thread){c=k&&a?k:b("MercuryThreadImage.react");d=j.jsx(c,{showBadge:!1,participants:this.props.participants,size:a?60:null,thread:this.props.thread,viewer:this.props.viewer})}else this.props.participantIDs&&(d=j.jsx(b("MercuryParticipantsImage.react"),{participants:this.props.participantIDs,size:b("MercuryParticipantsConstants").BIG_IMAGE_SIZE}));return j.jsx("div",{className:"_llk",children:d})};d.$2=function(){if(this.props.location!==b("MercuryShareAttachmentRenderLocations").MESSENGER)return null;var a=this.props.isVerified?j.jsx(b("Badge.react"),{size:"medium",type:"verified"}):null,c=this.props.contactName;if(!c){var d=this.props.associatedObject;c=d?d.name:null}d=this.props.contactFBProfile;var e=this.props.contactID;return j.jsx("div",{className:"_llq",children:j.jsxs("span",{className:"_3oh-",children:[j.jsx(i,{href:d,location:"context_banner",name:c,uid:e}),a]})})};d.$3=function(){return j.jsx("div",{className:"_1n-e _36zg",children:j.jsx(b("MessengerTextWithEmoticons.react"),{text:this.props.connectionContext||"",renderEmoticons:!1})})};d.$4=function(){if(!this.props.contextItems.length){var a=this.props.associatedObject;if(a){a=b("TimeSpentRoomTypeEnum")[a.room_type];var c=b("CurrentUser").isWorkUser()?"Workplace":"Facebook";return j.jsx("div",{className:"_1n-e",children:h._({"GROUP":"Go to {productName} Group","EVENT":"Go to {productName} Event"},[h._param("productName",c),h._enum(a,b("TimeSpentRoomTypeEnum$FbtEnum"))])})}return null}return j.jsx("div",{children:this.props.contextItems.map(function(a,c){return j.jsx("div",{className:"_1n-e",children:j.jsx(b("MessengerTextWithEmoticons.react"),{text:a||"",renderEmoticons:!1})},"item:"+c)})})};return c}(j.PureComponent);a.propTypes={contactFBProfile:(c=b("prop-types")).string,contactID:c.string,contactName:c.string,associatedObject:c.object,connectionContext:c.string,contextItems:c.arrayOf(c.string).isRequired,isVerified:c.bool,location:c.string.isRequired,participantIDs:c.arrayOf(c.string),participants:c.instanceOf(b("immutable").Map),thread:c.object,viewer:c.string.isRequired};e.exports=a}),null);
__d("XMessengerContextBannerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/messenger/context_banner/",{profile_id:{type:"Int",required:!0},max_context_items:{type:"Int",defaultValue:3}})}),null);
__d("MessengerContextInformationStore",["AsyncRequest","EventEmitter","TimeSlice","XMessengerContextBannerController"],(function(a,b,c,d,e,f){"use strict";var g=new Map(),h=new Map();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$MessengerContextInformationStore1=function(a){if(h.get(a))return;var c=b("XMessengerContextBannerController").getURIBuilder().setInt("profile_id",a).getURI();c=new(b("AsyncRequest"))().setAllowCrossPageTransition(!0).setURI(c).setHandler(d.$MessengerContextInformationStore2.bind(babelHelpers.assertThisInitialized(d),a));h.set(a,c);c.send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getOrFetch=function(a){var c=g.get(a);c||b("TimeSlice").guard(this.$MessengerContextInformationStore1,"Chat Tab Messenger Context Banner Fetch",{propagationType:b("TimeSlice").PropagationType.ORPHAN})(a);return c};d.$MessengerContextInformationStore2=function(a,b){g.set(a,{connectionContext:b.payload.connection_context||"",contextItems:b.payload.context_items||[]}),h["delete"](a),this.emit("change")};return c}(b("EventEmitter"));e.exports=new a()}),null);
__d("PagesMessengerContextBanner.react",["cx","MercuryThreadImage.react","ProfileHeaderCoverPhoto.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=83,j=284,k=60;function a(a){var c=a.coverPhotoData?h.jsx(b("ProfileHeaderCoverPhoto.react"),{coverPhotoData:a.coverPhotoData,height:i,width:j}):null;return h.jsxs("div",{className:"_fj3",children:[c,h.jsxs("div",{className:"_2-0o",children:[h.jsx(b("MercuryThreadImage.react"),{className:"_2gye",size:k,thread:a.thread,viewer:a.viewer}),")"]})]})}e.exports=a}),null);
__d("MessengerContextBannerContainer.react",["DOMDimensions","MercuryIDs","MercuryShareAttachmentRenderLocations","MessengerContextBanner.react","MessengerContextInformationStore","MessengerParticipants.bs","PagesMessagingMercuryChatTabStore","PagesMessengerContextBanner.react","React","ReactComponentWithPureRenderMixin","ReactDOM","StoreAndPropBasedStateMixin","createReactClass_DEPRECATED","immutable","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("createReactClass_DEPRECATED")({displayName:"MessengerContextBannerContainer",mixins:[b("ReactComponentWithPureRenderMixin"),b("StoreAndPropBasedStateMixin")(b("MessengerContextInformationStore"),b("PagesMessagingMercuryChatTabStore"))],propTypes:{location:(a=b("prop-types")).string.isRequired,onResize:a.func,otherUserFBIDs:a.arrayOf(a.string),thread:a.object,threadID:a.string,viewer:a.string.isRequired},statics:{calculateState:function(a){var c=a.thread,d=null;c?d=c&&c.participants:a.otherUserFBIDs&&a.otherUserFBIDs.length===1&&(d=a.otherUserFBIDs.map(function(a){return b("MessengerParticipants.bs").getIDFromVanityOrFBID(a)}));var e=b("immutable").Map();d&&(e=e.withMutations(function(a){d&&d.forEach(function(c){a.set(c,b("MessengerParticipants.bs").getNow(c))})}));var f=null,g=null;c?(f=e.get(b("MercuryIDs").getParticipantIDFromFromThreadID(c.thread_id)),g=c.associated_object):f=d&&e.get(d[0]);c=b("PagesMessagingMercuryChatTabStore").getStateByThread(a.threadID);a=c.coverPhotoData;return babelHelpers["extends"]({associatedObject:g,contact:f,coverPhotoData:a,participantIDs:d,participants:e},h.getContextInformation(f&&f.fbid&&f.fbid.toString()))},getContextInformation:function(a){var c;a&&(c=b("MessengerContextInformationStore").getOrFetch(a.toString()));return c||{connectionContext:"",contextItems:[]}}},componentDidUpdate:function(){var a=b("ReactDOM").findDOMNode(this);if(!a)return;a=b("DOMDimensions").getElementDimensions(a).height;this.props.onResize&&this.props.onResize(a)},render:function(){if(!this.state.contact)return this.state.associatedObject&&this.props.location==b("MercuryShareAttachmentRenderLocations").MESSENGER?g.jsx(b("MessengerContextBanner.react"),{associatedObject:this.state.associatedObject,contextItems:this.state.contextItems,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,thread:this.props.thread,viewer:this.props.viewer}):null;if(this.state.contact.type==="page"){if(!this.state.connectionContext&&!this.state.contextItems.length)return null;if(this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT&&this.props.thread!=null)return g.jsx(b("PagesMessengerContextBanner.react"),{coverPhotoData:this.state.coverPhotoData,thread:this.props.thread,viewer:this.props.viewer})}return g.jsx(b("MessengerContextBanner.react"),{contactFBProfile:this.state.contact.href,contactID:this.state.contact.fbid,contactName:this.state.contact.name,connectionContext:this.state.connectionContext,contextItems:this.state.contextItems,isVerified:this.state.contact.verification_status==="BLUE_VERIFIED",location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,thread:this.props.thread,viewer:this.props.viewer})}});e.exports=h}),null);
__d("MessageList.react",["cx","requireCond","CurrentUser","MercuryIDs","MercuryMessageGroup","MercuryShareAttachmentRenderLocations","MessengerDomIDs.bs","MessengerLightweightActionUtils","MessengerMessage.bs","MessengerObjectAssociationType","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","cr:832269","PagesMessageListGreeting.react","React","ReactDOM","cr:1425066","cr:1140097","gkx","immutable","nullthrows","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerDomIDs.bs").ids,i=b("MessengerPresenceProvider.bs").jsComponent,j=b("React"),k=2,l=1e3*60*60,m=6,n=function(a){var b;b=(b=a)!=null?(b=b.log_message_data)!=null?b.message_type:b:b;switch(b){case"group_poll":return(b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.question_id:b:b:b;case"instant_game_update":return(b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.game_id:b:b:b;case"lightweight_event_create":case"lightweight_event_update":case"lightweight_event_delete":case"lightweight_event_update_time":case"lightweight_event_update_title":case"lightweight_event_update_location":case"lightweight_event_notify_before_event":case"lightweight_event_notify":case"lightweight_event_rsvp":return(b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.event_id:b:b:b;case"confirm_friend_request":b=((b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.friend_request_subtype:b:b:b)||((b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.subtype:b:b:b);return!b||b.toLowerCase()!=="icebreaker"?null:q(a);case"messenger_icebreaker_vote_cast":return q(a);default:return null}},o=function(a){return b("MessengerLightweightActionUtils").isLWAMessage(a)?"lwa":null};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={activeMessageID:null,messageGroups:[],prevMessages:null,newMessagesGroupIndex:Infinity,lastReadTimestamp:((b=d.props.thread)==null?void 0:b.last_read_timestamp)||Infinity,newMessagesCountForDisplay:0},d.$5=function(a){d.setState(function(b){return{activeMessageID:b.activeMessageID===a?null:b.activeMessageID}})},d.$6=function(a){d.setState({activeMessageID:a})},c)||babelHelpers.assertThisInitialized(d)}c.getDerivedStateFromProps=function(a,c){if(c.prevMessages!==a.messages)if(b("cr:832269")!=null){var d=c.lastReadTimestamp;c=a.location;var e=a.messages,f=a.thread,g=b("MercuryIDs").getParticipantIDFromUserID(a.viewer);(f==null?void 0:f.snippet_sender)===g&&(d=Infinity);f=e.findLast(function(a){return a.author===g});f&&f.timestamp>d&&(d=f.timestamp);f=a.messages.filter(function(a){return a.timestamp<=d});var h=a.messages.filter(function(a){return a.timestamp>d});f=b("MercuryMessageGroup").calculateMessageGroups(f,c);c=b("MercuryMessageGroup").calculateMessageGroups(h,c);h=h.filter(function(a){return a.log_message_type==null}).size;return{messageGroups:[].concat(f,c),prevMessages:e,newMessagesGroupIndex:f.length,newMessagesCountForDisplay:h,lastReadTimestamp:d}}else return{messageGroups:b("MercuryMessageGroup").calculateMessageGroups(a.messages,a.location),prevMessages:a.messages};else return null};var d=c.prototype;d.render=function(){var a=this,c=this.props,d=c.DateBreak,e=c.forGameChat,f=c.location,g=c.selectedMessageId,q=c.MessageGroup,v=c.CollapsedLogMessageGroup,w=[],x=[];c=this.props.thread&&this.props.thread.solid_color;var y=c?{backgroundColor:c}:null,z=this.state.activeMessageID,A=this.state.messageGroups,B=A.length,C=this.props.readReceipts;c=C.last();var D=c?c.watermark:0,E=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),F={};for(var c=this.props.messages.size-1;c>=0;c--){var G=this.props.messages.get(c),H=n(G)||o(G);H&&!F[H]&&(F[H]=G.message_id)}var I=function(h){var n=h>0?A[h-1]:null;n=n&&n.length>0?n[n.length-1]:null;var I=A[h],K=I[0],L=I[I.length-1],M=!1;b("cr:832269")!=null&&h>0&&h===a.state.newMessagesGroupIndex&&a.state.newMessagesCountForDisplay>0&&w.push(j.jsx("div",{ref:"newMessageDivider",children:j.jsx(b("cr:832269"),{newMessagesCount:a.state.newMessagesCountForDisplay})},"new-message-divider"));if(!n||K.timestamp-n.timestamp>l){M=!0;n=j.jsx(d,{date:new Date(K.timestamp),ref:"db:"+K.message_id},"db:"+K.message_id);x.length===0&&w.push(n)}n=o(K);if(n&&F[n]!==K.message_id){n=a.$1(K,F);w.push(n);return"continue"}if(K.action_type=="ma-type:log-message"){n=(H=K)!=null?(H=H.log_message_data)!=null?H.message_type:H:H;var N=(G=K)!=null?(G=G.log_message_data)!=null?(G=G.untypedData)!=null?G.friend_request_subtype:G:G:G,O=n==="parties_presence",P=n==="instant_game_update",Q=n==="group_poll";N=n==="messenger_icebreaker_vote_cast"||n==="confirm_friend_request"&&N&&N.toLowerCase()==="icebreaker";var R=["lightweight_event_create","lightweight_event_update","lightweight_event_delete","lightweight_event_update_time","lightweight_event_update_title","lightweight_event_update_location","lightweight_event_notify_before_event","lightweight_event_notify","lightweight_event_rsvp"].includes(n);if((f===b("MercuryShareAttachmentRenderLocations").CHAT||f===b("MercuryShareAttachmentRenderLocations").MESSENGER)&&(K.log_message_type==="log:video-call"||K.log_message_type==="log:phone-call"||n==="messenger_call_log")){n=a.$2(K,E,A,B,h,C,D,L,F,g);w.push(n)}else{n=a.$3(K,F);c=K.message_id;!P&&!Q&&!R&&!N&&x.push(n);if(O)return"continue";(x.length===I.length||P||Q||R||N)&&(a.$4(x,w,c,y,v),x=[]);(P||Q||R||N)&&w.push(n)}return"continue"}I=b("immutable").List(I);var S=r(A,B,h,F),T=!t(C,I,S),U=s(D,L),V=u(a.props.deliveryTimestamp,L),W=I.first().author,X=b("MessengerMessage.bs").getPersona(L),Y=E===K.author;O=Y?0:m+k;var Z=a.props.maxBubbleWidth?a.props.maxBubbleWidth-O:null;w.push(j.jsx(i,{subscribeToIDs:W?[W]:null,children:function(c){return j.jsx(q,{activeMessageID:p(z,I),author:W,deliveryTimestamp:V,forGameChat:e,hasDateBreak:M,isCanonical:a.props.isCanonical,isFromViewer:Y,isPageMessage:a.props.isPageMessage,isOnline:W?b("MessengerParticipantUtils.bs").has(c,W):!1,lastReadTimestamp:U,maxBubbleWidth:Z,messages:I,nextTimestamp:S,onReactionSwap:a.props.onReactionSwap,onAttachmentLoad:a.props.onAttachmentLoad,onMessageDeselect:a.$5,onMessageSelect:a.$6,onStickerClick:a.props.onStickerClick,onReplyToMessage:a.props.onReplyToMessage,pageID:a.props.isPageMessage===!0?a.props.viewer:null,persona:X,readReceipts:T?C:b("immutable").OrderedMap(),ref:function(b){return a.refs["mg:"+K.message_id]=b},thread:a.props.thread,threadID:a.props.threadID,scrollToRepliedMessage:a.props.scrollToRepliedMessage,selectedMessageId:g,rolesIDWithColor:a.props.rolesIDWithColor},"mg:"+K.message_id)}},"pp:"+K.message_id))};for(var J=0;J<B;J++){var K=I(J);if(K==="continue")continue}K=this.props.thread;I=this.props.threadID||(K==null?void 0:K.thread_id)||(K==null?void 0:K.thread_fbid);J=null;if(f===b("MercuryShareAttachmentRenderLocations").MESSENGER&&I){this.props.isPageMessage?J=j.jsx(b("PagesMessageListGreeting.react"),{messageCount:x.length+B,threadID:I}):b("cr:1140097")&&!b("gkx")("1332693")&&((K==null?void 0:K.object_association_type)===b("MessengerObjectAssociationType").GENERAL_CHAT||(K==null?void 0:K.work_associated_group)!=null)&&(K==null?void 0:(I=K.participants)==null?void 0:I.length)===1&&(J=j.jsx(b("cr:1140097"),{}))}return j.jsxs("div",{id:f===b("MercuryShareAttachmentRenderLocations").MESSENGER?h.CONVERSATION:null,children:[this.renderEmptyGroupChatStateMessage(),J,w]})};d.renderEmptyGroupChatStateMessage=function(){if(!b("CurrentUser").isWorkUser())return null;var a=this.props.thread;if(a&&b("cr:1425066")){a=(a=(a=a.work_associated_group)==null?void 0:a.is_default_child_group)!=null?a:!1;return a?j.jsx(b("cr:1425066"),{}):null}return null};d.getNewMessageDivider=function(){return this.refs.newMessageDivider};d.getMessageElement=function(a,c){if(c===!0){var d=this.refs["db:"+a];if(d)return b("ReactDOM").findDOMNode(d)}d=this.$7(a);if(!d)return null;d=d[0].message_id;var e=this.refs["mg:"+d];if(!e)return null;return c===!0&&d===a?b("ReactDOM").findDOMNode(e):e.getMessageElement(a)};d.getMessageComponent=function(a){var b=this.$7(a);if(!b)return null;b=b[0].message_id;b=this.refs["mg:"+b];return!b?null:b.getMessage(a)};d.$7=function(a){return this.state.messageGroups.find(function(b){return b.some(function(b){return b.message_id===a})})};d.$4=function(a,b,c,d,e){a.length!==0&&(a.length>1?b.push(j.jsx(e,{style:d,children:a},"mg:"+c)):b.push(j.jsx("div",{children:a},"mg:"+c)))};d.$2=function(a,c,d,e,f,g,h,k,l,m){var n=this,o,p,q=this.props.MessageGroup;p=((p=a)!=null?(p=p.log_message_data)!=null?p.untypedData:p:p)||{};o=(o=a)!=null?(o=o.log_message_data)!=null?o.message_type:o:o;if(o==="messenger_call_log"){o={message_type:"messenger_call_log",call_capture_attachments:p.call_capture_attachments,caller:b("MercuryIDs").getParticipantIDFromUserID(b("nullthrows")(p.caller_id,"caller id")),callee:b("MercuryIDs").getParticipantIDFromUserID(b("nullthrows")(p.callee_id,"callee id")),server_info_data:p.server_info,thread_id:a.thread_fbid,answered:p.event!=="missed_call",log_message_type:p.video?"log:video-call":"log:phone-call",event:p.event,added_participants:null,removed_participants:null,untypedData:null,image:null,name:null};a=babelHelpers["extends"]({},a,{log_message_data:o})}p={attach_type:"share",share:{style_list:["rtc_call_log","fallback"],log_message_body:a.log_message_body,log_message_data:a.log_message_data,log_message_type:a.log_message_type,timestamp:a.timestamp}};o=babelHelpers["extends"]({},a,{attachments:[p],body:""});var v=b("immutable").List([o]),w=r(d,e,f,l),x=!t(g,v,w),y=s(h,k),z=u(this.props.deliveryTimestamp,k),A=v.first().author;return j.jsx(i,{subscribeToIDs:A?[A]:null,children:function(d){return j.jsx(q,{author:v.first().author,deliveryTimestamp:z,forGameChat:n.props.forGameChat,isCanonical:n.props.isCanonical,isFromViewer:c===a.author,isOnline:A?b("MessengerParticipantUtils.bs").has(d,A):!1,isPageMessage:n.props.isPageMessage,lastReadTimestamp:y,maxBubbleWidth:n.props.maxBubbleWidth,messages:v,nextTimestamp:w,onAttachmentLoad:n.props.onAttachmentLoad,onMessageDeselect:n.$5,onMessageSelect:n.$6,onStickerClick:n.props.onStickerClick,readReceipts:x?g:b("immutable").OrderedMap(),selectedMessageId:m,thread:n.props.thread,threadID:n.props.threadID})}},a.message_id)};d.$3=function(a,c){var d=this.props.LogMessage,e=n(a);c=e?c[e]:null;return a.log_message_type!=="log:error-msg"?j.jsx(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:c===a.message_id},a.message_id):null};d.$1=function(a,c){c=c[b("nullthrows")(o(a),"other group id first message")];var d=this.props.LogMessage;return j.jsx(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:c===a.message_id},a.message_id)};return c}(j.PureComponent);a.propTypes={CollapsedLogMessageGroup:(c=b("prop-types")).func.isRequired,DateBreak:c.func.isRequired,deliveryTimestamp:c.number.isRequired,forGameChat:c.bool,isCanonical:c.bool,isPageMessage:c.bool,location:c.string.isRequired,LogMessage:c.func.isRequired,loadMoreMessages:c.func,MessageGroup:c.func.isRequired,messages:c.instanceOf(b("immutable").List).isRequired,onReactionSwap:c.func,onAttachmentLoad:c.func,onStickerClick:c.func,onReplyToMessage:c.func,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,viewer:c.string.isRequired,thread:c.object,threadID:c.string,scrollToRepliedMessage:c.func,rolesIDWithColor:c.any};function p(a,b){return b.find(function(b){return b.message_id===a})?a:null}function q(a){return(a=a)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.icebreaker_type:a:a:a}function r(a,b,c,d){if(c>=b-1)return Infinity;var e=a[c+1][0],f=o(e);if(f&&d[f]!==e.message_id||((f=e)!=null?f.action_type:f)=="ma-type:log-message")return r(a,b,c+1,d);else return e.timestamp}function s(a,b){return b.timestamp>a?a:Infinity}function t(a,b,c){return b.isEmpty()||!a.isEmpty()&&(a.last().action<b.first().timestamp||a.first().action>=c)}function u(a,b){return b.timestamp>a?a:Infinity}e.exports=a}),null);
__d("MessengerAdsMessageSeenThreadFalcoEvent",["FalcoLoggerInternal","getSamplingPolicyConfig_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getSamplingPolicyConfig_DO_NOT_USE")("falco","messenger_ads_message_seen_thread");c=b("FalcoLoggerInternal").create(a);e.exports=c}),null);
__d("MessengerDateBreak_DEPRECATED.react",["cx","FBLogger","React","WorkChatRedesignedMessageListCheck.re","formatDate","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){return this.props.date.getTime()!==a.date.getTime()};d.render=function(){try{var a=b("formatDate")(this.props.date,{future:"g:ia",today:"g:ia",withinWeek:"D g:ia",thisYear:"M jS, g:ia",older:"m/d/Y g:ia"});return h.jsx("h4",{className:b("joinClasses")(this.props.className,"_497p"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w5v":"")+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w78":"")+" _2lpt"),children:h.jsx("time",{className:"_3oh-",children:a})})}catch(a){b("FBLogger")("messaging").mustfix("invalid timestamp: "+this.props.date.getTime());return null}};return c}(h.Component);a.propTypes={date:b("prop-types").instanceOf(Date).isRequired};e.exports=a}),null);
__d("MessengerFlexArea.react",["cx","CSS","Event","MessengerSignals.bs","React","ReactDOM","ResponsiveBlock.react","Style","SubscriptionsHandler","Vector","clearTimeout","createReactClass_DEPRECATED","getElementRect","getScrollPosition","joinClasses","prop-types","setTimeoutAcrossTransitions","throttle"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");c=b("createReactClass_DEPRECATED")({displayName:"MessengerFlexArea",propTypes:{limitCalculationToParent:(a=b("prop-types")).bool,beforeResize:a.func,onResize:a.func,bottomOffset:a.number,maxHeight:a.oneOfType([a.number,a.oneOf[void 0,null]])},_subscriptions:null,_onResizeTimeout:null,getInitialState:function(){return{height:0}},componentDidMount:function(){var a=this,c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("Event").listen(window,"resize",b("throttle")(this.recalculateHeight,51)),b("MessengerSignals.bs").onResize(function(){a.recalculateHeight()}));this._subscriptions=c;b("setTimeoutAcrossTransitions")(this.recalculateHeight,0)},componentDidUpdate:function(a){a.maxHeight!==this.props.maxHeight&&this.recalculateHeight()},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release(),b("clearTimeout")(this._onResizeTimeout)},render:function(){return h.jsx(b("ResponsiveBlock.react"),{className:b("joinClasses")(this.props.className,"_9hq"),onResize:this._handleResponsiveBlockResize,style:{height:this.state.height+"px"},children:this.props.children})},recalculateHeight:function(){if(!this.isMounted())return;var a=b("ReactDOM").findDOMNode(this),c=a.parentNode,d=this.state.height,e=b("Vector").getViewportDimensions().y,f=!1;c&&b("Style").get(c,"display")==="none"&&(b("Style").set(c,"display","initial"),f=!0);var g=!1;c instanceof Element&&b("CSS").hasClass(c,"hidden_elem")&&(b("CSS").removeClass(c,"hidden_elem"),g=!0);if(this.props.limitCalculationToParent===!0&&c!=null&&c instanceof Element){var h=c.getBoundingClientRect().height;this.setState({height:h},this.props.onResize);return}e-=b("Vector").getElementPosition(c||a).y;h=b("getScrollPosition")(window);e+=h.y;this.props.bottomOffset&&(e-=this.props.bottomOffset);c&&(Array.from(c.childNodes).forEach(function(a){if(a.nodeType===Node.COMMENT_NODE||b("Style").get(a,"position")==="absolute")return;e-=b("getElementRect")(a).height}),e+=b("getElementRect")(a).height);f&&b("Style").set(c,"display","");g&&c instanceof Element&&b("CSS").addClass(c,"hidden_elem");(isNaN(e)||e<0)&&(e=0);this.props.maxHeight!=null&&(e=Math.min(this.props.maxHeight,e));e!==d&&(this.props.beforeResize&&this.props.beforeResize(),this.setState({height:e},this.props.onResize))},_handleResponsiveBlockResize:b("throttle")(function(a,c){if(!this.isMounted())return;c===this.state.height&&(this.props.beforeResize&&this.props.beforeResize(),b("clearTimeout")(this._onResizeTimeout),this.props.onResize&&(this._onResizeTimeout=b("setTimeoutAcrossTransitions")(this.props.onResize,0)))},51)});e.exports=c}),null);
__d("MessengerFlexScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","React","prop-types"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={shouldTrackBottom:c.props.shouldStickToBottom},c.$2=function(){c.props.onScroll&&c.props.onScroll();if(!c.props.shouldStickToBottom)return;c.$3()},c.$1=function(){c.trackBottomIfRequired()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.props.onMount&&this.props.onMount()};d.render=function(){return g.jsxs(b("MessengerFlexArea.react"),{className:this.props.className,onResize:this.$1,ref:"flexArea",maxHeight:this.props.maxHeight,limitCalculationToParent:this.props.limitCalculationToParent,bottomOffset:this.props.bottomOffset,children:[this.props.flexChildren,g.jsx(b("MessengerScrollableArea.react"),{height:"100%",needsFastScrollHandler:this.state.shouldTrackBottom,onScroll:this.$2,ref:"scrollable",tabIndex:this.props.tabIndex,children:this.props.children}),this.props.footerChildren]})};d.$3=function(){this.isScrolledToBottom()?this.setState({shouldTrackBottom:!0}):this.setState({shouldTrackBottom:!1})};d.getArea=function(){return this.refs.scrollable&&this.refs.scrollable.getArea()};d.handleResize=function(){this.refs.flexArea&&this.refs.flexArea.recalculateHeight()};d.trackBottomIfRequired=function(){this.state.shouldTrackBottom&&this.scrollToBottom()};d.overrideTrackBottom=function(a){this.setState({shouldTrackBottom:a})};d.scrollToBottom=function(a){this.refs.scrollable&&this.refs.scrollable.scrollToBottom(a)};d.scrollToTop=function(a){this.refs.scrollable&&this.refs.scrollable.scrollToTop(a)};d.scrollToPosition=function(a,b,c){this.refs.scrollable&&this.refs.scrollable.scrollToPosition(a,b,c)};d.isScrolledToBottom=function(){var a=this.refs.scrollable;return a?a.isScrolledToBottom():!0};d.isScrolledToBottomWithHeight=function(a){return this.refs.scrollable.isScrolledToBottomWithHeight(a)};d.isScrolledToTop=function(){return this.refs.scrollable&&this.refs.scrollable.isScrolledToTop()};d.getScrollTop=function(){return this.refs.scrollable&&this.refs.scrollable.getScrollTop()||0};return c}(g.Component);a.propTypes={flexChildren:(c=b("prop-types")).node,footerChildren:c.node,onMount:c.func,onScroll:c.func,shouldStickToBottom:c.bool,tabIndex:c.number,maxHeight:c.number,bottomOffset:c.number,limitCalculationToParent:c.bool};e.exports=a}),null);
__d("MessengerNewMessagesNoticeReact.bs",["cx","ix","fbt","React","Link.react","Image.react","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=h("86939"),l=i._("New Messages");c=b("ReasonReact.bs").statelessComponent("MessengerNewMessagesNoticeReact");function a(a){var c=a.isOpen,d=a.onClick;a=a.label;a=a!==void 0?a:l;return j.jsx("div",{children:j.jsxs(b("Link.react"),{className:"_5f0v _4wzs",onClick:d,tabIndex:c?0:-1,children:[j.jsx(b("Image.react"),{className:"_4wzt",src:k}),j.jsx("div",{children:a,className:"_1bqr"})]}),"aria-hidden":!c,className:"_4wzq"+(c?" _4wzr":"")+(c?"":" _4-je")})}d=a;e=a;f.newMessageSrc=k;f.defaultLabel=l;f.component=c;f.make=d;f.jsComponent=e}),null);
__d("MercuryTypingAnimationReact.bs",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a=a.className;return h.jsx("div",{children:h.jsxs("div",{children:[h.jsx("div",{className:"_5pd7"}),h.jsx("div",{className:"_5pd7"}),h.jsx("div",{className:"_5pd7"})],className:"_4b0g"}),className:b("joinClasses")("_4a0v _1x3z",a!==void 0?a:"")})}c=a;f.make=c}),null);
__d("MessengerBubbleReact.re",["react","MessengerBubble.react","ReasonReact.bs"],(function(a,b,c,d,e,f){var g,h=g||b("react");function a(a){return h.jsx(b("MessengerBubble.react"),babelHelpers["extends"]({},a))}f.MessengerBubbleTypeChecked=a;c=function(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerBubble.react"),{attachments:a,body:c,className:d},e)};f.make=c}),null);
__d("MessengerTypingIndicatorReact.bs",["cx","bs_block","bs_curry","Image.bs","React","bs_js_dict","bs_caml_obj","immutable","MercuryIDs","bs_belt_Option","bs_caml_option","CurrentUser","ReasonReact.bs","MessengerPersonas.bs","MessengerParticipants.bs","WorkForeignEntityType","MessengerBubbleReact.re","MercuryTypingAnimationReact.bs","MessengerProfileImageWrapperReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=b("ReasonReact.bs").reducerComponent("MessengerTypingIndicatorReact");function a(a,c,d,e){var f=function(c,a){return b("bs_caml_option").nullable_to_opt(b("MessengerParticipants.bs").getMulti([a],function(d){b("bs_curry")._1(c.send,b("bs_block").__(0,[b("bs_js_dict").get(d,a)]));return 0}))},g=function(a){if(c==null)return;else{a=b("MercuryIDs").getUserIDFromParticipantID(c);if(a==null)return;else return b("bs_caml_option").nullable_to_opt(b("MessengerPersonas.bs").getNow(a))}};return{debugName:i.debugName,reactClassInternal:i.reactClassInternal,handedOffState:i.handedOffState,getDerivedStateFromProps:i.getDerivedStateFromProps,didMount:function(a){var d=a.state.author;if(d!==void 0||c==null)return 0;else{d=b("MessengerParticipants.bs").getNow(c);if(d==null)return b("bs_curry")._1(a.send,b("bs_block").__(1,[f(a,c)]));else return b("bs_curry")._1(a.send,b("bs_block").__(0,[d==null?void 0:b("bs_caml_option").some(d)]))}},didUpdate:function(a){a=a.newSelf;var d=a.state.subscription.contents,e=a.state.author;if(d!==void 0)return 0;else{if(e!==void 0&&(c==null||b("bs_caml_obj").caml_equal(b("bs_caml_option").valFromOption(e).id,c)))return 0;if(c==null)return 0;else return b("bs_curry")._1(a.send,b("bs_block").__(1,[f(a,c)]))}},willUnmount:function(a){a=a.state.subscription.contents;if(a!==void 0)return b("MessengerParticipants.bs").removeCallback(b("bs_caml_option").valFromOption(a));else return 0},shouldUpdate:i.shouldUpdate,render:function(c){var d=g(0);if(c.state.author===void 0&&d===void 0)return null;else{var e=c.state.author;d=d!==void 0?d.profile_picture_url:e!==void 0?b("bs_caml_option").nullable_to_opt(b("bs_caml_option").valFromOption(e).image_src):void 0;e=b("bs_belt_Option").flatMap(b("bs_belt_Option").flatMap(c.state.author,function(a){return b("bs_caml_option").nullable_to_opt(a.work_foreign_entity_info)}),function(a){return b("bs_caml_option").some(a.type)});e=e!==void 0?b("CurrentUser").isWorkUser()&&b("bs_caml_obj").caml_equal(b("bs_caml_option").valFromOption(e),b("WorkForeignEntityType").FOREIGN):!1;c=c.state.author;return h.createElement("div",{className:"_1t_p _1hbw"},h.createElement("div",{className:"_1t_q"},h.createElement(b("MessengerProfileImageWrapperReact.bs").make,{isMessengerUser:c!==void 0?b("bs_caml_option").valFromOption(c).is_messenger_user:!1,size:32,className:"_1t_r",showBadge:e,children:d!==void 0?b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,"",void 0,void 0,d,32,void 0,32,void 0,[])):b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,"",void 0,void 0,void 0,32,void 0,32,void 0,[]))})),h.createElement("div",{className:"_41ud"},h.createElement("div",{className:"_o46 _3erg _29_7"},b("ReasonReact.bs").element(void 0,a,b("MessengerBubbleReact.re").make(b("immutable").List([h.jsx(b("MercuryTypingAnimationReact.bs").make,{},"animation")]),"","_3058",[])))))}},initialState:function(a){return{author:c==null?void 0:b("bs_caml_option").nullable_to_opt(b("MessengerParticipants.bs").getNow(c)),subscription:{contents:void 0}}},retainedProps:i.retainedProps,reducer:function(a,c){if(a.tag){c.subscription.contents=a[0];return 0}else{c.subscription.contents=void 0;return b("bs_block").__(0,[{author:a[0],subscription:c.subscription}])}},jsElementWrapped:i.jsElementWrapped}}c=32;f.component=i;f.cIMAGE_SIZE=c;f.make=a}),null);
__d("MessengerTypingIndicatorReact.re",["bs_curry","MessengerTypingIndicatorReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){a=b("ReasonReact.bs").wrapReasonForJs(b("MessengerTypingIndicatorReact.bs").component,function(a){return b("bs_curry")._4(b("MessengerTypingIndicatorReact.bs").make,a.setBubbleRef,a.userID,a.showName,a.children)});f.component=a;f["default"]=a}),null);
__d("MessengerUserInputActions",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({UPDATE_USER_INPUT_REQUESTED:null});e.exports={MessengerUserInputActions:a}}),null);
__d("MessengerUserInputAppDispatcher",["ExplicitRegistrationDispatcher","objectValues"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;babelHelpers.assertThisInitialized(b).dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}var d=c.prototype;d.explicitlyRegisterStoresInMap=function(a){this.explicitlyRegisterStores(b("objectValues")(a))};return c}(b("ExplicitRegistrationDispatcher"));e.exports=new a({strict:!0})}),null);
__d("MessengerUserInputActionsHandler",["MessengerUserInputActions","MessengerUserInputAppDispatcher"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerUserInputActions").MessengerUserInputActions;a={updateUserInputRequested:function(a,c,d){b("MessengerUserInputAppDispatcher").dispatch({type:g.UPDATE_USER_INPUT_REQUESTED,data:{isUserInputRequested:a,requestNumResults:c,requestType:d}})}};e.exports=a}),null);
__d("WorkGalahadScrollToMessageEventEmitter",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("EventEmitter"))()}),null);
__d("MessengerConversation.react",["ix","csx","cx","fbt","requireCond","Bootloader","BootloadOnRender.react","ChatTypingIndicatorsWrapper.bs","CSS","CurrentUser","DOM","DOMDimensions","ErrorBoundary.react","Event","EventProfiler","FantaPageGreetingLoader.react","Image.react","ImmutableObject","JSResource","KeyEventController","LazyComponent.react","Link.react","MercuryIDs","MercuryShareAttachmentRenderLocations","cr:1203488","MessageList.react","MessengerActions","MessengerAttachmentRenderer","MessengerBootloadedLogMessage.react","MessengerBusinessQuickReplyLocationQueryWebGraphQLQuery","MessengerBusinessUserProfileLocationQueryWebGraphQLQuery","MessengerButtonReact.re","MessengerCollapsedLogMessageGroup.react","MessengerContextBannerContainer.react","MessengerDateBreak_DEPRECATED.react","MessengerDialogs.re","MessengerDotComAndInboxM4Check.bs","MessengerFlexScrollableArea.react","MessengerNewMessagesNoticeReact.bs","MessengerQuickCamOrigins","MessengerQuickReplyUtils","MessengerReadReceipt.bs","MessengerSpinner.react","MessengerThreadFetchLoggerUtil","MessengerThreadSearchActions","MessengerTypingIndicatorReact.re","MessengerUserInputActionsHandler","MessengerUserProfileLocationUtils","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","MessengerViewBirthdayQueryWebGraphQLQuery","MessengerViewerContactMethodsWebGraphQLQuery","Parent","React","ReactDOM","SubscriptionsHandler","UserActivity","WebGraphQL","WebMessengerConstants","WorkBotLandingPageHelper","WorkChatRedesignedMessageListCheck.re","WorkGalahadScrollToMessageEventEmitter","cr:1071079","cr:1272775","cr:1071080","asset","emptyFunction","getPageIDFromThreadID","gkx","ifRequired","immutable","joinClasses","lazyLoadComponent","nullthrows","promiseDone","prop-types","qex","setImmediate","setTimeout","throttle","MessengerAdsMessageSeenThreadFalcoEvent"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b("ChatTypingIndicatorsWrapper.bs").jsComponent,l=b("MessengerButtonReact.re").make,m=b("MessengerNewMessagesNoticeReact.bs").jsComponent,n=b("MessengerTypingIndicatorReact.re").component,o=b("MessengerUserProfileLocationUtils").FetchMessengerUserRegionAndPostalCode,p=b("MessengerUserProfileLocationUtils").PassesGlobalizationGK,q=b("React"),r=b("WorkBotLandingPageHelper").shouldShowBotLandingPage;b("immutable").OrderedMap;var s=0,t=20,u=100,v=1e3,w=200,x=b("gkx")("833128"),y=b("lazyLoadComponent")(b("JSResource")("WorkChatBotConversationGreetingContainer.react").__setRef("MessengerConversation.react")),z=b("lazyLoadComponent")(b("JSResource")("WorkChatPinnedMessages.react").__setRef("MessengerConversation.react")),A=b("lazyLoadComponent")(b("JSResource")("OmniMSuggestionsContainer.react").__setRef("MessengerConversation.react"));function B(a,c){return!!(b("KeyEventController").filterEventTypes(a,c)&&b("KeyEventController").filterEventModifiers(a,c)&&a.target instanceof Element&&b("Parent").bySelector(a.target,"._4_j4"))}var C={};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={readReceipts:D(d.props),scrollingToUnreadMessage:!1,selectedMessageId:null,showUnreadNotice:!1,unreadCount:d.props.thread?d.props.thread.unread_count:0,width:0,viewerBirthday:null,viewerEmail:null,viewerPhone:null,viewerState:null,viewerZipCode:null,shouldJumpToMessage:!1,isLandingPageDismissed:!1,renderScrollToBottom:!1},d.$1=null,d.$2=null,d.$3=null,d.$4=b("immutable").List(),d.$5=[],d.$6={originalScrollHeight:0,originalScrollTop:0},d.$7=function(){},d.$8=function(){},d.$16=function(){var a=d.$19();if(!d.refs||!a||d.props.isLoading){d.$5=[];return}var c=b("getPageIDFromThreadID")(d.props.threadID),e=d.refs.messageList;if(!e||!c){d.$5=[];return}var f=10,g=a.getElement().getBoundingClientRect(),h=[];d.$4.forEach(function(a){var e=a.message_id,i=d.refs.messageList.getMessageElement(e);if(i){i=i.getBoundingClientRect();i.top>g.top-f&&i.bottom<g.bottom+f&&(h.push(e),d.$5.includes(e)||(b("gkx")("1181700")?b("MessengerAdsMessageSeenThreadFalcoEvent").log(function(){return{message_id:e,ad_client_token:a.ad_client_token,ad_id:a.ad_id,page_id:c}}):b("Bootloader").loadModules(["MessengerAdsWebLogger","MNAdsLoggerEventEnum"],function(b,d){b.log(a.ad_client_token,a.ad_id,d.MESSAGE_SEEN_THREAD,!0,e,c)},"MessengerConversation.react")))}},babelHelpers.assertThisInitialized(d));d.$5=h},d.$20=function(){b("MessengerThreadFetchLoggerUtil").markerEnd(d.props.threadID,2),d.$20=b("emptyFunction")},d.$40=function(){var a;return((a=d.props.contact)==null?void 0:a.user_type)==="page"&&b("getPageIDFromThreadID")(d.props.threadID)!==null},d.$42=function(){d.state.renderScrollToBottom?(d.scrollToBottom(!0),d.setState({renderScrollToBottom:!1})):b("MessengerActions").changeMid(null)},d.$41=function(){d.setState({isLandingPageDismissed:!0})},d.$9=function(){var a=d.$19();a&&a.pageUp();return!1},d.$10=function(){var a=d.$19();a&&a.pageDown();return!1},d.$11=function(a){if(a.target===document.body){d.scrollToTop();return!1}return null},d.$12=function(a){if(a.target===document.body){d.scrollToBottom();return!1}return null},d.$15=function(){if(!d.refs)return;if(!d.refs.scrollable)return;var a=d.$19(),c=d.refs.quickReply;c&&b("CSS").conditionClass(c,"_1mzg",!d.isScrolledToBottom());d.$13();d.$14();a&&d.state.unreadCount&&d.$26(a)&&d.setState({showUnreadNotice:!1,unreadCount:0});a&&a.isScrolledToBottom()&&d.setState({renderScrollToBottom:!1});d.$46(a);d.$47(a);d.$8()},d.$45=function(a){a.preventDefault(),d.setState({showUnreadNotice:!1}),d.$22(!0)},d.$14=function(){if(d.props.messages.size===0||d.props.thread&&d.props.thread.unread_count===0||!d.isScrolledToBottom())return;b("UserActivity").isOnTab()&&b("UserActivity").isActive()?d.props.onRead(d.props.threadID):d.$3||(d.$3=b("UserActivity").subscribe(function(){b("UserActivity").isOnTab()&&(d.$18(),d.props.onRead(d.props.threadID))}))},d.handleResize=function(){if(!d.refs)return;if(d.refs.scrollable){d.refs.scrollable.handleResize();var a=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(d.refs.scrollable)).width;a!==d.state.width&&d.setState({width:a})}a=d.refs.quickReply;a&&b("CSS").conditionClass(a,"_1mzg",!d.isScrolledToBottom());d.trackBottomIfRequired()},d.$17=function(a){d.props.messages.some(function(b){return b.message_id===a})?d.$24(a,!0,function(){d.setState({selectedMessageId:a})}):(d.setState({selectedMessageId:null,shouldJumpToMessage:!0}),b("MessengerActions").changeMid(a))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this,c,d=new(b("SubscriptionsHandler"))();d.addSubscriptions(b("Event").listen(window,"resize",b("throttle")(this.handleResize,50)),(c=b("KeyEventController")).registerKey("PAGE_UP",this.$9,B),c.registerKey("PAGE_DOWN",this.$10,B),c.registerKey("HOME",this.$11,B),c.registerKey("END",this.$12,B));this.$2=d;this.$13();this.handleResize();this.$14();this.$7=b("throttle")(this.$15,u);this.$8=b("throttle")(this.$16,v);this.$4=this.props.messages.filter(function(a){return a.is_sponsored});this.$8();b("WorkGalahadScrollToMessageEventEmitter").addListener("scrollToMessage",function(b){a.$17(b)})};d.UNSAFE_componentWillReceiveProps=function(a){var b=a.threadID!==this.props.threadID;b&&(this.$18(),this.setState({scrollingToUnreadMessage:!1,showUnreadNotice:!1,unreadCount:a.thread?a.thread.unread_count:0,isLandingPageDismissed:!1}));(b||a.messages!==this.props.messages)&&(this.$4=a.messages.filter(function(a){return a.is_sponsored}));this.setState({readReceipts:D(a)})};d.componentWillUnmount=function(){this.$18(),this.$2&&this.$2.release(),this.$1!=null&&window.clearTimeout(this.$1),b("WorkGalahadScrollToMessageEventEmitter").removeAllListeners("scrollToMessage")};d.UNSAFE_componentWillUpdate=function(){var a=this.$19();a?this.$6={originalScrollHeight:a.getScrollHeight(),originalScrollTop:a.getScrollTop()}:this.$6={originalScrollHeight:0,originalScrollTop:0}};d.componentDidUpdate=function(a,c){var d=this;if(!this.refs)return;if(!this.refs.scrollable)return;(!this.props.isLoading||!this.props.messages.isEmpty())&&this.$20();c=this.props.threadID!==a.threadID;if(c||E(a,this.props))this.scrollToBottom(),this.$21();else{var e=this.$19();if(e){var f=e.getScrollHeight();if(f!==this.$6.originalScrollHeight){f=e.getScrollHeight()-this.$6.originalScrollHeight+this.$6.originalScrollTop;this.refs.scrollable.scrollToPosition(f)}else this.$21()}}this.props.messages!==a.messages&&(this.$14(),this.state.scrollingToUnreadMessage&&this.$22(!1),this.$23());e=this.props.selectedMessage;this.state.shouldJumpToMessage&&e&&this.$24(e,!0,function(){d.setState({shouldJumpToMessage:!1})});this.$1=b("setTimeout")(function(){var a=d.$19(),c=d.state.unreadCount;d.trackBottomIfRequired();if(a&&d.state.unreadCount&&!d.state.scrollingToUnreadMessage&&!d.props.isLoading&&d.props.selectedMessage==null&&!d.$25()){d.$26(a)?d.setState({showUnreadNotice:!1,unreadCount:0}):c==1&&((c=d.props.messages.last())==null?void 0:c.log_message_type)!==null?d.setState({showUnreadNotice:!1,unreadCount:0}):d.setState({showUnreadNotice:!0})}d.$13();d.$8();b("setImmediate")(function(){var c=d.props.selectedMessage;a&&c!=null&&!d.props.scrolledToMid&&b("MessengerThreadSearchActions").scrollToMessage(c)})},0);f=a.messages&&a.messages.size||0;e=this.props.messages&&this.props.messages.size||0;(c||f===0&&(e>0||!this.props.isLoading))&&b("EventProfiler").informManualInteractionTimestamp(["MessengerThredRow"],!0,"click")};d.render=function(){var a=this,c;if(this.props.isLoading&&this.props.messages.isEmpty())return this.$27();var d=this.props.messages.last(),e=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer);this.$28(d);var f=this.$29(d),g=this.$30(d);this.$31(d);e=d&&d.author!==e?f||g:null;f=null;if(Array.isArray(e)){g=e.every(function(b){return b.content_type==="user_birthday"&&a.state.viewerBirthday===null||b.content_type==="user_email"&&a.state.viewerEmail===null||b.content_type==="user_phone_number"&&a.state.viewerPhone===null||b.content_type==="user_state"&&a.state.viewerState===null||b.content_type==="user_zip_code"&&a.state.viewerZipCode===null});if(!g){g=b("MessengerQuickReplyUtils").localizeTitleIfNecessary(e);f=q.jsx(b("BootloadOnRender.react"),{component:q.jsx(b("LazyComponent.react"),{options:g,threadID:d.thread_id,onVoiceClipCreate:this.props.onVoiceClipCreate,viewer:this.props.viewer,quickCamOriginLocation:b("MessengerQuickCamOrigins").MESSENGER,messageId:d.message_id,pageId:b("MercuryIDs").getUserIDFromParticipantID(d.author),isMessengerAdPreview:this.props.isMessengerAdPreview,isSponsored:d.is_sponsored,useM4QR:this.props.useM4QR,viewerBirthday:this.state.viewerBirthday,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone,viewerState:this.state.viewerState,viewerZipCode:this.state.viewerZipCode}),loader:b("JSResource")("MessengerBotsQuickReplyButtonList.react").__setRef("MessengerConversation.react"),placeholder:q.jsx("div",{})})}}e=null;g=null;f&&(e=q.jsx("div",{className:"_51op",children:q.jsx("div",{className:"_51oq",onResize:this.handleResize})}),g=q.jsx("div",{ref:"quickReply",className:"_1mzb",onResize:this.handleResize,children:f},"quick_reply"));d=j._("Messages");f=j._("Load more...");var h=this.$32(),i=null;if(b("cr:1071079")!=null&&b("cr:1071080")!=null&&b("cr:1071080").shouldRenderChatNullState(this.props.messages,this.props.threadID,(c=this.props.contact)==null?void 0:c.user_type,this.props.viewer)){((c=this.props.thread)==null?void 0:c.work_associated_group)!=null&&b("cr:1272775")!=null?i=q.jsx(b("cr:1272775"),{group:this.props.thread.work_associated_group},"work_teamwork_chat_nullstate"):i=q.jsx(b("cr:1071079"),{messageType:b("nullthrows")(b("cr:1071080").getNullStateMessageType(this.props.threadID,this.props.viewer))},"work_teamwork_chat_nullstate")}return q.jsxs(q.Fragment,{children:[q.jsx(b("MessengerFlexScrollableArea.react"),{className:this.props.className,flexChildren:this.renderTopOfConversationNotice(),footerChildren:[g,i],onMount:function(){return b("setImmediate")(a.$14)},onScroll:this.props.useManualFetch?void 0:this.$7,ref:"scrollable",shouldStickToBottom:!0,tabIndex:0,bottomOffset:this.props.bottomOffset,children:q.jsxs("div",{"aria-label":d,className:b("joinClasses")("__i_"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w74":"")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7i2k":""),this.props.innerClassName),role:"region",children:[q.jsx("h3",{className:"accessible_elem",children:d}),this.$33(),this.props.useManualFetch&&!this.props.upExhausted?q.jsx("div",{className:"_7fim",children:q.jsx(l,{className:"_41jf",label:f,onClick:function(){return a.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP,a.props.threadID)},type:"primary",use:"default"})}):null,this.$34(),this.$35()&&q.jsx(b("FantaPageGreetingLoader.react"),{thread:this.props.thread,threadID:this.props.threadID}),i?null:h||q.jsx(b("MessageList.react"),{DateBreak:b("MessengerDateBreak_DEPRECATED.react"),deliveryTimestamp:this.props.deliveryTimestamp,isCanonical:this.props.isCanonical,LogMessage:b("MessengerBootloadedLogMessage.react"),CollapsedLogMessageGroup:b("MessengerCollapsedLogMessageGroup.react"),MessageGroup:b("cr:1203488"),messages:this.props.messages,onAttachmentLoad:this.$36(this.props.threadID),onReactionSwap:this.$37,onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.state.readReceipts,ref:"messageList",selectedMessageId:this.state.selectedMessageId,location:b("MercuryShareAttachmentRenderLocations").MESSENGER,viewer:this.props.viewer,thread:this.props.thread,scrollToRepliedMessage:this.$17}),this.props.useManualFetch&&!this.props.downExhausted?q.jsx("div",{className:"_7fim",children:q.jsx(l,{className:"_41jf",label:f,onClick:function(){return a.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_DOWN,a.props.threadID)},type:"primary",use:"default"})}):null,e,q.jsx(k,{indicatorClass:n,indicatorsDidShow:function(){a.trackBottomIfRequired()},rootClassName:"clearfix _17pz",threadID:this.props.threadID,viewer:this.props.viewer}),b("gkx")("678591")&&q.jsx(b("ErrorBoundary.react"),{context:{project:"omnim"},children:q.jsx(q.Suspense,{fallback:q.jsx("div",{}),children:q.jsx(A,{threadID:this.props.threadID,trackBottom:function(){return a.trackBottomIfRequired()}})})})]})}),b("WorkChatRedesignedMessageListCheck.re").enabled?this.$38():this.$39()]})};d.$32=function(){if(!b("CurrentUser").isWorkUser())return null;if(!this.$40())return null;if(this.state.isLandingPageDismissed===!0)return null;return this.props.contact&&r(this.props.messages)?q.jsx(q.Suspense,{fallback:q.jsx(b("MessengerSpinner.react"),{}),children:q.jsx(y,{contact:this.props.contact,threadID:this.props.threadID,onDismiss:this.$41})}):null};d.$39=function(){var a=this.$19();if(a){a=a.getElement().getBoundingClientRect().height;a={top:a-74+"px"}}else a={bottom:"15%"};return this.props.useManualFetch&&!this.props.isSearchResult||this.state.renderScrollToBottom?q.jsx(b("Link.react"),{"aria-label":j._("Jump to the last message"),style:a,className:"_69xg",onClick:this.$42,children:q.jsx(b("Image.react"),{className:"_69xi",src:g("415099")})}):null};d.$38=function(){return this.props.useManualFetch&&!this.props.isSearchResult||this.state.renderScrollToBottom?q.jsx(b("Link.react"),{className:"_8wfp",onClick:this.$42,children:j._("Back to Latest")}):null};d.$29=function(a){var b=null;a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);var c=a&&a.message_classification==="ad_message";c&&Array.isArray(a&&a.quick_replies)&&(b=a&&a.quick_replies);return b};d.$30=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return Array.isArray(a&&a.quick_replies)?a&&a.quick_replies:null};d.$43=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return a&&a.user_input};d.$28=function(a){var c=b("gkx")("964442");if(c){c=this.$43(a);if(!c){b("MessengerUserInputActionsHandler").updateUserInputRequested(!1,s);return}else c.type==="address_auto_complete"&&b("MessengerUserInputActionsHandler").updateUserInputRequested(!0,c.data.num_results,c.type)}return};d.$13=function(){if(this.props.useManualFetch)return;var a=this.$19();a&&a.getScrollTop()<t&&(this.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP,this.props.threadID),this.$23())};d.$31=function(a){var c=this;a=this.$30(a);if(!a)return;var d=b("gkx")("953755");d&&a.some(function(a){return a.content_type==="user_birthday"})&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerViewBirthdayQueryWebGraphQLQuery"))({})),function(a){a=(a=a)!=null?(a=a.viewer)!=null?(a=a.user)!=null?a.birthdate:a:a:a;if(a!==null){var b,d;d=(d=a)!=null?d.month:d;b=(b=a)!=null?b.day:b;a=(a=a)!=null?a.year:a;d&&b&&a&&c.setState({viewerBirthday:{day:b,month:d,year:a}})}});d=b("gkx")("989256");d&&a.some(function(a){return a.content_type==="user_state"||a.content_type==="user_zip_code"})&&(!this.state.viewerState||!this.state.viewerZipCode)&&(p()?b("promiseDone")(o(),function(a){var b=a==null?void 0:a.region;a=a==null?void 0:a.postal_code;c.setState({viewerState:b,viewerZipCode:a})}):(b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerBusinessUserProfileLocationQueryWebGraphQLQuery"))({})),function(a){a=(a=a)!=null?(a=a.viewer)!=null?(a=a.user)!=null?a.address:a:a:a;if(a!=null){var d,e;e=(e=a)!=null?e.city:e;d=(d=a)!=null?d.country:d;e&&d==="US"&&c.setState({viewerState:b("MessengerQuickReplyUtils").parseStateFromCityAddress(e)});c.setState({viewerZipCode:(d=a)!=null?d.postal_code:d})}}),(!this.state.viewerState||!this.state.viewerZipCode)&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerBusinessQuickReplyLocationQueryWebGraphQLQuery"))({})),function(a){a=(a=a)!=null?a.in_thread_user_fuzzy_location_search:a;if(a!==null){if(!c.state.viewerState){var b;c.setState({viewerState:(b=a)!=null?b.state:b})}if(!c.state.viewerZipCode){c.setState({viewerZipCode:(b=a)!=null?b.zip_code:b})}}})));a.some(function(a){return a.content_type==="user_email"||a.content_type==="user_phone_number"})&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerViewerContactMethodsWebGraphQLQuery"))({})),function(a){var b;b=(b=a)!=null?(b=b.viewer)!=null?(b=b.user)!=null?b.all_phones:b:b:b;a=(a=a)!=null?(a=a.viewer)!=null?a.all_emails:a:a;var d=b?b.find(function(a){return a.is_preferred}):null;!d&&b&&(d=b[0]);b=a?a.find(function(a){return a.is_primary}):null;c.setState({viewerEmail:(a=b)!=null?a.display_email:a,viewerPhone:(b=d)!=null?(b=b.phone_number)!=null?b.universal_number:b:b})})};d.isScrolledToBottom=function(){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottom())};d.isScrolledToBottomWithHeight=function(a){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottomWithHeight(a))};d.$44=function(){return q.jsx(m,{isOpen:this.state.showUnreadNotice,label:j._({"*":"{number} unread messages","_1":"1 unread message"},[j._plural(this.state.unreadCount,"number")]),onClick:this.$45})};d.renderTopOfConversationNotice=function(){return q.jsxs(q.Fragment,{children:[q.jsx(F,{thread:this.props.thread}),this.$44()]})};d.$33=function(){return!this.props.isLoaded||this.props.hideContextBanner?null:q.jsx(b("MessengerContextBannerContainer.react"),{location:b("MercuryShareAttachmentRenderLocations").MESSENGER,thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer})};d.$34=function(){return this.props.isLoaded?null:q.jsx("div",{className:"_2k8v",children:this.props.isLoading?q.jsx(b("MessengerSpinner.react"),{}):null})};d.$27=function(){return q.jsx("div",{className:"_4xu0",children:q.jsx(b("MessengerSpinner.react"),{className:"_4xu1",size:b("MessengerSpinner.react").large_size})})};d.trackBottomIfRequired=function(){if(!this.refs)return;this.refs.scrollable&&this.refs.scrollable.trackBottomIfRequired()};d.scrollToBottom=function(a){if(!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToBottom(a)};d.scrollToTop=function(a){if(!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToTop(a)};d.$36=function(a){var b=this;if(C[a])return C[a];var c=function(){if(b.props.threadID!==a)return;b.trackBottomIfRequired()};C[a]=c;return c};d.$37=function(a){b("promiseDone")(b("JSResource")("MessengerSolidReactionDialogReact.re").__setRef("MessengerConversation.react").load().then(function(c){var d=c.make;b("MessengerDialogs.re").showDialog(function(){return q.jsx(d,{isSolid:a})})}))};d.$21=function(){var a=this;b("DOM").scry(b("ReactDOM").findDOMNode(this),"img").forEach(function(c){if(c.complete)return;var d=a.props.threadID,e=b("Event").listen(c,"load",function(){a.props.threadID===d&&a.trackBottomIfRequired(),e.remove()})})};d.$48=function(){var a=this.props.messages,b=this.state.unreadCount;return!b||b>a.size?null:a.get(a.size-b)};d.$26=function(a){var b=this,c=this.props.messages,d=this.$48();if(!d)return!1;var e=a.getElement().getBoundingClientRect();return c.filter(function(a){return a&&a.timestamp<=d.timestamp}).some(function(a){a=b.refs.messageList.getMessageElement(a.message_id);if(!a)return!1;a=a.getBoundingClientRect();return a.bottom>e.top&&a.top<e.bottom})};d.$25=function(){if(x&&this.state.unreadCount<w){var a;this.refs.scrollable&&this.refs.scrollable.overrideTrackBottom(!1);a=(a=this.refs.messageList)==null?void 0:a.getNewMessageDivider();var c=this.$19();if(!a||!c)return!1;a=a.getBoundingClientRect().top;var d=b("ReactDOM").findDOMNode(this.refs.messageList).getBoundingClientRect().top,e=c.getElement().getBoundingClientRect();if(a<e.top){a=a+Math.abs(d)-e.height*.2;c.setScrollTop(a,!1);this.setState({renderScrollToBottom:!0,unreadCount:0});return!0}}return!1};d.$22=function(a){var b=this;if(!this.state.unreadCount)return;this.setState({scrollingToUnreadMessage:!0});var c=this.$48();if(!c){this.scrollToTop(!1);return}this.$24(c.message_id,a,function(){b.setState({scrollingToUnreadMessage:!1,unreadCount:0})})};d.$24=function(a,c,d){this.refs.scrollable&&this.refs.scrollable.overrideTrackBottom(!1);a=this.refs.messageList.getMessageElement(a,!0);var e=this.$19();if(!a||!e)return;a=a.getBoundingClientRect().top;var f=b("ReactDOM").findDOMNode(this.refs.messageList).getBoundingClientRect().top,g=e.getElement().getBoundingClientRect().height;a=a+Math.abs(f)-g/2;e.setScrollTop(a,c,{callback:d})};d.$19=function(){if(!this.refs)return;return this.refs.scrollable&&this.refs.scrollable.getArea()};d.$18=function(){this.$3&&this.$3.unsubscribe(),this.$3=null};d.$49=function(){return this.props.messages.filter(function(a){return b("MessengerAttachmentRenderer").isSingleVideoAttachment(a)||b("MessengerAttachmentRenderer").isSharedVideoAttachmentMessage(a)}).reverse().map(function(a){return a.message_id})};d.$46=function(a){var c=this.refs.messageList;if(!c||!a)return;var d=[];a=a.getElement().getBoundingClientRect();var e=b("MessengerVideoAutoplayStore").getMessageIDs(this.props.threadID),f=e||this.$49()||b("immutable").List();f.map(function(a){var e=b("MessengerAttachmentRenderer").getVideoElem(a,c);e&&d.push([a,e.getBoundingClientRect()])});d.length&&b("MessengerVideoAutoplayActions").onScroll(this.props.threadID,e?null:f,b("immutable").Map(d),a)};d.$50=function(){return this.props.messages.filter(function(a){return b("MessengerAttachmentRenderer").isSingleSphericalPhotoAttachment(a)}).map(function(a){return a.message_id})};d.$47=function(a){var c=this;b("ifRequired")("MessengerSphericalRendererActions",function(d){b("ifRequired")("MessengerSphericalRendererStore",function(e){var f=c.refs.messageList;if(!f||!a)return;var g=[],h=a.getElement().getBoundingClientRect();e=e.getMessageIDs(c.props.threadID);e=e||c.$50()||b("immutable").List();e.map(function(a){var c=b("MessengerAttachmentRenderer").getSphericalPhotoElem(a,f);c&&g.push([a,c.getBoundingClientRect()])});g.length&&d.onScroll(c.props.threadID,e,b("immutable").Map(g),h)},function(){})},function(){})};d.$23=function(){var a=this;b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$49());var c=this.$50();c&&c.count()!==0&&b("ifRequired")("MessengerSphericalRendererActions",function(b){b.updateStore(a.props.threadID,c)},function(){b("Bootloader").loadModules(["MessengerSphericalRendererActions","MessengerSphericalRendererStore"],function(b,d){b.updateStore(a.props.threadID,c)},"MessengerConversation.react")})};d.$35=function(){if(b("CurrentUser").isWorkUser())return!1;return this.props.messages.size!==0?!1:!0};return c}(q.PureComponent);a.propTypes={contact:(c=b("prop-types")).instanceOf(b("ImmutableObject")),deliveryTimestamp:c.number.isRequired,downExhausted:c.bool,fetchMessages:c.func.isRequired,hideContextBanner:c.bool,innerClassName:c.string,isCanonical:c.bool,isLoaded:c.bool,isLoading:c.bool,isMessengerAdPreview:c.bool,messages:c.instanceOf(b("immutable").List).isRequired,onVoiceClipCreate:c.func,onReplyToMessage:c.func,readReceipts:c.any,thread:c.object,threadID:c.string.isRequired,upExhausted:c.bool,useM4QR:c.bool,useManualFetch:c.bool,viewer:c.string.isRequired,selectedMessage:c.string,isSearchResult:c.bool};function D(a){var c=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),d=b("MessengerReadReceipt.bs").getSeenTimestamps(a.readReceipts,a.threadID),e=new Set(a.thread?a.thread.participants:d.keys());e["delete"](c);var f=null;b("immutable").Seq(a.messages).reverse().forEach(function(a){if(a.action_type!=="ma-type:log-message"){f=a;return!1}return!0});return d.withMutations(function(c){b("immutable").Seq(a.messages).reverse().forEach(function(a){if(e.size===0)return!1;if(!e.has(a.author))return;if(a.action_type==="ma-type:log-message")return;c.update(a.author,function(b){if(!b)return void 0;var c=b;b.watermark<=a.timestamp&&(c={watermark:a.timestamp,action:a.timestamp});f&&f.timestamp<c.watermark&&(c={watermark:f.timestamp,action:f.timestamp});return c});e["delete"](a.author)})})}function E(a,c){var d=b("MercuryIDs").getParticipantIDFromUserID(c.viewer);return c.threadID===a.threadID&&c.messages!==a.messages&&!c.messages.isEmpty()&&c.messages.last()!==a.messages.last()&&c.messages.last().author===d}function F(a){a=a.thread;if(a==null)return null;var c=a.pinned_messages,d=a.thread_fbid;return d==null||c==null||!b("gkx")("1179386")?null:q.jsx(q.Suspense,{fallback:q.jsx("div",{}),children:q.jsx(z,{thread:a,threadFBID:d,pinnedMessages:c})})}e.exports=a}),null);
__d("MercuryAttachmentAttribution.react",["cx","fbt","Image.react","ImmutableObject","Link.react","React","joinClasses","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.$1();return!a?null:i.jsxs("div",{className:b("joinClasses")(this.props.className,"_29ew"),children:[i.jsx(b("Image.react"),{src:a.icon_url,className:"_29ex"}),i.jsx("span",{className:"_29ey",children:a.name}),this.$2()]})};d.$1=function(){return this.props.attachment&&this.props.attachment.app_attribution};d.$2=function(){var a=this.$1();if(!a||!a.metadata)return null;var c="_439n";try{a=JSON.parse(a.metadata)}catch(a){return null}return a.spotify_link?i.jsx(b("Link.react"),{className:c,href:a.spotify_link,target:"_blank",children:h._("Open")}):null};return c}(i.PureComponent);a.propTypes={attachment:b("prop-types").instanceOf(b("ImmutableObject"))};e.exports=a}),null);
__d("MessengerAttachmentAttribution.bs",["cx","React","bs_caml_option","MercuryAttachmentAttribution.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a=a.attachment;var c={className:"_2f5n _4br2"};a!==void 0&&(c.attachment=b("bs_caml_option").valFromOption(a));return h.jsx(b("MercuryAttachmentAttribution.react"),c)}c=a;f.make=c}),null);
__d("MessengerAttachmentAttribution.re",["MessengerAttachmentAttribution.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerAttachmentAttribution.bs").make;f.make=a}),null);
__d("MessengerDeliveryStateIconsM4React.bs",["cssVar","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a=a.color;return h.jsx("svg",{children:h.jsxs("g",{children:[h.jsx("path",{d:"M0 0h16v16H0z"}),h.jsx("path",{d:"M8 16A8 8 0 118 0a8 8 0 010 16zM6.8 8.836L5.257 7.293a1 1 0 00-1.414 1.414l2.25 2.25a1 1 0 001.414 0l4.25-4.25a1 1 0 10-1.414-1.414L6.8 8.836z",fill:a})],fill:"none",fillRule:"evenodd"}),height:"10",width:"10",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"})}g={make:a};function c(a){a=a.color;a={children:h.jsxs("g",{children:[h.jsx("path",{d:"M0 0h16v16H0z"}),h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:a,strokeWidth:"2"}),h.jsx("path",{d:"M4.55 8l2.25 2.25L11.05 6",stroke:a,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})],fill:"none",fillRule:"evenodd"}),height:"10",width:"10",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"};a["data-testid"]="message-delivery-state-sent";return h.jsx("svg",a)}b={make:c};function d(a){a=a.color;return h.jsx("svg",{children:h.jsxs("g",{children:[h.jsx("path",{d:"M0 0h16v16H0z"}),h.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:a,strokeWidth:"2"})],fill:"none",fillRule:"evenodd"}),height:"10",width:"10",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"})}a={make:d};function e(a){return h.jsx("svg",{children:h.jsxs("g",{children:[h.jsx("path",{d:"M0 0h16v16H0z"}),h.jsx("path",{d:"M8 16A8 8 0 118 0a8 8 0 010 16zM8 2a1.5 1.5 0 00-1.5 1.5v5a1.5 1.5 0 003 0v-5A1.5 1.5 0 008 2zm0 12a1.5 1.5 0 100-3 1.5 1.5 0 000 3z",fill:"#f03d25"})],fill:"none",fillRule:"evenodd"}),height:"10",width:"10",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"})}c={make:e};f.Delivered=g;f.Sent=b;f.Sending=a;f.Error_=c}),null);
__d("MessengerDeliveryStateIconsM4React.re",["MessengerDeliveryStateIconsM4React.bs"],(function(a,b,c,d,e,f){(function(a){return null});c=(a=b("MessengerDeliveryStateIconsM4React.bs")).Delivered.make;f.Delivered_make=c;(function(a){return null});d=a.Sent.make;f.Sent_make=d;(function(a){return null});e=a.Sending.make;f.Sending_make=e;(function(a){return null});b=a.Error_.make;f.Error__make=b;c=a.Delivered;f.Delivered=c;d=a.Error_;f.Error_=d;e=a.Sent;f.Sent=e;b=a.Sending;f.Sending=b}),null);
__d("MessengerMessageActionsWrapper.react",["React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.wrapper=null,c.mouseOverListenerAdded=!1,c.$4=function(){c.props.onShowMenu(c.props.message.message_id,!0),c.$2()},c.$3=function(){c.props.onShowMenu(c.props.message.message_id,!1),c.$1()},b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.componentDidMount=function(){this.$1()};c.componentWillUnmount=function(){this.$2()};c.render=function(){var a=this;return g.jsx("div",{onMouseLeave:this.$3,className:this.props.className,ref:function(b){return a.wrapper=b},children:this.props.children})};c.$1=function(){this.wrapper&&!this.mouseOverListenerAdded&&(this.wrapper.addEventListener("mouseover",this.$4),this.mouseOverListenerAdded=!0)};c.$2=function(){this.wrapper&&this.mouseOverListenerAdded&&(this.wrapper.removeEventListener("mouseover",this.$4),this.mouseOverListenerAdded=!1)};return b}(g.Component);e.exports=a}),null);
__d("getFBTSafeGenderFromGenderConst",["GenderConst","IntlVariations"],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case b("GenderConst").MALE_SINGULAR:return b("IntlVariations").GENDER_MALE;case b("GenderConst").FEMALE_SINGULAR:return b("IntlVariations").GENDER_FEMALE;default:return b("IntlVariations").GENDER_UNKNOWN}}e.exports=a}),null);
__d("MessengerMessageSeenHeadsReact.bs",["cx","fbt","cssVar","Image.bs","React","immutable","ReasonReact.bs","joinClasses","MessengerConfig","MercuryTimestamp","MessengerMessage.bs","MercuryAttachment","getViewportDimensions","MessengerSurfaceQuickChat.bs","getFBTSafeGenderFromGenderConst"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=b("MessengerConfig").MaxSeenHeadCount;function l(a){a=b("getViewportDimensions")().width;if(a<parseInt("920px".replace("px",""),10))if(k<8)return k;else return 8;else if(a<parseInt("1211px".replace("px",""),10)&&k>=3)return 3;else return k}function a(a){var c=a.className,d=a.isFromViewer,e=a.message,f=a.nextTimestamp,g=a.participants;a=a.readReceipts;var i=b("MessengerSurfaceQuickChat.bs").useIsQuickChatSurface(0);if(b("MessengerMessage.bs").isSending(e)||a.isEmpty()||b("MessengerMessage.bs").hasError(e))return null;else{a=b("immutable").Seq(a).filter(function(a){a=a.watermark>=e.timestamp&&a.watermark<f;if(a)return!0;else return!1}).sort(function(a,b){return a.action-b.action|0});if(a.isEmpty())return null;else{i=i?1:d?k:l(0);d=a.count()>(i+1|0);var m=d?a.slice(0,i):a;m=m.map(function(a,c,d){d=g.get(c);if(d==null)return null;else{a=h._({"*":"Seen by {full name} at {seen time}"},[h._name("full name",d.name,b("getFBTSafeGenderFromGenderConst")(d.gender)),h._param("seen time",b("MercuryTimestamp").getPreciseTimestamp(a.action))]);return b("ReasonReact.bs").element(String(c),void 0,b("Image.bs").make("_jf2",a,void 0,void 0,d.image_src,void 0,a,void 0,void 0,[]))}}).toArray();if(m.length!==0){d=d?a.slice(i,void 0).count():0;if(d>0){a=a.slice(i,void 0).map(function(a,b,c){a=g.get(b);if(a==null)return"";else return a.name}).filter(function(a){return a!==""}).join("\n")+" ";m.unshift(j.createElement("span",{key:"overflow",className:"_jf3",title:a},"+"+String(d)))}return j.createElement("span",{className:b("joinClasses")(c,"_jf4"+((m.length+d|0)===1?" _jf5":"")+(b("MercuryAttachment").isSinglePhotoGroupAttachment(e)?" _ba3":""))},m)}else return null}}}c={make:a};d=b("ReasonReact.bs").statelessComponent("MessengerMessageSeenHeadsReact");e=a;g=a;f.maxSeenHeads=k;f.calculateSliceNumber=l;f.MessengerMessageSeenHeadsWrapper=c;f.component=d;f.make=e;f.jsComponent=g}),null);
__d("MessengerSettingsStore",["CacheStorage","MessengerDotComSettingsInitialData","MessengerSettingsActions","MessengerStore"],(function(a,b,c,d,e,f){"use strict";var g=new(b("CacheStorage"))("localstorage"),h="desktopNotifsEnabled";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$MessengerSettingsStore1=babelHelpers["extends"]({},b("MessengerDotComSettingsInitialData"),{desktopNotifsEnabled:c.$MessengerSettingsStore2()});c.$MessengerSettingsStore1.privacy_section_collapsed=!0;return c}var d=c.prototype;d.getSettings=function(){return this.$MessengerSettingsStore1};d.$MessengerSettingsStore2=function(){return g.get(h,!1)};d.$MessengerSettingsStore3=function(a){g.set(h,a)};d.__onDispatch=function(a){switch(a.type){case b("MessengerSettingsActions").Types.CHANGE_SETTINGS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,a.newSettings);this.emitChange();break;case b("MessengerSettingsActions").Types.CHANGE_DESKTOP_NOTIFS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,{desktopNotifsEnabled:a.desktopNotifsEnabled});this.$MessengerSettingsStore3(a.desktopNotifsEnabled);this.emitChange();break}};return c}(b("MessengerStore"));e.exports=new a()}),null);
__d("MessengerURIUtils.bs",["URI","MercuryIDs","MessengerView","MessengerURISerializer"],(function(a,b,c,d,e,f){"use strict";var g;function h(a){var c=b("MessengerURISerializer").deserialize(new(g||(g=b("URI")))(window.location.href)),d=b("MessengerView").DETAIL.THREAD;return b("MessengerURISerializer").serialize(Object.assign(Object.assign({},c),{activeThreadID:a,detailView:d,query:c.queryAll?c.query:void 0}))}function a(a){return h(b("MercuryIDs").getThreadIDFromUserID(a))}function c(a){return h(a.thread_id).setQueryData({mid:a.message_id})}f.getURIForThreadID=h;f.getURIForUserID=a;f.getURIForMessage=c}),null);
__d("messengerRTLClasses",["cx","isRTL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){a=b("isRTL")(a||"");return c?a?"_4pv0":"":(a?"":"direction_ltr")+(a?" direction_rtl":"")+(a?"":" text_align_ltr")+(a?" text_align_rtl":"")+(a?" _4pv0":"")}e.exports=a}),null);
__d("MessengerMessage.react",["cssVar","cx","fbt","requireCond","CurrentUser","EmojiLikeUtils","FlexLayout.react","ImmutableObject","MercuryAttachment","MercuryDisplayTimeFilterMessageRenderer","MercuryMessageDeliveryState","MercuryMessageError.react","MercuryTimestamp","MessengerAttachmentAttribution.re","MessengerAttachmentRenderer","MessengerBubble.react","MessengerBubbleBlock.react","MessengerCodePasteUtils","MessengerDecorator","MessengerDeliveryStateIconsM4React.re","cr:1398876","MessengerMessage.bs","MessengerMessageActionsWrapper.react","MessengerMessageSeenHeadsReact.bs","MessengerSettingsStore","MessengerURIUtils.bs","MessengerVideoAutoplayStore","React","SubscriptionsHandler","TooltipData","cr:1398877","cr:1106477","emptyFunction","getViewportDimensions","ifRequired","immutable","joinClasses","messengerRTLClasses","prop-types","shallowEqual"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("MessengerAttachmentAttribution.re").make,k=b("MessengerMessageSeenHeadsReact.bs").jsComponent,l=b("React");function m(a){switch(a){case b("MercuryMessageDeliveryState").SENDING:return i._("Sending");case b("MercuryMessageDeliveryState").SENT:return i._("Sent");case b("MercuryMessageDeliveryState").DELIVERED:return i._("Delivered");case b("MercuryMessageDeliveryState").ERROR:return i._("Error")}return null}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isVisible:!1,plainText:!1,shown:{}},d.$15=function(a){d.messageBody=a},d.$5=function(a,b){d.setState(function(c){return{shown:babelHelpers["extends"]({},c.shown,(c={},c[a]=b,c))}})},d.$12=function(){d.setState(function(a){return{plainText:!a.plainText}})},d.$11=function(){d.props.onSelect(d.props.message.message_id)},d.$13=function(){return b("MessengerCodePasteUtils").containsCodeBlock(d.props.message.body)||!!d.messageBody&&d.messageBody.hasFormatting()},c)||babelHelpers.assertThisInitialized(d)}c.calculateState=function(a){return{isVisible:b("MessengerVideoAutoplayStore").isVisible(a.message.thread_id,a.message.message_id)||b("ifRequired")("MessengerSphericalRendererStore",function(b){return b.isVisible(a.message.thread_id,a.message.message_id)},function(){return!1})}};var d=c.prototype;d.componentDidMount=function(){var a=this;this.setState(c.calculateState(this.props));var d=new(b("SubscriptionsHandler"))();d.addSubscriptions(b("MessengerVideoAutoplayStore").addListener(function(b){b=c.calculateState(a.props);b.isVisible!==a.state.isVisible&&a.setState({isVisible:b.isVisible})}));var e=b("ifRequired")("MessengerSphericalRendererStore",function(a){return a},function(){return null});e&&d.addSubscriptions(e.addListener(function(b){b=c.calculateState(a.props);b.isVisible!==a.state.isVisible&&a.setState({isVisible:b.isVisible})}));this.$1=d};d.componentWillUnmount=function(){this.$1&&this.$1.release()};d.shouldComponentUpdate=function(a,c){return a.isActive!==this.props.isActive||a.isFromViewer!==this.props.isFromViewer||a.isSelected!==this.props.isSelected||a.message!==this.props.message||a.messageTimestamp!==this.props.messageTimestamp||a.nextTimestamp!==this.props.nextTimestamp||a.showDeliveryState!==this.props.showDeliveryState||a.deliveryTimestamp!==this.props.deliveryTimestamp||!b("immutable").is(a.readReceipts,this.props.readReceipts)||!b("immutable").is(a.participants,this.props.participants)||a.customColor!==this.props.customColor||c.isVisible!==this.state.isVisible||!b("shallowEqual")(c.shown,this.state.shown)||a.onAttachmentLoad!==this.props.onAttachmentLoad||Object.keys(((c=a.message)==null?void 0:c.reactions)||{}).length!==Object.keys(((c=this.props.message)==null?void 0:c.reactions)||{}).length||((c=a.thread)==null?void 0:c.pinned_messages)!==((a=this.props.thread)==null?void 0:a.pinned_messages)};d.render=function(){var a,c=this.props,d=c.isActive,e=c.isFromViewer;c=c.message;var f=!e,g=i._("{time}",[i._param("time",b("MercuryTimestamp").getPreciseTimestamp(c.timestamp))]);g=b("TooltipData").propsFor(g,n(e));var h=[],j=[],m=this.props.message,o=e||!1,p=this.props.scrollToRepliedMessage,q=this.props.thread;m&&!this.props.hideBeforeDecorator&&(b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(m)&&h.push(a.render(m,o,{scrollToRepliedMessage:p,gradientColors:q==null?void 0:q.gradient_colors,solidColor:q==null?void 0:q.solid_color,nicknames:q==null?void 0:q.custom_nickname}))}),b("MessengerDecorator").getInnerDecorators().forEach(function(a){a.check(m)&&j.push(a.getAdditionalClassNames())}));var r=this.$2(g,null);g=this.$3(g,this.props.isSavedView===!0||r!=null);var s=!!r&&this.$4();a=this.props.readReceipts.count()>=2&&s&&((a=c.attachments[0])==null?void 0:a.attach_type)==="share";return l.jsxs(l.Fragment,{children:[l.jsxs(b("MessengerMessageActionsWrapper.react"),{className:b("joinClasses").apply(void 0,["clearfix _o46 _3erg"+(d?" _-5k":"")+(f?"":" _3i_m")+(f?"":" _nd_")+(f?" _29_7":"")+(s?" _q4a":"")+(this.props.isFirstInGroup?" _8lma":""),b("messengerRTLClasses")(c.body)].concat(j)),message:c,onShowMenu:this.$5,isFromViewer:e,children:[h,g,r,this.$6(),this.$7(),l.jsx(k,{className:"_4jzq"+(a?" _8d3y":""),isFromViewer:e,message:c,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts})]}),b("cr:1106477")!=null&&c.m_suggestions!=null&&c.m_suggestions.length>0?l.jsx(b("cr:1106477"),{isFromViewer:o,message:c,suggestions:c.m_suggestions.map(function(a){return a.type}),expirationTime:c.m_suggestions[0].expiration_time}):null]})};d.$8=function(a){return a.every(function(a){return!a||!b("MessengerAttachmentRenderer").isRenderedShareAttachment(a)})};d.$9=function(){return this.props.message.attachments.length===1&&b("MercuryAttachment").hasAttribution(this.props.message.attachments[0])};d.$2=function(a,c){if(this.props.message!=null&&this.props.message.attachments!=null&&this.props.message.attachments.length>0){c=((c=this.props.message)==null?void 0:(c=c.attachments[0])==null?void 0:(c=c.share)==null?void 0:c.style_list[0])==="wec_message"&&!((c=this.props.message)==null?void 0:(c=c.attachments[0])==null?void 0:(c=c.share)==null?void 0:(c=c.subattachments)==null?void 0:c.length);if(c)return null}if(this.props.message.is_filtered_content)return null;if(this.props.message.commerce_message_type==="ride_intent")return null;c=this.props.message;var d=this.$10(c),e=d[0];d=d[1];var f=b("MessengerAttachmentRenderer").getAttachmentsOutsideBubble(this.props.message,this.props.onAttachmentLoad,{customColor:this.props.customColor,isFromViewer:this.props.isFromViewer,isPageMessage:this.props.isPageMessage,isVisible:this.state.isVisible,onSelect:this.$11,onUnwrap:null,pageID:this.props.pageID},e,this.props.thread);if(!f||!f.length)return null;var g=this.$8(f),h=this.props.isPageMessage||this.props.isSavedView?null:b("cr:1398877")!=null?l.jsx(b("cr:1398877"),{message:c,hovered:this.state.shown[this.props.message.message_id],messageProps:{isNonBubbleDecorator:!g,isFromViewer:this.props.isFromViewer===!0,onReplyToMessage:this.props.onReplyToMessage,handleToggleOriginal:this.$12,hasFormatting:this.$13,isShowingOriginal:this.state.plainText}}):b("cr:1398876")!=null&&l.jsx(b("cr:1398876"),{className:g?"_1z_2":"",message:c,isFromViewer:!!this.props.isFromViewer,hovered:this.state.shown[this.props.message.message_id],messageProps:babelHelpers["extends"]({},this.props,{handleToggleOriginal:this.$12,hasFormatting:this.$13,isShowingOriginal:this.state.plainText}),isSavedView:this.props.isSavedView});this.$9()&&(f=[l.jsxs("span",{children:[f[0],l.jsx(j,{attachment:new(b("ImmutableObject"))(this.props.message.attachments[0])})]},"AttachmentWithAttribution")]);var i=f.some(function(a){return!!a&&b("MessengerAttachmentRenderer").isPhotosGroupAttachment(a)});f=g?l.jsxs("div",babelHelpers["extends"]({},a||{},{className:b("joinClasses").apply(void 0,["_3zvs"+(i?" _2-x3":"")].concat(d)),children:[f,e.length>1?l.jsx(b("FlexLayout.react"),{align:"center",className:"_7moe",children:e}):e,h]})):f.map(function(b){return b&&l.cloneElement(b,a)});i=b("MessengerAttachmentRenderer").isSharedVideoAttachmentMessage(this.props.message);d=l.jsxs("div",{className:"_3058 _15gf"+(i?" _3duc":""),children:[f,c.body||g?null:h]},"renderedAttachments");return this.$9()?l.jsx(b("MessengerBubbleBlock.react"),{children:d}):d};d.$10=function(a){var c=this,d=[],e=[],f=this.props.isFromViewer||!1;a&&this.props.isSavedView!==!0&&b("MessengerDecorator").getAfterDecorators().forEach(function(b){b.check(a,f)&&(d.push(b.render(a,f,c.props,c.state.shown[c.props.message.message_id])),e.push(b.getAdditionalClassNames()))});return[d,e]};d.$14=function(){return b("MessengerAttachmentRenderer").isP2PAttachment(this.props.message)};d.$3=function(a,c){var d=this.props.message,e=b("immutable").List(b("MessengerAttachmentRenderer").getAttachmentsInsideBubble(d,this.props.onAttachmentLoad)),f=d.ranges;d.profile_ranges&&d.profile_ranges.length&&(f=(f||[]).concat(d.profile_ranges.map(function(a){return babelHelpers["extends"]({},a,{url:b("MessengerURIUtils.bs").getURIForUserID(a.id)})})));var g=b("CurrentUser").isWorkUser()?!1:b("MessengerCodePasteUtils").containsCodeBlock(d.body)&&!this.state.plainText;if(d.is_filtered_content)return l.jsx("div",{className:"_3058 _wiu _52mr uiBoxYellow clearfix",children:b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(d)});var h=d.body&&!b("EmojiLikeUtils").isEmojiLike(d);return h||!e.isEmpty()?l.jsx(b("MessengerBubble.react"),{thread:this.props.thread,attachments:e,body:d.body,bodyRef:this.$15,className:g?(this.props.isFromViewer?"_3uhm":"")+(this.props.isFromViewer?"":" _3uhn")+(this.props.isSelected?" _3xsz":""):"_3058 _ui9"+(this.props.isSelected?" _3xsz":""),onReactionSwap:this.props.onReactionSwap,containsCode:g,customColor:this.props.isFromViewer?this.props.customColor:"",customLike:d.customLike,excludeAfterDecorators:c,isFromViewer:this.props.isFromViewer,isP2PAttachment:this.$14(),ranges:f,message:d,metaRanges:d.meta_ranges,plainText:this.state.plainText,threadCustomColor:this.props.threadCustomColor||"#0084ff",threadID:d.thread_id,participants:this.props.participants,wecFirstMessage:this.props.wecFirstMessage,isHovered:this.state.shown[d.message_id],onReplyToMessage:this.props.onReplyToMessage,handleToggleOriginal:this.$12,hasFormatting:this.$13,isShowingOriginal:this.state.plainText,isPageMessage:this.props.isPageMessage,isSavedView:this.props.isSavedView,repliedToMessage:this.props.message.replied_to_message,scrollToRepliedMessage:this.props.scrollToRepliedMessage,tooltip:a,is_forwarded:d.is_forwarded}):null};d.$7=function(){if(!this.props.isFromViewer||!this.props.showDeliveryState||this.props.message.is_like_preview)return null;var a=b("MessengerMessage.bs").getDeliveryState(this.props.message,this.props.deliveryTimestamp);if(a===b("MercuryMessageDeliveryState").UNKNOWN)return null;var c=m(a),d=b("CurrentUser").isWorkUser()&&(this.props.customColor==null||this.props.customColor.toLowerCase()==="#373e4c".toLowerCase())?"#373e4c":"rgba(134, 142, 153, 0.5)",e=null;switch(a){case b("MercuryMessageDeliveryState").SENDING:e=l.jsx(b("MessengerDeliveryStateIconsM4React.re").Sending.make,{color:d});break;case b("MercuryMessageDeliveryState").SENT:e=l.jsx(b("MessengerDeliveryStateIconsM4React.re").Sent.make,{color:d});break;case b("MercuryMessageDeliveryState").DELIVERED:e=l.jsx(b("MessengerDeliveryStateIconsM4React.re").Delivered.make,{color:d});break;case b("MercuryMessageDeliveryState").ERROR:e=l.jsx(b("MessengerDeliveryStateIconsM4React.re").Error_.make,{});break}return l.jsx("span",{"aria-label":c,"aria-roledescription":i._("Status icon"),className:"_8r4c",title:c,children:e})};d.$6=function(){var a=this.props.message;return!b("MessengerMessage.bs").hasError(a)?null:l.jsx(b("MercuryMessageError.react"),{className:"_3058 _2ygi",message:a,authorFBID:this.props.authorFBID})};d.$4=function(){var a=this.props.message,b=!1;a&&(b=!!(a.reactions&&Object.keys(a.reactions).length>0));return b};return c}(l.Component);a.propTypes={customColor:(c=b("prop-types")).string,deliveryTimestamp:c.number.isRequired,hideBeforeDecorator:c.bool,isActive:c.bool,isFromViewer:c.bool,isPageMessage:c.bool,isSelected:c.bool,message:c.object.isRequired,messageTimestamp:c.number,nextTimestamp:c.number.isRequired,onReactionSwap:c.func,onAttachmentLoad:c.func.isRequired,onDeselect:c.func.isRequired,onSelect:c.func.isRequired,onReplyToMessage:c.func,participants:c.instanceOf(b("immutable").Map).isRequired,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,showDeliveryState:c.bool,authorFBID:c.string,threadCustomColor:c.string,pageID:c.string,isSavedView:c.bool,scrollToRepliedMessage:c.func,thread:c.object,wecFirstMessage:c.bool};a.defaultProps={onAttachmentLoad:b("emptyFunction"),threadCustomColor:"#0084ff"};function n(a){return b("getViewportDimensions")().width<=parseInt("700px".replace("px",""),10)||b("MessengerSettingsStore").getSettings().info_sidebar_collapsed&&a?"above":a?"right":"left"}e.exports=a}),null);
__d("MessengerPageAdminNoteList.react",["cx","fbt","LeftRight.react","MessengerBubble.react","PagesMessengerCreatorInfo.react","React","ReactComponentWithPureRenderMixin","classWithMixins","enumerate","immutable","mixin","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,b=[],c=this.calculateGroups(this.props.notes);c.forEach(function(c,d){b.push(i.jsx("li",{className:"_4kd2",children:a.$MessengerPageAdminNoteList1(c)},"group:"+d))});return i.jsx("ul",{className:"_4kd3",children:b})};d.$MessengerPageAdminNoteList1=function(a){var b=this,c=[];a.forEach(function(d,e){c.push(i.jsx("div",{className:"_4kd4",children:b.$MessengerPageAdminNoteList2(d,a)},"note:"+e))});return c};d.$MessengerPageAdminNoteList2=function(a,c){c=b("immutable").List([i.jsxs(b("LeftRight.react"),{className:"_561k",children:[i.jsx("div",{className:"_561l",children:h._("Private Note")}),i.jsx(b("PagesMessengerCreatorInfo.react"),{creator_info:c[0].creator_info,isNote:!0},"creator_info")]})]);return i.jsx("div",{className:"_o46 _3i_m _nd_",children:i.jsx("div",{className:"clearfix",children:i.jsx(b("MessengerBubble.react"),{body:a.body.text,attachments:c,className:"_3058 _4kd5"})})})};d.calculateGroups=function(a){var c=[],d=null,e=null;a=b("enumerate")(a);var f;while(!(f=a.next()).done){var g=e&&e.value.creator_info.creatorID===f.value.creator_info.creatorID;g||(d=[],c.push(d));d&&d.push(f.value);e=f}return c};return c}(b("classWithMixins")(i.Component,b("mixin")(b("ReactComponentWithPureRenderMixin"))));a.propTypes={notes:(c=b("prop-types")).arrayOf(c.shape({id:c.string,body:c.object.isRequired,creator_info:c.shape({creatorID:c.string.isRequired,creatorName:c.string.isRequired,creatorType:c.string.isRequired,labelType:c.string.isRequired,pageID:c.string.isRequired,profileURI:c.string}),timestamp:c.number.isRequired})).isRequired};e.exports=a}),null);
__d("MessengerRemovedMessageTombstone.react",["cssVar","cx","fbt","MercuryTimestamp","MessengerDecorator","MessengerDotComAndInboxM4Check.bs","MessengerInnerDecorators.react","MessengerMessageActionsWrapper.react","MessengerMessageSeenHeadsReact.bs","MessengerSettingsStore","React","RemovedMessageTombstoneContent","TooltipData","WorkChatRedesignedMessageListCheck.re","getViewportDimensions","immutable","joinClasses","messengerRTLClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("MessengerMessageSeenHeadsReact.bs").jsComponent,k=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={shown:{}},c.$2=function(a,b){c.setState(function(c){return{shown:babelHelpers["extends"]({},c.shown,(c={},c[a]=b,c))}})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.isActive,d=a.isFromViewer;a=a.message;var e=[],f=this.props.message;f&&b("MessengerDecorator").getInnerDecorators().forEach(function(a){a.check(f)&&e.push(a.getAdditionalClassNames())});var g=this.$1();return k.jsxs(b("MessengerMessageActionsWrapper.react"),{className:b("joinClasses").apply(void 0,["clearfix _o46 _3erg"+(c?" _-5k":"")+(d?" _3i_m":"")+(d?" _nd_":"")+(d?"":" _29_7")+"",b("messengerRTLClasses")(a.body)].concat(e)),message:a,onShowMenu:this.$2,children:[g,this.props.hideDeliveryState===!0?null:k.jsx(j,{className:"_4jzq",isFromViewer:d,message:a,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts})]})};d.$1=function(){var a=this.props.message,c=b("RemovedMessageTombstoneContent").getRemovedMessageTombstoneContent(a,this.props.participants),d=this.$3();d=b("TooltipData").propsFor(d,l(this.props.isFromViewer));return k.jsxs("div",babelHelpers["extends"]({className:"_3058 _ui9"+(a.isSelected?" _3xsz":"")+" _7301 _hh7"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ybn":"")+" _s1- _52mr _3oh-"},d||{},{children:[this.props.hideBeforeDecorator===!0?null:k.jsx(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:a,isFromViewer:!!this.props.isFromViewer,hovered:this.state.shown[a.message_id],messageProps:{},isSavedView:!1}),k.jsx("div",{className:"_aok"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w73":""),tabIndex:0,"aria-label":c,children:k.jsx("span",{children:c})})]}))};d.$3=function(){var a=this.props.message.timestamp,c=this.props.message.removed_timestamp;a=i._("Sent: {sent time}",[i._param("sent time",b("MercuryTimestamp").getPreciseTimestamp(a))]);if(!c)return a;c=i._("Removed: {removed time}",[i._param("removed time",b("MercuryTimestamp").getPreciseTimestamp(c))]);return a.toString()+"\n"+c.toString()};return c}(k.Component);function l(a){return b("getViewportDimensions")().width<=parseInt("700px".replace("px",""),10)||b("MessengerSettingsStore").getSettings().info_sidebar_collapsed&&a?"above":a?"right":"left"}e.exports=a}),null);
__d("MessengerMessageGroup.react",["cx","fbt","invariant","requireCond","CurrentUser","Image.react","ImmutableObject","JSResource","Link.react","MercuryIDs","MercuryParticipantSilhouettes","MessengerActions","MessengerContactActions.bs","MessengerEnvironment","MessengerMessage.react","MessengerPageAdminNoteList.react","MessengerParticipants.bs","MessengerProfileImageWrapperReact.bs","MessengerRemovedMessageTombstone.react","MessengerStickerUtils","MessengerTextWithEmoticons.react","MessengerURIUtils.bs","PagesMessengerCreatorInfo.react","React","ReactDOM","SimpleXUIDialog","createReactClass_DEPRECATED","goURI","immutable","isMessengerMessageRemoved","prop-types","lazyLoadComponent","cr:1003205","cr:1228094"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("MessengerContactActions.bs").actions,k=b("MessengerProfileImageWrapperReact.bs").jsComponent,l=b("React");a=b("immutable").List;c=b("immutable").OrderedMap;var m=b("lazyLoadComponent")(b("JSResource")("MessengerAvatarActions.react").__setRef("MessengerMessageGroup.react")),n=32,o=new(b("ImmutableObject"))({image_src:b("MercuryParticipantSilhouettes").neutralSilhouette,is_messenger_user:!0,name:""});g=b("createReactClass_DEPRECATED")({displayName:"MessengerMessageGroup",_subscription:null,propTypes:{author:(f=b("prop-types")).string.isRequired,activeMessageID:f.string,deliveryTimestamp:f.number.isRequired,hasDateBreak:f.bool,isCanonical:f.bool,isFromViewer:f.bool,isOnline:f.bool,isPageMessage:f.bool,lastReadTimestamp:f.number.isRequired,messages:f.instanceOf(a).isRequired,nextTimestamp:f.number.isRequired,onReactionSwap:f.func,onAttachmentLoad:f.func.isRequired,onMessageDeselect:f.func.isRequired,onMessageSelect:f.func.isRequired,persona:f.object,onReplyToMessage:f.func,readReceipts:f.instanceOf(c).isRequired,thread:f.object,pageID:f.string,scrollToRepliedMessage:f.func,selectedMessageId:f.string},getInitialState:function(){return{participants:{}}},componentDidMount:function(){this._subscription=this._computeParticipants()},shouldComponentUpdate:function(a,c){var d=a.thread,e=this.props.thread;d=Boolean(d&&e&&(d.solid_color!==e.solid_color||d.custom_nickname!==e.custom_nickname));return this.props.activeMessageID!==a.activeMessageID||this.props.isFromViewer!==a.isFromViewer||this.props.deliveryTimestamp!==a.deliveryTimestamp||this.props.lastReadTimestamp!==a.lastReadTimestamp||this.props.onAttachmentLoad!==a.onAttachmentLoad||!b("immutable").is(this.props.messages,a.messages)||this.props.messages!==a.messages||!b("immutable").is(this.props.readReceipts,a.readReceipts)||this.state.participants!==c.participants||d},componentDidUpdate:function(){var a=this,b=p(this.props);!this._subscription&&!b.every(function(b){return a.state.participants[b]})&&(this._subscription=this._computeParticipants())},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},render:function(){return l.jsxs("div",{children:[l.jsxs("div",{className:"_1t_p clearfix"+(b("MessengerStickerUtils").isStickerMessageGroup(this.props.messages)?" _5tx1":"")+(this._hasSeenHeadsAtBottom()?" _35fy":""),children:[this._renderProfileColumn(),l.jsxs("div",{className:"_41ud",children:[this._renderName(),this._renderMessages()]})]}),this.props.isPageMessage?this._renderNotes():null]})},_renderProfileColumn:function(){var a;if(this.props.isFromViewer)return null;var c=this.props.messages.last();c=this.state.participants[c.author]||o;var d=c.name,e=c.image_src;this.props.persona&&(d=this.props.persona.name,e=this.props.persona.profile_picture_url);var f=h._("{name}",[h._param("name",d)]);a=(a=c)!=null?(a=a.work_foreign_entity_info)!=null?a.type:a:a;a=b("CurrentUser").isWorkUser()&&a==="FOREIGN";a=b("cr:1003205")?l.jsx(b("cr:1003205").make,{className:"_1t_r",isActive:!!this.props.isOnline,size:n,src:e,tooltipContent:f.toString()}):l.jsx(k,{className:"_1t_r",isMessengerUser:c.is_messenger_user,size:n,showBadge:a,isMultiCompany:a,tooltipContent:f,children:l.jsx(b("Image.react"),{alt:d,src:e,height:n,width:n})});if(c.fbid){f=b("MessengerURIUtils.bs").getURIForUserID(c.fbid);!this.props.persona?a=l.jsx(l.Suspense,{fallback:this.props.isCanonical?a:l.jsx(b("Link.react"),{className:"_5f0v",href:f.toString(),onClick:this._handleContactSelect.bind(this,c),tabIndex:-1,children:a}),children:l.jsx(m,{avatar:a,contact:c,showSendMessageItem:!this.props.isCanonical,onAction:this._handleContactAction})}):this.props.isCanonical||(a=l.jsx(b("Link.react"),{className:"_5f0v",href:f.toString(),onClick:this._handleContactSelect.bind(this,c),tabIndex:-1,children:a}))}return l.jsx("div",{className:"_1t_q",children:a})},_handleContactAction:function(a,c,e){switch(a){case j.MESSAGE:this._handleContactSelect(c,e);break;case j.PROFILE:a=this.state.participants[c.id];if(a&&a.href){var f=b("MessengerEnvironment").messengerdotcom;f?window.open(a.href):b("goURI")(a.href)}else this._handleContactSelect(c,e);break;case j.FREE_CALL:d(["FBRTCCore","MNRTCCallabilityStore"],function(a,d){var e=c.fbid;e||i(0,1247);a.isAvailableForWebrtcCalling(e)||d.isCallable(e)?a.startOutgoingCall(e,"messenger_bubble_free_call",!1):b("SimpleXUIDialog").show(h._("{firstname} can't be reached right now.",[h._param("firstname",c.short_name)]),h._("Can't Connect Call"))});break}},_renderMessages:function(){var a=this,c=this.props.messages.size,d=[];this.props.messages.forEach(function(e,f,g){var h=e.message_id===a.props.activeMessageID,i=!1;a.props.selectedMessageId?i=e.message_id===a.props.selectedMessageId:i=e.isSelected;var j=b("MercuryIDs").getUserIDFromParticipantID(a.props.author),k=a.props.thread?a.props.thread.solid_color:"",m=a.props.onAttachmentLoad,n=e.timestamp;if(b("isMessengerMessageRemoved")(e)){d.push(l.jsx(b("MessengerRemovedMessageTombstone.react"),{isActive:h,isFromViewer:a.props.isFromViewer,message:e,participants:b("immutable").Map(a.state.participants),nextTimestamp:a._getNextTimestamp(g,c,f),onSelect:a.props.onMessageSelect,onReplyToMessage:a.props.onReplyToMessage,readReceipts:a.props.readReceipts,ref:e.message_id,isFirstInGroup:f===0},e.message_id));return}d.push(l.jsx(b("MessengerMessage.react"),{thread:a.props.thread,customColor:k,deliveryTimestamp:a.props.deliveryTimestamp,isActive:h,isFromViewer:a.props.isFromViewer,isPageMessage:a.props.isPageMessage,isSelected:i,message:e,messageTimestamp:n,messageActionsWrapper:a.props.messageActionWrapper,onReactionSwap:a.props.onReactionSwap,onAttachmentLoad:m,participants:b("immutable").Map(a.state.participants),nextTimestamp:a._getNextTimestamp(g,c,f),onDeselect:a.props.onMessageDeselect,onSelect:a.props.onMessageSelect,onReplyToMessage:a.props.onReplyToMessage,readReceipts:a.props.readReceipts,showDeliveryState:e.timestamp>a.props.lastReadTimestamp||!!e.is_one_way_sent,ref:e.message_id,authorFBID:j==null?void 0:j,threadCustomColor:k,pageID:a.props.pageID,scrollToRepliedMessage:a.props.scrollToRepliedMessage,isCanonical:a.props.isCanonical,isFirstInGroup:f===0},e.message_id));q(a.props.isPageMessage,g,f,e)&&d.push(l.jsx(b("PagesMessengerCreatorInfo.react"),{creator_info:e.creator_info},"creator_info:"+f))});return d},_renderNotes:function(){var a=this,c=[];this.props.messages.forEach(function(d,e,f){a.props.isPageMessage&&d.page_admin_notes&&c.push(l.jsx(b("MessengerPageAdminNoteList.react"),{notes:d.page_admin_notes},"notes:"+d.message_id))});return c},_renderName:function(){var a=this.props.messages.first(),c=this.state.participants[a.author],d=a.replied_to_message;if(!c)return null;if(d)return null;d=this.props.isCanonical?c.short_name:c.name;var e=d,f=null;if(this.props.thread){var g=this.props.thread.custom_nickname?this.props.thread.custom_nickname:null;c=b("MercuryIDs").getUserIDFromParticipantID(c.id);g&&c&&g[c]&&(d=g[c],e=l.jsx(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:g[c]}));b("CurrentUser").isWorkUser()&&b("cr:1228094")!=null&&c!=null&&(f=l.jsx(b("cr:1228094"),{userID:c,withSpace:!0}))}if(this.props.persona!=null){g=this.state.participants[a.author];e=g?h._("{persona name} from {page name}",[h._param("persona name",this.props.persona.name),h._param("page name",g.short_name)]):this.props.persona.name;d=e.toString()}c=l.jsxs("h5",{"aria-label":d,className:"_ih3"+(this.props.isFromViewer?" accessible_elem":"")+(this.props.isCanonical&&!this.props.persona?" _-ne":""),children:[e,f]});return c},getMessageElement:function(a){return b("ReactDOM").findDOMNode(this.refs[a])},_hasSeenHeadsAtBottom:function(){var a=this.props,b=a.messages,c=a.nextTimestamp;a=a.readReceipts;var d=b.last().timestamp,e=0;a.forEach(function(a){if(a>=d&&a<c&&++e===2)return!1});return e===2},_getNextTimestamp:function(a,b,c){return c<b-1?a.get(c+1).timestamp:this.props.nextTimestamp},_handleContactSelect:function(a,c){c&&c.preventDefault();c=b("MercuryIDs").getThreadIDFromParticipantID(a.id);c&&b("MessengerActions").selectThread(c)},_computeParticipants:function(){var a=this,c=p(this.props),d={},e=[];c.forEach(function(a){var c=b("MessengerParticipants.bs").getNow(a);d[a]=c;c||e.push(a)});this.setState({participants:d});return e.length>0?b("MessengerParticipants.bs").getMulti(e,function(b){a._subscription=null,a.setState(function(c){var a=Object.assign({},c.participants);e.forEach(function(c){a[c]=b[c]});return{participants:a}})}):null}});function p(a){var b=[a.messages.first().author];a.readReceipts.forEach(function(a,c){return b.push(c)});return b}function q(a,b,c,d){if(!a||!d.creator_info)return!1;if(c===b.size-1)return!0;a=b.get(c+1).creator_info;return!a?!0:d.creator_info.creatorID!==a.creatorID}e.exports=g}),null);
__d("MessengerMenu.react",["cx","Keys","MenuSeparator.react","MessengerDotComAndInboxM4Check.bs","ReactXUIMenu","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a.isReactLegacyFactory={},a.type=a}c=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d=c.className;c=babelHelpers.objectWithoutPropertiesLoose(c,["className"]);return a.call(this,babelHelpers["extends"]({className:b("joinClasses")(d,"_2i-c"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6_n0":"")+" _150g")},c))||this}var d=c.prototype;d.handleKeydown=function(c,d){return c===b("Keys").DOWN||c===b("Keys").UP||c===b("Keys").SPACE?a.prototype.handleKeydown.call(this,c,d):!0};return c}(b("ReactXUIMenu"));a(c);c.Item=b("ReactXUIMenu").Item;c.Separator=b("MenuSeparator.react");e.exports=c}),null);
__d("MessengerFacepileImageM4React.bs",["Image.bs","React","bs_belt_Option","bs_caml_option","ReasonReact.bs","bs_caml_primitive"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a){return b("bs_caml_primitive").caml_int_max(2,a/20|0)}function a(a){var c=a.borderColor,d=a.className,e=a.imgSize,f=a.offsetLeft;a=a.src;c=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").flatMap(c,function(a){if(a==null)return;else return b("bs_caml_option").some(a)}),"white");var i=h(e);f=f!==void 0?{border:""+(String(i)+("px solid "+(String(c)+""))),height:""+(String(e)+"px"),left:""+(String(f)+"px"),width:""+(String(e)+"px")}:{border:""+(String(i)+("px solid "+(String(c)+""))),height:""+(String(e)+"px"),width:""+(String(e)+"px")};return g.createElement("div",{className:d,style:f},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,"",void 0,void 0,a,e,void 0,e,void 0,[])))}c=a;f.calcBorderWidth=h;f.make=c}),null);
__d("MessengerFacepileOverflowM4React.bs",["cx","React","bs_belt_Option","bs_caml_option","joinClasses","bs_caml_primitive"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.borderColor,d=a.className,e=a.imgSize;a=a.text;c=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").flatMap(c,function(a){if(a==null)return;else return b("bs_caml_option").some(a)}),"white");var f=b("bs_caml_primitive").caml_int_max(2,e/20|0);return h.jsx("div",{children:h.jsx("div",{children:a,className:"_7q1q"}),className:b("joinClasses")("_7q1p",d),style:{border:""+(String(f)+("px solid "+(String(c)+""))),height:""+(String(e)+"px"),width:""+(String(e)+"px")}})}c=a;f.make=c}),null);
__d("MessengerProfileImageM4React.bs",["cx","cssVar","Image.bs","React","bs_caml_int32","bs_belt_Option","bs_caml_option","ReasonReact.bs","joinClasses","bs_caml_primitive"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function j(a,c){a=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").flatMap(a,function(a){if(a==null)return;else return b("bs_caml_option").some(a)}),"white");c=c/5|0;var d=String(b("bs_caml_primitive").caml_int_max(2,c/5|0));return i.createElement("div",{className:"_87v2",style:{border:""+(String(d)+("px solid "+(String(a)+""))),height:""+(String(c)+"px"),width:""+(String(c)+"px")}})}function a(a){var c=a.borderColor,d=a.className,e=a.isActive,f=a.storiesRingEligible,g=a.src,h=a.size,k=a.hasUnreadStories;a=a.imageContainerRef;f=f===!0&&k!==void 0;var l=h/20|0,m=(h/2|0)+l|0,n=b("bs_caml_int32").imul(h,9)/10|0,o=f?(h<<2)/5|0:h,p={style:{height:""+(String(o)+"px"),width:""+(String(o)+"px")}};a!==void 0&&(p.ref=b("bs_caml_option").valFromOption(a));a=i.createElement("div",p,b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make("_87v3","",void 0,void 0,g,o,void 0,o,void 0,[])));p=k!==void 0&&k?"#0099ff":"rgba(0, 0, 0, 0.12)";g={border:"solid",borderColor:p,borderWidth:""+(String(l)+"px"),display:"flex",height:""+(String(n)+"px"),width:""+(String(n)+"px"),borderRadius:""+(String(m)+"px"),alignItems:"center",justifyContent:"center"};return i.createElement("div",{className:b("joinClasses")(b("bs_belt_Option").getWithDefault(d,""),"_87u_")},f?i.createElement("div",{style:g},a):a,e===!0?j(c,h):null)}c=a;f.renderPresence=j;f.make=c}),null);
__d("MessengerFacepileM4React.bs",["cx","React","bs_caml_int32","bs_belt_Option","bs_caml_option","joinClasses","MessengerProfileImageM4React.bs","MessengerFacepileImageM4React.bs","MessengerFacepileOverflowM4React.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function i(a,c,d,e){var f=d.length;if(f!==1)if(f!==0){f=(e<<1)/3|0;var g={className:"_7q0v",imgSize:f,src:d[1]};a!==void 0&&(g.borderColor=b("bs_caml_option").valFromOption(a));f={className:"_7q1i",imgSize:f,src:d[0]};a!==void 0&&(f.borderColor=b("bs_caml_option").valFromOption(a));return h.jsxs("div",{children:[h.jsx(b("MessengerFacepileImageM4React.bs").make,g),h.jsx(b("MessengerFacepileImageM4React.bs").make,f)],className:b("joinClasses")(b("bs_belt_Option").getWithDefault(c,""),"_7q1j"),style:{height:""+(String(e)+"px"),width:""+(String(e)+"px")}})}else return null;else{g=d[0];f={src:g,size:e};a!==void 0&&(f.borderColor=b("bs_caml_option").valFromOption(a));c!==void 0&&(f.className=b("bs_caml_option").valFromOption(c));return h.jsx(b("MessengerProfileImageM4React.bs").make,f)}}function j(a,c,d,e,f){var g=f-20|0,i=g+(b("MessengerFacepileImageM4React.bs").calcBorderWidth(g)<<1)|0,j=e.length;if(j>=3){if(d!==void 0){d=d;if(d>4){var k=b("bs_caml_int32").imul(g,3)-25|0;d={className:"_7q1l",imgSize:g,text:"+"+String(d-3|0)};a!==void 0&&(d.borderColor=b("bs_caml_option").valFromOption(a));var l={className:"_7q1m",imgSize:g,offsetLeft:((k/2|0)-(g/2|0)|0)-3|0,src:e[1]};a!==void 0&&(l.borderColor=b("bs_caml_option").valFromOption(a));var m={className:"_7q1n",imgSize:g,src:e[0]};a!==void 0&&(m.borderColor=b("bs_caml_option").valFromOption(a));return h.jsxs("div",{children:[h.jsx(b("MessengerFacepileOverflowM4React.bs").make,d),h.jsx(b("MessengerFacepileImageM4React.bs").make,l),h.jsx(b("MessengerFacepileImageM4React.bs").make,m)],className:b("joinClasses")(b("bs_belt_Option").getWithDefault(c,""),"_7q1j"),style:{height:""+(String(i)+"px"),width:""+(String(k)+"px")}})}}}else switch(j){case 0:return null;case 1:d=e[0];l={src:d,size:f};a!==void 0&&(l.borderColor=b("bs_caml_option").valFromOption(a));c!==void 0&&(l.className=b("bs_caml_option").valFromOption(c));return h.jsx(b("MessengerProfileImageM4React.bs").make,l);case 2:m=e[0];k=e[1];j=(g<<1)-10|0;d={className:"_7q1l",imgSize:g,src:k};a!==void 0&&(d.borderColor=b("bs_caml_option").valFromOption(a));f={className:"_7q1n",imgSize:g,src:m};a!==void 0&&(f.borderColor=b("bs_caml_option").valFromOption(a));return h.jsxs("div",{children:[h.jsx(b("MessengerFacepileImageM4React.bs").make,d),h.jsx(b("MessengerFacepileImageM4React.bs").make,f)],className:b("joinClasses")(b("bs_belt_Option").getWithDefault(c,""),"_7q1j"),style:{height:""+(String(i)+"px"),width:""+(String(j)+"px")}})}l=b("bs_caml_int32").imul(g,3)-25|0;k={className:"_7q1l",imgSize:g,src:e[2]};a!==void 0&&(k.borderColor=b("bs_caml_option").valFromOption(a));m={className:"_7q1m",imgSize:g,offsetLeft:(l/2|0)-(g/2|0)|0,src:e[1]};a!==void 0&&(m.borderColor=b("bs_caml_option").valFromOption(a));d={className:"_7q1n",imgSize:g,src:e[0]};a!==void 0&&(d.borderColor=b("bs_caml_option").valFromOption(a));return h.jsxs("div",{children:[h.jsx(b("MessengerFacepileImageM4React.bs").make,k),h.jsx(b("MessengerFacepileImageM4React.bs").make,m),h.jsx(b("MessengerFacepileImageM4React.bs").make,d)],className:b("joinClasses")(b("bs_belt_Option").getWithDefault(c,""),"_7q1j"),style:{height:""+(String(i)+"px"),width:""+(String(l)+"px")}})}function a(a){var b=a.borderColor,c=a.className,d=a.expanded,e=a.srcs,f=a.size;a=a.totalParticipants;if(d===!0)return j(b,c,a,e,f);else return i(b,c,e,f)}c=a;f.makeCompact=i;f.makeExpanded=j;f.make=c}),null);
__d("MercuryParticipantsImageM4React.bs",["bs_curry","React","gkx","bs_caml_option","MessengerFacepileM4React.bs","MessengerParticipantsImages.bs","MessengerProfileImageM4React.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.borderColor,d=a.className,e=a.expanded,f=a.isActive,h=a.participants,i=a.size,j=a.storiesRingEligible,k=a.totalParticipants,l=a.hasUnreadStories;a=a.imageContainerRef;var m=g.useRef(!1),n=g.useRef(void 0),o=g.useState(function(){return[]}),p=o[1];o=o[0];g.useEffect(function(){m.current=!0;return function(a){m.current=!1;a=n.current;if(a!==void 0){a=b("bs_caml_option").valFromOption(a).remove;return b("bs_curry")._1(a,0)}else return 0}},[]);g.useEffect(function(){var a=n.current;if(a!==void 0){a=b("bs_caml_option").valFromOption(a).remove;b("bs_curry")._1(a,0)}h.length!==0?n.current=b("bs_caml_option").some(b("MessengerParticipantsImages.bs").getOrderedBigImageMultiWithSize(h,function(a){var c=a.reduce(function(a,b){b==null||a.push(b);return a},[]);if(m.current)return b("bs_curry")._1(p,function(a){return c});else return 0},i)):b("bs_curry")._1(p,function(a){return[]});return},[e,h,i,p]);var q=h.length;if(q!==1){if(q===0)return null}else if(o.length===1){q=o[0];f=b("gkx")("863504")?f:void 0;q={src:q,size:i};c!==void 0&&(q.borderColor=b("bs_caml_option").valFromOption(c));d!==void 0&&(q.className=b("bs_caml_option").valFromOption(d));f!==void 0&&(q.isActive=b("bs_caml_option").valFromOption(f));j!==void 0&&(q.storiesRingEligible=b("bs_caml_option").valFromOption(j));l!==void 0&&(q.hasUnreadStories=b("bs_caml_option").valFromOption(l));a!==void 0&&(q.imageContainerRef=b("bs_caml_option").valFromOption(a));return g.jsx(b("MessengerProfileImageM4React.bs").make,q)}f={srcs:o,size:i};c!==void 0&&(f.borderColor=b("bs_caml_option").valFromOption(c));d!==void 0&&(f.className=b("bs_caml_option").valFromOption(d));e!==void 0&&(f.expanded=b("bs_caml_option").valFromOption(e));k!==void 0&&(f.totalParticipants=b("bs_caml_option").valFromOption(k));return g.jsx(b("MessengerFacepileM4React.bs").make,f)}c=a;f.make=c}),null);
__d("MercuryParticipantsImageM4React.re",["MercuryParticipantsImageM4React.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MercuryParticipantsImageM4React.bs").make;f.make=a}),null);
__d("MessengerAudioAvailableIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){return g.jsx("svg",{children:g.jsxs("g",{children:[g.jsx("polygon",{id:"Fill-8",points:"0 36 36 36 36 0 0 0"}),g.jsx("path",{id:"Fill-11",d:"M12.8546683,23.0915802 C10.2003459,20.4371382 8.18827548,17.4933995 7.18895039,14.801598 C6.11677282,11.9134196 6.30082118,9.54827444 7.70754499,8.14106577 C8.38574404,7.46332572 9.22115105,6.9556194 9.80301228,6.64860076 C10.1768605,6.45174482 10.6202062,6.44887101 10.9902201,6.6495587 C12.2608248,7.33735708 14.2542027,9.8624776 14.6055242,11.228016 C14.6980277,11.5867632 14.6266131,11.9694589 14.4094936,12.2774354 L12.8029047,14.5630718 C12.7056083,14.7019726 12.682123,14.8820647 12.7415553,15.0406032 C13.4096892,16.8233229 14.2192144,18.3129141 15.9254961,20.01852 C17.6303399,21.7246049 19.1209399,22.5340612 20.904867,23.2027008 C21.0635129,23.2625718 21.2432476,23.2391024 21.3822424,23.1413929 L23.6205389,21.5679822 C23.9339963,21.3476569 24.313596,21.2868279 24.6572488,21.3696894 C26.1948195,21.7356211 28.7992956,23.6898115 29.3811568,24.9135753 C29.5474713,25.2637011 29.5388441,25.6674713 29.3576715,26.0209499 C29.0993327,26.5267404 28.5534185,27.4875506 27.8018877,28.2395308 C24.2474537,31.7915592 16.8807262,27.1187451 12.8546683,23.0915802",fill:a})],id:"phone",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),height:"32px",width:"32px",viewBox:"0 0 36 36"})}f.make=a}),null);
__d("MessengerAudioUnavailableIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){return g.jsx("svg",{children:g.jsxs("g",{children:[g.jsx("polygon",{id:"Fill-4",points:"0 36 36 36 36 0 0 0"}),g.jsx("path",{id:"new",d:"M21.3821106,23.1416542 L23.6204291,21.5682415 C23.9343688,21.3479158 24.313493,21.2866078 24.6571492,21.3694694 C26.194735,21.7354016 28.7997159,23.6900735 29.3811036,24.9138389 C29.5474198,25.2639652 29.5387924,25.667257 29.3580973,26.0212149 C29.0997561,26.5265271 28.5538364,27.4878176 27.8022982,28.2393197 C24.24735,31.7918318 16.8805501,27.1185326 12.8549319,23.0918414 C10.200104,20.437396 8.18849316,17.4931744 7.18915824,14.8013694 C6.11649083,11.9131872 6.3010203,9.54803895 7.70775794,8.14130741 C8.38548436,7.4630875 9.22137889,6.95538051 9.80276654,6.64884044 C10.1766185,6.45150527 10.6199685,6.44911042 10.989986,6.64931941 C12.2610825,7.33759766 14.2544801,9.86224252 14.605805,11.2282617 C14.6978301,11.5865304 14.6264148,11.9692265 14.4097724,12.2776825 L12.8031678,14.5633219 C12.7053911,14.7017439 12.6823849,14.8818362 12.7418177,15.0403749 C13.4099582,16.823097 14.2194914,18.3126901 15.9253105,20.0182982 C17.6306504,21.7243853 19.1212651,22.5343216 20.9047304,23.2029622 C21.0633779,23.2623543 21.2435936,23.2388848 21.3821106,23.1416542 M29.7074342,7.70752502 L25.9144427,11.4999687 L29.7074342,15.2929126 C30.0975219,15.6835613 30.0975219,16.3168024 29.7069347,16.7074511 C29.3163475,17.0975996 28.6835163,17.0975996 28.2929291,16.7069509 L24.4999376,12.9145072 L20.7074455,16.7069509 C20.3168583,17.0975996 19.6835276,17.0975996 19.2929404,16.7074511 C18.9023532,16.3168024 18.9023532,15.6835613 19.2929404,15.2929126 L23.0859319,11.4999687 L19.2929404,7.70752502 C18.9023532,7.31687631 18.9023532,6.68363525 19.2929404,6.29348672 L19.2929404,6.29298653 C19.6835276,5.90233782 20.3168583,5.90233782 20.7074455,6.29298653 L24.4999376,10.0859304 L28.2929291,6.29298653 C28.6835163,5.90233782 29.3163475,5.90233782 29.7069347,6.29298653 L29.7074342,6.29348672 C30.0975219,6.68363525 30.0975219,7.31687631 29.7074342,7.70752502",fill:a})],id:"phone-missed",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),height:"32px",width:"32px",viewBox:"0 0 36 36"})}f.make=a}),null);
__d("MessengerForeignUserCompanyNameReact.bs",["React","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.className;a=a.companyName;if(a!==void 0){a={children:a};c!==void 0&&(a.className=b("bs_caml_option").valFromOption(c));return g.jsx("span",a)}else return null}c=a;f.make=c}),null);
__d("MessengerInfoIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){return g.jsx("svg",{children:g.jsx("g",{children:g.jsxs("g",{children:[g.jsx("polygon",{id:"Fill-8",points:"0 36 36 36 36 0 0 0"}),g.jsx("path",{id:"Fill-17",d:"M18,10 C16.6195,10 15.5,11.119 15.5,12.5 C15.5,13.881 16.6195,15 18,15 C19.381,15 20.5,13.881 20.5,12.5 C20.5,11.119 19.381,10 18,10 Z M16,25 C16,25.552 16.448,26 17,26 L19,26 C19.552,26 20,25.552 20,25 L20,18 C20,17.448 19.552,17 19,17 L17,17 C16.448,17 16,17.448 16,18 L16,25 Z M18,30 C11.3725,30 6,24.6275 6,18 C6,11.3725 11.3725,6 18,6 C24.6275,6 30,11.3725 30,18 C30,24.6275 24.6275,30 18,30 Z",fill:a})],id:"Group"}),id:"info-circle",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),height:"32px",width:"32px",viewBox:"0 0 36 36"})}f.make=a}),null);
__d("MessengerInfoPanelButtonReact.bs",["ix","cx","Image.bs","React","asset","CurrentUser","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j={height:"32px",width:"32px"};function k(a){return i.createElement("svg",{viewBox:"0 0 64 64"},i.createElement("g",void 0,i.createElement("g",void 0,i.createElement("path",{style:{fill:a},d:"M32,10c-12.2,0-22,9.8-22,22s9.8,22,22,22s22-9.8,22-22S44.2,10,32,10z M32,19c1.6,0,3,1.4,3,3s-1.4,3-3,3 c-1.6,0-3-1.4-3-3S30.4,19,32,19z M36,45h-2h-4h-2v-1h2V29h-2v-1h2h4v1v15h2V45z"}))))}function l(a){var b={fill:a};return i.createElement("svg",{style:{stroke:a},viewBox:"0 0 64 64"},i.createElement("g",void 0,i.createElement("polygon",{style:b,points:"34,44 34,29 34,28 30,28 28,28 28,29 30,29 30,44 28,44 28,45 30,45 34,45 36,45 36,44"}),i.createElement("circle",{style:b,cx:"32",cy:"22",r:"3"})),i.createElement("path",{style:{fill:"none",stroke:a,strokeMiterlimit:"10",strokeWidth:"2"},d:"M32,11c11.6,0,21,9.4,21,21s-9.4,21-21,21s-21-9.4-21-21S20.4,11,32,11z"}))}function a(a,c){if(b("CurrentUser").isWorkUser())return i.createElement("div",{className:"_2phz"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,c?g("413962"):g("413953"),void 0,void 0,void 0,void 0,[])));else return i.createElement("div",{style:j},c?l(a):k(a))}f.svgWrapperStyle=j;f.selected=k;f.notSelected=l;f.make=a}),null);
__d("MessengerPresenceStatusReact.bs",["fbt","React","bs_caml_option"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var c=a.className,d=a.isUserActive,e=a.lastActive;a=a.platform;var f,i=0;d&&a!==void 0?f=g._("Active on {platform}",[g._param("platform",a)]):i=1;i===1&&(f=e!==void 0?g._("Active {time} ago",[g._param("time",e)]):null);d={children:f};c!==void 0&&(d.className=b("bs_caml_option").valFromOption(c));return h.jsx("div",d)}c=a;f.make=c}),null);
__d("MessengerStoriesRingPresenceMessageQueryContainer.react",["JSResource","MercuryIDs","MercuryParticipantsImageM4React.re","lazyLoadComponent","React","RelayFBEnvironment","RelayModern","MessengerStoriesRingPresenceMessageQueryContainerQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("MercuryParticipantsImageM4React.re").make,i=b("lazyLoadComponent")(b("JSResource")("MessengerStoriesRingPresenceMontageQueryContainer.react").__setRef("MessengerStoriesRingPresenceMessageQueryContainer.react")),j=b("React"),k=b("RelayModern").QueryRenderer;b("RelayModern").graphql;function a(a){var c=a.borderColor,d=a.className,e=a.expanded,f=a.isActive,l=a.participants,m=a.size,n=a.storiesRingEligible,o=a.thread,p=a.totalParticipants;a=b("MercuryIDs").getThreadFBIDFromThreadID(o.thread_id);var q=j.jsx(h,{borderColor:c,className:d,expanded:e,isActive:f,participants:l,size:m,storiesRingEligible:n,totalParticipants:p});return j.jsx(k,{environment:b("RelayFBEnvironment"),query:g!==void 0?g:g=b("MessengerStoriesRingPresenceMessageQueryContainerQuery.graphql"),variables:{threadFBID:a},render:function(a){a=a.props;return a?j.jsx(j.Suspense,{fallback:q,children:j.jsx(i,{borderColor:c,className:d,expanded:e,isActive:f,messageThread:a.message_thread,participants:l,size:m,storiesRingEligible:n,totalParticipants:p})}):q}})}e.exports=a}),null);
__d("MessengerThreadImageM4React.bs",["React","MercuryIDs","bs_belt_Option","MessengerStoriesRingPresenceMessageQueryContainer.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.borderColor,d=a.className,e=a.expanded,f=a.isActive,h=a.size,i=a.storiesRingEligible,j=a.thread;a=a.viewer;var k=j.image_src;if(k==null){var l=j.participants,m=b("MercuryIDs").getParticipantIDFromUserID(a);a=b("MercuryIDs").isCanonical(j.thread_id);var n,o=0;if(l.length!==1)o=1;else{var p=l[0];p===m?n=l:o=1}if(o===1){p=l.filter(function(a){return a!==m});n=a?p:p.slice(0,3)}return g.jsx(b("MessengerStoriesRingPresenceMessageQueryContainer.react"),{borderColor:c,className:d,expanded:e,isActive:f,participants:n,size:h,storiesRingEligible:i,thread:j,totalParticipants:l.length})}else return g.jsx("div",{className:b("bs_belt_Option").getWithDefault(d,""),style:{backgroundImage:"url("+(String(k)+")"),backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat",height:""+(String(h)+"px"),width:""+(String(h)+"px"),backgroundSize:"cover",borderRadius:"50%"}})}c=a;f.make=c}),null);
__d("MessengerProfilePresenceReact.bs",["React","bs_belt_Set","bs_caml_option","ParticipantId.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","MessengerThreadImageM4React.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.borderColor,d=a.className,e=a.expanded,f=a.size,h=a.storiesRingEligible,i=a.thread,j=a.viewer;a=function(a){a=b("MessengerParticipantUtils.bs").findIntersection(j,a,i).length>0;a={isActive:a,size:f,thread:i,viewer:j};c!==void 0&&(a.borderColor=b("bs_caml_option").valFromOption(c));d!==void 0&&(a.className=b("bs_caml_option").valFromOption(d));e!==void 0&&(a.expanded=b("bs_caml_option").valFromOption(e));h!==void 0&&(a.storiesRingEligible=b("bs_caml_option").valFromOption(h));return g.jsx(b("MessengerThreadImageM4React.bs").make,a)};return g.jsx(b("MessengerPresenceProvider.bs").make,{subscribeToIDs:b("bs_belt_Set").fromArray(i.participants,b("ParticipantId.bs")),children:a})}c=a;f.make=c}),null);
__d("MessengerRTCCallButtonWrapper.react",["requireCond","cr:1277459","React","immutable"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){return g.jsx(b("cr:1277459"),babelHelpers["extends"]({},a))};e.exports=a}),null);
__d("MessengerWebDriverTestIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ANIMATED_IMAGE:"animated_image",ATTACHMENT_ROOT:"attachment_root",CHAT_SIDEBAR:"chat_sidebar",INFO_PANEL:"info_panel",SSO_LOGIN_BUTTON:"sso_login_button",INFO_PANEL_BUTTON:"info_panel_button",STICKER:"sticker",SIDEBAR_ITEM:"sidebar_item",DESKTOP_LOGIN_VIEW:"XMessengerDotComLoginViewPlaceholder",CHAT_INPUT:"chat_input:plaintext",CHAT_INPUT_RICH:"chat_input:rich-input"})}),null);
__d("MontageThreadViewContainer.react",["JSResource","React","immutable","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("lazyLoadComponent")(b("JSResource")("MontageThreadViewContainerImpl.react").__setRef("MontageThreadViewContainer.react"));a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return g.jsx(g.Suspense,{fallback:g.jsx("div",{}),children:g.jsx(h,babelHelpers["extends"]({},this.props))})};return b}(g.PureComponent);e.exports=a}),null);
__d("WorkChatDoNotDisturbStatusReact.bs",["ReasonReact.bs","WorkChatDoNotDisturbStatus"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){var g=b("WorkChatDoNotDisturbStatus").component;if(g==null){var h=b("ReasonReact.bs").statelessComponent("WorkChatDoNotDisturbStatusReact.re");return{debugName:h.debugName,reactClassInternal:h.reactClassInternal,handedOffState:h.handedOffState,getDerivedStateFromProps:h.getDerivedStateFromProps,didMount:h.didMount,didUpdate:h.didUpdate,willUnmount:h.willUnmount,shouldUpdate:h.shouldUpdate,render:function(a){return null},initialState:h.initialState,retainedProps:h.retainedProps,reducer:h.reducer,jsElementWrapped:h.jsElementWrapped}}else return b("ReasonReact.bs").wrapJsForReason(g,{className:a,thread:c,isDoNotDisturb:d,description:e},f)}f.make=a}),null);
__d("messengerCalculateTruncationState",["Style"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){if(!e||!c)return;f=f?f.offsetWidth:0;e=Math.ceil(.5*(a.offsetWidth+e.offsetWidth));var g=a.offsetWidth-d.offsetWidth-12;if(e<=g)b("Style").set(a,"text-align","center"),b("Style").set(c,"width","auto"),b("Style").set(c,"margin-left","auto");else{document.body.dir==="rtl"?b("Style").set(a,"text-align","right"):(b("Style").set(a,"text-align","left"),b("Style").set(c,"margin-left",f+"px"));e=Math.max(a.offsetWidth-f-d.offsetWidth-11,0);b("Style").set(c,"width",e+"px")}}e.exports=a}),null);
__d("MessengerDetailViewHeaderReact.bs",["cx","fbt","FBID.bs","bs_curry","Event","React","gkx","Bootload.bs","ReactDOM","debounce","Bootloader","Link.react","bs_belt_Option","bs_caml_option","CurrentUser","ReasonReact.bs","FBRTCSupport","MercuryConfig","MessengerDomIDs.bs","bs_js_null_undefined","MercuryThreadInfo","MessageRequestUtils","MessagingThreadType","WorkForeignEntityInfo.bs","MercuryParticipantTypes","MercuryThreadTitleReact.bs","MessengerLocalTimeReact.bs","MessengerCustomColorUtils.bs","MessengerJoinableModeType","MessengerWebDriverTestIDs","MessengerInfoIconSVGM4React.bs","MessengerThreadImageM4React.bs","MessengerPresenceStatusReact.bs","MessengerInfoPanelButtonReact.bs","MessengerProfilePresenceReact.bs","MessengerDotComAndInboxM4Check.bs","WorkChatDoNotDisturbStatusReact.bs","MontageThreadViewContainer.react","messengerCalculateTruncationState","MessengerRTCCallButtonWrapper.react","MessengerForeignUserCompanyNameReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){b("Bootloader").loadModules(["BootloadableMessengerUserControlsButtonReact.bs"],a,"MessengerDetailViewHeaderReact.bs");return 0}c={doLoad:a};var j=b("Bootload.bs").Create(c);function k(a){var c,d=(c=b("bs_js_null_undefined")).fromOption(a.root.contents),e=c.fromOption(a.title.contents),f=c.fromOption(a.buttons.contents),g=c.fromOption(a.mercuryTitle.contents);c=c.fromOption(a.montage.contents);return b("messengerCalculateTruncationState")(d,e,f,g,c)}function l(a,c){c.state.mercuryTitle.contents=a==null?void 0:b("bs_caml_option").some(b("ReactDOM").findDOMNode(a));return 0}function m(a,c){c.state.title.contents=a==null?void 0:b("bs_caml_option").some(a);return 0}function n(a,c){c.state.root.contents=a==null?void 0:b("bs_caml_option").some(a);return 0}function o(a,c){c.state.buttons.contents=a==null?void 0:b("bs_caml_option").some(a);return 0}function p(a,c){c.state.montage.contents=a==null?void 0:b("bs_caml_option").some(a);return 0}function q(a,c,d,e){if(a.has_montage&&b("MercuryConfig").MontageThreadViewer&&!b("gkx")("686397"))return i.jsx("div",{children:i.jsx(b("MontageThreadViewContainer.react"),{threadID:a.thread_id,montageData:c,participants:d,shouldUseRelay:!1}),ref:b("bs_curry")._1(e.handle,p),className:"_1cwz"});else return null}function r(a,c,d,e){if(b("CurrentUser").isWorkUser()||a===void 0)return null;else{a=b("bs_caml_option").valFromOption(a);var f=a.contact.user_type===b("MercuryParticipantTypes").PAGE;if(f){f=e.state.userControls.contents;if(f!==void 0){e=a.contact.is_messenger_blocked;a=a.contact.fbid;f=i.createElement(f.make,{className:"_3xb9 _30yy",isMuted:b("MercuryThreadInfo").isMuted(c),isBlocked:e,pageID:a,threadID:c.thread_id,viewer:d})}else f=null;return i.jsx("li",{children:f})}else return null}}function s(a,c){c=c.filter(function(b,c,d){if(b==null)return!1;else return b.fbid!==a});var d=c.count();c=c.first();if(d!==1||c==null)return null;else{d={className:"_5eu7"};c=b("bs_caml_option").nullable_to_opt(c.timezone);c!==void 0&&(d.participantTimeZone=b("bs_caml_option").valFromOption(c));return i.createElement(b("MessengerLocalTimeReact.bs").make,d)}}function t(a,c){var d=!b("FBRTCSupport").isMobileDevice();a=a!==void 0?b("bs_caml_option").valFromOption(a).contact.user_type===b("MercuryParticipantTypes").PAGE:!1;var e=c!==void 0?b("bs_caml_option").valFromOption(c).joinable_mode===b("MessengerJoinableModeType").JOINABLE:!1;if(c!==void 0){var f=b("bs_caml_option").valFromOption(c);f=(f.participants.length>1||f.thread_type===b("MessagingThreadType").GROUP)&&b("MercuryThreadInfo").canReply(f)&&!b("MessageRequestUtils").isMessageRequest(f)}else f=!1;c=c!==void 0?b("bs_caml_option").valFromOption(c).thread_type===b("MessagingThreadType").MARKETPLACE:!1;if(d&&!a&&!e&&f)return!c;else return!1}var u=b("MessengerDotComAndInboxM4Check.bs").yes?"_17w2 _6ybr":"_17w2",v=b("MessengerDotComAndInboxM4Check.bs").yes?"_5743 _6y4y":"_5743",w=b("MessengerDotComAndInboxM4Check.bs").yes?"_fl2 _6ymr":"_fl2",x=b("ReasonReact.bs").reducerComponent("MessengerDetailViewHeaderReact");function y(a,c,d,e,f,g,p,y,z){var A;if(g!==void 0){z=b("bs_caml_option").valFromOption(g);if(b("MessengerDotComAndInboxM4Check.bs").yes){var B=z.gradient_colors;A=B.length!==0?B[0]:b("MessengerCustomColorUtils.bs").customColorOrBlue(z)}else A=b("MessengerCustomColorUtils.bs").customColorOrBlue(z)}else A=b("MessengerCustomColorUtils.bs").defaultColor(0);var C=function(c){if(t(a,g)&&g!==void 0){var d=b("bs_caml_option").valFromOption(g),e=d.thread_id;return i.jsx("li",{children:i.jsx(b("MessengerRTCCallButtonWrapper.react"),{className:"_30yy",customColor:A,isVideo:!1,participants:f,thread:d,threadID:e,viewer:c,calleeName:a!==void 0?b("bs_caml_option").valFromOption(a).contact.name:"",isCalleeActive:a!==void 0?b("bs_caml_option").valFromOption(a).isUserActive:null})})}else return null},D=function(c){if(t(a,g)&&g!==void 0){var d=b("bs_caml_option").valFromOption(g),e=d.thread_id;if(a!==void 0){var h=b("bs_caml_option").valFromOption(a).isUserActive;h=h?"_3qfl":""}else h="";return i.jsxs("li",{children:[i.jsx(b("MessengerRTCCallButtonWrapper.react"),{className:"_30yy",customColor:A,isVideo:!0,participants:f,thread:d,threadID:e,viewer:c,calleeName:a!==void 0?b("bs_caml_option").valFromOption(a).contact.name:"",isCalleeActive:a!==void 0?b("bs_caml_option").valFromOption(a).isUserActive:null}),i.jsx("div",{className:h})]})}else return null};if(a!==void 0){B=b("bs_caml_option").valFromOption(a).availabilityStatusData;z=B==null?[!1,""]:[B.isDoNotDisturb,B.description]}else z=[!1,""];var E=z[1],F=z[0],G=a!==void 0?!b("WorkForeignEntityInfo.bs").isCoworker(b("bs_caml_option").valFromOption(a).contact):!1,H=function(a){if(b("CurrentUser").isWorkUser())return b("ReasonReact.bs").element(void 0,void 0,b("WorkChatDoNotDisturbStatusReact.bs").make("_6f6k",b("bs_js_null_undefined").fromOption(g),F,E,[]));else return null},I=function(c){if(a!==void 0){c=b("bs_caml_option").valFromOption(a);var d={className:"_2v6o",isUserActive:c.isUserActive},e=b("bs_caml_option").nullable_to_opt(c.lastActive);e!==void 0&&(d.lastActive=b("bs_caml_option").valFromOption(e));e=b("bs_caml_option").nullable_to_opt(c.platform);e!==void 0&&(d.platform=b("bs_caml_option").valFromOption(e));return[!0,i.createElement(b("MessengerPresenceStatusReact.bs").make,d)]}else return[!1,null]},J=function(c){if(!b("CurrentUser").isWorkUser()||!G||a===void 0)return[!1,null];else{c=b("bs_caml_option").valFromOption(a);var d=c.contact.company_name;if(d==null)return[!1,null];else return[!0,i.createElement(b("MessengerForeignUserCompanyNameReact.bs").make,{className:"_6krh",companyName:b("bs_caml_option").nullable_to_opt(c.contact.company_name)})]}};return{debugName:x.debugName,reactClassInternal:x.reactClassInternal,handedOffState:x.handedOffState,getDerivedStateFromProps:x.getDerivedStateFromProps,didMount:function(a){if(!b("MessengerDotComAndInboxM4Check.bs").yes){var c=b("Event").listen(window,"resize",b("debounce")(function(b){return k(a.state)},20));b("bs_curry")._1(a.onUnmount,function(a){return c.remove()})}return b("bs_curry")._1(j.load,function(b){var c=a;b=b;c.state.userControls.contents=b;return 0})},didUpdate:function(a){if(b("MessengerDotComAndInboxM4Check.bs").yes)return 0;else return k(a.newSelf.state)},willUnmount:x.willUnmount,shouldUpdate:x.shouldUpdate,render:function(j){if(p!==void 0&&g!==void 0){var k=b("bs_caml_option").valFromOption(g),t=b("bs_caml_option").valFromOption(p),x=h._("Conversation Information"),z=I(0),B=z[0],E=J(0),K=H(0);if(b("MessengerDotComAndInboxM4Check.bs").yes){var L=k.has_montage&&b("MercuryConfig").MontageThreadViewer&&b("gkx")("686397")&&b("gkx")("972782")&&b("gkx")("995308");L=b("gkx")("863504")?i.createElement(b("MessengerProfilePresenceReact.bs").make,{className:"_6ynm",size:40,storiesRingEligible:L,thread:k,viewer:t}):i.createElement(b("MessengerThreadImageM4React.bs").make,{className:"_6ynm",size:40,storiesRingEligible:L,thread:k,viewer:t})}else L=null;return i.jsxs("div",{children:[q(k,y,f,j),i.jsxs("div",{children:[L,i.jsxs("div",{children:[i.jsxs("h2",{children:[K,b("ReasonReact.bs").element(void 0,b("bs_curry")._1(j.handle,l),b("MercuryThreadTitleReact.bs").make("_3oh-",b("bs_belt_Option").getWithDefault(d,0),k,t,void 0,void 0,void 0,void 0,[]))],className:u,id:b("MessengerDomIDs.bs").ids.THREAD_TITLE}),F||!B||b("CurrentUser").isWorkUser()&&G?null:z[1],s(t,f),E[1]],className:b("MessengerDotComAndInboxM4Check.bs").yes?"_6ynn":""})],ref:b("bs_curry")._1(j.handle,m),className:v},"threadTitle"),i.jsxs("ul",{children:[r(a,k,t,j),C(t),D(t),i.jsxs("li",{children:[i.cloneElement(i.jsx(b("Link.react"),{"aria-expanded":!c,"aria-label":x,className:"_30yy",onClick:e,role:"button",title:x}),{"data-testid":b("MessengerWebDriverTestIDs").INFO_PANEL_BUTTON},b("MessengerDotComAndInboxM4Check.bs").yes?c?i.jsx("div",{children:b("MessengerInfoIconSVGM4React.bs").make(A),className:"_6yms"}):i.jsxs("div",{children:[i.jsx("div",{className:"_6y4z",style:{backgroundColor:A}}),b("MessengerInfoIconSVGM4React.bs").make(A)],className:"_6yms"}):b("MessengerInfoPanelButtonReact.bs").make(A,c)),i.jsx("div",{"aria-owns":b("MessengerDomIDs.bs").ids.THREAD_INFO_PANEL})]})],ref:b("bs_curry")._1(j.handle,o),className:w},"buttonsContainer")],ref:b("bs_curry")._1(j.handle,n),className:"_673w"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ynl":"")+(!E[0]&&(!B||F)?" _1_fz":"")})}else return null},initialState:function(a){return{root:{contents:void 0},title:{contents:void 0},buttons:{contents:void 0},mercuryTitle:{contents:void 0},montage:{contents:void 0},userControls:{contents:void 0}}},retainedProps:x.retainedProps,reducer:function(a,b){return 0},jsElementWrapped:x.jsElementWrapped}}d=b("ReasonReact.bs").wrapReasonForJs(x,function(a){return y(b("bs_caml_option").nullable_to_opt(a.contactData),a.infoPanelCollapsed,b("bs_caml_option").nullable_to_opt(a.maxTitle),a.onInfoPanelToggle,a.participants,b("bs_caml_option").nullable_to_opt(a.thread),b("FBID.bs").ofString(a.viewer),a.montageData,[])});f.BootloadableMessengerUserControlsButtonReact=c;f.LoadableMessengerUserControlsButtonReact=j;f.calculateTruncationState=k;f.findMercuryTitle=l;f.findTitle=m;f.findRoot=n;f.findButtons=o;f.findMontage=p;f.renderMontageThread=q;f.renderUserControls=r;f.renderLocalTime=s;f.shouldShowCallButton=t;f.titleElemClasses=u;f.titleClasses=v;f.buttonsContainerClasses=w;f.component=x;f.make=y;f.jsComponent=d}),null);
__d("MessengerMuteDialogReact.bs",["cx","fbt","bs_block","bs_curry","React","ReasonReact.bs","MessengerDomIDs.bs","MessengerDialog.react","MessengerRadioList.react","MessengerDialogBody.react","MessengerDialogHeaderReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogCancelButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function j(a){if(typeof a==="number")return-1;else if(a.tag)return a[0]*3600;else return a[0]*60}var k=(c=b("bs_block")).__(0,[15]),l=c.__(1,[1]),m=c.__(1,[8]),n=c.__(1,[24]),o=b("ReasonReact.bs").reducerComponent("MessengerMuteDialogReact");function a(a,c){return{debugName:o.debugName,reactClassInternal:o.reactClassInternal,handedOffState:o.handedOffState,getDerivedStateFromProps:o.getDerivedStateFromProps,didMount:o.didMount,didUpdate:o.didUpdate,willUnmount:o.willUnmount,shouldUpdate:o.shouldUpdate,render:function(a){var c,d=a.state;return i.jsxs(b("MessengerDialog.react"),{shown:d.shown,titleID:b("MessengerDomIDs.bs").ids.MUTE_DIALOG_TITLE,children:[i.createElement(b("MessengerDialogHeaderReact.bs").make,{children:h._("Mute Conversation")}),i.jsxs(b("MessengerDialogBody.react"),{children:[i.jsx("div",{children:h._("You will continue to receive \u0040mention notifications while muted."),className:"_3-96"}),i.jsxs(c=b("MessengerRadioList.react"),{name:"messengerMuteOptions",onValueChange:function(c){return b("bs_curry")._1(a.send,[c])},selectedValue:d.muteSetting,children:[i.jsx(c.Item,{value:k,children:h._("For 15 minutes")}),i.jsx(c.Item,{value:l,children:h._("For 1 hour")}),i.jsx(c.Item,{value:m,children:h._("For 8 hours")}),i.jsx(c.Item,{value:n,children:h._("For 24 hours")}),i.jsx(c.Item,{value:0,children:h._("Until I turn it back on")})]})]}),i.jsxs(b("MessengerDialogFooter.react"),{children:[i.jsx(b("MessengerDialogCancelButton.react"),{}),i.jsx(b("MessengerDialogButton.react"),{label:h._("Mute"),onClick:function(c){return b("bs_curry")._1(a.send,0)},type:"primary"})]})]})},initialState:function(a){return{muteSetting:k,shown:!0}},retainedProps:o.retainedProps,reducer:function(c,d){if(c)return b("bs_block").__(0,[{muteSetting:c[0],shown:d.shown}]);else return b("bs_block").__(2,[{muteSetting:d.muteSetting,shown:!1},function(c){return b("bs_curry")._1(a,j(c.state.muteSetting))}])},jsElementWrapped:o.jsElementWrapped}}d=0;f.convertMuteToSeconds=j;f.fifteenMinutes=k;f.oneHour=l;f.eightHours=m;f.twentyFourHours=n;f.always=d;f.component=o;f.make=a}),null);
__d("MessengerPageUtils.bs",["MercuryIDs","bs_caml_option","CurrentUser","MercuryDispatcher","MercuryThreadActions","MessengerParticipants.bs","MercuryParticipantTypes"],(function(a,b,c,d,e,f){"use strict";function g(a){if(a!==void 0)return b("bs_caml_option").valFromOption(a).user_type===b("MercuryParticipantTypes").PAGE;else return!1}function a(a){a=a.other_user_fbid;if(a==null)return!1;else return g(b("bs_caml_option").nullable_to_opt(b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a))))}function h(a,c,d){c=b("MessengerParticipants.bs").getNow(c);if(c==null)return 0;else{c=Object.assign({},c);b("MercuryDispatcher").getForFBID(d).handleUpdate(Object.assign({},{participants:[Object.assign(c,{is_messenger_blocked:a})],preprocessed:!0}));return 0}}function c(a,c){var d=b("CurrentUser").getAccountID(),e=a.other_user_fbid;if(e==null)return 0;else if(c){b("MercuryThreadActions").getForFBID(d).unblockOnMessengerDotCom(a.thread_id);return h(!1,b("MercuryIDs").getParticipantIDFromUserID(e),d)}else{b("MercuryThreadActions").getForFBID(d).blockOnMessengerDotCom(a.thread_id);return h(!0,b("MercuryIDs").getParticipantIDFromUserID(e),d)}}f.isPageParticipant=g;f.isPageThread=a;f.changeBlockedStatus=h;f.toggleBlock=c}),null);
__d("MessengerVideoAvailableIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){return g.jsx("svg",{children:g.jsxs("g",{children:[g.jsx("polygon",{id:"Fill-8",points:"0 36 36 36 36 0 0 0"}),g.jsx("path",{id:"original",d:"M20,27 L9,27 C6.791,27 5,25.209 5,23 L5,13 C5,10.791 6.791,9 9,9 L20,9 C22.209,9 24,10.791 24,13 L24,23 C24,25.209 22.209,27 20,27 M30.5525,23.3995 L26.829,21.536 C26.321,21.282 26,20.762 26,20.193 L26,15.808 C26,15.2395 26.321,14.719 26.829,14.465 L30.5525,12.6015 C31.218,12.269 32,12.753 32,13.497 L32,22.504 C32,23.2485 31.218,23.732 30.5525,23.3995",fill:a})],id:"camcorder",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),height:"32px",width:"32px",viewBox:"0 0 36 36"})}f.make=a}),null);
__d("MessengerVideoUnavailableIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){return g.jsx("svg",{children:g.jsxs("g",{children:[g.jsx("polygon",{id:"Fill-1",points:"0 36 36 36 36 0 0 0"}),g.jsx("path",{id:"original",d:"M6.52219159,23.73575 C6.00847773,24.24975 5.008035,24.00175 5.008035,23.01175 L5.008035,13.00725 C5.008035,10.79725 6.79803794,9.00525 9.00680761,9.00525 L19.1191748,9.00575 C19.9062364,9.00575 20.3005168,9.95775 19.7438269,10.51425 L6.52219159,23.73575 Z M27.1966755,8.70725 L24.589128,11.31625 C24.2143368,11.69125 24.0039539,12.19925 24.0039539,12.72875 L24.0019551,23.01175 C24.0019551,25.22175 22.2149504,27.00675 20.0061808,27.00675 L9.73590149,27.00675 C9.20569683,27.00675 8.69698019,27.21725 8.32218896,27.59225 L5.20642449,30.70925 C4.81614189,31.10025 4.18249484,31.10025 3.79271195,30.70925 C3.40242935,30.31875 3.40242935,29.68575 3.79271195,29.29525 L25.782963,7.29325 C26.1727459,6.90225 26.8063929,6.90225 27.1966755,7.29325 C27.5869581,7.68375 27.5869581,8.31725 27.1966755,8.70725 Z M30.5533058,23.41125 L26.8308793,21.54725 C26.3226624,21.29275 26.0018411,20.77225 26.0018411,20.20375 L26.0018411,15.81625 C26.0018411,15.24725 26.3226624,14.72725 26.8308793,14.47275 L30.5533058,12.60875 C31.2179356,12.27575 32,12.75975 32,13.50425 L32,22.51575 C32,23.25975 31.2179356,23.74425 30.5533058,23.41125 Z",fill:a})],id:"camcorder-cross",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),height:"32px",width:"32px",viewBox:"0 0 36 36"})}f.make=a}),null);
__d("RTWebLoggingComponent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUDIO_CALL:"audio_button",VIDEO_CALL:"video_button",START_CALL:"start_call_button",END_CALL:"end_call_button",JOIN_CALL:"join_call_button",CANCEL:"cancel_button",CALL_BACK:"call_back",CALL_AGAIN:"call_again",CHAT_PANEL_MESSAGE:"chat_panel_message",REDIAL:"redial",SCREENSHARING:"screensharing",SCREENSHARING_POP_OUT:"screensharing_pop_out_button",TOGGLE_VIDEO:"toggle_video",TOGGLE_AUDIO:"toggle_audio",TOGGLE_CHAT:"toggle_chat",TOGGLE_CAMERA:"toggle_camera",CLOSE_CHAT:"close_chat",TOGGLE_FILTERS:"toggle_filters",SCROLL_FILTERS:"scroll_filters",VIDEO_FILTER_OPTION:"video_filter_option",ADD_PARTICIPANT:"add_participant",FULLSCREEN:"fullscreen",FULLSCREEN_ENABLE:"fullscreen_enable",FULLSCREEN_DISABLE:"fullscreen_disable",CLOSE_WINDOW:"close_window",ACCEPT:"accept_button",DECLINE:"decline_button",NOT_NOW:"rating_not_now",SELF_VIEW:"self_view",SELF_VIEW_MINIMIZE:"self_view_minimize",SELF_VIEW_UNMINIMIZE:"self_view_unminimize",PARTICIPANT_REMOVE:"participant_remove",PARTICIPANT_ROW_SELECT:"participant_row_select",PARTICIPANT_ROW_UNSELECT:"participant_row_unselect",STAR_RATING:"star_rating",SUBMIT_FEEDBACK:"submit_feedback",SETTINGS:"settings",CLOSE_DIALOG:"close_dialog",INCOMING_RING_TONE:"incoming_ring_tone",FREE_CALL:"free_call",VIDEO_ESCALATE:"video_escalate",VIDEO_ESCALATE_ACCEPT:"video_escalate_accept",VIDEO_ESCALATE_DECLINE:"video_escalate_decline",RECENT_CALLS:"recent_calls",MESSAGE:"message",SAVE:"save_button",WINDOW_RESIZE:"window_resize",POOR_NETWORK_TOOLTIP:"poor_network_tooltip",VIDEO_LAYOUT_SWITCH:"video_layout_switch",MWEB_ROSTER_ROW:"mweb_roster_row",BANNER:"banner",UPGRADE_EDGE:"upgrade_edge",VIEW_PARTICIPANTS:"view_participants",BROWSER_NOTIFICATION:"browser_notification",MEDIA_ACCESS_PENDING:"media_access_pending",MEDIA_ACCESS_REJECTED:"media_access_rejected",PIN_SPEAKER:"pin_speaker",UNPIN_SPEAKER:"unpin_speaker"})}),null);
__d("RTWebLoggingSurface",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL_CONTROLS:"call_controls",CHAT_PANEL:"chat_panel",CHAT_TAB:"chat_tab",MESSENGER_HEADER:"messenger_header",INCOMING_DIALOG:"incoming_call_dialog",CALL_HEADER:"call_header",GROUP_CALL_ADD_MEMBERS_DIALOG:"group_call_add_members_dialog",GROUP_CALL_VIEW_MEMBERS_DIALOG:"group_call_view_members_dialog",GROUP_CALL_PARTICIPANT_PICKER_DIALOG:"group_call_participant_picker_dialog",CALL_CONTAINER:"call_container",TIMELINE_TOP_SECTION:"timeline_top_section",DROPDOWN_CALL_MENU:"dropdown_call_menu",THREAD_LIST:"thread_list",DESKTOP_NOTIFICATION:"desktop_notification",AUDIO_FALLBACK_DIALOG:"audio_fallback_dialog",STAR_RATING_SURFACE:"star_rating_surface",MISSED_CALL_DIALOG:"missed_call_dialog",UNSUPPORTED_BROWSER_DIALOG:"unsupported_browser_dialog",ADMIN_MESSAGE:"admin_message",WORK_HOVERCARD:"work_hovercard",MESSENGER_BUBBLE:"messenger_bubble",CHAT_SIDEBAR:"chat_sidebar",SETTING_DIALOG:"setting_dialog",SCREENSHARING_POP_OUT:"screensharing_pop_out",MWEB_ROSTER_VIEW:"mweb_roster_view",WORK_PROFILE:"work_profile",WORKPLACE_GROUP_CHAT:"workplace_group_chat",WORKPLACE_P2P_CHAT:"workplace_p2p_chat",MEETING_ROOM_INTERN_SEARCH_CARD:"meeting_room_intern_search_card",MEETING_ROOM_MAP_DIALOG:"meeting_room_map_dialog",MEETING_ROOM_PROFILE:"meeting_room_profile",MESSAGES_JEWEL:"messages_jewel",WWW_ROSTER_VIEW:"www_roster_view"})}),null);
__d("MessengerRTCVideoCallButtonReact.bs",["ix","cx","fbt","Image.bs","React","asset","CurrentUser","ReasonReact.bs","RTWebUserActionLogger","MessengerDotComAndInboxM4Check.bs","MessengerVideoAvailableIconSVGM4React.bs","MessengerVideoUnavailableIconSVGM4React.bs","VideoCallWebDriverIDs","RTWebLoggingComponent","RTWebLoggingSurface"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k={height:"32px",width:"32px"},l=b("ReasonReact.bs").statelessComponent("MessengerRTCVideoCallButtonReact");function m(a,c,d,e){return{debugName:l.debugName,reactClassInternal:l.reactClassInternal,handedOffState:l.handedOffState,getDerivedStateFromProps:l.getDerivedStateFromProps,didMount:function(a){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(d),component:b("RTWebLoggingComponent").AUDIO_CALL,surface:b("RTWebLoggingSurface").MESSENGER_HEADER});return 0},didUpdate:l.didUpdate,willUnmount:l.willUnmount,shouldUpdate:l.shouldUpdate,render:function(e){e=d?i._("Start a group video chat"):i._("Start a video chat");var f=j.createElement("div",{"aria-label":e,className:"_2phz"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("470488"),void 0,e,void 0,void 0,[]))),h;if(b("MessengerDotComAndInboxM4Check.bs").yes)h=j.createElement("div",{"aria-label":e,style:k,title:e},c?b("MessengerVideoAvailableIconSVGM4React.bs").make(a):b("MessengerVideoUnavailableIconSVGM4React.bs").make(a));else{var l=c?a:"#888888";l={clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:l,strokeMiterlimit:"10",strokeWidth:"2"};h=j.createElement("div",{"aria-label":e,style:k,title:e},j.createElement("svg",{style:l,viewBox:"0 0 64 64"},j.createElement("title",void 0,e),j.createElement("g",void 0,j.createElement("g",void 0,j.createElement("path",{d:"M47,27.8v7.5l9,4.5V23.2L47,27.8z M37.2,17H13.8C10.6,17,8,19.6,8,22.8v17.4c0,3.2,2.6,5.8,5.8,5.8h23.3\nc3.2,0,5.8-2.6,5.8-5.8V22.8C43,19.6,40.4,17,37.2,17z"})))))}l=b("VideoCallWebDriverIDs").START_VIDEO_CALL;return j.cloneElement(b("CurrentUser").isWorkUser()?f:h,{"data-testid":l})},initialState:l.initialState,retainedProps:l.retainedProps,reducer:l.reducer,jsElementWrapped:l.jsElementWrapped}}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return m(a.customColor,a.isAvailable,a.isGroupChat,[])});f.videoCallWebDriverIDs=b("VideoCallWebDriverIDs");f.rtWebLoggingComponent=b("RTWebLoggingComponent");f.rtWebLoggingSurface=b("RTWebLoggingSurface");f.svgWrapperStyle=k;f.component=l;f.make=m;f.jsComponent=a}),null);
__d("MessengerRTCVoiceCallButtonReact.bs",["ix","cx","fbt","Image.bs","React","asset","CurrentUser","ReasonReact.bs","RTWebUserActionLogger","MessengerDotComAndInboxM4Check.bs","MessengerAudioAvailableIconSVGM4React.bs","MessengerAudioUnavailableIconSVGM4React.bs","VideoCallWebDriverIDs","RTWebLoggingComponent","RTWebLoggingSurface"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k={height:"32px",width:"32px"},l=b("ReasonReact.bs").statelessComponent("MessengerRTCVoiceCallButtonReact");function m(a,c,d,e){return{debugName:l.debugName,reactClassInternal:l.reactClassInternal,handedOffState:l.handedOffState,getDerivedStateFromProps:l.getDerivedStateFromProps,didMount:function(a){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(d),component:b("RTWebLoggingComponent").VIDEO_CALL,surface:b("RTWebLoggingSurface").MESSENGER_HEADER});return 0},didUpdate:l.didUpdate,willUnmount:l.willUnmount,shouldUpdate:l.shouldUpdate,render:function(e){e=d?i._("Start a group call"):i._("Start a voice call");var f=j.createElement("div",{"aria-label":e,className:"_2phz"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("470545"),void 0,e,void 0,void 0,[]))),h;if(b("MessengerDotComAndInboxM4Check.bs").yes)h=j.createElement("div",{"aria-label":e,style:k,title:e},c?b("MessengerAudioAvailableIconSVGM4React.bs").make(a):b("MessengerAudioUnavailableIconSVGM4React.bs").make(a));else{var l=c?a:"#888888";l={clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:l,strokeMiterlimit:"10",strokeWidth:"2"};h=j.createElement("div",{"aria-label":e,style:k,title:e},j.createElement("svg",{style:l,viewBox:"0 0 64 64"},j.createElement("title",void 0,e),j.createElement("path",{d:"M48.3,50.5c-7.7,6.5-24.2-10-24.5-10.3C23.5,39.9,7,23.4,13.5,15.7c4.8-5.7,6.3-3.4,7-2.7\nc0.6,0.5,5.7,7.8,6,9.2c0.3,1.4-2.4,4.6-2.2,5.9c0.2,1.2,3.6,5,5.1,6.5c1.5,1.5,5.3,4.9,6.5,5.1c1.2,0.2,4.4-2.5,5.9-2.2\nc1.4,0.3,8.7,5.4,9.2,6C51.6,44.2,54,45.7,48.3,50.5z"})))}l=b("VideoCallWebDriverIDs").START_VOICE_CALL;return j.cloneElement(b("CurrentUser").isWorkUser()?f:h,{"data-testid":l})},initialState:l.initialState,retainedProps:l.retainedProps,reducer:l.reducer,jsElementWrapped:l.jsElementWrapped}}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return m(a.customColor,a.isAvailable,a.isGroupChat,[])});f.videoCallWebDriverIDs=b("VideoCallWebDriverIDs");f.rtWebLoggingComponent=b("RTWebLoggingComponent");f.rtWebLoggingSurface=b("RTWebLoggingSurface");f.svgWrapperStyle=k;f.component=l;f.make=m;f.jsComponent=a}),null);
__d("MessengerRTCGroupCallRingParticipantsRow.react",["cx","fbt","React","intlList"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){a=a.names;return i.jsxs("div",{className:"_1wsd",children:[i.jsx("div",{className:"_1wse",children:h._("Ring:")}),i.jsx("div",{className:"_1wsg",children:b("intlList")(a,b("intlList").CONJUNCTIONS.NONE)})]})};e.exports=a}),null);
__d("MessengerRTCGroupCallParticipantsPickerDialog.react",["cx","fbt","invariant","FBRTCCore","ImmutableObject","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","MessengerRTCGroupCallContactList.react","MessengerRTCGroupCallRingParticipantsRow.react","MessengerRTCGroupCallThreadRow.react","React","RTCUser","RTWebUserActionLogger","URI","gkx","immutable","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=b("MessengerDialogHeaderReact.re").make,l=b("MessengerDialogTitleReact.re").make,m=b("React"),n=460,o=5;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.state={isParticipantSelected:d.props.participants.mapEntries(function(a){var b=a[0];a=a[1];return[a.fbid?a.fbid:b,d.props.participants.size<=o]})};d.$3=function(){b("RTWebUserActionLogger").logPreCallClick({mediaType:b("RTWebUserActionLogger").getMediaType(!d.props.hasVideo),callType:"mw",conferenceName:d.props.conferenceName,surface:"group_call_participant_picker_dialog",component:"cancel_button"})};d.$6=function(a){var c=!d.state.isParticipantSelected.get(a);d.setState(function(b){return{isParticipantSelected:b.isParticipantSelected.set(a,c)}});b("RTWebUserActionLogger").logPreCallClick({mediaType:b("RTWebUserActionLogger").getMediaType(!d.props.hasVideo),callType:"mw",conferenceName:d.props.conferenceName,surface:"group_call_participant_picker_dialog",component:c?"participant_row_select":"participant_row_unselect"})};d.$4=function(){var a=d.$2().map(function(a){return a.fbid});b("RTWebUserActionLogger").logPreCallClick({mediaType:b("RTWebUserActionLogger").getMediaType(!d.props.hasVideo),callType:"mw",conferenceName:d.props.conferenceName,surface:"group_call_participant_picker_dialog",component:"start_call_button"});d.props.handleCall?d.props.handleCall(a):b("FBRTCCore").startGroupCall({conferenceName:d.props.conferenceName,hasVideo:d.props.hasVideo,trigger:d.props.trigger,usersToRing:a});d.props.onUnmount()};c=d.props.participants.valueSeq().toArray().map(function(a){var c=a.big_image_src||a.image_src;a.fbid||i(0,1174);return new(b("RTCUser"))({FBID:a.fbid,profileUrl:new(j||(j=b("URI")))(a.href),profilePictureUrl:c,isMessengerUser:!!a.is_messenger_user,isPartiesUser:!!a.is_parties_user,userName:a.name,userShortName:a.short_name,vanity:a.vanity||""})});d.$1=c.sort(function(a,b){return a.userName.localeCompare(b.userName)});return d}var d=c.prototype;d.componentDidMount=function(){var a;(a=b("RTWebUserActionLogger")).logPreCallImpression({mediaType:a.getMediaType(!this.props.hasVideo),callType:"mw",conferenceName:this.props.conferenceName,surface:"group_call_participant_picker_dialog"});a.logImpression({surface:"group_call_participant_picker_dialog",component:"cancel_button"});a.logImpression({surface:"group_call_participant_picker_dialog",component:"start_call_button"})};d.render=function(){var a=this,c=this.props,d=c.participants,e=c.thread;c=c.viewerID;var f=this.$2(),g=h._("Call group members");return m.jsx(b("MessengerDialog.react"),{onToggle:function(){a.props.onUnmount&&a.props.onUnmount()},type:"default",label:g,width:n,children:m.jsxs("div",{className:"_2m1r",children:[m.jsxs(k,{children:[m.jsx(b("MessengerDialogCancelButton.react"),{onClick:this.$3,dataTestID:"RTCPickerDialogCancelButton"}),m.jsx(l,{autofocus:!0,children:g}),m.jsx(b("MessengerDialogButton.react"),{label:h._("Call"),onClick:this.$4,dataTestID:"RTCPickerDialogCallButton",disabled:f.length===0,type:"primary",use:"default"})]}),m.jsx(b("MessengerRTCGroupCallThreadRow.react"),{displayBlockedMemberWarning:b("gkx")("678352")?this.$5(f):!1,participants:d,thread:e,viewerID:c}),m.jsx(b("MessengerRTCGroupCallRingParticipantsRow.react"),{names:f.map(function(a){a=a.name;return a}).sort(function(a,b){return a.localeCompare(b)})}),m.jsx(b("MessengerRTCGroupCallContactList.react"),{remoteUsers:this.$1,isParticipantSelected:this.state.isParticipantSelected,onClick:this.$6})]})})};d.$5=function(a){return a.some(function(a){return a.is_messenger_blocked||a.is_facebook_blocked})};d.$2=function(){var a=this;return this.props.participants.filter(function(b,c){return a.state.isParticipantSelected.get(b.fbid?b.fbid:c)}).toArray()};return c}(m.Component);a.propTypes={participants:(c=b("prop-types")).instanceOf(b("immutable").Map).isRequired,thread:c.instanceOf(b("ImmutableObject")),viewerID:c.string.isRequired,trigger:c.string.isRequired,conferenceName:c.string.isRequired,hasVideo:c.bool.isRequired,handleCall:c.func,onUnmount:c.func.isRequired};e.exports=a}),null);
__d("MessengerRTCGroupCallParticipantsPickerDialogController",["DOM","MessengerRTCGroupCallParticipantsPickerDialog.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a={_container:b("DOM").create("div"),render:function(a){var c=this,d=a.participants,e=a.thread,f=a.viewerID,h=a.trigger,i=a.conferenceName,j=a.hasVideo;a=a.handleCall;b("ReactDOM").render(g.jsx(b("MessengerRTCGroupCallParticipantsPickerDialog.react"),{participants:d,thread:e,viewerID:f,trigger:h,conferenceName:i,hasVideo:j,handleCall:a,onUnmount:function(){return c._onUnmount()}}),this._container)},_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._container)}};e.exports=a}),null);
__d("MessengerRTCUnavailableDialog.react",["fbt","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogs.bs","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerDialogBodyReact.bs").jsComponent,i=b("MessengerDialogHeaderReact.re").make,j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return j.jsxs(b("MessengerDialog.react"),{onToggle:this.$1,children:[j.jsx(i,{children:g._("Can't Make Call")}),j.jsx(h,{children:this.$2()}),j.jsx(b("MessengerDialogFooter.react"),{children:j.jsx(b("MessengerDialogButton.react"),{action:"cancel",label:g._("OK"),type:"primary"})})]})};d.$2=function(){return j.jsx("div",{children:g._("{name} is not available right now.",[g._param("name",this.props.name)])})};d.$1=function(a){a||b("MessengerDialogs.bs").removeDialog()};return c}(j.Component);a.propTypes={name:b("prop-types").string.isRequired};e.exports=a}),null);
__d("MessengerRTCGroupCallUnsupportedBrowserDialog.react",["fbt","CurrentUser","Link.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","React","XWorkplaceMarketingDefaultController"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerDialogBodyReact.bs").jsComponent,i=b("MessengerDialogHeaderReact.re").make,j=b("React");a=function(a){var c=a.browserName,d=a.hasVideo,e=a.onUnmount;a=a.hideDialog;return j.jsxs(b("MessengerDialog.react"),{onToggle:e,children:[j.jsx(i,{children:k(d)}),j.jsx(h,{children:l(c,d,a)}),j.jsx(b("MessengerDialogFooter.react"),{children:j.jsx(b("MessengerDialogButton.react"),{label:g._("OK"),onClick:a,type:"primary"})})]})};function k(a){return a?g._("Switch Browsers to Make Group Video Chats"):g._("Switch Browsers to Make Group Calls")}function l(a,c,d){return b("CurrentUser").isWorkUser()?g._({"video call":"Unfortunately, our Workplace Chat group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group video call, open in {link to install chrome} or the {link to install Workplace chat desktop} app.","call":"Unfortunately, our Workplace Chat group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group call, open in {link to install chrome} or the {link to install Workplace chat desktop} app."},[g._param("browser name, i.e. Internet Explorer or Safari",a),g._enum(c?"video call":"call",{"video call":"video call",call:"call"}),g._param("link to install chrome",m(d)),g._param("link to install Workplace chat desktop",n(d))]):g._({"video call":"Unfortunately, our group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group video call, open in {link to install chrome}.","call":"Unfortunately, our group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group call, open in {link to install chrome}."},[g._param("browser name, i.e. Internet Explorer or Safari",a),g._enum(c?"video call":"call",{"video call":"video call",call:"call"}),g._param("link to install chrome",m(d))])}function m(a){return j.jsx(b("Link.react"),{onClick:a,href:"https://www.google.com/chrome/index.html",target:"_blank",children:"Google Chrome"})}function n(a){var c=b("XWorkplaceMarketingDefaultController").getURIBuilder().setString("path","chat-app").setString("ref","rtc_unsupported_dialog").getURI();return j.jsx(b("Link.react"),{onClick:a,href:c,target:"_blank",children:"Workplace Chat"})}e.exports=a}),null);
__d("MessengerRTCUnsupportedBrowserDialog.react",["cx","fbt","CurrentUser","FBRTCConfig","Link.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","React","XWorkplaceMarketingDefaultController"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerDialogBodyReact.bs").jsComponent,j=b("MessengerDialogHeaderReact.re").make,k=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.browserName,d=a.hasVideo,e=a.onUnmount;a=a.hideDialog;return k.jsxs(b("MessengerDialog.react"),{onToggle:e,children:[k.jsx(j,{children:h._("Switch Browsers to Make Calls")}),k.jsx(i,{children:this.$1(c,d)}),k.jsxs(b("MessengerDialogFooter.react"),{children:[k.jsx("span",{className:"_30vt",children:k.jsx(b("MessengerDialogButton.react"),{label:h._("Learn More"),onClick:a,type:"secondary",href:b("FBRTCConfig").unsupportedBrowserUrl(),target:"_blank",use:"default"})}),k.jsx(b("MessengerDialogButton.react"),{label:h._("OK"),onClick:a,type:"primary",use:"default"})]})]})};d.$1=function(a,c){if(b("CurrentUser").isWorkUser())return h._({"video calling":"Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our video calling feature yet. To make a call, open Workplace Chat in {link to install chrome}, {link to install firefox} or the {link to install Workplace chat desktop} app.","calling":"Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our calling feature yet. To make a call, open Workplace Chat in {link to install chrome}, {link to install firefox} or the {link to install Workplace chat desktop} app."},[h._param("browser name, i.e. Internet Explorer or Safari",a),h._enum(c?"video calling":"calling",{"video calling":"video calling",calling:"calling"}),h._param("link to install chrome",this.$2()),h._param("link to install firefox",this.$3()),h._param("link to install Workplace chat desktop",this.$4())]);else return h._({"video calling":"Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our video calling feature yet. To make a call, open Messenger in {link to install chrome} or {link to install firefox}.","calling":"Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our calling feature yet. To make a call, open Messenger in {link to install chrome} or {link to install firefox}."},[h._param("browser name, i.e. Internet Explorer or Safari",a),h._enum(c?"video calling":"calling",{"video calling":"video calling",calling:"calling"}),h._param("link to install chrome",this.$2()),h._param("link to install firefox",this.$3())])};d.$2=function(){return k.jsx(b("Link.react"),{onClick:this.props.hideDialog,href:"https://www.google.com/chrome/index.html",target:"_blank",children:"Google Chrome"})};d.$3=function(){return k.jsx(b("Link.react"),{onClick:this.props.hideDialog,href:"https://www.mozilla.org/en-US/firefox/new/",target:"_blank",children:"Mozilla Firefox"})};d.$4=function(){var a=b("XWorkplaceMarketingDefaultController").getURIBuilder().setString("path","chat-app").setString("ref","rtc_unsupported_dialog").getURI();return k.jsx(b("Link.react"),{onClick:this.props.hideDialog,href:a,target:"_blank",children:"Workplace Chat"})};return c}(k.Component);e.exports=a}),null);
__d("MessengerRTCUnsupportedBrowserDialogController",["fbt","requireCond","CurrentUser","MessengerDesktopAppLinks","MessengerDialogs.bs","MessengerRTCGroupCallUnsupportedBrowserDialog.react","MessengerRTCUnsupportedBrowserDialog.react","cr:1453546","React","UserAgent","ZenonUpsellLinks","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a={_dialog:null,_handleToggle:function(a){a||b("MessengerDialogs.bs").removeAllDialogs()},hideDialog:function(){b("MessengerDialogs.bs").removeAllDialogs()},_browserName:function(){if(b("UserAgent").isBrowser("Firefox"))return g._("Firefox");else if(b("UserAgent").isBrowser("IE"))return g._("Internet Explorer");else if(b("UserAgent").isBrowser("Safari"))return g._("Safari");else return g._("your browser")},render:function(a){var c=this,d=a.hasVideo,e=a.isGroupCall;b("MessengerDialogs.bs").showDialog(function(){var a=b("ZenonUpsellLinks").getDesktopUpsellLinkIfEnabledForCalls();if(a!=null&&b("cr:1453546")!=null)return h.jsx(b("cr:1453546"),{desktopAppstoreLink:a,hideDialog:c.hideDialog,onUnmount:c._handleToggle});else return e?h.jsx(b("MessengerRTCGroupCallUnsupportedBrowserDialog.react"),{browserName:c._browserName(),hasVideo:d,hideDialog:c.hideDialog,onUnmount:c._handleToggle}):h.jsx(b("MessengerRTCUnsupportedBrowserDialog.react"),{browserName:c._browserName(),hasVideo:d,hideDialog:c.hideDialog,onUnmount:c._handleToggle})})},dismiss:b("MessengerDialogs.bs").removeAllDialogs};e.exports=a}),null);
__d("MessengerRTCInvokeHandler",["invariant","MercuryIDs","MercuryThreadIDMap","MessengerDialogs.bs","MessengerRTCUnavailableDialog.react","MNRTCCallabilityStore","React","FBRTCLogger","RTWebUserActionLogger","nullthrows","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MercuryThreadIDMap").get(),i=b("React"),j=b("FBRTCLogger").Trigger;a={isCallable:function(a,c){var d;if(b("MercuryIDs").isGroupChat(a))d=!0;else{a=b("MercuryIDs").getUserIDFromThreadID(a);d=a!=null?b("MNRTCCallabilityStore").isCallable(a,c):!1}return d},handleStartCall:function(a,c,e,f,l,m,n,o){n?b("MercuryIDs").isGroupChat(a)?(b("RTWebUserActionLogger").logPreCallClick({conferenceName:c.thread_fbid!=null?"GROUP:"+c.thread_fbid:null,surface:"messenger_header",component:b("RTWebUserActionLogger").getAudioVideoComponent(!e),callType:"mw",mediaType:b("RTWebUserActionLogger").getMediaType(!e)}),d(["FBRTCCore","FBRTCSupport","MessengerRTCUnsupportedBrowserDialogController","MessengerRTCGroupCallParticipantsPickerDialogController"],function(d,g,i,m){var n=c.rtc_call_data,o=b("MercuryIDs").isGroupChat(a)&&l.size===1;if(n&&(n.call_state!=="NO_ONGOING_CALL"&&n.server_info_data||o)){d.startGroupCall({conferenceName:"GROUP:"+b("nullthrows")(c.thread_fbid),hasVideo:e,serverInfoData:n.server_info_data,trigger:o?e?j.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:j.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:n.call_state!=="AUDIO_GROUP_CALL"?e?j.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:j.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:e?j.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:j.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON});return}if(!g.isGroupCallWebtrcSupported()){k(a,c,e);i.render({hasVideo:e,isGroupCall:!0});return}if(l.size>0){o=b("qex")._("1006758")||0;n=l.filter(function(a){a=a.fbid;return a!==f}).toArray().map(function(a){a=a.fbid;return a});if(n.length<o){d.startGroupCall({conferenceName:"GROUP:"+b("nullthrows")(c.thread_fbid),hasVideo:e,trigger:e?j.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:j.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON,usersToRing:n});return}}var p=function(a){m.render({participants:l.filter(function(a){a=a.fbid;return a!==f}),thread:c,viewerID:f,trigger:e?j.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:j.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON,conferenceName:"GROUP:"+a,hasVideo:e})};b("MercuryIDs").isLocalThread(a)?h.getServerIDFromClientID(a,function(a){return p(a)}):p(b("MercuryIDs").getThreadFBIDFromThreadID(a))})):d(["FBRTCCore","FBRTCSupport","MessengerRTCUnsupportedBrowserDialogController"],function(d,f,h){if(!f.isWebrtcSupported()){k(a,c,e);h.render({hasVideo:e,isGroupCall:!1});return}f=b("MercuryIDs").getUserIDFromThreadID(a);f!=null||g(0,2744);h=e?"messenger_dot_com_video_call":"messenger_dot_com_audio_call";d.startOutgoingCall(f,h,!e,!1,o)}):(k(a,c,e),b("MessengerDialogs.bs").showDialog(function(){return i.jsx(b("MessengerRTCUnavailableDialog.react"),{name:m})}))}};function k(a,c,d){b("RTWebUserActionLogger").logError({callType:b("MercuryIDs").isGroupChat(a)?"mw":"p2p",conferenceName:c.thread_fbid!=null?"GROUP:"+c.thread_fbid:null,mediaType:b("RTWebUserActionLogger").getMediaType(!d),errorDomain:"unsupported browser"})}e.exports=a}),null);