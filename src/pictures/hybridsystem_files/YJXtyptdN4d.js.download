if (self.CavalryLogger) { CavalryLogger.start_js(["xACy8"]); }

__d("VideoSegmentInfoHelper",["URI","VideoAkamaiRequestHelper","VideoDashPrefetchCache","XHRRequest","getCrossOriginTransport"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){a=a.requestInfo;var c=new(b("XHRRequest"))(h(a)).setMethod("GET").setResponseType("arraybuffer").setTransportBuilder(b("getCrossOriginTransport")),d=/livestream\-lookaside\.(facebook|workplace)\.com$/;d=d.test(c.getURI().getDomain());d&&c.setTransportBuilder(b("getCrossOriginTransport").withCredentials);if(b("VideoAkamaiRequestHelper").isAkamai(a.baseUrl)){var e=b("VideoAkamaiRequestHelper").getRequestHeaders(a);e&&Object.keys(e).forEach(function(a){c.setRequestHeader(a,e[a])})}return c}function c(a){a=a.requestInfo;var b=a.startByte;a=a.endByte;return b&&a?a-b:null}function h(a){var c=a.baseUrl,d=a.isPredictive,e=a.startByte,f=a.endByte;c=new(g||(g=b("URI")))(c);d&&(c=c.addQueryData({_nc_sc:1}));if(!b("VideoAkamaiRequestHelper").isAkamai(a.baseUrl)){if(e===0&&f==null)return c;c=c.addQueryData({bytestart:e});f!=null&&(c=c.addQueryData({byteend:f}))}return c}function d(a){return b("VideoDashPrefetchCache").hasCacheValue(h(a.requestInfo).toString())}function f(a){return a.baseUrl+","+(a.startByte||0)+(","+(a.endByte||0))}e.exports={createRequest:a,estimateRequestSize:c,getRequestUri:h,isPrefetchedRequest:d,getRequestCacheKey:f}}),null);
__d("SegmentsUpdateHelper",["BanzaiODS","VideoPlayerShakaGlobalConfig","VideoSegmentInfoHelper"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var c=a.prototype;c.updateSegments=function(b,c){var d=this;if(!c.length)return;var e=this.$2.get(b)||[],f=e[e.length-1];f=f?f.startTime:-1;var g=c.length;while(g>0){var h=c[g-1];if(h.startTime<=f)break;g--}h=c.slice(g);f=c.slice(0,g);this.$3(e,f);c=h.map(function(b){return a.createSegmentInfo(b)});c.forEach(function(a){d.$4(a),e.push(a)});this.$2.set(b,e)};a.createSegmentInfo=function(a){var b=a.startTime,c=a.endTime,d=a.url,e=a.unscaledStartTime;a=a.unscaledDuration;var f=d.baseUrl,g=d.isPredictive,h=d.startByte;d=d.endByte;b={segmentID:0,startTime:b,endTime:c,requestInfo:{baseUrl:f,isPredictive:g,startByte:h,endByte:d||void 0},unscaledStartTime:e,unscaledDuration:a};return b};c.$5=function(a,b){var c=b.startTime,d=b.endTime,e=b.url,f=b.unscaledStartTime;b=b.unscaledDuration;var g=e.baseUrl,h=e.startByte;e=e.endByte;a.segmentID=0;a.startTime=c;a.endTime=d;c=a.requestInfo;c.baseUrl=g;c.startByte=h;c.endByte=e||void 0;a.unscaledStartTime=f;a.unscaledDuration=b;return a};c.$3=function(c,d){if(!d.length)return;var e=d.length,f=function(){var a=d[e-1]||null;e--;return a},g=f(),h=Number.POSITIVE_INFINITY;for(var i=0;i<=c.length&&g!=null;i++){var j=c.length-i,k=c[j-1],l=j>=1?k.startTime:Number.NEGATIVE_INFINITY,m=void 0;if(l<=g.startTime&&g.endTime<=h){if(l===g.startTime){var n=b("VideoSegmentInfoHelper").getRequestCacheKey(k.requestInfo);m=this.$5(k,g);k=b("VideoSegmentInfoHelper").getRequestCacheKey(m.requestInfo);k!==n&&(this.$1["delete"](n),this.$4(m))}else{m=a.createSegmentInfo(g);this.$4(m);c.splice(j,0,m);b("VideoPlayerShakaGlobalConfig").getBool("srm_fix_update_helper_insert_loop",!1)&&(l=m.startTime);k=b("VideoPlayerShakaGlobalConfig").getString("segment_update_helper_splice_path_entity_key","");if(k){n=g.unscaledStartTime;j=g.unscaledDuration;typeof n==="number"&&typeof j==="number"&&m.unscaledStartTime===n&&m.unscaledDuration===j&&b("BanzaiODS").bumpEntityKey(2966,"videos.www.shaka",k)}}g=f();b("VideoPlayerShakaGlobalConfig").getBool("srm_fix_update_helper_insert_loop",!1)&&g!=null&&i+1>c.length&&i--}h=l}};c.$4=function(a){var c=b("VideoSegmentInfoHelper").getRequestCacheKey(a.requestInfo);this.$1.set(c,a)};return a}();e.exports=a}),null);
__d("ShakaSegmentReferenceHelper",["BinarySearch","FBLogger"],(function(a,b,c,d,e,f){"use strict";var g=.001;function h(a,b){for(var c=a.length-1;c>=0;--c){var d=a[c];if(Math.abs(b-d.startTime)<g)return c}return-1}function i(a,c){var d=h(a,c);if(d>-1)return d;for(var d=a.length-1;d>=0;--d){var e=a[d];if(c>=e.startTime&&c<e.endTime){b("FBLogger")("shaka").warn("Segment reference have no matching start time %s, %d",JSON.stringify(e),c);return d}}return-1}function a(a,b){var c=i(a,b.startTime);if(c>=0){a.splice(c,0,b);return c+1}else{a.push(b);return a.length}}function c(a,c){var d=a.startByte;d=b("BinarySearch").leastUpperBound(function(a){a=c[a];return a.url.startByte},d,0,c.length,function(a,b){return a-b});var e=c[d];return e&&e.url.baseUrl===a.baseUrl&&e.url.startByte===a.startByte&&e.url.endByte===a.endByte?d:-1}e.exports={findIndexByStartTime:i,insertReference:a,findIndexByRequestInfo:c,findIndexByStartTimeExact:h}}),null);
__d("ShakaTimelineSegmentIndexUtils",["BinarySearch","VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f){"use strict";var g=function(a,b,c){return Math.abs(a-b)<c},h=function(a,b,c){return!g(a,b,c)&&a-b<0},i=function(a,b,c){return g(a,b,c)||a-b<0},j=function(a,b,c){return g(a,b,c)||a-b>0};function k(b){var a=0;for(var c=0;c<b.length;++c)b[c].startSegmentIndex=a,a+=b[c].repeat+1;return a}function l(b,c,a){c=a-c;var d=0;if(a<1||c<0||b.length<1)throw new RangeError("Index out of range.");for(a=b.length-1;a>-1;--a){var e=b[a].repeat+1;d=e-c;if(d<0){c=Math.abs(d);continue}break}return{S:a,r:d}}function a(a,c,d,e){if(b("VideoPlayerShakaGlobalConfig").getBool("non_iterative_segments_api_calls",!1))return v(a,c,d,e);var f=c.length-1,g=1e-7,k=function(a){return a/d+e};for(;f>-1;--f)if(i(k(c[f].startTime),a,g))break;if(f===-1)return f;var l=c[f],m=l.duration/d,n=0;for(var o=0;o<f;++o)n+=c[o].repeat+1;o=k(l.startTime);var p=o+m*(l.repeat+1);if(j(a,p,g)&&c[f+1]&&h(a,k(c[f+1].startTime),g))return n+l.repeat;else if(j(a,p,g)&&!c[f+1])return-1;k=n+Math.floor((a-o)/m);o+=m*(k-n);p=o+m;return j(a,o,g)&&h(a,p,g)?k:k+1}function c(a,c,d,e){if(b("VideoPlayerShakaGlobalConfig").getBool("non_iterative_segments_api_calls",!1)){for(var f=a;f<c;++f){var g=u(d,f);e(g.unscaledStartTime,g.unscaledEndTime,g.segmentReplacement,g.delta,g.previousEndTime)}return}g=c-a;f=a;c=0;a=0;var h=!0;for(var i=0;i<d.length;++i){var j=d[i],k=j.repeat;k=k+1;var l=Math.min(a+k,f);l=l-a;var m=j.startTime,n=void 0;l&&(n=m+l*j.duration,d[i+1]&&n>d[i+1].startTime&&(n=d[i+1].startTime),m=n,c=n,h=!1);for(var j=l;j<k;++j){l=null;var o=b("VideoPlayerShakaGlobalConfig").getBool("fix_time_point_boundary_gap_expansion",!1);!o&&!h&&m!=c&&(l=m-c||null);n=m+d[i].duration;o=o?d[i+1]&&j+1>=k&&n!==d[i+1].startTime:d[i+1]&&n>d[i+1].startTime;o&&(l=d[i+1].startTime-n,c=n,n=d[i+1].startTime);o=a+j;e(m,n,o,l,l!==null?c:l);h=!1;if(--g<=0)return;f++;m=n;c=n}a+=k}}function d(a,b,c){var d=[];if(a.length>1){var e=0;for(var f=0;f<a.length;++f){var g=a[f],h=g.startTime;g=h+(g.repeat+1)*g.duration;if(f&&h!==e){var i=h-e;i>0&&d.push({start:e/b+c,end:h/b+c})}e=g}}return d}function m(a){var b=[];if(a.length===0)return b;b.push(a[0]);for(var c=1;c<a.length;++c){var d=b[b.length-1];if(d.duration!==a[c].duration){b.push(a[c]);continue}var e=d.startTime+d.duration*(d.repeat+1);if(e===a[c].startTime){d.repeat++;continue}b.push(a[c])}return b}function f(a,b){a=a.slice();b=b.slice();if(b.length===0)return a;if(a.length===0){for(var c=0;c<b.length;++c)a.push(b[c]);return a}c=a[a.length-1];var d=c.startTime+c.duration*c.repeat;c=d+c.duration;var e=b[b.length-1];e=e.startTime+e.duration*(e.repeat+1);var f=k(b),g=[];if(c!==e){for(var c=f-1;c>-1;--c){e=l(b,c,f);var h=b[e.S],i=h.duration;h=h.startTime+i*e.r;if(d!==h)g.push({startTime:h,duration:i,repeat:0,startSegmentIndex:0});else break}while(g.length)a.push(g.pop())}e=m(a);return e}function n(b,c,a){if(c+1>=a)return p(b,a);a=l(b,c+1,a);var d=a.S;a=a.r;var e=d,f=a;f===0?(d=e-1,a=b[d].repeat):(d=e,a=f-1);a=b[d].startTime+b[d].duration*a;d=a+b[d].duration;f=f!==0?null:b[e].startTime-d;var g=f?d:null;d=f?b[e].startTime:d;return{unscaledStartTime:a,unscaledEndTime:d,segmentReplacement:c,delta:f,previousEndTime:g}}function o(b,a){if(a<1||!b.length)throw new RangeError("Index out of range");return n(b,0,a)}function p(b,a){if(a<1||!b.length)throw new RangeError("Index out of range");var c=b.length-1,d=b[c].repeat;d=b[c].startTime+b[c].duration*d;b=d+b[c].duration;return{unscaledStartTime:d,unscaledEndTime:b,segmentReplacement:a-1,delta:null,previousEndTime:null}}function q(a,b,c){var d=c-a.startSegmentIndex;d=a.startTime+a.duration*d;var e=d+a.duration,f=null,g=null;if(b&&a.startSegmentIndex+a.repeat===c){a=b.startTime;f=a-e;f&&(g=e,e=a)}b={unscaledStartTime:d,unscaledEndTime:e,segmentReplacement:c,delta:f,previousEndTime:g};return b}function r(a,b,c){var d=a.startTime;c=(c-d)/a.duration;d=Math.floor(c)+1;var e=1e-7;c=g(c,d,e)?d:Math.floor(c);c+=a.startSegmentIndex;e=a.startSegmentIndex+a.repeat;return c<=e?c:b?e:-1}function s(a,c){var d=a[a.length-1];if(b("VideoPlayerShakaGlobalConfig").getBool("templated_faster_start_index_finds",!1)&&c===0)return a.length?0:-1;return b("VideoPlayerShakaGlobalConfig").getBool("templated_test_last_time_point_first",!1)&&d&&d.startSegmentIndex<=c?a.length-1:b("BinarySearch").findBoundInArray(a,c,function(a,b){return a.startSegmentIndex-b},b("BinarySearch").GREATEST_LOWER_BOUND)}function t(a,c){var d=a[a.length-1],e=1e-7;if(b("VideoPlayerShakaGlobalConfig").getBool("templated_test_last_time_point_first",!1)&&d&&i(d.startTime,c,e))return a.length-1;d=function(a,b){return g(a.startTime,b,e)?0:a.startTime-b};return b("BinarySearch").findBoundInArray(a,c,b("VideoPlayerShakaGlobalConfig").getBool("use_float_epsilon_comparator_in_binary_search",!1)?d:function(a,b){return a.startTime-b},b("BinarySearch").GREATEST_LOWER_BOUND)}function u(a,b){var c=s(a,b),d=a[c];d=q(d,a[c+1]||null,b);return d}function v(a,b,c,d){a=(a-d)*c;d=t(b,a);c=b[d];if(!c)return-1;c=r(c,b[d+1]||null,a);return c}function w(a,b,c,d){a=(a-d)*c;d=t(b,a);c=b[d];b=b[d+1]||null;if(!c)return null;d=r(c,b,a);if(d<0)return null;a=q(c,b,d);return a}e.exports={length:k,findIndex:a,find:w,findSTagAndRepeatValueByIndex:l,get:n,getSegments:c,getSeekRangeGaps:d,compressTimePoints:m,integrateTimePoints:f,first:o,last:p}}),null);
__d("ReadableStream",[],(function(a,b,c,d,e,f){e.exports=self.ReadableStream}),null);
__d("WritableStream",[],(function(a,b,c,d,e,f){e.exports=self.WritableStream}),null);
__d("StreamBandwidthReporter",["EventEmitter","ReadableStream","WritableStream","performanceNow","pipeErrorTo"],(function(a,b,c,d,e,f){"use strict";var g;a=function(a){babelHelpers.inheritsLoose(d,a);var c=d.prototype;c.$StreamBandwidthReporter13=function(a){this.$StreamBandwidthReporter11.enqueue(a)};function d(c,d,e){var f;f=a.call(this)||this;f.$StreamBandwidthReporter2=null;f.$StreamBandwidthReporter3=0;f.$StreamBandwidthReporter4=0;f.$StreamBandwidthReporter8=0;f.$StreamBandwidthReporter9=Infinity;f.$StreamBandwidthReporter1=c;f.$StreamBandwidthReporter2=f.$StreamBandwidthReporter1.getNumber("streaming_bandwidth_update_interval",18e4);f.$StreamBandwidthReporter7=e;f.$StreamBandwidthReporter9=d;f.$StreamBandwidthReporter2&&(f.$StreamBandwidthReporter10=f.$StreamBandwidthReporter9,f.$StreamBandwidthReporter14());f.writable=new(b("WritableStream"))({start:function(a){f.$StreamBandwidthReporter5=f.$StreamBandwidthReporter6=(g||(g=b("performanceNow")))(),f.$StreamBandwidthReporter12=a},write:function(a){a.length!=void 0&&(f.$StreamBandwidthReporter3+=a.length),f.$StreamBandwidthReporter15(),f.$StreamBandwidthReporter13(a)},close:function(){f.$StreamBandwidthReporter11.close(),f.$StreamBandwidthReporter16()},abort:function(a){b("pipeErrorTo")(f.$StreamBandwidthReporter11,a)}});f.readable=new(b("ReadableStream"))({start:function(a){f.$StreamBandwidthReporter11=a},cancel:function(a){b("pipeErrorTo")(f.$StreamBandwidthReporter12,a)}});return f}c.$StreamBandwidthReporter17=function(){var a=this.$StreamBandwidthReporter1.getNumber("max_bandwidth_update_interval",0);return a>0?(g||(g=b("performanceNow")))()>this.$StreamBandwidthReporter5+a:!1};c.$StreamBandwidthReporter15=function(){var a=this.$StreamBandwidthReporter9+this.$StreamBandwidthReporter3,b=this.$StreamBandwidthReporter18(),c=this.$StreamBandwidthReporter1.getBool("enable_segment_based_bandwidth_update",!0)||this.$StreamBandwidthReporter2;(this.$StreamBandwidthReporter17()||!c||b!=null&&a>=b)&&this.$StreamBandwidthReporter16()};c.$StreamBandwidthReporter16=function(){if(this.$StreamBandwidthReporter4===this.$StreamBandwidthReporter3)return;var a=(g||(g=b("performanceNow")))();this.$StreamBandwidthReporter14();this.emit("bandwidthUpdate",{bytesRead:this.$StreamBandwidthReporter3-this.$StreamBandwidthReporter4,timeTaken:a-this.$StreamBandwidthReporter5});this.$StreamBandwidthReporter5=a;this.$StreamBandwidthReporter4=this.$StreamBandwidthReporter3};c.$StreamBandwidthReporter18=function(){return this.$StreamBandwidthReporter10!=null?this.$StreamBandwidthReporter10:this.$StreamBandwidthReporter7[this.$StreamBandwidthReporter8]};c.$StreamBandwidthReporter14=function(){this.$StreamBandwidthReporter17()?this.$StreamBandwidthReporter10=this.$StreamBandwidthReporter9+this.$StreamBandwidthReporter3+this.$StreamBandwidthReporter2:this.$StreamBandwidthReporter10!=null?this.$StreamBandwidthReporter10+=this.$StreamBandwidthReporter2:this.$StreamBandwidthReporter8++};return d}(b("EventEmitter"));e.exports=a}),null);
__d("PausableRangeStream",["oz-player/networks/OzPausableRangeStream"],(function(a,b,c,d,e,f){"use strict";e.exports=b("oz-player/networks/OzPausableRangeStream")}),null);
__d("VideoPlayerResourceTimer",["VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f){"use strict";a={getResourceTimingEntry:function(a,c,d){if(performance.getEntriesByType){a=performance.getEntriesByName(a,"resource");var e=[];a.forEach(function(a){typeof a.responseEnd==="number"&&typeof a.responseStart==="number"&&typeof a.requestStart==="number"&&typeof a.connectEnd==="number"&&typeof a.connectStart==="number"&&typeof a.domainLookupEnd==="number"&&typeof a.domainLookupStart==="number"&&typeof a.transferSize==="number"&&a.responseEnd<=d&&a.startTime>=c&&(!b("VideoPlayerShakaGlobalConfig").getBool("ignore_invalid_timing_entries",!1)||typeof a.responseEnd==="number"&&typeof a.responseStart==="number"&&typeof a.startTime==="number"&&a.responseStart>a.startTime&&a.responseEnd>a.startTime&&a.responseStart>0&&a.responseEnd>0)&&e.push({entry:{timeToFirstByte:a.responseStart-a.startTime,timeToLastByte:a.responseEnd-a.startTime,timeToRequestStart:a.requestStart-a.startTime,timeToConectionEnd:a.connectEnd-a.startTime,timeToConnectionStart:a.connectStart-a.startTime,timeToDomainLookupEnd:a.domainLookupEnd-a.startTime,timeToDomainLookupStart:a.domainLookupStart-a.startTime,transferSize:a.transferSize,startTime:a.startTime},sort:a.responseEnd})});e.sort(function(a,b){return b.sort-a.sort});if(e.length)return e[0].entry}return null}};e.exports=a}),null);
__d("StreamFetchRequestLogger",["PausableRangeStream","ReadableStream","VideoPlayerResourceTimer","WritableStream","performanceNow","pipeErrorTo"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a,c,d,e,f,h,i){var j=this;this.$6=0;this.$9=null;this.$10=0;this.$3=d;this.$2=h;this.$1=a;this.$4=c;this.$5=f;this.$11=e;this.$8=i;this.writable=new(b("WritableStream"))({start:function(a){j.$14(),j.$13=a},write:function(a){j.$6+=a.byteLength,j.$9&&(j.$10=Math.round(Math.max(j.$10,(g||(g=b("performanceNow")))()-(j.$9||Infinity)))),j.$9=(g||(g=b("performanceNow")))(),j.$15(a)},close:function(){j.$12.close(),j.$16()},abort:function(a){b("pipeErrorTo")(j.$12,a),j.$17(a)}});this.readable=new(b("ReadableStream"))({start:function(a){j.$12=a},cancel:function(a){b("pipeErrorTo")(j.$13,a);a={type:a===b("PausableRangeStream").STREAM_PAUSED?"paused":"aborted",status:0,url:j.$3};j.$17(a)}})}var c=a.prototype;c.$14=function(){this.$7=this.$1.getOperationLogger("fetch_stream").setSegmentStartTime(this.$11.startTime).setSegmentEndTime(this.$11.endTime).setResource(this.$3).start();this.$7.setPriorityFloat(this.$8);var a=this.$5,b=a.startByte;a=a.endByte;a=a===null?null:(a||0)+1-b;this.$7.setType(this.$4).setExpectedLength(a)};c.$17=function(a){this.$7.setError(a).setTimeBetweenBytesMax(this.$10).setLength(this.$6).log()};c.$16=function(){var a=b("VideoPlayerResourceTimer").getResourceTimingEntry(this.$3,this.$2,(g||(g=b("performanceNow")))());if(a){var c=a.timeToFirstByte,d=a.timeToLastByte;a=a.timeToRequestStart;this.$7.setTimeToFirstByte(Math.round(c)).setTimeToLastByte(Math.round(d)).setTimeToRequestStart(Math.round(a)).setLength(this.$6)}this.$7.setTimeBetweenBytesMax(this.$10).log()};c.$15=function(a){this.$12.enqueue(a)};return a}();e.exports=a}),null);
__d("StreamProgress",["ReadableStream","VideoPlayerShakaBandwidthEstimator","WritableStream","pipeErrorTo"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var c=this;this.$1=0;this.$2=0;this.$4=!1;this.$3=a;this.writable=new(b("WritableStream"))({start:function(a){c.$6=a},write:function(a){a.length!=null&&(c.$1+=a.length),c.$5.enqueue(a)},close:function(){c.$5.close()},abort:function(a){c.$4=!0,b("pipeErrorTo")(c.$5,a)}});this.readable=new(b("ReadableStream"))({start:function(a){c.$5=a},cancel:function(a){c.$4=!0,b("pipeErrorTo")(c.$6,a)}})}var c=a.prototype;c.notifyBytesConsumed=function(a){this.$2+=a};c.getProgress=function(){return this.$7(this.$1)};c.getEstimatedTimeRemaining=function(){var a=this.$8(),c=b("VideoPlayerShakaBandwidthEstimator").getBandwidth();return a>-1?(a-this.$1)*8/c:null};c.getConsumptionProgress=function(){return this.$7(this.$2)};c.getBytesRemainingToConsume=function(){var a=this.$8();return a===-1?0:a-this.$2};c.hasAbortedOrCancelled=function(){return this.$4};c.$8=function(){return this.$3.endByte?this.$3.endByte-this.$3.startByte+1:-1};c.$7=function(a){var b=this.$8();return b===-1?0:a/b};return a}();e.exports=a}),null);
__d("StreamProgressTracker",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=null,this.$2=[]}var b=a.prototype;b.add=function(a){this.$2.push(a)};b.setOnStreamConsumed=function(a){this.$1=a};b.notifyBytesConsumed=function(a){for(var b=0;b<this.$2.length;b++){if(this.$2[b].hasAbortedOrCancelled()){this.$2.splice(b,1);b--;continue}var c=this.$2[b].getBytesRemainingToConsume();this.$2[b].notifyBytesConsumed(c>=a?a:a-c);a-=c;if(a<0)break;else this.$2.splice(b,1),b--}this.$1&&this.$2.length===0&&(this.$1(),this.$1=null)};b.canTrackProgress=function(){return this.$2.length>0&&this.$2[0].getBytesRemainingToConsume()>-1};b.hasStarted=function(){return this.$2.length>0};b.getProgress=function(){return this.$2.length>0?this.$2[0].getProgress():null};b.getConsumptionProgress=function(){return this.$2.length>0?this.$2[0].getConsumptionProgress():null};b.getEstimatedTimeRemainingOfStream=function(){return this.$2.length>0?this.$2[0].getEstimatedTimeRemaining():null};b.destroy=function(){this.$2=[]};return a}();e.exports=a}),null);
__d("TrackedPromise",["Promise"],(function(a,b,c,d,e,f){"use strict";var g=window.Promise||b("Promise");b("Promise").resolve();a=function(){function a(a,b){var c=this;this.$3=!1;this.$1="pending";this.$2=a.then(function(a){c.$1="fulfilled";return a},function(a){c.$1="rejected";if(!b.getBool("fix_uncaught_promise_error_message",!1)||c.$3)return g.reject(a)})}var b=a.prototype;b.getPromise=function(){this.$3=!0;return this.$2};b.isPending=function(){return this.$1==="pending"};b.getState=function(){return this.$1};return a}();e.exports=a}),null);
__d("VideoClientEdgeCooperation",["clearTimeout","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){var g=b("gkx")("678909"),h="X-FB-CEC-Video-Limit".toLowerCase(),i=1e3*60*2,j=/[\r\n]+/,k=null,l=null;function m(){k=null,b("clearTimeout")(l),l=null}var n={updateFromXHR:function(a){this.updateFromHeaders(a.getAllResponseHeaders())},updateFromHeaders:function(a){if(!g)return;a=a.trim().split(j);a.forEach(function(a){a=a.split(": ");var b=a.shift().toLowerCase();a=a.shift();b===h&&n._updateFromLimitHeader(a)})},updateFromResponse:function(a){if(!g)return;a=a.headers;if(!a.has(h))return;a=a.get(h);a&&n._updateFromLimitHeader(a)},_updateFromLimitHeader:function(a){a=a.match("s:([\\.0-9]+)");if(!a)return;a=Number(a[1]);k===null&&(k=a);a<=k&&(k=a,b("clearTimeout")(l),l=b("setTimeoutAcrossTransitions")(m,i))},applyBandwidthLimit:function(a,b){if(!g)return a;return k!==null?Math.min(a,b)*k:a}};e.exports=n}),null);
__d("getXHRRequestHandlerHelper",[],(function(a,b,c,d,e,f){"use strict";function g(a,b,c,d){var e=b.call(a);c.call(a,Object.assign(function(){e&&e.apply(void 0,arguments),d.apply(void 0,arguments)},e,d))}var h=function(){function a(a){this.$1=a}var b=a.prototype;b.addResponseHandler=function(a){g(this.$1,this.$1.getResponseHandler,this.$1.setResponseHandler,a);return this};b.addAbortHandler=function(a){g(this.$1,this.$1.getAbortHandler,this.$1.setAbortHandler,a);return this};b.addErrorHandler=function(a){g(this.$1,this.$1.getErrorHandler,this.$1.setErrorHandler,a);return this};b.addTimeoutHandler=function(a){g(this.$1,this.$1.getTimeoutHandler,this.$1.setTimeoutHandler,a);return this};b.addNetworkFailureHandler=function(a){g(this.$1,this.$1.getNetworkFailureHandler,this.$1.setNetworkFailureHandler,a);return this};return a}();function a(a){return new h(a)}e.exports=a}),null);
__d("VideoPipelineProvider",["NetworkRequestPipeline","PriorityRequestQueue","VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f){"use strict";var g=new Map();function a(a){var c=g.get(a);if(!c){var d=new(b("PriorityRequestQueue"))(),e=b("VideoPlayerShakaGlobalConfig").getNumber("request_pipeline_soothing_factor",2),f=b("VideoPlayerShakaGlobalConfig").getNumber("request_pipeline_max_concurrent_requests",2);a==="audio"&&(e=b("VideoPlayerShakaGlobalConfig").getNumber("audio_request_pipeline_soothing_factor",1),f=b("VideoPlayerShakaGlobalConfig").getNumber("audio_request_pipeline_max_concurrent_requests",1));f=new(b("NetworkRequestPipeline"))(d,{xhrHandleNetworkFailure:b("VideoPlayerShakaGlobalConfig").getBool("xhr_handle_network_failure",!0),maxConcurrentRequests:f,soothingFactor:e,fixFinishRequest:b("VideoPlayerShakaGlobalConfig").getBool("skip_old_handler_on_finished_requests",!1),requestTimeout:b("VideoPlayerShakaGlobalConfig").getNumber("request_pipeline_timeout_ms",0)});c={requestQueue:d,pipeline:f};g.set(a,c)}return c}e.exports={getPriorityRequestQueueAndPipeline:a}}),null);
__d("VideoPlayerAbrLogger",["ScriptPath","VideoPlayerAbrLoggerConfig","VideoPlayerAbrTypedLogger","VideoPlayerShakaBandwidthEstimator","VideoPlayerShakaGlobalConfig","getBufferedAheadOf"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;a.prototype.setSession.call(babelHelpers.assertThisInitialized(c),b.uniqueID);a.prototype.setVideoID.call(babelHelpers.assertThisInitialized(c),b.videoID);c.$VideoPlayerAbrLogger4=b.video;c.$VideoPlayerAbrLogger5=b.isLive;c.$VideoPlayerAbrLogger6=b.playerOrigin;c.$VideoPlayerAbrLogger7();return c}var d=c.prototype;d.setBytes=function(a){this.$VideoPlayerAbrLogger1.bytes=a;return this};d.setDelayMs=function(a){this.$VideoPlayerAbrLogger1.delayMs=a;return this};d.setEvent=function(a){this.$VideoPlayerAbrLogger1.event=a;return this};d.setUnsampledReason=function(a){this.$VideoPlayerAbrLogger1.unsampledReason=a;return this};d.setReason=function(a){this.$VideoPlayerAbrLogger1.reason=a;return this};d.setRepresentationID=function(a){this.$VideoPlayerAbrLogger2=a;return this};d.setFbQualityLabel=function(a){this.$VideoPlayerAbrLogger3=a;return this};d.setClientTimeBegin=function(a){this.$VideoPlayerAbrLogger1.clientTimeBegin=a;return this};d.setClientTimeEnd=function(a){this.$VideoPlayerAbrLogger1.clientTimeEnd=a;return this};d.setIsHvq=function(a){this.$VideoPlayerAbrLogger1.isHvq=a;return this};d.setActiveIsHvq=function(a){this.$VideoPlayerAbrLogger1.activeIsHvq=a;return this};d.setActiveRepresentationID=function(a){this.$VideoPlayerAbrLogger1.activeRepresentationID=a;return this};d.setAvailableTracks=function(a){this.$VideoPlayerAbrLogger1.availableTracks=a;return this};d.$VideoPlayerAbrLogger7=function(){this.$VideoPlayerAbrLogger1={bytes:null,delayMs:null,event:null,unsampledReason:null,reason:null,clientTimeBegin:null,clientTimeEnd:null,isHvq:null,activeIsHvq:null,activeRepresentationID:null,availableTracks:null}};d.$VideoPlayerAbrLogger8=function(){if(this.$VideoPlayerAbrLogger1.event==null)return;else this.$VideoPlayerAbrLogger1.event=="track_selection"&&(a.prototype.setActiveIsHvq.call(this,this.$VideoPlayerAbrLogger1.activeIsHvq),a.prototype.setActiveRepresentationID.call(this,this.$VideoPlayerAbrLogger1.activeRepresentationID),a.prototype.setAvailableTracks.call(this,this.$VideoPlayerAbrLogger1.availableTracks),a.prototype.setIsHvq.call(this,this.$VideoPlayerAbrLogger1.isHvq));a.prototype.setBytes.call(this,this.$VideoPlayerAbrLogger1.bytes);a.prototype.setDelayMs.call(this,this.$VideoPlayerAbrLogger1.delayMs);a.prototype.setEvent.call(this,this.$VideoPlayerAbrLogger1.event);a.prototype.setUnsampledReason.call(this,this.$VideoPlayerAbrLogger1.unsampledReason);a.prototype.setReason.call(this,this.$VideoPlayerAbrLogger1.reason);var b=this.$VideoPlayerAbrLogger1.clientTimeBegin,c=this.$VideoPlayerAbrLogger1.clientTimeEnd;b==null?(b=Date.now(),c=b):c==null&&(c=b);a.prototype.setClientTimeBegin.call(this,b);a.prototype.setClientTimeEnd.call(this,c)};d.log=function(){if(b("VideoPlayerShakaGlobalConfig").getBool("enable_client_side_abr_logger_sampling",!0)&&!b("VideoPlayerAbrLoggerConfig").isSampled)return;this.$VideoPlayerAbrLogger8();a.prototype.setBandwidthEstimate.call(this,parseInt(b("VideoPlayerShakaBandwidthEstimator").getBandwidth(),10));a.prototype.setRepresentationID.call(this,this.$VideoPlayerAbrLogger2);a.prototype.setFbQualityLabel.call(this,this.$VideoPlayerAbrLogger3);a.prototype.setPlayhead.call(this,Math.round(this.$VideoPlayerAbrLogger4.currentTime*1e3));a.prototype.setBufferedAhead.call(this,Math.round(b("getBufferedAheadOf")(this.$VideoPlayerAbrLogger4)));a.prototype.setVideoDuration.call(this,Math.round(this.$VideoPlayerAbrLogger4.duration*1e3));a.prototype.setIsLive.call(this,this.$VideoPlayerAbrLogger5);a.prototype.setPlayerOriginCallerSpecified.call(this,this.$VideoPlayerAbrLogger6);a.prototype.setScriptPath.call(this,b("ScriptPath").getScriptPath());a.prototype.log.call(this);this.$VideoPlayerAbrLogger7()};return c}(b("VideoPlayerAbrTypedLogger"));e.exports=a}),null);
__d("VideoPlayerBitrateEstimator",[],(function(a,b,c,d,e,f){"use strict";(function(){function a(){}var b=a.prototype;b.sample=function(a,b){};b.getTotalWeight=function(){return 0};b.getEstimate=function(){return 0};b.reset=function(){};return a})();a=function(){function a(a,b,c,d){this.$1=a,this.$2=b,this.$3=c,this.$4=d}var b=a.prototype;b.getEstimate=function(){return this.$1.getTotalWeight()<this.$3?this.$2:Math.round(this.$1.getEstimate())};b.sample=function(a,b){a=a/b;b=b;a>this.getEstimate()&&(b*=this.$4,this.$1.reset());this.$1.sample(b,a)};return a}();e.exports=a}),null);
__d("XRlAbrController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/repomen/",{reason:{type:"String"},query:{type:"FloatVector"},bitrates:{type:"FloatVector"},action:{type:"Int"},action_prob:{type:"FloatVector"},id:{type:"Int"},session_id:{type:"String"},smc_tier:{type:"String"},model_id:{type:"String"},mdp_step:{type:"Int"},prev_reward:{type:"Float"},label_0:{type:"Float"},label_1:{type:"Float"},label_2:{type:"Float"},label_3:{type:"Float"},label_4:{type:"Float"},label_5:{type:"Float"},label_6:{type:"Float"},label_7:{type:"Float"},label_8:{type:"Float"},label_9:{type:"Float"}})}),null);
__d("UnitConstants",[],(function(a,b,c,d,e,f){"use strict";a=8;e.exports={BITS_IN_BYTE:a}}),null);
__d("NetworkStatusDetector",["EventEmitter","clearInterval","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";var g=1e3,h=9999;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$NetworkStatusDetector3=!0;c.$NetworkStatusDetector4=!1;c.$NetworkStatusDetector2=Date.now();c.$NetworkStatusDetector1=b("setIntervalAcrossTransitions")(function(){return c.$NetworkStatusDetector5()},g);return c}var d=c.prototype;d.destroy=function(){b("clearInterval")(this.$NetworkStatusDetector1)};d.$NetworkStatusDetector5=function(){var a=this.$NetworkStatusDetector2;this.$NetworkStatusDetector2=Date.now();var b=this.$NetworkStatusDetector3;this.$NetworkStatusDetector3=this.getOnLineStatus();this.emitIfOnLineStateChanges(a,this.$NetworkStatusDetector2,b,this.$NetworkStatusDetector3)};d.emitIfOnLineStateChanges=function(a,b,c,d){!c&&d?this.emit("onLine"):c&&!d&&this.emit("offLine");c=h;b-a>c&&this.emit("systemWake",{sleepStartTime:a,sleepEndTime:b})};d.informNetworkInterrupted=function(){this.$NetworkStatusDetector4||(this.$NetworkStatusDetector4=!0,this.emit("networkInterrupted"))};d.informNetworkResumed=function(){this.$NetworkStatusDetector4&&(this.$NetworkStatusDetector4=!1,this.emit("networkResumed"))};d.isNetworkInterrupted=function(){return this.$NetworkStatusDetector4};d.getOnLineStatus=function(){return window&&window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!0};return c}(b("EventEmitter"));e.exports=a}),null);
__d("VideoPriorityCalculator",[],(function(a,b,c,d,e,f){"use strict";function g(){return 2}function h(a,b){var c=a.playhead,d=a.bufferEnd;a=a.isPlaying;d=d-c<=b?0:1;c=a?0:1;return g()-d-c}function a(a,b,c){var d=a.playhead,e=a.bufferEnd;if(!c)return h(a,b);e=e-d;return e<=c?g():h(a,b)}e.exports={calculate:h,calculateLive:a,getMaxPriority:g}}),null);
__d("VideoSegmentPromiseBuffer",["VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Map()}var c=a.prototype;c.appendSegmentPromise=function(a,b){this.$1.set(a,b);return this};c.hasSegmentPromise=function(a){return this.$1.has(a)};c.getSegmentPromise=function(a){var c=this.$1.get(a)||null;if(!b("VideoPlayerShakaGlobalConfig").getBool("fix_promise_buffer_caches_rejected_promises",!0))return c;c&&c.getState()==="rejected"&&this.$1["delete"](a);return c};c.hasOtherPendingSegments=function(a){var b=new Set(a);return Array.from(this.$1.entries()).some(function(a){return a[1].isPending()&&!b.has(a[0])})};c.isFirstPendingSegment=function(a){var b=this.$1.get(a);if(!b||!b.isPending())return!1;var c;for(var b=this.$1.entries(),d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;if(f[1].isPending()){c=f[0];break}}return c===a};c.clearAllSegmentPromises=function(){this.$1.clear();return this};c.removeSegmentPromisesOlderThan=function(a,b){if(!this.hasSegmentPromise(a)){b.getBool("fixing_old_promise_clearance",!0)&&this.$1.clear();return}for(var b=this.$1.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(e===a)return;this.$1["delete"](e)}};c.removeSegmentPromise=function(a){this.$1["delete"](a)};return a}();e.exports=a}),null);
__d("VideoSegmentRequestQueue",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=function(){},this.$2=new Map(),this.$3=new Map()}var b=a.prototype;b.dequeue=function(){var a=this.$3.entries().next().value;if(a){this.$3["delete"](a[0]);return a[1]||null}a=this.$2.entries().next().value;if(!a)return null;this.$2["delete"](a[0]);return a[1]||null};b.setOnItemAdded=function(a){this.$1=a};b.append=function(a,b,c){this.$4(a,b,c,this.$2,"append");return this};b.clearNormalQueue=function(){this.$2.clear()};b.changeToTopPri=function(a){var b=this.$2.get(a);b&&(this.$2["delete"](a),this.$3.set(a,b))};b.removeTopPriSegment=function(a){var b=this.$3.get(a);this.$3["delete"](a);return b?b.xhrRequest:null};b.isEmpty=function(){return this.$2.size===0&&this.$3.size===0};b.prependTopPri=function(a,b,c){var d=this.$3;this.$3=new Map();this.$5(a,b,c,d,this.$3)};b.prepend=function(a,b,c){var d=this.$2;this.$2=new Map();this.$5(a,b,c,d,this.$2)};b.$5=function(a,b,c,d,e){var f=this;this.$4(a,b,c,e,"prepend");d.forEach(function(b,c){var a=b.xhrRequest;b=b.estimatedSize;f.$6(c,a,b,e)})};b.$4=function(a,b,c,d,e){this.$6(a,b,c,d),this.$1(e)};b.$6=function(a,b,c,d){b={xhrRequest:b,estimatedSize:c};d.set(a,b)};return a}();e.exports=a}),null);
__d("createVideoResponsePromise",["Promise","VideoPlayerShakaError","VideoPlayerShakaGlobalConfig","getXHRRequestHandlerHelper","performanceNow"],(function(a,b,c,d,e,f){"use strict";var g,h=window.Promise||b("Promise");b("Promise").resolve();function a(a){var c,d=a.getURI().toString(),e=a.send;a.send=function(){c=(g||(g=b("performanceNow")))(),e.call(a)};var f=new h(function(e,f){var h=b("getXHRRequestHandlerHelper")(a).addResponseHandler(function(a){e({response:a,responseTime:(g||(g=b("performanceNow")))()-c})}).addAbortHandler(function(a){if(a==="reschedule")return;a={errorMsg:"Request aborted.",errorType:"abort",errorCode:b("VideoPlayerShakaGlobalConfig").getBool("fix_shaka_xhr_error_status",!0)?"":0,errorRawTransportStatus:0,errorRawResponseHeaders:null};a=b("VideoPlayerShakaError").translateError(a,d,"aborted");f(a)}).addErrorHandler(function(a){a=b("VideoPlayerShakaError").translateError(a,d,"net");f(a)}).addNetworkFailureHandler(function(a){if(b("VideoPlayerShakaGlobalConfig").getBool("xhr_handle_network_failure",!0)){a=b("VideoPlayerShakaError").translateError(a,d,"net");f(a)}});b("VideoPlayerShakaGlobalConfig").getNumber("request_pipeline_timeout_ms",0)&&h.addTimeoutHandler(function(){var a=b("VideoPlayerShakaError").createTimeoutError(d);f(a)})});return f}e.exports=a}),null);
__d("VideoSegmentRequestPipeline",["NetworkRequestPipeline","SubscriptionsHandler","VideoClientEdgeCooperation","VideoPipelineProvider","VideoPlayerResourceTimer","VideoPlayerShakaError","VideoPriorityCalculator","VideoSegmentInfoHelper","VideoSegmentRequestQueue","createVideoResponsePromise","getXHRRequestHandlerHelper","performanceNow"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a,c,d,e,f,g,h){var i=this;this.$2=new Map();this.$3=new Map();this.$4=null;this.$5=null;this.$11=new Map();this.$12=new Map();this.$13=null;this.$15=0;this.$16=new(b("SubscriptionsHandler"))();this.$20=function(){if(i.$19()===b("VideoPriorityCalculator").getMaxPriority())return;i.$1.getBool("enable_rescheduler",!1)&&i.$11.size>0&&i.$24()};this.$1=a;this.$18=g;this.$10=new(b("VideoSegmentRequestQueue"))();if(this.$1.getBool("enable_global_scheduler",!0)){a=b("VideoPipelineProvider").getPriorityRequestQueueAndPipeline(c);g=a.requestQueue;a=a.pipeline;this.$13=g;this.$14=a}else this.$14=new(b("NetworkRequestPipeline"))(this.$10,{xhrHandleNetworkFailure:this.$1.getBool("xhr_handle_network_failure",!0),maxConcurrentRequests:this.$1.getNumber("request_pipeline_max_concurrent_requests",2),soothingFactor:this.$1.getNumber("request_pipeline_soothing_factor",2),fixFinishRequest:this.$1.getBool("skip_old_handler_on_finished_requests",!1),requestTimeout:this.$1.getNumber("request_pipeline_timeout_ms",0)});g=this.$13;g&&(g.setQueue(this.$10,this.$19()),this.$16.addSubscriptions(g.addListener("demand_reschedule",this.$20)));this.$8=c;this.$6=d;this.$7=h;this.$9=e;this.$17=f}var c=a.prototype;c.enqueue=function(a,c){var d=this,e=b("VideoSegmentInfoHelper").createRequest(a),f=b("VideoSegmentInfoHelper").estimateRequestSize(a),g=b("createVideoResponsePromise")(e),h=e.send;e.send=function(){d.$11.set(a,e),d.$21(a,e,c),h.call(e)};this.$10.append(a,e,f);this.$22();return g};c.lockRequest=function(a){this.$10.changeToTopPri(a),this.$12.set(a,{lockedTime:(g||(g=b("performanceNow")))(),rescheduleCount:0})};c.cancelUnlockedRequests=function(){var a=this;this.$10.clearNormalQueue();this.$11.forEach(function(b,c){a.$12.has(c)||(b.abort(),a.$11["delete"](c))})};c.abortLockedRequest=function(a){var b=this.$10.removeTopPriSegment(a);b&&b.abort();b=this.$11.get(a);b&&(b.abort(),this.$23(a))};c.$23=function(a){this.$11["delete"](a),this.$12["delete"](a)};c.unload=function(){this.$13&&this.$13.removeQueue(this.$10),this.$16.release()};c.setPriority=function(a){if(this.$19()===a)return;this.$15=a;var b=this.$13;b&&(b.setQueue(this.$10,a),this.$22())};c.getResourceTimingEntry=function(a){return this.$3.get(a)||null};c.$22=function(){var a=this.$13;a&&!this.$10.isEmpty()&&this.$19()>=b("VideoPriorityCalculator").getMaxPriority()&&a.demandReschedule()};c.$24=function(){var a=this;Array.from(this.$11.values()).forEach(function(b){a.$14.evictRequest(b)})};c.$19=function(){return this.$15};c.$25=function(a){var b=this.$12.get(a)||{},c=b.lockedTime;b=b.rescheduleCount;b=(b||0)+1;this.$23(a);this.$12.set(a,{lockedTime:c,rescheduleCount:b})};c.$21=function(a,c,d){var e=this,f=c.getURI().toString(),h=this.$19(),i,j,k=this.$14.getRecentBlockingRequestUrl(),l=!1;k&&k!==this.$5&&(l=!0);this.$1.getBool("fixing_scheduler_xhr_request_leaks",!0)?(j=this.$5,this.$5=f):(i=this.$4,this.$4=c);if(a){var m=this.$26(f,h,l,d),n=(g||(g=b("performanceNow")))(),o=!1,p=function(){if(!e.$1.getBool("skip_old_handler_on_finished_requests",!1))return!1;if(o)return!0;o=!0;return!1};k=b("getXHRRequestHandlerHelper")(c).addResponseHandler(Object.assign(function(d,h){b("VideoClientEdgeCooperation").updateFromHeaders(h);e.$7&&e.$7.handleHeadersString(h);if(!p()){h=(g||(g=b("performanceNow")))();var k=b("VideoPlayerResourceTimer").getResourceTimingEntry(f,n,h),l=d.byteLength;if(e.$9){h=k?e.$27(k,c,i,j):h-n;e.$9.sample(h,l,e.$8==="video",{timeToLastByte:h},e.$17,e.$6,e.$1.getBool("evaluate_abr_on_fetch_end",!1))}m&&e.$28(a,m,d.byteLength,k,n);e.$23(a)}},{includeHeaders:!0})).addAbortHandler(function(c){if(!p()){var d={errorMsg:"Request aborted.",errorType:"abort",errorCode:e.$1.getBool("fix_shaka_xhr_error_status",!0)?"":0,errorRawTransportStatus:0,errorRawResponseHeaders:null};d=b("VideoPlayerShakaError").translateError(d,f,"aborted");c==="reschedule"?e.$25(a):e.$23(a);m&&m.setError(d).log()}}).addErrorHandler(function(c){if(!p()){c=b("VideoPlayerShakaError").translateError(c,f,"net");m&&m.setError(c).log();e.$23(a)}}).addNetworkFailureHandler(function(c){if(!p()&&e.$1.getBool("xhr_handle_network_failure",!0)){c=b("VideoPlayerShakaError").translateError(c,f,"net");m&&m.setError(c).log();e.$23(a)}});this.$1.getNumber("request_pipeline_timeout_ms",0)&&k.addTimeoutHandler(function(){var c=b("VideoPlayerShakaError").createTimeoutError(f);m&&m.setError(c).log();e.$23(a)})}};c.$26=function(a,b,c,d){var e=null;this.$6&&(e=this.$6.getOperationLogger("request").setResource(a).start(),e.setReason(d).setPriorityFloat(b).setType(this.$8||null).setWasDelayed(c).setInitiator("pipeline"),this.$18&&e.setPushed(this.$18.getPushCountForUrl(a)));return e};c.$28=function(a,b,c,d,e){a=this.$12.get(a)||{};var f=a.lockedTime;a=a.rescheduleCount;var g=0;f&&(g=e-f);a||(a=0);b.setLength(c);if(d){e=d.timeToFirstByte;f=d.timeToLastByte;c=d.timeToRequestStart;b.setTimeToFirstByte(Math.round(e)).setTimeToLastByte(Math.round(f)).setTimeToRequestStart(Math.round(c)).setTimeToRequestSent(Math.round(g)).setRescheduleCount(Math.round(a))}b.log()};c.$27=function(a,b,c,d){var e=null;c&&(e=this.$2.get(c),this.$1.getBool("fixing_scheduler_xhr_request_leaks",!0)?this.$2["delete"](c):this.$2["delete"](e));d&&(e=this.$3.get(d),this.$3["delete"](d));this.$1.getBool("fixing_scheduler_xhr_request_leaks",!0)?this.$3.set(b.getURI().toString(),a):this.$2.set(b,a);if(e){c=e.startTime+e.timeToLastByte;d=a.startTime+a.timeToLastByte;b=Math.min(d-c,a.timeToLastByte);return Math.max(a.timeToLastByte-a.timeToFirstByte,b)}return a.timeToLastByte};return a}();e.exports=a}),null);
__d("VideoPlayerShakaBandwidthUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){var b=0;for(var c=0;c<a.length;c++)b+=a[c].bytes*8e3/a[c].timeInMs;return b/a.length}function h(a){var b=g(a),c=0;for(var d=0;d<a.length;d++)c+=Math.pow(a[d].bytes*8e3/a[d].timeInMs-b,2);return Math.round(Math.sqrt(c/a.length))}function i(a,b){b=Math.exp(Math.log(.5)/b);var c=0,d=0;for(var e=0;e<a.length;e++){var f=a[e].bytes*8e3/a[e].timeInMs,g=Math.pow(b,a[e].timeInMs/1e3);c=f*(1-g)+c*g;d+=a[e].timeInMs/1e3}return Math.round(c/(1-Math.pow(b,d)))}function j(a,b){var c=g(a),d=[];for(var e=0;e<a.length;e++)Math.abs(c-a[e].bytes*8e3/a[e].timeInMs)<b&&d.push(a[e]);return d}function a(a,b,c,d){var e=h(a);a=j(a,e*c);c=i(a,b);return c-e*d}e.exports={getBandwidthEstimate:a,getExponentiallyWeightedMovingAverageOfBandwidth:i,getStandardDeviationOfBandwidth:h,getMeanBandwidth:g,getBandwidthSamplesWithinRangeOfMean:j}}),null);
__d("RoundRobinPriorityTaskQueue",["oz-player/scheduling/OzRoundRobinPriorityTaskQueue"],(function(a,b,c,d,e,f){e.exports=b("oz-player/scheduling/OzRoundRobinPriorityTaskQueue")}),null);
__d("SequentialTaskScheduler",["oz-player/scheduling/OzSequentialTaskScheduler"],(function(a,b,c,d,e,f){"use strict";e.exports=b("oz-player/scheduling/OzSequentialTaskScheduler")}),null);
__d("VideoStreamingTaskQueueProvider",["RoundRobinPriorityTaskQueue","SequentialTaskScheduler","VideoPlayerShakaGlobalConfig","VideoPriorityCalculator"],(function(a,b,c,d,e,f){"use strict";var g=new Map(),h=new Map();function a(a){a=i(a);return a?a.getLength():0}function i(a){var c=g.get(a);if(!c){c=new(b("RoundRobinPriorityTaskQueue"))(b("VideoPriorityCalculator").getMaxPriority(),b("VideoPlayerShakaGlobalConfig").getNumber("priority_precision",-1));var d=new(b("SequentialTaskScheduler"))(c,{taskTimeout:6e4});d.start();g.set(a,c);h.set(a,d)}return c}function c(a){return h.get(a)||null}e.exports={getQueue:i,getQueueSize:a,getSchedulerForDebug:c}}),null);
__d("getBandwidthPenaltyFactorForScheduledVideoCount",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){a=Math.max(0,a-b+1);b=0;c=c;for(var e=1;e<=a;e++)b+=c,c*=d;return 1-b}e.exports=a}),null);
__d("getNeuralBandwidthEstimate",[],(function(a,b,c,d,e,f){function a(a){var b=a;if(b.length>8)b=b.slice(0,8);else if(b.length<8)while(b.length<8)b.push(0);var c=1e9;return j(a.map(function(a){return a/c}))[0]*c}var g=[function(a,b){a=1/(1+Math.exp(-a));return!b?a:a*(1-a)}],h=[776e-6,0,0,0,0,0,0,0,.07993045087713074,.019315817148901328,.49837995466162727,.019521651881765512,.00021613261390548784,.07750491170273517,.06736225161443557,.0007569189868508071,.8409143388252623,.01986646603812691,.0007195506066612518],i=[0,0,0,0,0,0,0,0,-2.443292371536531,-3.9273261721766457,-.0064802040303537645,-3.9165163604073605,-8.439402229432238,-2.4767407404009374,-2.6279320641013375,-7.185497123350212,1.6650469917803437,-3.8986556349267514,-7.2361638886289805];function j(a){for(var b=0;b<a.length;b++)h[b]=a[b];i[8]=h[0]*-20.85073990285843+h[1]*-.17466848432563759+h[2]*-.057525299304308844+h[3]*.03110003879725791+h[4]*-.008895762588835858+h[5]*-.0683893713124604+h[6]*.06576749148339567+h[7]*-.01772020718777774+-2.4271121973719127;h[8]=g[0](i[8]);i[9]=h[0]*-529.6211404152259+h[1]*-10.085931929547788+h[2]*-4.540198005288279+h[3]*-2.6352715249222896+h[4]*-2.047125192304325+h[5]*-1.8521580652576841+h[6]*-2.4005121520581447+h[7]*-.07718938908000435+-3.5163401672144303;h[9]=g[0](i[9]);i[10]=h[0]*189.221355777461+h[1]*10.199243264545071+h[2]*4.697355964097093+h[3]*2.6339556539173423+h[4]*1.7925547331406204+h[5]*1.7015875595365062+h[6]*2.255633060777646+h[7]*.01805203313602992+-.15331597611366352;h[10]=g[0](i[10]);i[11]=h[0]*-19.43067537504266+h[1]*8.73022147952729+h[2]*4.820819354033675+h[3]*2.709578269559789+h[4]*1.978560568303787+h[5]*1.9830323294564676+h[6]*2.5745137738069044+h[7]*.09334179618953584+-3.9014381563163276;h[11]=g[0](i[11]);i[12]=h[0]*-5.048452581794674+h[1]*14.938163257617958+h[2]*8.784340440836452+h[3]*4.64012793867896+h[4]*3.1756670528730058+h[5]*2.620356039948262+h[6]*3.7942580850886625+h[7]*-.029713142657160185+-8.435484630228766;h[12]=g[0](i[12]);i[13]=h[0]*-21.10308480104038+h[1]*-.18020886205098594+h[2]*-.03715917747193107+h[3]*-.014443058733183056+h[4]*.08847178195128587+h[5]*.142772115586438+h[6]*-.0069832531579266015+h[7]*-.0921071783400488+-2.46036474659533;h[13]=g[0](i[13]);i[14]=h[0]*-24.614999084523344+h[1]*-.5706213316377333+h[2]*-.5315686923846422+h[3]*-.41561197239084546+h[4]*-.4622208593249528+h[5]*-.47076637110996444+h[6]*-.5160286139457088+h[7]*.09458872769476198+-2.6088308248117476;h[14]=g[0](i[14]);i[15]=h[0]*-10.646367946852898+h[1]*9.894069563224784+h[2]*6.38876106194455+h[3]*4.440529733916467+h[4]*3.4585448009421538+h[5]*3.1241038175984204+h[6]*3.6086610959448384+h[7]*-.05630455554937189+-7.177235541823454;h[15]=g[0](i[15]);i[16]=h[0]*169.19579326461104+h[1]*10.173311065987626+h[2]*4.643577083747655+h[3]*2.5947613769479383+h[4]*1.8128565992680805+h[5]*1.7184203818262473+h[6]*2.2652341722655147+h[7]*-.013828130098586827+1.5337510562070056;h[16]=g[0](i[16]);i[17]=h[0]*-18.836521088957262+h[1]*.07459368402448659+h[2]*.060777588023931+h[3]*.18289413867450946+h[4]*.16801985006774095+h[5]*.16611109930358084+h[6]*.09992971037111033+h[7]*.01144813346735582+-3.8840384945617203;h[17]=g[0](i[17]);i[18]=h[8]*-10.700053978575285+h[9]*-137.47854623908006+h[10]*11.958608720277157+h[11]*-7.615750916889078+h[12]*-5.975976449386021+h[13]*-10.809028988340401+h[14]*-11.738069079393329+h[15]*-5.935205222074537+h[16]*-38.98332368718187+h[17]*-9.626144857503322+25.07046089429775;h[18]=g[0](i[18]);return[h[18]]}e.exports=a}),null);
__d("VideoPlayerLocalBandwidthEstimator",["Banzai","EventEmitter","EventListener","SubscriptionsHandler","VideoPlayerShakaBandwidthUtils","VideoStreamingTaskQueueProvider","getBandwidthPenaltyFactorForScheduledVideoCount","getNeuralBandwidthEstimate","guid","requireWeak"],(function(a,b,c,d,e,f){var g;b("requireWeak")("Shaka",function(a){a&&a.util&&(g=a.util.EWMACacheBandwidthEstimator)});a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c,d,e){var f;f=a.call(this)||this;f.$VideoPlayerLocalBandwidthEstimator3=c;f.$VideoPlayerLocalBandwidthEstimator1=d;f.$VideoPlayerLocalBandwidthEstimator4=e;f.$VideoPlayerLocalBandwidthEstimator5=[];f.$VideoPlayerLocalBandwidthEstimator6=null;f.$VideoPlayerLocalBandwidthEstimator7=b("guid")();f.$VideoPlayerLocalBandwidthEstimator10=new(b("SubscriptionsHandler"))();f.$VideoPlayerLocalBandwidthEstimator10.addSubscriptions(b("EventListener").listen(f.$VideoPlayerLocalBandwidthEstimator1,"bandwidth",function(a){return f.emit("bandwidth",a)}));f.$VideoPlayerLocalBandwidthEstimator4&&f.$VideoPlayerLocalBandwidthEstimator4.getBool("use_per_video_bandwidth_estimator",!1)&&g&&(f.$VideoPlayerLocalBandwidthEstimator2=new g(f.$VideoPlayerLocalBandwidthEstimator4.getNumber("cache_delay",30),f.$VideoPlayerLocalBandwidthEstimator4.getNumber("cache_bandwidth",2e6),function(){}));return f}var d=c.prototype;d.setRepresentationID=function(a){this.$VideoPlayerLocalBandwidthEstimator6=a};d.sample=function(a,b,c,d,e,f,g){g===void 0&&(g=!1);c&&this.$VideoPlayerLocalBandwidthEstimator6&&this.$VideoPlayerLocalBandwidthEstimator11(a,b,this.$VideoPlayerLocalBandwidthEstimator6,this.$VideoPlayerLocalBandwidthEstimator3.getVideoTracks());a=[a,b,c,d,e,f,g,this.$VideoPlayerLocalBandwidthEstimator4.getBool("estimator_override_cache_exclusion",!1)];(b=this.$VideoPlayerLocalBandwidthEstimator1).sample.apply(b,a);if(this.$VideoPlayerLocalBandwidthEstimator2){(c=this.$VideoPlayerLocalBandwidthEstimator2).sample.apply(c,a)}};d.getRecentSamples=function(){return this.$VideoPlayerLocalBandwidthEstimator1.getRecentSamples()};d.supportsCaching=function(){return this.$VideoPlayerLocalBandwidthEstimator1.supportsCaching()};d.getEstimator=function(){return this.$VideoPlayerLocalBandwidthEstimator1};d.getBandwidth=function(a){var c=0,d=this.$VideoPlayerLocalBandwidthEstimator12(),e=this.$VideoPlayerLocalBandwidthEstimator4.getNumber("minimum_sample_count_to_use_new_estimator",0),f=this.$VideoPlayerLocalBandwidthEstimator4.getNumber("minimum_sample_count_to_use_deviation_penalty",0);if(e>0){var g=this.getRecentSamples();if(g.length>=e){e=b("VideoPlayerShakaBandwidthUtils").getBandwidthEstimate(g.map(function(a){return{bytes:a[0],timeInMs:a[1]}}),this.$VideoPlayerLocalBandwidthEstimator4.getNumber("new_estimator_half_life",5),this.$VideoPlayerLocalBandwidthEstimator4.getNumber("new_estimator_standard_deviation_exclusion_factor",2),this.$VideoPlayerLocalBandwidthEstimator4.getNumber("bandwidth_standard_deviation_penalty_factor",.15));if(e>0)return d*e}}else if(f>0){g=this.getRecentSamples();if(g.length>=f){e=b("VideoPlayerShakaBandwidthUtils").getStandardDeviationOfBandwidth(g.map(function(a){return{bytes:a[0],timeInMs:a[1]}}));c=e*this.$VideoPlayerLocalBandwidthEstimator4.getNumber("bandwidth_standard_deviation_penalty_factor",.15)}}f=this.$VideoPlayerLocalBandwidthEstimator4.getNumber("minimum_weight_to_trust_local_bandwidth_estimate",.5);g=this.$VideoPlayerLocalBandwidthEstimator4.getBool("use_minimum_of_global_and_local_bandwidth_estimates",!1);e=this.$VideoPlayerLocalBandwidthEstimator4.getBool("use_per_video_bandwidth_estimator",!1);if(e&&this.$VideoPlayerLocalBandwidthEstimator2&&this.$VideoPlayerLocalBandwidthEstimator2.canTrustEstimate(f))if(g){e=this.$VideoPlayerLocalBandwidthEstimator2?this.$VideoPlayerLocalBandwidthEstimator2.getBandwidth(a):Infinity;return Math.min(this.$VideoPlayerLocalBandwidthEstimator1.getBandwidth(a),e)}else return d*this.$VideoPlayerLocalBandwidthEstimator2.getBandwidth(a);f=this.$VideoPlayerLocalBandwidthEstimator4.getNumber("neural_estimate_weight",0);return f>0?d*this.$VideoPlayerLocalBandwidthEstimator13():d*this.$VideoPlayerLocalBandwidthEstimator1.getBandwidth(a)-c};d.setResolutionConstraint=function(a,b){this.$VideoPlayerLocalBandwidthEstimator8=a,this.$VideoPlayerLocalBandwidthEstimator9=b};d.$VideoPlayerLocalBandwidthEstimator12=function(){var a=b("getBandwidthPenaltyFactorForScheduledVideoCount")(b("VideoStreamingTaskQueueProvider").getQueue("video").getLength(),this.$VideoPlayerLocalBandwidthEstimator4.getNumber("multiple_videos_queue_penalty_start_count",2),this.$VideoPlayerLocalBandwidthEstimator4.getNumber("bandwidth_penalty_per_additional_video",0),this.$VideoPlayerLocalBandwidthEstimator4.getNumber("bandwidth_penalty_decay_per_video",1));return a>0&&a<=1?a:1};d.$VideoPlayerLocalBandwidthEstimator13=function(a){var c=this.$VideoPlayerLocalBandwidthEstimator4.getNumber("minimum_samples_to_use_neural_estimate",1),d=this.$VideoPlayerLocalBandwidthEstimator1.getRecentSamples();a=this.$VideoPlayerLocalBandwidthEstimator1.getBandwidth(a);if(c>d.length)return a;d.reverse();c=b("getNeuralBandwidthEstimate")(d.map(function(a){return a[0]/a[1]*8e3}));d=this.$VideoPlayerLocalBandwidthEstimator4.getNumber("neural_estimate_weight",0);return c*d+a*(1-d)};d.$VideoPlayerLocalBandwidthEstimator11=function(a,c,d,e){var f=this;c=8e3*c/a;a=e.filter(function(a){return a.width<=f.$VideoPlayerLocalBandwidthEstimator8||a.height<=f.$VideoPlayerLocalBandwidthEstimator9});var g=this.$VideoPlayerLocalBandwidthEstimator14(c,e);a=this.$VideoPlayerLocalBandwidthEstimator14(c,a);e=e.find(function(a){return a.streamInfoID===d});if(e){this.$VideoPlayerLocalBandwidthEstimator4.getBool("videos_abr_debugger_storage",!1)&&b("Banzai").post("video_player_abr",{id:this.$VideoPlayerLocalBandwidthEstimator7,bandwidth:c,chosenBandwidth:e.bandwidth});c=e.id;e=this.$VideoPlayerLocalBandwidthEstimator15(g,c);g=this.$VideoPlayerLocalBandwidthEstimator15(a,c);e!==g&&(e==="conservative"&&g==="ideal"&&(e="conservative_resolution_constrained"));this.$VideoPlayerLocalBandwidthEstimator5.push(e)}};d.$VideoPlayerLocalBandwidthEstimator14=function(a,b){var c=0;for(var d=0;d<b.length;d++){if(a<=b[d].bandwidth)break;c=b[d].id}return c};d.$VideoPlayerLocalBandwidthEstimator15=function(a,b){return a===b?"ideal":a>b?"conservative":"aggressive"};d.flushABREvaluationSet=function(){var a=this.$VideoPlayerLocalBandwidthEstimator5;this.$VideoPlayerLocalBandwidthEstimator5=[];return a};return c}(b("EventEmitter"));e.exports=a}),null);
__d("VideoPushTracker",["URI","crc16"],(function(a,b,c,d,e,f){var g;a=function(){"use strict";function a(){this.$1=0,this.$2=new Map()}var c=a.prototype;c.addPushDataFromXHR=function(a){var b=this,c=a.getResponseHeader("X-FB-Debug-Num-Pushed");a=a.getResponseHeader("X-FB-Debug-List-Pushed");if(!a||!c)return;c=parseInt(c,10);var d=[];if(a.length%4)return;var e=a.length/4;for(var f=0;f<e;f++)d.push(a.substr(f*4,4));c!=d.length;if(!c)return;this.$1+=c;d.forEach(function(a){b.$2.set(a,(b.$2.get(a)||0)+1)})};c.getPushCountForUrl=function(a){a=new(g||(g=b("URI")))(a);a=b("crc16").hex(a.getPath());a=this.$2.get(a)||0;return a};return a}();e.exports=a}),null);
__d("ByteRange",["oz-player/manifests/OzByteRange"],(function(a,b,c,d,e,f){"use strict";e.exports=b("oz-player/manifests/OzByteRange")}),null);
__d("DeferredBuffer",["oz-player/networks/OzDeferredBuffer"],(function(a,b,c,d,e,f){"use strict";e.exports=b("oz-player/networks/OzDeferredBuffer")}),null);
__d("ProducerInterruptedError",["oz-player/networks/OzProducerInterruptedError"],(function(a,b,c,d,e,f){"use strict";e.exports=b("oz-player/networks/OzProducerInterruptedError")}),null);
__d("VideoPriorityUpdater",["EventEmitter","VideoPriorityCalculator"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c){var d;c===void 0&&(c=[]);d=a.call(this)||this;d.$VideoPriorityUpdater3=0;d.$VideoPriorityUpdater4=[];d.$VideoPriorityUpdater1=b;d.$VideoPriorityUpdater4=c.slice(0);c.forEach(function(a){return a.setOnPriorityChanged(function(){d.$VideoPriorityUpdater5()})});return d}var d=c.prototype;d.updatePriorityWithNewPlayhead=function(a){this.$VideoPriorityUpdater2&&(this.$VideoPriorityUpdater2.playhead=a);this.$VideoPriorityUpdater5();return this};d.updatePriorityWithNewPlayingState=function(a){this.$VideoPriorityUpdater2&&(this.$VideoPriorityUpdater2.isPlaying=a);this.$VideoPriorityUpdater5();return this};d.updatePriorityWithNewPlayerState=function(a){this.$VideoPriorityUpdater2=a;this.$VideoPriorityUpdater5();return this};d.$VideoPriorityUpdater5=function(){if(!this.$VideoPriorityUpdater2)return;var a=this.$VideoPriorityUpdater1.getNumber("global_scheduler_priority_downgrade_bufferahead_threshold",0),c=this.$VideoPriorityUpdater1.getNumber("global_scheduler_priority_threshold",6);this.$VideoPriorityUpdater3>=b("VideoPriorityCalculator").getMaxPriority()&&a&&(c=a);a=this.$VideoPriorityUpdater4.reduce(function(a,b){return a+b.getPriorityAdjustment()},0);c=b("VideoPriorityCalculator").calculate(this.$VideoPriorityUpdater2,c)+a;c!==this.$VideoPriorityUpdater3&&(this.$VideoPriorityUpdater3=c,this.emit("priority_updated",c))};return c}(b("EventEmitter"));e.exports=a}),null);
__d("createErrorStream",["oz-player/networks/OzCreateErrorStream"],(function(a,b,c,d,e,f){"use strict";e.exports=b("oz-player/networks/OzCreateErrorStream")}),null);
__d("VideoSegmentStreamByFetch",["invariant","VideoAkamaiRequestHelper","VideoClientEdgeCooperation","VideoSegmentInfoHelper","createErrorStream"],(function(a,b,c,d,e,f,g){"use strict";var h=window.fetch;a=function(){function a(a){this.$1=a}var c=a.prototype;c.getResourceUrl=function(a){a=this.$2(a);a=b("VideoSegmentInfoHelper").getRequestUri(a);a=a.toString();return a};c.startStream=function(a){h||g(0,3362);var c=this.getResourceUrl(a),d={};if(b("VideoAkamaiRequestHelper").isAkamai(c)){a=this.$2(a);d=b("VideoAkamaiRequestHelper").getRequestHeaders(a)||{}}return h(c,{headers:d}).then(function(a){b("VideoClientEdgeCooperation").updateFromResponse(a);var d=a.body,e=a.status;a=a.ok;if(!a)return b("createErrorStream")({type:"net",status:e,url:c,message:"HTTP error."});d.getReader||g(0,3287);return d})["catch"](function(a){return a instanceof TypeError?b("createErrorStream")({type:"net",status:0,url:c,message:"Network failure."}):b("createErrorStream")({type:"stream_processing",status:0,url:c,message:"Stream processing error."+a})})};c.$2=function(a){return{baseUrl:this.$1,startByte:a.startByte,endByte:a.endByte===null?void 0:a.endByte}};return a}();e.exports=a}),null);
__d("VideoStreamingManager",["ChunkableContinuousRangeStream","ContinuousPausableStreamTask","EventEmitter","FetchStreamStateTracker","FixedSizeTransform","MaybeNativePromise","NetworkErrorTransformStream","PausableRangeStream","ReadableStream","ShakaSegmentReferenceHelper","StreamBandwidthReporter","StreamFetchRequestLogger","StreamProgress","StreamProgressTracker","SubscriptionsHandler","VideoPriorityCalculator","VideoPriorityUpdater","VideoSegmentStreamByFetch","VideoStreamingTaskQueueProvider","WritableStream","performanceNow"],(function(a,b,c,d,e,f){"use strict";var g;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g){var h;e===void 0&&(e="video");f===void 0&&(f=null);g===void 0&&(g=[]);h=a.call(this)||this;h.$VideoStreamingManager9=[];h.$VideoStreamingManager10=null;h.$VideoStreamingManager13=new(b("SubscriptionsHandler"))();h.$VideoStreamingManager14=Infinity;h.$VideoStreamingManager16=null;h.$VideoStreamingManager17=!1;h.$VideoStreamingManager20=function(a,c){h.$VideoStreamingManager17=!1;if(h.$VideoStreamingManager1.getBool("enable_streaming_quick_abr_switch",!1)){var d=h.$VideoStreamingManager15;if(!d)return;d=b("ShakaSegmentReferenceHelper").findIndexByRequestInfo(d,a);if(d<-1)return;a=a[d];if(!a)return;d=b("ShakaSegmentReferenceHelper").findIndexByStartTimeExact(c,a.startTime);if(d>=0&&d+1<c.length){a=c[d+1];c={baseUrl:a.url.baseUrl,startByte:a.url.startByte,endByte:a.url.endByte};typeof h.$VideoStreamingManager3.setFutureSegments==="function"&&h.$VideoStreamingManager3.setFutureSegments([]);h.$VideoStreamingManager25(c);(!h.$VideoStreamingManager1.getBool("disable_streaming_quick_abr_switch_for_low_pri_video",!1)||h.$VideoStreamingManager14>=b("VideoPriorityCalculator").getMaxPriority())&&h.$VideoStreamingManager26(c)}}};h.$VideoStreamingManager19=function(a){if(!h.$VideoStreamingManager1.getBool("disable_auto_stream_start",!0)||a===h.$VideoStreamingManager14)return;h.$VideoStreamingManager14=a;h.$VideoStreamingManager5&&h.$VideoStreamingManager5.getEventLogger("priority_changed").setPriorityFloat(h.$VideoStreamingManager14).log();var c=h.$VideoStreamingManager10;if(!c)return;c.updatePriority(h.$VideoStreamingManager14);var d=h.$VideoStreamingManager6;if(!d||d.isClosed())return;a>=b("VideoPriorityCalculator").getMaxPriority()||h.$VideoStreamingManager1.getBool("enable_low_pri_multi_segment_fetch",!1)?h.$VideoStreamingManager15&&h.$VideoStreamingManager27(h.$VideoStreamingManager15):d.removeQueuedRange();h.$VideoStreamingManager11&&h.$VideoStreamingManager11.updatePriority(c,h.$VideoStreamingManager14)};h.$VideoStreamingManager1=c;h.$VideoStreamingManager4=new(b("FetchStreamStateTracker"))();h.$VideoStreamingManager3=d;h.$VideoStreamingManager5=f;h.$VideoStreamingManager7=e;h.$VideoStreamingManager1.getBool("disable_streaming_scheduler",!1)||(h.$VideoStreamingManager11=b("VideoStreamingTaskQueueProvider").getQueue(e));h.$VideoStreamingManager12=new(b("VideoPriorityUpdater"))(h.$VideoStreamingManager1,g);h.$VideoStreamingManager13.addSubscriptions(h.$VideoStreamingManager12.addListener("priority_updated",h.$VideoStreamingManager19));h.$VideoStreamingManager3.setOnSegmentsUpdated(h.$VideoStreamingManager20);h.$VideoStreamingManager1.getBool("enable_stream_progress_tracker",!1)&&(h.$VideoStreamingManager16=new(b("StreamProgressTracker"))());return h}var d=c.prototype;d.getStream=function(a){return this.$VideoStreamingManager1.getBool("use_continuous_streaming",!0)?this.$VideoStreamingManager21(a):this.$VideoStreamingManager22(a)};d.getPriorityUpdater=function(){return this.$VideoStreamingManager12};d.getProgressTracker=function(){return this.$VideoStreamingManager16};d.resumeVideoFetching=function(){this.$VideoStreamingManager17=!1,this.$VideoStreamingManager23()};d.stopUntilSegmentsUpdate=function(){this.$VideoStreamingManager10&&this.$VideoStreamingManager10.cancelOnCurrentStreamDone(),this.$VideoStreamingManager17=!0};d.updatePlayerState=function(a){this.$VideoStreamingManager18=a,this.$VideoStreamingManager12.updatePriorityWithNewPlayerState(a)};d.destroy=function(){this.$VideoStreamingManager16!=null&&this.$VideoStreamingManager16.destroy(),this.$VideoStreamingManager13.release(),this.$VideoStreamingManager10&&this.$VideoStreamingManager10.cancel(),this.$VideoStreamingManager10&&this.$VideoStreamingManager11&&this.$VideoStreamingManager11.remove(this.$VideoStreamingManager10),this.$VideoStreamingManager24(),this.$VideoStreamingManager3&&this.$VideoStreamingManager3.clearOnSegmentsUpdated()};d.$VideoStreamingManager24=function(){this.$VideoStreamingManager6&&this.$VideoStreamingManager6.destroy(),this.$VideoStreamingManager6=null};d.$VideoStreamingManager28=function(){var a=this,c=function c(){if(!a.$VideoStreamingManager9.length)return b("MaybeNativePromise").resolve(null);var d=a.$VideoStreamingManager9[0];return d().then(function(b){if(!b){if(a.$VideoStreamingManager9.length===1){var d=a.$VideoStreamingManager15,e=a.$VideoStreamingManager1.getBool("switch_to_new_stream_when_end_byte_is_null",!1)&&d&&d.endByte==null,f=a.$VideoStreamingManager1.getBool("continuous_stream_on_higher_priority",!1)&&a.$VideoStreamingManager29();if(d&&(e||f)){e=a.$VideoStreamingManager3.getNextRequestInfo(d);if(e&&a.$VideoStreamingManager18&&a.$VideoStreamingManager3.isRequestInBufferTarget(e,a.$VideoStreamingManager18)){a.$VideoStreamingManager9.shift();a.$VideoStreamingManager6=null;a.$VideoStreamingManager25(e);a.$VideoStreamingManager26(e);return c()}}return null}a.$VideoStreamingManager9.shift();return c()}return b})};return c};d.$VideoStreamingManager29=function(){var a=this.$VideoStreamingManager11?this.$VideoStreamingManager11.getHighestPriority():-Infinity,b=this.$VideoStreamingManager11?this.$VideoStreamingManager11.getLength()===0:!0;return!b&&this.$VideoStreamingManager14>a};d.$VideoStreamingManager23=function(){var a=this;if(!this.$VideoStreamingManager1.getBool("disable_auto_stream_start",!0)||this.$VideoStreamingManager10||this.$VideoStreamingManager17)return;var c=new(b("ContinuousPausableStreamTask"))(this.$VideoStreamingManager28(),this.$VideoStreamingManager7,this.$VideoStreamingManager14,this.$VideoStreamingManager5,{uncancellablePriority:this.$VideoStreamingManager1.getBool("disable_streaming_task_cancellation_on_high_pri",!1)?b("VideoPriorityCalculator").getMaxPriority():Infinity,disableAudioStreamPause:this.$VideoStreamingManager1.getBool("disable_audio_stream_pause",!1),yieldOnLowPriStream:this.$VideoStreamingManager1.getBool("enable_low_pri_multi_segment_fetch",!1),lowPriTaskYieldCheckInterval:this.$VideoStreamingManager1.getNumber("low_pri_task_yield_check_interval",0),lowPriTaskMinBytesToYield:this.$VideoStreamingManager1.getNumber("low_pri_task_min_bytes_to_yield",0),lowPriTaskYieldsPerTask:this.$VideoStreamingManager1.getNumber("low_pri_task_yields_per_task",0)});this.$VideoStreamingManager10=c;var d;this.$VideoStreamingManager11?d=this.$VideoStreamingManager11.enqueue(c,this.$VideoStreamingManager14):d=c.run();d.then(function(){a.$VideoStreamingManager10=null})["catch"](function(b){a.$VideoStreamingManager10=null,b.message==="cancelled"&&a.$VideoStreamingManager23()})};d.$VideoStreamingManager30=function(a,c){var d=a.startByte,e=a.endByte;c=c>=b("VideoPriorityCalculator").getMaxPriority()||this.$VideoStreamingManager1.getBool("enable_low_pri_multi_segment_fetch",!1)?this.$VideoStreamingManager3.getFetchRanges(a):[{startByte:d,endByte:e}];return c};d.$VideoStreamingManager25=function(a){this.$VideoStreamingManager15=a;a=a.baseUrl;this.$VideoStreamingManager8&&this.$VideoStreamingManager8!==a&&this.$VideoStreamingManager24();this.$VideoStreamingManager8=a};d.$VideoStreamingManager26=function(a){this.$VideoStreamingManager6==null&&(this.$VideoStreamingManager6=this.$VideoStreamingManager31(a)),this.$VideoStreamingManager27(a)};d.$VideoStreamingManager21=function(a){var c=this;this.$VideoStreamingManager25(a);this.$VideoStreamingManager26(a);var d=a.startByte,e=a.endByte;return!this.$VideoStreamingManager6?b("MaybeNativePromise").reject():this.$VideoStreamingManager6.getReservedChunkStream({startByte:d,endByte:e}).then(function(a){c.$VideoStreamingManager23();return a})["catch"](function(b){c.$VideoStreamingManager6=c.$VideoStreamingManager31(a);return c.$VideoStreamingManager6.getReservedChunkStream({startByte:d,endByte:e}).then(function(a){c.$VideoStreamingManager23();return a})})};d.$VideoStreamingManager31=function(a){var c=this.$VideoStreamingManager3.getSegmentsBoundaries(a);a=this.$VideoStreamingManager32(a.baseUrl,c);c=new(b("ChunkableContinuousRangeStream"))(a,{disableStreamAutoStart:this.$VideoStreamingManager1.getBool("disable_auto_stream_start",!0),enableStreamRangeConcat:this.$VideoStreamingManager1.getBool("enable_stream_range_concat",!1),disableDeferredBufferArrayShift:this.$VideoStreamingManager1.getBool("disable_deferred_buffer_array_shift",!1),fixFixedSizeTransformOnNullEndByte:this.$VideoStreamingManager1.getBool("fix_fixed_size_transform_on_null_end_byte",!1),useNativePromiseInDeferredBuffer:this.$VideoStreamingManager1.getBool("use_native_promise_in_deferred_buffer",!1),fixStreamingUndefinedEndByte:this.$VideoStreamingManager1.getBool("fix_streaming_undefined_end_byte",!0),enablePausableStreamResumeFromStart:this.$VideoStreamingManager1.getBool("enable_pausable_stream_resume_from_start",!0),fixPausePreReadableStream:this.$VideoStreamingManager1.getBool("fix_pause_pre_readable_stream",!1),enableFactoryDestroy:this.$VideoStreamingManager1.getBool("enable_pausable_range_stream_factory_destroy",!1)});this.$VideoStreamingManager9.push(c.getPausableStreamFactory());return c};d.$VideoStreamingManager27=function(a){var b=this.$VideoStreamingManager6;if(!b)return;var c=this.$VideoStreamingManager30(a,this.$VideoStreamingManager14);for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g=b.updateRangeStream(f),h=b.getCurrentStreamRange();if(g==="closed")this.$VideoStreamingManager6=this.$VideoStreamingManager31(a),this.$VideoStreamingManager27(a);else if(h&&h.endByte===f.endByte)continue;return}};d.$VideoStreamingManager22=function(a){var c=this,d=a.startByte,e=a.endByte;if(d===void 0)return b("MaybeNativePromise").reject("request range does not exist");var f=function(){c.$VideoStreamingManager4.setNextRequestInfo(a);(!c.$VideoStreamingManager4.isNextRequestContinuous()||!c.$VideoStreamingManager4.isNextRequestInRange()||!c.$VideoStreamingManager2)&&(c.$VideoStreamingManager2&&c.$VideoStreamingManager2.cancel("reset stream"),c.$VideoStreamingManager2=c.$VideoStreamingManager33(a));var b;e==null?b=void 0:b=e-d+1;return c.$VideoStreamingManager2.getNextFixedSizeStream(b)};return f()["catch"](function(){c.$VideoStreamingManager34();return f()})};d.$VideoStreamingManager33=function(a){var c=this.$VideoStreamingManager3.getSegmentsBoundaries(a);c=this.$VideoStreamingManager32(a.baseUrl,c);a=this.$VideoStreamingManager3.getFetchRanges(a)[0];this.$VideoStreamingManager4.setFetchRange(a);a=new(b("PausableRangeStream"))(b("ReadableStream"),b("WritableStream"),a,c,{fixStreamingUndefinedEndByte:this.$VideoStreamingManager1.getBool("fix_streaming_undefined_end_byte",!0)});c=new(b("FixedSizeTransform"))({fixFixedSizeTransformOnNullEndByte:this.$VideoStreamingManager1.getBool("fix_fixed_size_transform_on_null_end_byte",!1)});a.startStream();a.getStream().pipeTo(c.getSink());return c};d.$VideoStreamingManager32=function(a,c){var d=this,e=new(b("VideoSegmentStreamByFetch"))(a);a=function(a){return e.getResourceUrl(a)};var f=function(a){return d.$VideoStreamingManager3.getTimeRange(a)},g=e;g=this.$VideoStreamingManager35(g);g=this.$VideoStreamingManager36(g,a,f);this.$VideoStreamingManager7==="video"&&(g=this.$VideoStreamingManager37(g,c),this.$VideoStreamingManager1.getBool("enable_stream_progress_tracker",!1)&&(g=this.$VideoStreamingManager38(g)));return g};d.$VideoStreamingManager35=function(a){var c={startStream:function(c){var d=new(b("NetworkErrorTransformStream"))();return a.startStream(c).then(function(a){return a.pipeThrough(d)})}};return c};d.$VideoStreamingManager37=function(a,c){var d=this,e={startStream:function(e){var f=c[0].startByte,g=new(b("StreamBandwidthReporter"))(d.$VideoStreamingManager1,f,c.filter(function(a){return a!==null}).map(function(a){return a.endByte||0}));g.addListener("bandwidthUpdate",function(a){return d.emit("bandwidthUpdate",a)});return a.startStream(e).then(function(a){return a.pipeThrough(g)})}};return e};d.$VideoStreamingManager36=function(a,c,d){var e=this,f=this.$VideoStreamingManager5;if(!f||this.$VideoStreamingManager1.getBool("disable_shaka_perf_logger_for_streaming",!1))return a;var h={startStream:function(h){var i=new(b("StreamFetchRequestLogger"))(f,e.$VideoStreamingManager7,c(h),d(h),h,(g||(g=b("performanceNow")))(),e.$VideoStreamingManager14);return a.startStream(h).then(function(a){return a.pipeThrough(i)})}};return h};d.$VideoStreamingManager38=function(a){var c=this;if(this.$VideoStreamingManager7!=="video")return a;var d={startStream:function(d){var e=new(b("StreamProgress"))(d);c.$VideoStreamingManager16!=null&&c.$VideoStreamingManager16.add(e);return a.startStream(d).then(function(a){return a.pipeThrough(e)})}};return d};d.$VideoStreamingManager34=function(){this.$VideoStreamingManager4=new(b("FetchStreamStateTracker"))()};return c}(b("EventEmitter"));e.exports=a}),null);
__d("ViewportPriorityAdjuster",["Event","SubscriptionsHandler","getElementPosition","getViewportDimensions","throttle"],(function(a,b,c,d,e,f){"use strict";var g=500,h=800;a=function(){function a(a){var c=this;this.$1=function(){};this.$2=new(b("SubscriptionsHandler"))();this.$3=a;this.$2.addSubscriptions(b("Event").listen(window,"scroll",b("throttle")(function(){return c.$4(a)},g)))}var c=a.prototype;c.$5=function(a){if(!a.paused)return 0;var c=b("getViewportDimensions")();a=b("getElementPosition")(a);var d=a.y;a=a.height;c=c.height;if(!d&&!a)return-2;if(d+a<0)return-2;return d>=0&&d+a<=c+h||d<=0&&d+a>=0?0:-1};c.$4=function(a){this.$1(this.$5(a))};c.setOnPriorityChanged=function(a){this.$1=a};c.getPriorityAdjustment=function(){return this.$5(this.$3)};c.cleanup=function(){this.$1=function(){},this.$2.release()};return a}();e.exports=a}),null);
__d("canUseFetchStream",[],(function(a,b,c,d,e,f){"use strict";function a(){var a=!!window.fetch,b=!!(window.ReadableStream&&window.WritableStream),c=!!(window.ReadableStream&&window.ReadableStream.prototype.pipeTo);return a&&b&&c}e.exports=a}),null);
__d("filterObject",[],(function(a,b,c,d,e,f){"use strict";var g=Object.prototype.hasOwnProperty;function a(a,b,c){if(!a)return null;var d={};for(var e in a)g.call(a,e)&&b.call(c,a[e],e,a)&&(d[e]=a[e]);return d}e.exports=a}),null);
__d("WebWorker",["invariant","requireCond","BlobFactory","Bootloader","EventListener","SubscriptionsHandler","URI","WebWorkerConfig","XHRRequest","areSameOrigin","cr:951783","emptyFunction","filterObject","getCrossOriginTransport","gkx","memoize","performanceNow","recoverableViolation"],(function(a,b,c,d,e,f,g){var h,i,j=a.URL||a.webkitURL,k={remove:b("emptyFunction")},l=function(){"use strict";function c(a){var c=this;this.$2=!1;this.$3=null;this.$4=a;this.__worker=null;this.$5=b("emptyFunction");this.$6=b("emptyFunction");this.$7=[];this.$8=[];this.$9=!1;this.$10=new(b("SubscriptionsHandler"))();this.$1=b("cr:951783")!==null?b("cr:951783")(function(){c.$9||c.terminate()}):k;b("gkx")("708253")&&setTimeout(function(){!c.$9&&!c.isCurrentState("terminated")&&b("recoverableViolation")("WebWorker (resource: "+a.name+") allowCrossPageTransitions must be true on Comet, or you must handle cleaning up your worker.","comet_infra")},1e3);this.$11("constructed")}var d=c.prototype;d.setMessageHandler=function(a){this.$5=a||b("emptyFunction");return this};d.setErrorHandler=function(a){this.$6=a||b("emptyFunction");return this};d.postMessage=function(a,b){this.isCurrentState("constructed")&&g(0,5977);this.isCurrentState("terminated")&&g(0,5978);if(this.isCurrentState("preparing")){this.$7.push(this.postMessage.bind(this,a,b));return this}a={type:"message",message:a};b?this.getInterfaceableWorker().postMessage(a,b):this.getInterfaceableWorker().postMessage(a);return this};d.$12=function(){this.isCurrentState("terminated")||(this.$11("terminated"),this.__worker=null,this.$13(),this.$7=[],this.$8=[],this.$1&&this.$1.remove&&this.$1.remove())};d.terminate=function(){this.isCurrentState("executing")&&this.__worker!=null&&this.__worker.terminate();this.$12();return this};d.execute=function(){this.isCurrentState("terminated")&&g(0,5979);if(["preparing","executing"].some(this.isCurrentState,this))return this;this.$11("preparing");c.prepareResource(this.$4,this.$14.bind(this));return this};d.setAllowCrossPageTransition=function(a){b("gkx")("708253")&&!a&&b("recoverableViolation")("allowAcrossPageTransitions must be true because we dont kill these in Comet.","comet_infra");this.$9=a;return this};d.isCurrentState=function(a){c.states.includes(a)||g(0,5980,a);return a===this.$3};d.$14=function(){this.isCurrentState("executing")&&g(0,5981);if(this.isCurrentState("terminated"))return;this.$4.sameOriginURL||this.$4.source||g(0,19837,this.$4.name);this.$4.sameOriginURL?this.__worker=this.constructWorker(this.$4.sameOriginURL):(this.__worker=this.constructWorker(c.evalWorkerURL),this.getInterfaceableWorker().postMessage(this.$4.source));this.$15("ping",Date.now());if(this.$4.dynamicModules)try{this.$15("defineModules",this.$4.dynamicModules)}catch(a){this.terminate();this.$16("define_error",{message:a.message});throw a}this.$17();this.$11("executing");this.$7.forEach(function(a){return a()});this.$7=[];this.$8.forEach(function(a){return a()});this.$8=[]};d.$13=function(){this.$10.release()};d.$15=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.getInterfaceableWorker().postMessage({type:a,args:c})};d.$16=function(a,b){c.$16(a,this.$4.name,babelHelpers["extends"]({},b,{cross_page_transition:!!this.$9,state:this.$3}))};c.$18=function(){return Object.keys(b("filterObject")({object_url:c.$19(),eval_url:q(),data_url:c.$20(),worker:c.isSupported(),transferables:c.areTransferablesSupported()},function(a){return!!a}))};d.$17=function(){this.$10.addSubscriptions(b("EventListener").listen(this.getInterfaceableWorker(),"message",this.$21.bind(this)),b("EventListener").listen(this.getInterfaceableWorker(),"error",this.$22.bind(this)))};d.$22=function(a){var b=this.$6(a);!b&&!a.defaultPrevented&&this.$16("exception",{message:a.message})};d.$21=function(b){b=b.data;switch(b.type){case"message":this.$5(b.message);break;case"pong":this.$2=!0;this.$16("executed",{dt:Math.floor(b.args[1]-b.args[0]),bytes:this.$4.source?this.$4.source.length:-1});break;case"terminate":this.terminate();break;case"haste-error":this.terminate();this.$16("haste_error",{message:b.message});break;case"console":var c=b.args.shift();["log","error","info","debug","warn"].includes(c)||g(0,5983,c);a.console[c].apply(a.console,b.args);break}};d.$11=function(a){c.states.includes(a)||g(0,5984,a),this.$16("transition",{next_state:a}),this.$3=a};c.prepareResource=function(d,e){e===void 0&&(e=b("emptyFunction"));d.sameOriginURL||d.url||d.source||g(0,5985);!c.isSupported()&&g(0,5986);if(d.sameOriginURL)e();else if(d.url&&b("areSameOrigin")(new(h||(h=b("URI")))(d.url),new(h||(h=b("URI")))(a.location.href)))d.sameOriginURL=d.url,e();else if(d.source)c.$23()&&(d.sameOriginURL=c.$24(d.source)),e();else if(!d.loading){var f=(i||(i=b("performanceNow")))();d.loading=[e];c.$25(d.url,function(a){a?(d.source=a,c.$23()&&(d.sameOriginURL=c.$24(a)),c.$16("prepared",d.name,{dt:Math.floor((i||(i=b("performanceNow")))()-f),bytes:a.length})):c.$16("failed",d.name,{dt:Math.floor((i||(i=b("performanceNow")))()-f),bytes:0}),d.loading.forEach(function(a){return a()}),d.loading=!1})}else d.loading.push(e);return d};c.releaseResource=function(a){a.sameOriginURL.indexOf("blob:")===0&&(j.revokeObjectURL&&j.revokeObjectURL(a.sameOriginURL),a.sameOriginURL=null);return a};c.isSupported=function(){return p&&(c.$23()||q())};c.isMessageChannelSupported=function(){return c.areTransferablesSupported()&&!!a.MessageChannel};c.areTransferablesSupported=function(){return c.isSupported()&&r()};c.$25=function(a,c){new(b("XHRRequest"))(a).setTransportBuilder(b("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(a){c(a)}).setErrorHandler(c.bind(null,null)).send()};c.$24=function(a){c.$23()||g(0,5987);if(c.$19()){var d=b("BlobFactory").getBlob([a],{type:"application/javascript"});return j.createObjectURL(d)}if(c.$20())return"data:application/javascript,"+encodeURIComponent(a)};c.$19=function(){return b("BlobFactory").isSupported()&&n()};c.$20=function(){return o()};c.$23=function(){return c.$19()||c.$20()};c.$16=function(a,d,e){if(!b("WebWorkerConfig").logging.enabled)return;b("Bootloader").loadModules(["BanzaiLogger"],function(f){f.log(b("WebWorkerConfig").logging.config,babelHelpers["extends"]({},e,{features_array:c.$18(),event:a,resource:d}))},"WebWorker")};d.constructWorker=function(a){return m(a)};d.$26=function(a,b){if(this.isCurrentState("preparing")){this.$8.push(this.$26.bind(this,a,b));return}this.getInterfaceableWorker().postMessage({type:"port",message:a},b)};d.createMessageChannel=function(a,b){var c=new MessageChannel();this.$26(a,[c.port2].concat(b||[]));c.port1.start();return c.port1};d.getInterfaceableWorker=function(){return this.__worker};return c}();l.states=["constructed","preparing","executing","terminated"];l.evalWorkerURL=b("WebWorkerConfig").evalWorkerURL;function m(b){return new a.Worker(b)}var n=b("memoize")(function(){var a;if(!j||!j.createObjectURL)return!1;try{a=j.createObjectURL(b("BlobFactory").getBlob([""],{type:"application/javascript"}));var c=m(a);c.terminate();c=!0}catch(a){c=!1}finally{j.revokeObjectURL&&j.revokeObjectURL(a)}return c}),o=b("memoize")(function(){try{var a=m("data:application/javascript,");a.terminate();a=!0}catch(b){a=!1}return a}),p=!!a.Worker,q=b("memoize")(function(){try{var a=m(l.evalWorkerURL);a.terminate();a=!0}catch(b){a=!1}return a}),r=b("memoize")(function(){try{var a=m(l.evalWorkerURL),b=new ArrayBuffer(0);a.postMessage({buffer:b},[b]);a.terminate();b=!0}catch(a){b=!1}return b});e.exports=l}),null);
__d("WebWorkerTransferPromise",["invariant","Promise"],(function(a,b,c,d,e,f,g){a={expectPromise:function(a){var c=new(b("Promise"))(function(b,c){function d(e){e instanceof MessageEvent||g(0,1465);e=e.data;e||g(0,1466);var f=e.type;e=e.data;switch(f){case"resolve":b(e);break;case"reject":c(e);break;default:throw new Error("Expected a WebWorkerTransferPromise, but didn't receive one.")}a.removeEventListener("message",d)}a.addEventListener("message",d)});return c},sendPromise:function(a,b){function c(b){a.postMessage({type:"resolve",data:b})}function d(b){a.postMessage({type:"reject",data:b})}b(c,d)}};e.exports=a}),null);
__d("getSeekRangeGapsFromShakaReferences",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=[];for(var d=0;d<a.length;++d)if(a[d].timescaledGapInfo&&a[d].timescaledGapInfo.gapDistance>0){var e=0;a[d].unscaledStartTime&&(e=a[d].startTime-a[d].unscaledStartTime/b);c.push({start:a[d].timescaledGapInfo.segmentOriginalEndTime+e,end:a[d].endTime})}return c}e.exports=a}),null);
__d("logLongAkamaiRequest",["CurrentUser","FBLogger"],(function(a,b,c,d,e,f){var g=!1,h=2,i=[];function a(a){b("CurrentUser").isEmployee()&&!g&&(i=i.filter(function(a){a=a.time;return Date.now()-a<1e3*60*2}),i.push({data:a,time:Date.now()}),i.length>=h&&(g=!0,b("FBLogger")("shaka").warn("Long latency video request to akamai: %s",i.map(function(a){a=a.data;return a}).join(" ; "))))}e.exports=a}),null);
__d("mergeSeekRangeGaps",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];if(a.length){a.sort(function(a,b){return a.start-b.start});var c=a[0].start,d=a[0].end;for(var e=1;e<a.length;++e)a[e].start<=d?d=Math.max(d,a[e].end):(b.push({startTime:c,endTime:d}),c=a[e].start,d=a[e].end);b.push({startTime:c,endTime:d})}return b}e.exports=a}),null);
__d("getBandwidthUpgradeTargetFactor",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){return b<c||c<=0?1:1-a/b*d}e.exports=a}),null);
__d("getVideoTracksWithoutSmoothPlayback",["Promise"],(function(a,b,c,d,e,f){"use strict";function a(a,c){if(!window.navigator||!window.navigator.mediaCapabilities||typeof window.navigator.mediaCapabilities.decodingInfo!=="function")return b("Promise").resolve([]);var d=window.navigator.mediaCapabilities.decodingInfo,e={type:"media-source",audio:{contentType:(c.mimeType||"")+'; codecs="'+(c.codecs||"")+'"',channels:String(c.channels),bitrate:c.bandwidth,samplerate:c.samplingRate}};return b("Promise").all(a.map(function(a){return d(babelHelpers["extends"]({},e,{video:{contentType:(a.mimeType||"")+'; codecs="'+(a.codecs||"")+'"',width:a.width,height:a.height,bitrate:a.bandwidth,framerate:a.frameRate}}))})).then(function(b){var c=[];a.forEach(function(a,d){(!b[d].supported||!b[d].smooth)&&c.push(a)});return c})["catch"](function(a){return[]})}e.exports=a}),null);
__d("P2PPlaybackSessionLogger",["LiveVideoWorkplaceP2PPlaybackTypedLogger","Random"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$4=!1,this.$1=a,this.$2=b("Random").uint32(),this.$7()}var c=a.prototype;c.getSessionID=function(){return this.$2};c.setCurrentHiveStats=function(a){this.$3=a,!this.$4&&a.p2pRequests>0&&(this.$4=!0,this.logReceivedFirstPeerRequest())};c.pauseStatsLogging=function(){this.$5&&(window.clearInterval(this.$5),this.$5=null)};c.resumeStatsLogging=function(){this.$7()};c.$7=function(){this.$5||(this.$5=window.setInterval(this.logStats.bind(this),60*1e3))};c.$8=function(){return new(b("LiveVideoWorkplaceP2PPlaybackTypedLogger"))().setVideoID(this.$1).setSessionID(this.$2).setTimeMs(Date.now())};c.logEnableP2P=function(){this.$8().setEventStr("ENABLE_P2P").log()};c.logSessionInit=function(a,b){this.$6=Date.now(),this.$8().setEventStr("SESSION_INITIALIZED").setHivePluginTech(a).setViewerManifestURL(b).log()};c.logSessionActive=function(a){this.$8().setEventStr("SESSION_ACTIVE").setHivePluginTech(a).log()};c.logManifestMismatch=function(a,b){this.$8().setEventStr("MANIFEST_MISMATCH").setBroadcastURL(a).setViewerManifestURL(b).log()};c.logError=function(a){this.$8().setEventStr("ERROR").setExceptionTrace(a.stack).setExceptionMessage(a.message).setExceptionType(a.name).log()};c.logHiveError=function(a){this.$8().setEventStr("ERROR").setExceptionMessage(a.message).setExceptionType("HiveErrorMessage").setExceptionCode(a.code).setExceptionSeverity(a.severity).log()};c.logUnload=function(){var a=this.$8().setEventStr("UNLOAD"),b=this.$3;b&&a.setHiveClientStatsCdnRequests(b.cdnRequests).setHiveClientStatsCdnResponseBytes(b.cdnResponseBytes).setHiveClientStatsCdnResponseErrors(b.cdnResponseErrors).setHiveClientStatsCdnResponses(b.cdnResponses).setHiveClientStatsP2pRequests(b.p2pRequests).setHiveClientStatsP2pResponseBytes(b.p2pResponseBytes).setHiveClientStatsP2pResponseErrors(b.p2pResponseErrors).setHiveClientStatsP2pResponses(b.p2pResponses).setHiveClientStatsSavings(parseInt(b.savings,10)).setHiveClientStatsNumPartners(Object.keys(b.partners).length);a.log()};c.logCreatedP2PVideoSource=function(){this.$8().setEventStr("CREATED_VIDEO_SOURCE").log()};c.logStats=function(){var a=this.$3,b=this.$8().setEventStr("STATS");a&&b.setHiveClientStatsCdnRequests(a.cdnRequests).setHiveClientStatsCdnResponseBytes(a.cdnResponseBytes).setHiveClientStatsCdnResponseErrors(a.cdnResponseErrors).setHiveClientStatsCdnResponses(a.cdnResponses).setHiveClientStatsP2pRequests(a.p2pRequests).setHiveClientStatsP2pResponseBytes(a.p2pResponseBytes).setHiveClientStatsP2pResponseErrors(a.p2pResponseErrors).setHiveClientStatsP2pResponses(a.p2pResponses).setHiveClientStatsSavings(parseInt(a.savings,10)).setHiveClientStatsNumPartners(Object.keys(a.partners).length);b.log()};c.logReceivedFirstPeerRequest=function(){this.$8().setEventStr("RECEIVED_FIRST_PEER_REQUEST").log()};c.logEndSession=function(){this.pauseStatsLogging();var a=this.$6;a=a!=null?Date.now()-a:-1;this.$8().setEventStr("SESSION_END").setTimeSpentInP2pMs(a).log()};c.logMissingGetRequestPromise=function(){this.$8().setEventStr("MISSING_GET_REQUEST_PROMISE").log()};return a}();e.exports=a}),null);
__d("PerformanceResourceBuffer",["BanzaiODS","EventEmitter"],(function(a,b,c,d,e,f){"use strict";var g=a.__isResourceTimingBufferFull;delete a.__isResourceTimingBufferFull;performance.onresourcetimingbufferfull=function(){g=!0,h&&h.emit("full")};var h;c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.isBufferFull=function(){return g};return b}(b("EventEmitter"));h=new c();h.isBufferFull()?b("BanzaiODS").bumpEntityKey(2966,"performance","resourcetimingbufferfull"):h.addListener("full",function(){return b("BanzaiODS").bumpEntityKey(2966,"performance","resourcetimingbufferfull")});e.exports=h}),null);
__d("TaggedTimeRanges",["oz-player/utils/OzTaggedTimeRanges"],(function(a,b,c,d,e,f){e.exports=b("oz-player/utils/OzTaggedTimeRanges")}),null);
__d("VideoPlayerLiveStreamState",["EventEmitter","SkywalkerManager"],(function(a,b,c,d,e,f){"use strict";var g={interrupt:"streamInterruptAt",ended:"endedAt"};a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;c.$VideoPlayerLiveStreamState2=b;c.$VideoPlayerLiveStreamState1=[];return c}var d=c.prototype;d.subscribe=function(){this.$VideoPlayerLiveStreamState1=[];for(var a in g)this.$VideoPlayerLiveStreamState1.push(b("SkywalkerManager").subscribe("video_broadcast/"+a+"_"+this.$VideoPlayerLiveStreamState2,this.$VideoPlayerLiveStreamState3.bind(this,g[a])))};d.unsubscribe=function(){for(var a=this.$VideoPlayerLiveStreamState1,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.unsubscribe()}this.$VideoPlayerLiveStreamState1=[]};d.$VideoPlayerLiveStreamState3=function(a,b){b=JSON.parse(b.payload||"{}")||{};b=b.time_position;typeof b==="number"&&(b/=1e3,this.emit(a,b))};return c}(b("EventEmitter"));e.exports=a}),null);
__d("XVideoDataAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/video_data_async/",{video_id:{type:"String",required:!0},width:{type:"Int"},height:{type:"Int"},scrubbing_preference:{type:"Int"},source:{type:"String"},preferred_projection:{type:"Enum",enumType:1},supports_html5_video:{type:"Bool",defaultValue:!0},is_ad:{type:"Bool",defaultValue:!1},force_flash:{type:"Bool",defaultValue:!1},is_omnistab_preview_select_revert:{type:"Bool",defaultValue:!1},allow_dash_prefetch:{type:"Bool",defaultValue:!1},force_hd:{type:"Bool",defaultValue:!1},host_number:{type:"Int"},include_extra_drm_info:{type:"Bool",defaultValue:!0}})}),null);
__d("getVideoPlayerShakaSeekableRanges",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];if(a.seekRangeGaps.length===0)b.push({startTime:a.start,endTime:a.end});else{var c=a.start,d;for(var e=0;e<a.seekRangeGaps.length;++e)d=a.seekRangeGaps[e].startTime,b.push({startTime:c,endTime:d}),c=a.seekRangeGaps[e].endTime;d=a.end;b.push({startTime:c,endTime:d})}return b}e.exports=a}),null);
__d("VideoPlayerHTML5Shaka",["invariant","regeneratorRuntime","Promise","CustomAbrManager","EventEmitter","EventListener","FBLogger","LowLatencyPlayheadManager","LowLatencyShakaTimingProvider","P2PPlaybackSessionLogger","Shaka","SubscriptionsHandler","TaggedTimeRanges","VideoDashPrefetchCache","VideoPlayerAbrLogger","VideoPlayerConnectionQuality","VideoPlayerLiveStreamState","VideoPlayerMetaData","VideoPlayerPlayLogger","VideoPlayerQualitiesArray","VideoPlayerShakaBandwidthEstimator","VideoPlayerShakaPerformanceLogger","VideoPriorityCalculator","VideoStreamingTaskQueueProvider","clearInterval","dangerouslyOverrideMediaElementEndedProperty","dispatchCustomEvent","dispatchEvent","nullthrows","qex","setInterval","throttle","TimeRanges","getVideoPlayerShakaSeekableRanges","LiveClock","URI","PerformanceResourceBuffer"],(function(a,b,c,d,e,f,g){var h;a=b("Shaka").player;var i=a.DashVideoSource,j=a.Player,k=a.VideoTrack,l=b("VideoPlayerQualitiesArray").ensureVideoPlayerQualitiesArray,m="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",n="com.widevine.alpha",o="urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",p="com.microsoft.playready",q=b("Shaka").dash.mpd.parseMpd,r=b("VideoPlayerShakaBandwidthEstimator").getEstimator();b("PerformanceResourceBuffer");c=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(d,e,f){var g,h=f.config,i=f.videoID,k=f.playerInstanceKey,m=f.width,n=f.height,o=f.manifest,p=f.manifestUrl,r=f.isLive,s=f.isServableViaFbms,t=f.minPlayQuality,u=f.maxPlayQuality,v=f.accessToken,w=f.startTimestamp,x=f.disableStreaming,y=f.playerOrigin,z=f.playerSuborigin,A=f.resolutionConstraintMaxHeight,B=f.resolutionConstraintMaxWidth,C=f.useStrictTrackDimensionsExclusionLogic,D=f.isSpherical,E=f.getSource,F=f.vpcPlayingStateEmitter,G=f.streamPriorityAdjuster,H=f.videoLiveTrace,I=f.videoLicenseUriMap,J=f.graphApiVideoLicenseUri,K=f.widevineCert,L=f.videoWatchTimeTracker,M=f.desiredLatencyMs,N=f.latencyToleranceMs,O=f.disableAbr;f=f.p2pSettings;g=a.call(this)||this;g.$VideoPlayerHTML5Shaka33=null;g.$VideoPlayerHTML5Shaka47=new(b("SubscriptionsHandler"))();g.$VideoPlayerHTML5Shaka2=h;g.$VideoPlayerHTML5Shaka5=t;g.$VideoPlayerHTML5Shaka6=u;g.$VideoPlayerHTML5Shaka7=!1;g.$VideoPlayerHTML5Shaka8=null;g.$VideoPlayerHTML5Shaka9=1;g.$VideoPlayerHTML5Shaka10=!1;g.$VideoPlayerHTML5Shaka11=r;g.$VideoPlayerHTML5Shaka12=r;g.$VideoPlayerHTML5Shaka13=s;g.$VideoPlayerHTML5Shaka14=!1;g.$VideoPlayerHTML5Shaka15=D;g.$VideoPlayerHTML5Shaka53=!!O;f&&(g.$VideoPlayerHTML5Shaka54=f.ticket,g.$VideoPlayerHTML5Shaka57=f.hive_initialization_options,g.$VideoPlayerHTML5Shaka55=f.config);g.$VideoPlayerHTML5Shaka17=m;g.$VideoPlayerHTML5Shaka18=n;g.$VideoPlayerHTML5Shaka48=I;g.$VideoPlayerHTML5Shaka49=J;g.$VideoPlayerHTML5Shaka51=K;g.$VideoPlayerHTML5Shaka33=o||p;g.$VideoPlayerHTML5Shaka41=L;g.$VideoPlayerHTML5Shaka44=(typeof A==="number"?A:g.$VideoPlayerHTML5Shaka2.getNumber("resolution_constraint_max_height",0))||Infinity;g.$VideoPlayerHTML5Shaka45=(typeof B==="number"?B:g.$VideoPlayerHTML5Shaka2.getNumber("resolution_constraint_max_width",0))||Infinity;g.$VideoPlayerHTML5Shaka46=C;g.$VideoPlayerHTML5Shaka3=e;g.$VideoPlayerHTML5Shaka36=null;g.$VideoPlayerHTML5Shaka20=E;h=g.$VideoPlayerHTML5Shaka36;g.$VideoPlayerHTML5Shaka4=i;g.$VideoPlayerHTML5Shaka50=v;g.$VideoPlayerHTML5Shaka26=b("VideoPlayerShakaPerformanceLogger").shouldInitialize()?new(b("VideoPlayerShakaPerformanceLogger"))({videoID:i,video:d,representationId:h,isLive:r,isServableViaFbms:s,accessToken:v,playerOrigin:y,playerSuborigin:z,playerVersion:g.getPlayerVersion(),uniqueID:k,getBandwidthEstimate:function(a){return b("VideoPlayerShakaBandwidthEstimator").getBandwidthByVideoType(a)},isDrm:g.isDrm()}):null;g.$VideoPlayerHTML5Shaka26&&(g.$VideoPlayerHTML5Shaka28=new(b("VideoPlayerPlayLogger"))(d,g.$VideoPlayerHTML5Shaka26));g.$VideoPlayerHTML5Shaka30=new(b("VideoPlayerAbrLogger"))({videoID:i,uniqueID:k,video:d,isLive:r,isServableViaFbms:s,playerOrigin:y}).setRepresentationID(h);g.$VideoPlayerHTML5Shaka61();b("EventListener").listen(d,"playing",g.$VideoPlayerHTML5Shaka62.bind(babelHelpers.assertThisInitialized(g)));b("EventListener").listen(d,"timeupdate",function(a){g.$VideoPlayerHTML5Shaka63(a.target.currentTime)});b("EventListener").listen(d,"pause",g.$VideoPlayerHTML5Shaka64.bind(babelHelpers.assertThisInitialized(g)));b("EventListener").listen(d,"play",g.$VideoPlayerHTML5Shaka65.bind(babelHelpers.assertThisInitialized(g)));b("EventListener").listen(d,"ended",g.disableP2PPlayback.bind(babelHelpers.assertThisInitialized(g)));g.$VideoPlayerHTML5Shaka32=Date.now();g.$VideoPlayerHTML5Shaka2.getBool("refresh_vod_manifest",!1)&&g.$VideoPlayerHTML5Shaka66();g.$VideoPlayerHTML5Shaka22=l([]);g.$VideoPlayerHTML5Shaka23=null;g.$VideoPlayerHTML5Shaka24=null;g.$VideoPlayerHTML5Shaka38=F;g.$VideoPlayerHTML5Shaka39=G;g.$VideoPlayerHTML5Shaka19=new j(d,g.$VideoPlayerHTML5Shaka2,g.$VideoPlayerHTML5Shaka26,g.$VideoPlayerHTML5Shaka30,g.$VideoPlayerHTML5Shaka38,g.$VideoPlayerHTML5Shaka39,H);if(g.$VideoPlayerHTML5Shaka12&&g.$VideoPlayerHTML5Shaka2.getBool("is_low_latency",!1)){t=new(b("LiveClock"))();t.startClock();g.$VideoPlayerHTML5Shaka52=new(b("LowLatencyPlayheadManager"))(babelHelpers.assertThisInitialized(g),d,g.$VideoPlayerHTML5Shaka4,new(b("LowLatencyShakaTimingProvider"))(g.$VideoPlayerHTML5Shaka19),t,{lowLatencyMs:M||g.$VideoPlayerHTML5Shaka2.getNumber("ll_desired_latency_ms",7e3),lowLatencyThresholdMs:N||g.$VideoPlayerHTML5Shaka2.getNumber("ll_latency_behind_threshold_ms",500),lowLatencySeekForwardMs:g.$VideoPlayerHTML5Shaka2.getNumber("ll_latency_seek_forward_ms",400),lowLatencyAdjustPlaybackIntervalMs:g.$VideoPlayerHTML5Shaka2.getNumber("ll_adjust_playback_interval_ms",250)});g.$VideoPlayerHTML5Shaka52.setState("stopped")}g.$VideoPlayerHTML5Shaka19.addEventListener("seekrangechanged",function(){return g.$VideoPlayerHTML5Shaka67()});g.$VideoPlayerHTML5Shaka19.addEventListener("bufferingStart",function(){return g.$VideoPlayerHTML5Shaka68()});g.$VideoPlayerHTML5Shaka19.addEventListener("bufferingEnd",function(){return g.$VideoPlayerHTML5Shaka69()});g.$VideoPlayerHTML5Shaka19.addEventListener("bufferingProgress",g.$VideoPlayerHTML5Shaka70.bind(babelHelpers.assertThisInitialized(g)));g.$VideoPlayerHTML5Shaka19.addEventListener("error",function(a){return g.$VideoPlayerHTML5Shaka71(a)});g.$VideoPlayerHTML5Shaka19.addEventListener("adaptation",g.$VideoPlayerHTML5Shaka72.bind(babelHelpers.assertThisInitialized(g)));g.$VideoPlayerHTML5Shaka19.addEventListener("trackschanged",g.$VideoPlayerHTML5Shaka73.bind(babelHelpers.assertThisInitialized(g)));g.$VideoPlayerHTML5Shaka19.addEventListener("debug/dashPlayerEvent",function(a){return g.emit("debug/dashPlayerEvent",a.detail)});g.$VideoPlayerHTML5Shaka19.addEventListener("manifestwrapped",g.$VideoPlayerHTML5Shaka74.bind(babelHelpers.assertThisInitialized(g)));g.$VideoPlayerHTML5Shaka19.addEventListener("cea608CaptionsBytesReceived",function(a){g.emit("cea608CaptionsBytesReceived",a.detail)});g.$VideoPlayerHTML5Shaka19.addEventListener("cea608AvailabilityChanged",function(){g.emit("cea608AvailabilityChanged")});g.$VideoPlayerHTML5Shaka19.addEventListener("manifestIsUpdating",g.$VideoPlayerHTML5Shaka75.bind(babelHelpers.assertThisInitialized(g)));g.$VideoPlayerHTML5Shaka19.addEventListener("replicaswitch",g.$VideoPlayerHTML5Shaka76.bind(babelHelpers.assertThisInitialized(g)));g.$VideoPlayerHTML5Shaka19.addEventListener("initiallivemanifestrequestfailure",g.$VideoPlayerHTML5Shaka77.bind(babelHelpers.assertThisInitialized(g)));g.$VideoPlayerHTML5Shaka19.addEventListener("networkinterrupted",g.$VideoPlayerHTML5Shaka78.bind(babelHelpers.assertThisInitialized(g)));g.$VideoPlayerHTML5Shaka19.addEventListener("networkresumed",g.$VideoPlayerHTML5Shaka79.bind(babelHelpers.assertThisInitialized(g)));u=!1;D=null;O=null;g.$VideoPlayerHTML5Shaka42=g.$VideoPlayerHTML5Shaka2.getBool("live_send_push_headers",!0);g.$VideoPlayerHTML5Shaka43=p;o?g.$VideoPlayerHTML5Shaka35=q(o,p):(g.$VideoPlayerHTML5Shaka35=p,u=p&&p.indexOf("dash-abr")!==-1);u&&(g.$VideoPlayerHTML5Shaka42=g.$VideoPlayerHTML5Shaka2.getBool("live_abr_send_push_headers",!0),g.$VideoPlayerHTML5Shaka42&&(D=g.$VideoPlayerHTML5Shaka2.getString("live_abr_initial_push_representation","live-md_H264"),O=g.$VideoPlayerHTML5Shaka2.getString("live_abr_audio_push_representation","live-md_AAC"),g.$VideoPlayerHTML5Shaka3=[g.$VideoPlayerHTML5Shaka2.getString("live_abr_initial_push_representation","live-md_H264")]),g.$VideoPlayerHTML5Shaka2.getBool("live_abr_always_force_representation",!1)&&(g.$VideoPlayerHTML5Shaka3=[g.$VideoPlayerHTML5Shaka2.getString("live_abr_initial_push_representation","live-md_H264")]));g.$VideoPlayerHTML5Shaka1=d;g.$VideoPlayerHTML5Shaka40=g.$VideoPlayerHTML5Shaka80();g.$VideoPlayerHTML5Shaka25=g.$VideoPlayerHTML5Shaka81();f=g.$VideoPlayerHTML5Shaka12?g.$VideoPlayerHTML5Shaka2.getBool("enable_request_pipelining_for_live",!0):g.$VideoPlayerHTML5Shaka2.getBool("enable_request_pipelining_for_vod",!0);g.$VideoPlayerHTML5Shaka54&&r&&g.$VideoPlayerHTML5Shaka55&&(g.$VideoPlayerHTML5Shaka55.delay_p2p_until_play||g.$VideoPlayerHTML5Shaka82(),f=!1);g.$VideoPlayerHTML5Shaka19.configure({enableAdaptation:g.getIsAbrEnabled(),appendPlayingQueryParam:g.$VideoPlayerHTML5Shaka2.getBool("add_cdn_debug_query_parameters",!0),endBufferingOnPlaying:g.$VideoPlayerHTML5Shaka2.getBool("end_buffering_on_playing",!1),usePlaybackRateForBuffering:!0,streamBufferSize:g.$VideoPlayerHTML5Shaka2.getBool("use_stream_buffer_size_override",!1)?0:g.$VideoPlayerHTML5Shaka83(),initialStreamBufferSize:c.isAutoplayBandwidthRestrained(r)?g.$VideoPlayerHTML5Shaka2.getNumber("initial_stream_buffer_size_for_blocked_autoplay",5.9335983320607):g.$VideoPlayerHTML5Shaka2.getBool("use_stream_buffer_size_override",!1)?0:g.$VideoPlayerHTML5Shaka84(),smartBufferAdjustmentParams:{useSmartBuffering:g.$VideoPlayerHTML5Shaka2.getBool("use_smart_buffering",!1),bufferSize_00_to_03:g.$VideoPlayerHTML5Shaka2.getNumber("buffer_size_00_to_03",5),bufferSize_03_to_10:g.$VideoPlayerHTML5Shaka2.getNumber("buffer_size_03_to_10",15),bufferSize_10_to_30:g.$VideoPlayerHTML5Shaka2.getNumber("buffer_size_10_to_30",30),bufferSize_30_to_60:g.$VideoPlayerHTML5Shaka2.getNumber("buffer_size_30_to_60",600),bufferSize_above_60:g.$VideoPlayerHTML5Shaka2.getNumber("buffer_size_above_60",600),nonSmartBufferSize:g.$VideoPlayerHTML5Shaka2.getNumber("non_smart_buffer_size",15)},dynamicStreamBufferSize:r?g.$VideoPlayerHTML5Shaka2.getNumber("live_dynamic_stream_buffer_size",12):null,includeStreamBufferSizeInStartOffset:!0,minMpdRefreshInterval:g.$VideoPlayerHTML5Shaka2.getNumber("min_mpd_refresh_interval",1e3),disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:!0,liveStreamEndTimeout:g.$VideoPlayerHTML5Shaka2.getNumber("live_stream_end_timeout",6e4),enableLiveInterruptionDetection:!0,liveInterruptionConsecutiveUpdatesWithoutChange:g.$VideoPlayerHTML5Shaka2.getNumber("live_interruption_consecutive_updates_without_change",5),liveInterruptionConsecutiveUpdatesWithChange:g.$VideoPlayerHTML5Shaka2.getNumber("live_interruption_consecutive_updates_with_change",3),liveMaxSegmentsToPush:g.$VideoPlayerHTML5Shaka2.getNumber("live_max_segments_to_push",2),liveSendPushHeaders:c.isAutoplayBandwidthRestrained(r)?!1:g.$VideoPlayerHTML5Shaka85(),liveMaxManifestFetchesWithPush:g.$VideoPlayerHTML5Shaka2.getNumber("live_max_manifest_fetches_with_push",1),resolveVideoTimeUpdateOnFragmentedTimeRanges:g.$VideoPlayerHTML5Shaka2.getBool("resolve_video_time_update_on_fragmented_time_ranges",!0),enableManifestDebug:g.$VideoPlayerHTML5Shaka2.getBool("enable_video_debug",!1),reappendInitSegmentAfterAbort:g.$VideoPlayerHTML5Shaka2.getBool("reappend_init_segment_after_abort",!1),useInlineInitSegment:g.$VideoPlayerHTML5Shaka2.getBool("use_inline_init_segment",!1),currentTimeDuringReadyStateZeroThrows:g.$VideoPlayerHTML5Shaka2.getBool("current_time_during_ready_state_zero_throws",!1),liveInitialPushRepresentation:D,liveAudioPushRepresentation:O,jumpToLiveThreshold:g.$VideoPlayerHTML5Shaka2.getNumber("jump_to_live_threshold",.5),liveDataFetchMaxRetries:g.$VideoPlayerHTML5Shaka2.getNumber("live_data_fetch_max_retries",0),liveSourceBufferClearMaxRetries:g.$VideoPlayerHTML5Shaka2.getNumber("live_source_buffer_clear_max_retries",0),useLongCacheForManifest:g.$VideoPlayerHTML5Shaka2.getBool("use_long_cache_for_manifest",!0),jumpToEarliestPositionInCurrentBlock:g.$VideoPlayerHTML5Shaka2.getBool("jump_to_earliest_position_in_current_block",!0),ignoreMinBufferTime:g.$VideoPlayerHTML5Shaka2.getBool("ignore_min_buffer_time",!1),playheadFragmentedGapDiffAllowance:g.$VideoPlayerHTML5Shaka2.getNumber("playhead_fragmented_gap_diff_allowance",.1),fixBufferingGoalDetermination:g.$VideoPlayerHTML5Shaka2.getBool("fix_buffering_goal_determination",!0),skipEmptySegments:g.$VideoPlayerHTML5Shaka2.getBool("skip_empty_segments",!1),useMicroTaskTimeouts:!0,enableRequestPipelining:f,enableStreaming:!x&&(g.$VideoPlayerHTML5Shaka12?g.$VideoPlayerHTML5Shaka2.getBool("enable_streaming_for_live",!1):g.$VideoPlayerHTML5Shaka2.getBool("enable_streaming_for_vod",!0)),enableContentProtection:g.$VideoPlayerHTML5Shaka2.getBool("enable_content_protection",!1)});if(r){m=new(b("VideoPlayerLiveStreamState"))(i);g.$VideoPlayerHTML5Shaka37=m;g.$VideoPlayerHTML5Shaka19.addEventListener("liveheadIdleAt",function(a){a=a.seconds;a>(g.$VideoPlayerHTML5Shaka8||0)&&(g.$VideoPlayerHTML5Shaka86(a),g.$VideoPlayerHTML5Shaka27&&g.$VideoPlayerHTML5Shaka87()&&(g.$VideoPlayerHTML5Shaka88(),g.emit("bufferingEnd")))});g.addListenersToLiveStreamState(m)}w&&g.$VideoPlayerHTML5Shaka19.setPlaybackStartTime(w);g.$VideoPlayerHTML5Shaka60=g.$VideoPlayerHTML5Shaka19.load(g.$VideoPlayerHTML5Shaka25).then(function(){g.$VideoPlayerHTML5Shaka60=null})["catch"](function(a){g.$VideoPlayerHTML5Shaka60=null;g.$VideoPlayerHTML5Shaka2.getBool("fallback_on_videosource_load_410_error",!1)&&a.type==="net"&&a.status===410&&g.$VideoPlayerHTML5Shaka71(a);if(g.$VideoPlayerHTML5Shaka7&&g.$VideoPlayerHTML5Shaka2.getBool("ignore_errors_after_unload",!0))return;throw a});g.$VideoPlayerHTML5Shaka52&&g.$VideoPlayerHTML5Shaka52.startFixedLatencySync();return g}var d=c.prototype;d.$VideoPlayerHTML5Shaka82=function(){var a=this,c,d,e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:c=this.$VideoPlayerHTML5Shaka59;c==null&&(this.$VideoPlayerHTML5Shaka59=c=new(b("P2PPlaybackSessionLogger"))(this.$VideoPlayerHTML5Shaka4));j.prev=2;c.logEnableP2P();d=this.$VideoPlayerHTML5Shaka57?this.$VideoPlayerHTML5Shaka57:{};e=d.HiveJS?d.HiveJS:{};e.renderStatsCallback=function(c){a.emit("debug/dashPlayerEvent",{type:"P2PStats",event:c}),b("nullthrows")(a.$VideoPlayerHTML5Shaka59).setCurrentHiveStats(c)};d.onActiveSession=function(b){a.$VideoPlayerHTML5Shaka59&&a.$VideoPlayerHTML5Shaka59.logSessionActive(b.tech),a.emit("debug/dashPlayerEvent",{type:"P2PTech",event:b.tech})};f=d.hiveTechOrder!=null?d.hiveTechOrder.indexOf("HiveJava"):-1;this.$VideoPlayerHTML5Shaka55&&this.$VideoPlayerHTML5Shaka55.disable_hivejava_for_livevc&&this.$VideoPlayerHTML5Shaka35&&this.$VideoPlayerHTML5Shaka35.startsWith("https://livestream-lookaside")&&d.hiveTechOrder&&f!==-1&&d.hiveTechOrder.splice(f,1);d.HiveJS=e;d.telemetryId=c.getSessionID();d.onError=this.$VideoPlayerHTML5Shaka89.bind(this);window.HiveConfig.SensitiveInfo.restrictedConnectivityInfo=!0;g=new window.HiveFacebook(this.$VideoPlayerHTML5Shaka19,this.$VideoPlayerHTML5Shaka1,d);if(this.$VideoPlayerHTML5Shaka35){j.next=17;break}return j.abrupt("return");case 17:h=this.$VideoPlayerHTML5Shaka35.substring(this.$VideoPlayerHTML5Shaka35.indexOf("?"));this.$VideoPlayerHTML5Shaka56=g.initSession(b("nullthrows")(this.$VideoPlayerHTML5Shaka54)+h);j.next=21;return b("regeneratorRuntime").awrap(this.$VideoPlayerHTML5Shaka56);case 21:i=this.$VideoPlayerHTML5Shaka56=j.sent;if(this.$VideoPlayerHTML5Shaka19){j.next=24;break}return j.abrupt("return");case 24:i.manifest!=this.$VideoPlayerHTML5Shaka35&&c.logManifestMismatch(i.manifest,this.$VideoPlayerHTML5Shaka35);c.logSessionInit(i.tech,this.$VideoPlayerHTML5Shaka35);this.$VideoPlayerHTML5Shaka58=g;this.$VideoPlayerHTML5Shaka56=i;this.emit("p2pPluginReady");j.next=35;break;case 31:j.prev=31,j.t0=j["catch"](2),c.logError(j.t0),this.$VideoPlayerHTML5Shaka56=void 0;case 35:case"end":return j.stop()}},null,this,[[2,31]])};d.$VideoPlayerHTML5Shaka89=function(a){this.$VideoPlayerHTML5Shaka59&&this.$VideoPlayerHTML5Shaka59.logHiveError(a)};d.disableP2PPlayback=function(){try{this.$VideoPlayerHTML5Shaka59&&this.$VideoPlayerHTML5Shaka59.logEndSession(),this.$VideoPlayerHTML5Shaka58&&this.$VideoPlayerHTML5Shaka58.closeHiveSession()}catch(a){b("FBLogger")("www_p2p_playback").warn(a.message)}this.$VideoPlayerHTML5Shaka59=null;this.$VideoPlayerHTML5Shaka58=null;this.$VideoPlayerHTML5Shaka56=null;this.$VideoPlayerHTML5Shaka54=null};d.setup=function(){};d.addListenersToLiveStreamState=function(a){var b=this;if(this.$VideoPlayerHTML5Shaka2.getBool("disable_live_stream_state",!1))return;a.addListener("streamInterruptAt",this.$VideoPlayerHTML5Shaka86.bind(this));["streamInterruptAt","commercialBreakAt","endedAt"].forEach(function(c){a.addListener(c,function(a){b.emit("debug/dashPlayerEvent",{type:c,event:a})})})};d.areInbandCaptionsExpected=function(){return this.$VideoPlayerHTML5Shaka25.hasInlinedCea608Subtitles()&&this.$VideoPlayerHTML5Shaka2.getBool("enable_cea608_parsing",!0)};d.areInbandCaptionsAutogenerated=function(){return this.$VideoPlayerHTML5Shaka25.isUsingASRCaptions()||this.$VideoPlayerHTML5Shaka25.isUsingASRCaptionsEmployeeDogfooding()};d.setEnableInbandCaptionsParsing=function(a){this.$VideoPlayerHTML5Shaka25.setEnableCea608Parsing(a&&this.$VideoPlayerHTML5Shaka2.getBool("enable_cea608_parsing",!0))};d.getDebug=function(){return{manifest:this.$VideoPlayerHTML5Shaka33,AbrManager:this.$VideoPlayerHTML5Shaka40,VideoSource:this.$VideoPlayerHTML5Shaka25,DashPlayer:this.$VideoPlayerHTML5Shaka19,VideoTaskQueue:b("VideoStreamingTaskQueueProvider").getQueue("video"),VideoTaskScheduler:b("VideoStreamingTaskQueueProvider").getSchedulerForDebug("video")}};c.getEstimatedBandwidth=function(){return r.getBandwidth()};c.isAutoplayBandwidthRestrained=function(a){a=b("VideoPlayerShakaBandwidthEstimator").isAutoplayBandwidthRestrained(a);return a};d.$VideoPlayerHTML5Shaka61=function(){var a=this,d=this.$VideoPlayerHTML5Shaka2.getNumber("connection_quality_context_throttle_frequency",0);if(d===0)return;this.$VideoPlayerHTML5Shaka47.addSubscriptions(b("EventListener").listen(r,"bandwidth",b("throttle")(function(){a.$VideoPlayerHTML5Shaka2.setContext("connection_quality",b("VideoPlayerConnectionQuality").evaluate(c.getEstimatedBandwidth))},d)))};d.$VideoPlayerHTML5Shaka63=function(a){a=this.$VideoPlayerHTML5Shaka21.get(a);if(!a)return;var b=a.id,c=a.reason;a=a.performanceLogger;if(this.$VideoPlayerHTML5Shaka2.getBool("fix_initial_stream_id_logging",!1)&&!this.$VideoPlayerHTML5Shaka36&&b)this.$VideoPlayerHTML5Shaka36=b;else if(this.$VideoPlayerHTML5Shaka36!==b){if(this.$VideoPlayerHTML5Shaka2.getBool("prevent_representation_ended_when_paused",!1)&&this.$VideoPlayerHTML5Shaka1.paused){this.emit("blocked_paused_representation_ended");return}if(this.$VideoPlayerHTML5Shaka2.getBool("prevent_representation_ended_when_seeking",!1)&&this.$VideoPlayerHTML5Shaka1.seeking)return;var d=this.$VideoPlayerHTML5Shaka36;this.$VideoPlayerHTML5Shaka36=b;a&&(a.setStreamSwitchReason(c),a.log());this.emit("representation_ended",{representationID:d,nextRepresentationID:b,streamSwitchReason:c})}};d.getVideoStreamInfoIDForTimePosition=function(a){a=this.$VideoPlayerHTML5Shaka21.get(a);var b=null;a&&(b=a.id);return b};d.getAudioStreamInfoIDForTimePosition=function(a){return null};d.$VideoPlayerHTML5Shaka90=function(a){if(a.fbQualityLabel)return a.fbQualityLabel;else if(a.height)return[a.height,"p"].join("");return null};d.$VideoPlayerHTML5Shaka91=function(a,b){var c=this.$VideoPlayerHTML5Shaka90(a);if(c)return c;else if(k.compare(a,b[0])==0)return"SD";else if(k.compare(a,b[b.length-1])==0)return"HD";else return null};d.getAvailableVideoQualities=function(){var a=this;if(this.$VideoPlayerHTML5Shaka7)return this.$VideoPlayerHTML5Shaka22;var b=this.$VideoPlayerHTML5Shaka25.getVideoTracks();b.sort(k.compare);return l(b.every(function(b){return a.$VideoPlayerHTML5Shaka90(b)!==null})?b.map(function(b){return a.$VideoPlayerHTML5Shaka90(b)}):b.length>1?["SD","HD"]:["SD"])};d.getVideoProjection=function(){return this.$VideoPlayerHTML5Shaka25.getVideoProjection()};d.getIsAbrEnabled=function(){return!this.$VideoPlayerHTML5Shaka53};d.getSelectedVideoQuality=function(){if(this.$VideoPlayerHTML5Shaka7)return this.$VideoPlayerHTML5Shaka23;var a=this.$VideoPlayerHTML5Shaka25.getVideoTracks();a.sort(k.compare);var b=a.find(function(a){return a.active});return b?this.$VideoPlayerHTML5Shaka91(b,a):null};d.clearBufferAfterSeekingIfLowerQuality=function(a){a=this.$VideoPlayerHTML5Shaka21.get(a);var b=a&&a.id;if(!b)return;a=this.$VideoPlayerHTML5Shaka25.getVideoTracks();var c=a.find(function(a){return a.active});a=a.find(function(a){return a.streamInfoID===b});k.compare(c,a)>0&&this.$VideoPlayerHTML5Shaka25.setClearBufferAfterSeeking()};d.getDashAudioConfiguration=function(){return this.$VideoPlayerHTML5Shaka25.getMpdAudioConfig()};d.canAutoSelectVideoQuality=function(){return!0};d.setPreloadDisabled=function(a){this.$VideoPlayerHTML5Shaka2.getBool("block_autoplay_allow_preload_settings_change",!1)&&this.$VideoPlayerHTML5Shaka19.configure({initialStreamBufferSize:a?0:this.$VideoPlayerHTML5Shaka84(),liveSendPushHeaders:a?!1:this.$VideoPlayerHTML5Shaka85()})};d.restoreStreamBufferSize=function(){if(!this.$VideoPlayerHTML5Shaka2.getBool("use_stream_buffer_size_override",!1))return;this.$VideoPlayerHTML5Shaka19.configure({initialStreamBufferSize:this.$VideoPlayerHTML5Shaka84(),streamBufferSize:this.$VideoPlayerHTML5Shaka83()})};d.$VideoPlayerHTML5Shaka84=function(){return this.$VideoPlayerHTML5Shaka11?this.$VideoPlayerHTML5Shaka2.getNumber("live_initial_stream_buffer_size_float",3.5):this.$VideoPlayerHTML5Shaka2.getNumber("initial_stream_buffer_size_float",7.5)};d.$VideoPlayerHTML5Shaka83=function(){return this.$VideoPlayerHTML5Shaka11?this.$VideoPlayerHTML5Shaka2.getNumber("live_stream_buffer_size_float",3):this.$VideoPlayerHTML5Shaka2.getNumber("stream_buffer_size_float",15)};d.$VideoPlayerHTML5Shaka85=function(){return this.$VideoPlayerHTML5Shaka42};d.setPreferredVideoQuality=function(a){var b=this,c=this.$VideoPlayerHTML5Shaka25.getVideoTracks();c.sort(k.compare);var d=c.find(function(d){return a==b.$VideoPlayerHTML5Shaka91(d,c)});d&&(this.$VideoPlayerHTML5Shaka24=a,this.$VideoPlayerHTML5Shaka40.setPreferredVideoTrack(d))};d.unsetPreferredVideoQuality=function(){this.$VideoPlayerHTML5Shaka24=null,this.$VideoPlayerHTML5Shaka40.unsetPreferredVideoTrack()};d.isDrm=function(){if(this.$VideoPlayerHTML5Shaka16)return!0;if(this.$VideoPlayerHTML5Shaka33&&this.$VideoPlayerHTML5Shaka33!==this.$VideoPlayerHTML5Shaka43)return this.$VideoPlayerHTML5Shaka33.indexOf("<ContentProtection")>=0};d.pause=function(){this.$VideoPlayerHTML5Shaka52&&this.$VideoPlayerHTML5Shaka52.setState("stopped"),this.$VideoPlayerHTML5Shaka1.pause()};d.play=function(){this.$VideoPlayerHTML5Shaka14=!0;this.$VideoPlayerHTML5Shaka28&&this.$VideoPlayerHTML5Shaka28.playStarted();this.$VideoPlayerHTML5Shaka19.setPendingPlayRequest(!0);if(this.$VideoPlayerHTML5Shaka4){var a=b("VideoDashPrefetchCache").getPrefetchTaskByID(""+this.$VideoPlayerHTML5Shaka4);a&&b("VideoStreamingTaskQueueProvider").getQueue("video").updatePriority(a,b("VideoPriorityCalculator").getMaxPriority())}this.$VideoPlayerHTML5Shaka52&&this.$VideoPlayerHTML5Shaka52.setState("playing");return this.$VideoPlayerHTML5Shaka1.play()};d.$VideoPlayerHTML5Shaka87=function(){var a=this.$VideoPlayerHTML5Shaka8;if(a){var b=this.$VideoPlayerHTML5Shaka1.currentTime,c=4;c=b>a-c;b=b>a;b?(this.emit("debug/dashPlayerEvent",{type:"streamResumedAt",event:this.$VideoPlayerHTML5Shaka8}),this.$VideoPlayerHTML5Shaka8=null):this.$VideoPlayerHTML5Shaka27&&(this.$VideoPlayerHTML5Shaka10=c)}return this.$VideoPlayerHTML5Shaka10};d.$VideoPlayerHTML5Shaka68=function(){this.$VideoPlayerHTML5Shaka27=!0,this.$VideoPlayerHTML5Shaka87()?this.$VideoPlayerHTML5Shaka88():(this.$VideoPlayerHTML5Shaka19.setResumeAfterBuffering(!0),this.emit("bufferingStart"))};d.$VideoPlayerHTML5Shaka70=function(a){a.progress&&this.emit("bufferingProgress",a.progress)};d.$VideoPlayerHTML5Shaka67=function(){this.emit("seekRangeChanged")};d.$VideoPlayerHTML5Shaka77=function(a){this.emit("initialLiveManifestRequestFailure",{url:a.url,status:a.status})};d.$VideoPlayerHTML5Shaka76=function(a){a.replica!=null&&this.emit("replicaSwitch",{replica:a.replica,url:a.url,status:a.status,timestamp:new Date().valueOf()})};d.$VideoPlayerHTML5Shaka78=function(){this.emit("networkInterrupted")};d.$VideoPlayerHTML5Shaka79=function(){this.emit("networkResumed")};d.$VideoPlayerHTML5Shaka88=function(){this.$VideoPlayerHTML5Shaka2.getBool("fix_is_live_interrupted_backtest",!1)||(this.$VideoPlayerHTML5Shaka26&&!this.$VideoPlayerHTML5Shaka29&&(this.$VideoPlayerHTML5Shaka29=this.$VideoPlayerHTML5Shaka26.getOperationLogger("stream_interrupted").start()),this.$VideoPlayerHTML5Shaka25.setIsLiveInterrupted(!0)),this.emit("streamInterrupted")};d.$VideoPlayerHTML5Shaka69=function(){this.$VideoPlayerHTML5Shaka27=!1,this.$VideoPlayerHTML5Shaka29&&(this.$VideoPlayerHTML5Shaka29.log(),this.$VideoPlayerHTML5Shaka29=null),this.$VideoPlayerHTML5Shaka25.setIsLiveInterrupted(!1),this.$VideoPlayerHTML5Shaka10?this.$VideoPlayerHTML5Shaka92():this.emit("bufferingEnd")};d.$VideoPlayerHTML5Shaka71=function(a){a=a.detail||{};var c=a.status!==void 0?a.status:null,d=a.url||null;if(a.type==="Hive"&&this.$VideoPlayerHTML5Shaka56){this.$VideoPlayerHTML5Shaka89({message:a.message,code:c,severity:1});if(b("qex")._("1070719"))return}this.$VideoPlayerHTML5Shaka93();var e=this.$VideoPlayerHTML5Shaka2.getString("block_play_request_http_status_list","410").split(",");this.$VideoPlayerHTML5Shaka2.getBool("disable_block_play_request_http_status_list",!1)&&(e=[]);if(this.$VideoPlayerHTML5Shaka11&&e.map(function(a){return parseInt(a,10)}).indexOf(c)!==-1){this.$VideoPlayerHTML5Shaka14&&(b("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"playing"),this.$VideoPlayerHTML5Shaka14=!1);return this.$VideoPlayerHTML5Shaka94()}this.emit("error",{error:("SHAKA_"+a.type).toUpperCase(),message:a.message,httpStatus:c,url:d,stack:a.stack})};d.unload=function(){if(this.$VideoPlayerHTML5Shaka60)return this.$VideoPlayerHTML5Shaka60.then(this.$VideoPlayerHTML5Shaka95.bind(this))["catch"](this.$VideoPlayerHTML5Shaka95.bind(this));else return this.$VideoPlayerHTML5Shaka95()};d.$VideoPlayerHTML5Shaka95=function(){var a=this;this.$VideoPlayerHTML5Shaka23=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka22=this.getAvailableVideoQualities();!this.$VideoPlayerHTML5Shaka25?this.$VideoPlayerHTML5Shaka11=!1:this.$VideoPlayerHTML5Shaka25.isLive()!==null&&(this.$VideoPlayerHTML5Shaka11=this.$VideoPlayerHTML5Shaka25.isLive());this.$VideoPlayerHTML5Shaka7=!0;b("clearInterval")(this.$VideoPlayerHTML5Shaka34);this.$VideoPlayerHTML5Shaka52&&this.$VideoPlayerHTML5Shaka52.stopFixedLatencySync();this.$VideoPlayerHTML5Shaka27&&this.$VideoPlayerHTML5Shaka2.getBool("fix_end_buffering_on_unload",!1)&&this.$VideoPlayerHTML5Shaka69();var c=this.$VideoPlayerHTML5Shaka37;c&&(c.unsubscribe(),c.removeAllListeners());this.$VideoPlayerHTML5Shaka28&&this.$VideoPlayerHTML5Shaka28.unload();this.$VideoPlayerHTML5Shaka59&&this.$VideoPlayerHTML5Shaka59.logUnload();this.$VideoPlayerHTML5Shaka47.release();return this.$VideoPlayerHTML5Shaka19.unload()["catch"](function(b){if(a.$VideoPlayerHTML5Shaka2.getBool("ignore_errors_after_unload",!0))return;throw b})};d.$VideoPlayerHTML5Shaka80=function(){var a=this,c={shakaConfig:this.$VideoPlayerHTML5Shaka2,performanceLogger:this.$VideoPlayerHTML5Shaka26,enableAdaptation:this.getIsAbrEnabled(),minPlayQuality:this.$VideoPlayerHTML5Shaka5,maxPlayQuality:this.$VideoPlayerHTML5Shaka6,width:this.$VideoPlayerHTML5Shaka17,height:this.$VideoPlayerHTML5Shaka18,resolutionConstraintMaxWidth:this.$VideoPlayerHTML5Shaka45,resolutionConstraintMaxHeight:this.$VideoPlayerHTML5Shaka44,isSpherical:this.$VideoPlayerHTML5Shaka15,initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka3,bandwidthModel:b("VideoPlayerShakaBandwidthEstimator").getBandwidthModel(this.$VideoPlayerHTML5Shaka11),bandwidthDowngradeTarget:this.$VideoPlayerHTML5Shaka11?this.$VideoPlayerHTML5Shaka2.getNumber("live_bandwidth_downgrade_target",1):this.$VideoPlayerHTML5Shaka2.getNumber("bandwidth_downgrade_target",.9),bandwidthUpgradeTarget:this.$VideoPlayerHTML5Shaka11?this.$VideoPlayerHTML5Shaka2.getNumber("live_bandwidth_upgrade_target",1):this.$VideoPlayerHTML5Shaka2.getNumber("bandwidth_upgrade_target",.9),useNewBandwidthBandLogic:this.$VideoPlayerHTML5Shaka2.getBool("use_new_bandwidth_band_logic",!0),hvqUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka11?this.$VideoPlayerHTML5Shaka2.getNumber("live_hvq_upgrade_aggressiveness",1):this.$VideoPlayerHTML5Shaka2.getNumber("hvq_upgrade_aggressiveness",1),hvqInlineUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka11?this.$VideoPlayerHTML5Shaka2.getNumber("live_hvq_inline_upgrade_aggressiveness",1):this.$VideoPlayerHTML5Shaka2.getNumber("hvq_inline_upgrade_aggressiveness",1),preHvqUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka11?this.$VideoPlayerHTML5Shaka2.getNumber("live_pre_hvq_upgrade_aggressiveness",1):this.$VideoPlayerHTML5Shaka2.getNumber("pre_hvq_upgrade_aggressiveness",1),preHvqInlineUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka11?this.$VideoPlayerHTML5Shaka2.getNumber("live_pre_hvq_inline_upgrade_aggressiveness",1):this.$VideoPlayerHTML5Shaka2.getNumber("pre_hvq_inline_upgrade_aggressiveness",1),video:this.$VideoPlayerHTML5Shaka1,videoID:this.$VideoPlayerHTML5Shaka4,abrLogger:this.$VideoPlayerHTML5Shaka30,getSource:this.$VideoPlayerHTML5Shaka20,enableReinforcementLearning:!this.$VideoPlayerHTML5Shaka12&&(this.$VideoPlayerHTML5Shaka2.getBool("enable_reinforcement_learning",!1)||this.$VideoPlayerHTML5Shaka15&&this.$VideoPlayerHTML5Shaka2.getBool("enable_reinforcement_learning_on_360",!1)),rlModelId:this.$VideoPlayerHTML5Shaka2.getNumber("rl_model_id",0),rlUseShortFeatures:this.$VideoPlayerHTML5Shaka2.getBool("rl_use_short_features",!1),useStrictTrackDimensionsExclusionLogic:this.$VideoPlayerHTML5Shaka46,videoWatchTimeTracker:this.$VideoPlayerHTML5Shaka41,chosenVideoTrackChangedCallback:this.$VideoPlayerHTML5Shaka2.getBool("enable_p2p_support",!1)?function(b){a.$VideoPlayerHTML5Shaka19.dispatchEventExtern({type:"bitrateswitch",data:b})}:null};return new(b("CustomAbrManager"))(c)};d.$VideoPlayerHTML5Shaka96=function(){var a=this;if(!this.$VideoPlayerHTML5Shaka2.getBool("enable_content_protection",!1))return null;var c=this.$VideoPlayerHTML5Shaka4,d=null,e=!1,f=null,g=null,i=!0,j=null;this.$VideoPlayerHTML5Shaka26&&(d=this.$VideoPlayerHTML5Shaka26.getOperationLogger("request").setType("license"));this.$VideoPlayerHTML5Shaka49!==void 0&&this.$VideoPlayerHTML5Shaka49!==null&&this.$VideoPlayerHTML5Shaka50!==null&&this.$VideoPlayerHTML5Shaka50!==void 0?(f=encodeURI(this.$VideoPlayerHTML5Shaka49+"&access_token="+this.$VideoPlayerHTML5Shaka50),e=!0,i=!1):"0"in this.$VideoPlayerHTML5Shaka48?f=this.$VideoPlayerHTML5Shaka48["0"]:f="/video/drm/getlicense?video_id="+c;"PLAYREADY"in this.$VideoPlayerHTML5Shaka48&&(g=this.$VideoPlayerHTML5Shaka48.PLAYREADY);var k=function(a){"body"in a&&delete a.body;if("url"in a&&a.url.search("access_token=")!==-1)try{var c=new(h||(h=b("URI")))(a.url);c!==null&&c!==void 0?(c.removeQueryData(["access_token"]),a.url=c.toString()):delete a.url}catch(b){delete a.url}return JSON.stringify(a)},l=function(a){d&&d.start();var b;a.key_system===p?b=window.btoa(a.body):b=window.btoa(String.fromCharCode.apply(null,new Uint8Array(a.body)));if(e){var c={request:b};a.body=JSON.stringify(c);a.headers["Content-Type"]="application/json"}else a.body=b,a.headers["Content-Type"]="application/text";a.method="POST"},q=function(a){var b=null;a=String.fromCharCode.apply(null,a);var c=null,e=null,f;try{f=JSON.parse(a)}catch(a){f=void 0}if(f!==void 0&&f.data!==void 0&&f.data.length===1){f=f.data[0];f.error!==null&&f.error!==void 0?e=k(f.error):c=f.license}else c=a;if(c!==null&&c!==""){f=window.atob(c);f!==null&&f!==""&&(b=new Uint8Array(f.split("").map(function(a){return a.charCodeAt(0)})))}if(d){e!==null&&d.setError(e);a=b!==null?"success":"failed";d.setResult(a).log()}return b},r=function(b){var a=null;b===m?a=n:b===o&&(a=p);return a},s=function(a){if(a===m)return f;else if(a===o)return g;return""};return function(b,c){a.$VideoPlayerHTML5Shaka16=!0;c=null;if(a.$VideoPlayerHTML5Shaka51!==null&&a.$VideoPlayerHTML5Shaka51!==void 0&&a.$VideoPlayerHTML5Shaka51!==""){var d=window.atob(a.$VideoPlayerHTML5Shaka51);c=new Uint8Array(d.split("").map(function(a){return a.charCodeAt(0)}))}j=r(b);d=s(b);return j!==null&&d!==null&&d!==""?[{keySystem:j,licenseServerUrl:d,withCredentials:i,licensePreProcessor:l,licensePostProcessor:q,videoRobustness:"",audioRobustness:"",serverCertificate:c}]:null}};d.$VideoPlayerHTML5Shaka97=function(){var a=this,b={onRequestSend:function(b,c,d){a.$VideoPlayerHTML5Shaka19.dispatchEventExtern({type:"segmentrequestfinished",data:{failed:!b,mimeType:c,bytes:d||0}})}};this.$VideoPlayerHTML5Shaka19.getRequestPromise&&(b.createPromise=function(b,c){if(a.$VideoPlayerHTML5Shaka56&&a.$VideoPlayerHTML5Shaka56.tech==="HiveJS")if(a.$VideoPlayerHTML5Shaka19.getRequestPromise!=null)return a.$VideoPlayerHTML5Shaka19.getRequestPromise(b,c);else a.$VideoPlayerHTML5Shaka59&&a.$VideoPlayerHTML5Shaka59.logMissingGetRequestPromise();return null});return b};d.$VideoPlayerHTML5Shaka81=function(){this.$VideoPlayerHTML5Shaka40||g(0,5841);this.$VideoPlayerHTML5Shaka35||g(0,5842);var a=null,c=this.$VideoPlayerHTML5Shaka35,d=this.$VideoPlayerHTML5Shaka2.getBool("enable_p2p_support",!1)&&this.$VideoPlayerHTML5Shaka56;d&&(a=this.$VideoPlayerHTML5Shaka97(),c=b("nullthrows")(this.$VideoPlayerHTML5Shaka56).manifest);c=new i(c,this.$VideoPlayerHTML5Shaka2,this.$VideoPlayerHTML5Shaka96(),r,this.$VideoPlayerHTML5Shaka40,this.$VideoPlayerHTML5Shaka52,a);this.$VideoPlayerHTML5Shaka21=new(b("TaggedTimeRanges"))(function(a,b){return a.id===b.id&&a.reason===b.reason});c.setTaggedTimeRanges(this.$VideoPlayerHTML5Shaka21);d&&this.$VideoPlayerHTML5Shaka59&&this.$VideoPlayerHTML5Shaka59.logCreatedP2PVideoSource();return c};d.$VideoPlayerHTML5Shaka98=function(a){var b=this;this.$VideoPlayerHTML5Shaka40=this.$VideoPlayerHTML5Shaka80();this.$VideoPlayerHTML5Shaka25=this.$VideoPlayerHTML5Shaka81();this.$VideoPlayerHTML5Shaka87()&&(this.$VideoPlayerHTML5Shaka9=this.$VideoPlayerHTML5Shaka19.getPlaybackRate(),this.$VideoPlayerHTML5Shaka1.playbackRate=0,this.emit("streamInterrupted"));this.$VideoPlayerHTML5Shaka19.setPlaybackStartTime(a);this.$VideoPlayerHTML5Shaka7=!1;this.$VideoPlayerHTML5Shaka60=this.$VideoPlayerHTML5Shaka19.load(this.$VideoPlayerHTML5Shaka25).then(function(){b.$VideoPlayerHTML5Shaka60=null;if(b.$VideoPlayerHTML5Shaka11!=b.$VideoPlayerHTML5Shaka25.isLive())return b.$VideoPlayerHTML5Shaka94();b.$VideoPlayerHTML5Shaka24&&b.setPreferredVideoQuality(b.$VideoPlayerHTML5Shaka24);b.$VideoPlayerHTML5Shaka23=null;b.$VideoPlayerHTML5Shaka22=l([]);return void 0})["catch"](function(a){b.$VideoPlayerHTML5Shaka60=null;throw a});return this.$VideoPlayerHTML5Shaka60};d.$VideoPlayerHTML5Shaka99=function(a){if(this.$VideoPlayerHTML5Shaka7&&this.$VideoPlayerHTML5Shaka2.getBool("ignore_errors_after_unload",!0))return;throw a};d.reload=function(a){var c=this;if(!this.$VideoPlayerHTML5Shaka7)return this.$VideoPlayerHTML5Shaka2.getBool("fix_reload_promise",!1)?b("Promise").resolve():void 0;var d=this.$VideoPlayerHTML5Shaka37;d&&(d.subscribe(),this.addListenersToLiveStreamState(d));this.$VideoPlayerHTML5Shaka2.getBool("refresh_vod_manifest",!1)?d=this.$VideoPlayerHTML5Shaka66().then(function(){return c.$VideoPlayerHTML5Shaka98(a)})["catch"](function(a){return c.$VideoPlayerHTML5Shaka99(a)}):d=this.$VideoPlayerHTML5Shaka98(a)["catch"](function(a){return c.$VideoPlayerHTML5Shaka99(a)});return this.$VideoPlayerHTML5Shaka2.getBool("fix_reload_promise",!1)?d:void 0};d.setPlaybackRate=function(a){this.$VideoPlayerHTML5Shaka9=a,this.$VideoPlayerHTML5Shaka87()||this.$VideoPlayerHTML5Shaka19.setPlaybackRate(a)};d.getPlaybackRate=function(){return this.$VideoPlayerHTML5Shaka19.getPlaybackRate()};d.setSmartBufferAdjustmentEnabled=function(a){this.$VideoPlayerHTML5Shaka19.configure({smartBufferAdjustmentEnabled:a})};d.setVideoStreamOffset=function(a){this.$VideoPlayerHTML5Shaka19.setVideoStreamOffset(a)};d.$VideoPlayerHTML5Shaka94=function(){b("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"seeked");b("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"playing");var a=this.$VideoPlayerHTML5Shaka2.getBool("abort_loading_decisioning_logic",!1);a?(b("dispatchCustomEvent")(this.$VideoPlayerHTML5Shaka1,"pause",b("dangerouslyOverrideMediaElementEndedProperty")()),b("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"ended")):this.$VideoPlayerHTML5Shaka2.getBool("end_live_playback_with_pause",!0)?b("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"pause"):b("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"ended");this.emit("streamResumed");this.unload()};d.getLongestInitResponseTime=function(){return this.$VideoPlayerHTML5Shaka25.getLongestInitResponseTime()};d.getLocalEstimator=function(){return this.$VideoPlayerHTML5Shaka25.getLocalEstimator()};d.setDimensions=function(a,b){this.$VideoPlayerHTML5Shaka17=a,this.$VideoPlayerHTML5Shaka18=b,this.$VideoPlayerHTML5Shaka40.setDimensions(a,b)};c.isSupported=function(a){return j.isBrowserSupported()};d.$VideoPlayerHTML5Shaka73=function(){this.emit("tracksChanged")};d.$VideoPlayerHTML5Shaka72=function(a){a.contentType==="video"&&(this.$VideoPlayerHTML5Shaka26&&this.$VideoPlayerHTML5Shaka26.setRepresentationID(a.id),this.$VideoPlayerHTML5Shaka26&&this.$VideoPlayerHTML5Shaka26.setDynamicBitrate(a.bandwidth),this.$VideoPlayerHTML5Shaka30.setRepresentationID(a.id),this.emit("adaptation",{reason:a.reason}))};d.$VideoPlayerHTML5Shaka86=function(a){this.$VideoPlayerHTML5Shaka2.getBool("fix_is_live_interrupted_backtest",!1)&&(this.$VideoPlayerHTML5Shaka26&&!this.$VideoPlayerHTML5Shaka29&&(this.$VideoPlayerHTML5Shaka29=this.$VideoPlayerHTML5Shaka26.getOperationLogger("stream_interrupted").start()),this.$VideoPlayerHTML5Shaka25.setIsLiveInterrupted(!0)),this.$VideoPlayerHTML5Shaka8=a};d.$VideoPlayerHTML5Shaka75=function(){this.$VideoPlayerHTML5Shaka87()&&this.$VideoPlayerHTML5Shaka92()};d.$VideoPlayerHTML5Shaka92=function(){this.$VideoPlayerHTML5Shaka8=null,this.$VideoPlayerHTML5Shaka10=!1,this.$VideoPlayerHTML5Shaka25.forceResyncVideoBuffer(),this.$VideoPlayerHTML5Shaka19.setPlaybackRate(this.$VideoPlayerHTML5Shaka9),this.emit("streamResumed")};d.$VideoPlayerHTML5Shaka74=function(){var a=this,b=this.$VideoPlayerHTML5Shaka26?this.$VideoPlayerHTML5Shaka26.getOperationLogger("manifest_wrapped").setResource(this.$VideoPlayerHTML5Shaka43).start():null,c=!this.$VideoPlayerHTML5Shaka1.paused;this.unload();this.reload().then(function(){a.$VideoPlayerHTML5Shaka10&&a.$VideoPlayerHTML5Shaka92(),c&&a.play(),b&&b.log()})["catch"](function(a){b&&b.setError(a).log()})};d.$VideoPlayerHTML5Shaka62=function(){this.$VideoPlayerHTML5Shaka14=!1,this.$VideoPlayerHTML5Shaka31&&(this.$VideoPlayerHTML5Shaka31=!1),this.$VideoPlayerHTML5Shaka19.setPendingPlayRequest(!1),this.$VideoPlayerHTML5Shaka59&&this.$VideoPlayerHTML5Shaka59.resumeStatsLogging()};d.$VideoPlayerHTML5Shaka65=function(){this.$VideoPlayerHTML5Shaka14=!0,this.$VideoPlayerHTML5Shaka54&&this.$VideoPlayerHTML5Shaka12&&this.$VideoPlayerHTML5Shaka56==null&&this.$VideoPlayerHTML5Shaka55&&this.$VideoPlayerHTML5Shaka55.delay_p2p_until_play&&this.$VideoPlayerHTML5Shaka82()};d.$VideoPlayerHTML5Shaka64=function(){this.$VideoPlayerHTML5Shaka14&&(this.$VideoPlayerHTML5Shaka14=!1,this.$VideoPlayerHTML5Shaka19.setPendingPlayRequest(!1)),this.$VideoPlayerHTML5Shaka59&&this.$VideoPlayerHTML5Shaka59.pauseStatsLogging()};d.$VideoPlayerHTML5Shaka100=function(){var a=this;if(this.$VideoPlayerHTML5Shaka12)return b("Promise").resolve();return this.$VideoPlayerHTML5Shaka32+1e3*60*60<Date.now()?b("VideoPlayerMetaData").genVideoData(this.$VideoPlayerHTML5Shaka4).then(function(b){return a.$VideoPlayerHTML5Shaka101(b.getDashManifest())}):b("Promise").resolve()};d.$VideoPlayerHTML5Shaka101=function(a){if(!this.$VideoPlayerHTML5Shaka25)return;this.$VideoPlayerHTML5Shaka35=q(a);this.$VideoPlayerHTML5Shaka7||(this.$VideoPlayerHTML5Shaka32=Date.now(),this.$VideoPlayerHTML5Shaka25.updateManifest(this.$VideoPlayerHTML5Shaka35))};d.$VideoPlayerHTML5Shaka66=function(){var a=this;this.$VideoPlayerHTML5Shaka93();this.$VideoPlayerHTML5Shaka34=b("setInterval")(function(){a.$VideoPlayerHTML5Shaka100()},1e3*60);return this.$VideoPlayerHTML5Shaka100()["catch"](function(){return b("Promise").resolve()})};d.refreshDashManifest=function(){var a=this;this.unload();var c=b("VideoPlayerMetaData").genVideoData(this.$VideoPlayerHTML5Shaka4);return c.then(function(b){a.$VideoPlayerHTML5Shaka101(b.getDashManifest())})};d.$VideoPlayerHTML5Shaka93=function(){b("clearInterval")(this.$VideoPlayerHTML5Shaka34)};d.$VideoPlayerHTML5Shaka102=function(a){var b=a[0];if(b)if(b.startTime+.5<b.endTime)b.startTime+=.5;else{a.splice(0,1);return this.$VideoPlayerHTML5Shaka102(a)}return a};d.getSeekableRanges=function(){var a=this.$VideoPlayerHTML5Shaka19.getVideoSourceStreamLimits();if(a&&a.seekRangeGaps){a=b("getVideoPlayerShakaSeekableRanges")(a);return new(b("TimeRanges"))(this.$VideoPlayerHTML5Shaka102(a))}return null};d.setEnableLiveheadCatchup=function(a){this.$VideoPlayerHTML5Shaka19.setEnableLiveheadCatchup(a)};d.isLiveheadCatchupEnabled=function(){return this.$VideoPlayerHTML5Shaka19.isLiveheadCatchupEnabled()};d.$VideoPlayerHTML5Shaka103=function(){return this.$VideoPlayerHTML5Shaka25?this.$VideoPlayerHTML5Shaka25.getManifest():null};d.isFBWasLive=function(){var a=this.$VideoPlayerHTML5Shaka103();return!!(a&&a.FBWasLive)};d.isFBIsLiveTemplated=function(){var a=this.$VideoPlayerHTML5Shaka103();return!!(a&&a.FBIsLiveTemplated)};d.isFBMS=function(){var a=this.$VideoPlayerHTML5Shaka103();return!!(a&&a.FBMS)};d.ispDASH=function(){return!1};d.getFbManifestIdentifier=function(){var a=this.$VideoPlayerHTML5Shaka103();return a?a.FBManifestIdentifier:""};d.getPlayerVersion=function(){return"pleasantville"};d.switchReplicaSet=function(a){var c=new(h||(h=b("URI")))(this.$VideoPlayerHTML5Shaka35);c.addQueryData("replica",a);this.$VideoPlayerHTML5Shaka35=c.toString()};d.getManifestUrl=function(){return this.$VideoPlayerHTML5Shaka35};d.getBandwidthEstimate=function(){return c.getEstimatedBandwidth()};return c}(b("EventEmitter"));e.exports=c}),null);