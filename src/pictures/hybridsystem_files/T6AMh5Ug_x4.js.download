if (self.CavalryLogger) { CavalryLogger.start_js(["qPvbn"]); }

__d("FBAMetaMegaMenuLogger",["invariant","Bootloader"],(function(a,b,c,d,e,f,g){"use strict";function a(a){j("MegaMenu_HelpButton_Toggle",{action:a?"open":"close"})}function c(a,b){b?j("HelpTray_Article_Click",{article_id:a,search_term:b}):j("HelpTray_Article_Click",{article_id:a})}function d(a){j("HelpTray_SearchBar_Change",{search_term:a})}function f(a){j("MegaMenu_NotificationBell_Toggle",{action:a?"open":"close"})}function h(a,b){a!==null&&a.match(/(\d+)\:(\d+)/)||g(0,518);a=a.split(":");var c=a[0];a=a[1];j("MegaMenu_Notification_Click",{recepient_id:c,notification_id:a,notifType:b})}function i(a){j("MegaMenu_NotificationBell_Show",{unseen_notification_count:a.toString()})}function j(a,c){b("Bootloader").loadModules(["FBAMetaLoggerWWW"],function(b){b=b.META_LOGGER;b.logEvent(a,c)},"FBAMetaMegaMenuLogger")}e.exports={logHelpTrayToggle:a,logHelpTrayArticleClick:c,logHelpTrayPerformSearch:d,logMegaMenuNotificationBellToggle:f,logMegaMenuNotificationClick:h,logMegaMenuNotificationBellShown:i}}),null);
__d("JewelBadgeCountRecorder",["invariant","Arbiter","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i=Object.create(null);a={onCountUpdated:function(a,c){i[c.jewel]==null&&(i[c.jewel]=[]);a=i[c.jewel];a.push({timestamp:(h||(h=b("performanceNow")))(),count:c.count});a.length>1e3&&a.shift()},getCountAtTimestamp:function(a,b){var c=i[a];c!=null||g(0,2483,a,JSON.stringify(i));c.length>0||g(0,2484,a);a=c.find(function(a,d){var e=c[d+1];return d===0&&b<a.timestamp||b>a.timestamp&&(e==null||b<e.timestamp)});a||g(0,2485);return a.count}};b("Arbiter").subscribe("jewel/count-updated",a.onCountUpdated);e.exports=a}),null);
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","FBJSON"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$CrossWindowEventEmitter2=c;d.$CrossWindowEventEmitter1=new(b("CacheStorage"))("localstorage",c+":");d.$CrossWindowEventEmitter1.addValueChangeCallback(function(c,e,f){e=c.split(":")[1];try{c=b("FBJSON").parse(f)}catch(a){c=void 0}if(c&&c.__v){(f=a.prototype.emit).call.apply(f,[babelHelpers.assertThisInitialized(d),e].concat(c.__v))}});return d}var d=c.prototype;d.emit=function(b){var c;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];this.emitRemote.apply(this,[b].concat(e));(c=a.prototype.emit).call.apply(c,[this,b].concat(e))};d.emitRemote=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$CrossWindowEventEmitter1.set(a,c)};return c}(b("EventEmitter"));e.exports=a}),null);
__d("FriendingSurfaceVisitationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:FriendingSurfaceVisitationLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:FriendingSurfaceVisitationLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:FriendingSurfaceVisitationLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppVersion=function(a){this.$1.app_version=a;return this};c.setBadgeCount=function(a){this.$1.badge_count=a;return this};c.setClientTimestamp=function(a){this.$1.client_timestamp=a;return this};c.setIsTab=function(a){this.$1.is_tab=a;return this};c.setRawRefTab=function(a){this.$1.raw_ref_tab=a;return this};c.setRawTab=function(a){this.$1.raw_tab=a;return this};c.setRefPage=function(a){this.$1.ref_page=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setTargetProfileID=function(a){this.$1.target_profile_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={app_version:!0,badge_count:!0,client_timestamp:!0,is_tab:!0,raw_ref_tab:!0,raw_tab:!0,ref_page:!0,surface:!0,target_profile_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("normalizedEventTimestamp",["performance"],(function(a,b,c,d,e,f){"use strict";var g;function a(a){if(a!=null)if((g||(g=b("performance")))&&(g||(g=b("performance"))).timing&&(g||(g=b("performance"))).timing.navigationStart&&a>(g||(g=b("performance"))).timing.navigationStart)return a-=(g||(g=b("performance"))).timing.navigationStart;else return a;else if((g||(g=b("performance"))).now)return(g||(g=b("performance"))).now();return null}e.exports=a}),null);
__d("reportData",["Banzai","SessionName","ifRequired"],(function(a,b,c,d,e,f){var g={retry:!0};function a(a,c){c===void 0&&(c={});c={ft:c.ft||{},gt:c.gt||{}};var d="-",e="r",f=b("ifRequired")("URI",function(a){return a.getRequestURI(!0,!0).getUnqualifiedURI().toString()},function(){return location.pathname+location.search+location.hash});a=[b("SessionName").getName(),Date.now(),"act",Date.now(),0,d,a,d,d,e,f,c,0,0,0,0];b("Banzai").post("eagle_eye_event",a,g)}e.exports=a}),null);
__d("JewelBase",["csx","invariant","Promise","Arbiter","ArbiterMixin","Bootloader","CrossWindowEventEmitter","CSS","DOM","Event","FriendingSurfaceVisitationTypedLogger","FunnelLogger","HTML","JewelBadgeCountRecorder","JewelCountSideLoader","JewelLogger","Keys","NotificationJewelFunnelLoggingConstants","Run","TabIsolation","TimeSlice","Toggler","TooltipData","firstClickTimestamp","killswitch","mixin","normalizedEventTimestamp","performance","performanceNow","promiseDone","reportData"],(function(a,b,c,d,e,f,g,h){var i,j,k=b("JewelLogger").logJewelCancel,l=b("JewelLogger").logJewelClick,m=b("JewelLogger").logJewelInitialize,n=b("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_EVENT,o=b("NotificationJewelFunnelLoggingConstants").FUNNEL_LOGGING_NAME,p=new(b("CrossWindowEventEmitter"))("JewelBase"),q={};function r(){if((i||(i=b("performance")))==null?void 0:(i||(i=b("performance"))).getEntriesByName){var a=(i||(i=b("performance"))).getEntriesByName("first-paint","paint");if(a&&a[0])return b("normalizedEventTimestamp")(a[0].startTime)}return null}a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this)||this;e.name=d.name;e.label=d.label;e.clickCount=0;e.root=c;e.badge=d.badge;e.countNew=0;e.initialCount=d.count||0;e.userCount=0;e.pageCount=0;e.escHandler=null;e.bootload_module=d.bootload_module;e.bootload_args=d.bootload_args;e.bootload_eager_modules=d.bootload_eager_modules;e.bootload_conf=d.bootload_conf;e.bootloading=null;e.togglerInstance=b("Toggler").getInstance(c).setSticky(!1);e.businessID=d.businessID;e.loggerRef=d.loggerRef;m({jewelName:e.name,badgeInitialCount:e.initialCount,timestamp:r()});b("JewelBadgeCountRecorder").onCountUpdated("jewel/initial-count",{jewel:e.name,count:e.initialCount});e.bootload_conf&&e.bootload_conf.eagerLoadingOnInteraction?e.$JewelBase3():b("Run").onAfterLoad(function(){return e.$JewelBase4()});e.bootload_conf&&e.bootload_conf.eagerLoadingOnInteraction&&e.$JewelBase5();d.keepOpenForSnowlift&&e.togglerInstance.setPrePageTransitionCallback(e.$JewelBase6.bind(babelHelpers.assertThisInitialized(e)));q[e.name]=babelHelpers.assertThisInitialized(e);e.$JewelBase7();c=e.getFlyout();c||h(0,5194);var f=new(b("TabIsolation"))(c);b("killswitch")("JEWEL_TOGGLER_INSTANCE_FIXES")?b("Toggler").createInstance(c).setSticky(!1):b("Toggler").createInstance(e.root).setSticky(!1);e.$JewelBase8();b("Toggler").listen("show",e.root,function(a){var c=this;b("FunnelLogger").appendAction(o,n.OPEN_JEWEL);this.$JewelBase9();this.inform("user-open");this.hasNew()&&this.markSeen();this.reset();b("Arbiter").inform("layer_shown",{type:"Jewel",name:this.name});f.enable();this.setupEvents();this.$JewelBase10();this.bootload_conf&&this.bootload_conf.eagerLoadingOnInteraction?this.$JewelBase11():b("promiseDone")(this.$JewelBase4().then(function(){return c.inform("opened")}))}.bind(babelHelpers.assertThisInitialized(e)));b("Toggler").listen("hide",e.root,function(a,c){k(),b("FunnelLogger").appendAction(o,n.CLOSE_JEWEL),b("FunnelLogger").endFunnel(o),this.hasNew()&&this.markSeen(),this.reset(),this.inform("closed"),b("Arbiter").inform("layer_hidden",{type:"Jewel"}),f.disable(),this.removeEvents(),this.$JewelBase8()}.bind(babelHelpers.assertThisInitialized(e)));b("Arbiter").subscribe("jewel/count-updated",function(a,b){b.jewel==e.name&&e.update(b)});b("Arbiter").subscribe("jewel/hide",function(a,b){e.hide()});p.addListener("count-updated",function(a){a.jewel==e.name&&e.update(a)});return e}var d=c.prototype;d.getRoot=function(){return this.root};d.hide=function(){this.isOpen()&&b("Toggler").hide(this.root)};d.getFlyout=function(){this.$JewelBase1==null&&(this.$JewelBase1=b("DOM").find(this.root,".__tw"));return this.$JewelBase1};d.hasNew=function(){return b("CSS").hasClass(this.root,"hasNew")};d.isOpen=function(){return b("CSS").hasClass(this.root,"openToggler")};d.reset=function(){b("FunnelLogger").appendAction(o,n.CLEAR_BADGE_COUNT),b("CSS").removeClass(this.root,"hasNew")};d.setContent=function(a){var c=b("DOM").find(this.root,"ul.jewelItemList");b("DOM").setContent(c,b("HTML")(a))};d.update=function(a){a.animation&&this.badge.setAnimation&&this.badge.setAnimation(a.animation);this.countNew=a.count;typeof this.countNew==="number"&&this.countNew<0&&(this.countNew=0);this.badge.setLegacyContent(this.countNew);var c=isNaN(this.countNew)||this.countNew>0;b("CSS").conditionClass(this.root,"hasNew",c);this.updatedOnce=!0;this.inform("updated",a,"state")};d.setupEvents=function(){var a=this;this.escHandler=b("Event").listen(document.documentElement,"keydown",function(c){c.keyCode===b("Keys").ESC&&a.hide()})};d.removeEvents=function(){this.escHandler&&(this.escHandler.remove(),this.escHandler=null)};d.markSeen=function(){var a=this,c=function(){b("Arbiter").inform("jewel/count-updated",{jewel:a.name,count:0},"state"),p.emitRemote("count-updated",{jewel:a.name,count:0}),a.inform("marked-seen")};b("TimeSlice").guard(c,"JewelOpen markSeen",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};d.getButton=function(){this.$JewelBase2==null&&(this.$JewelBase2=b("DOM").find(this.root,"a.jewelButton"));return this.$JewelBase2};d.$JewelBase8=function(){var a=this.getButton();b("TooltipData").set(a,this.label);a.setAttribute("data-tooltip-delay","500")};d.$JewelBase10=function(){b("TooltipData").remove(this.getButton())};d.$JewelBase6=function(a,b){!this.$JewelBase12(b.from)&&!this.$JewelBase12(b.to)&&(this.togglerInstance&&this.togglerInstance.hide())};d.$JewelBase12=function(a){return a&&Object.prototype.hasOwnProperty.call(a.getQueryData(),"theater")};d.$JewelBase9=function(){var a=this;this.clickCount++;var c=this.getButton(),d=(j||(j=b("performanceNow")))();this.clickCount===1&&(d=b("firstClickTimestamp").get(c));d&&(d=b("normalizedEventTimestamp")(d),d&&l({jewelName:this.name,timestamp:d,badgeCurrentCount:b("JewelBadgeCountRecorder").getCountAtTimestamp(this.name,d),badgeInitialCount:this.initialCount,clickCount:this.clickCount}));b("reportData")("jewel_click",{gt:babelHelpers["extends"]({count:this.countNew,initial:this.initialCount,jewel:this.name},this.businessID?{biz_id:this.businessID}:{},this.loggerRef?{ref:this.loggerRef}:{})});this.name==="requests"&&new(b("FriendingSurfaceVisitationTypedLogger"))().setSurface("jewel").setBadgeCount(this.countNew).log();this.name==="mercurymessages"&&b("Bootloader").loadModules(["PageInboxEntryPointsTypedLogger","PageInboxEntryPointEvent","PageInboxEntryPoint"],function(b,c,d){new b().setVC().setEvent(c.CLICK).setLocation(d.JEWEL_DROPDOWN).setBadgeNum(a.countNew).log()},"JewelBase")};d.$JewelBase4=function(){var a=this;if(!this.bootload_module)return b("Promise").resolve();this.bootloading||(this.bootloading=new(b("Promise"))(function(b,c){a.bootload_module.load().then(function(c){new c(a,a.bootload_args),b()})["catch"](c)}));return this.bootloading};d.$JewelBase3=function(){var a=this;this.bootload_eager_modules?this.bootload_eager_modules.loadModules(this):b("Run").onAfterLoad(function(){return a.$JewelBase4()})};d.$JewelBase5=function(){this.bootload_eager_modules&&this.bootload_eager_modules.mount(this)};d.$JewelBase11=function(){var a=this;this.bootload_eager_modules?this.bootload_eager_modules.load(this):b("promiseDone")(this.$JewelBase4().then(function(){return a.inform("opened")}))};d.$JewelBase7=function(){if(this.bootloading)return;var a=b("JewelCountSideLoader").getOverwritesForJewel(this);if(!a)return;this.updateCountAndArgs(a.args,a.count)};d.updateCountAndArgs=function(a,c){for(var d in a)a[d]&&(this.bootload_args[d]=a[d]);c&&b("Arbiter").inform("jewel/count-updated",{jewel:this.name,count:c},"state")};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("BrowserPushCommands",[],(function(a,b,c,d,e,f){a="browser_push_ack";b="browser_push_redirect";c="browser_push_window_visible";d={ACK:a,REDIRECT:b,WINDOW_VISIBLE:c};e.exports=d}),null);
__d("BrowserPushMessageRedirectUtil",["Bootloader"],(function(a,b,c,d,e,f){a=function(a){var c="(messages)(.*?)(?:(tid=))([^&]*)";a=a.match(c);if(!a)return!0;var d=a.pop();b("Bootloader").loadModules(["FantaTabActions"],function(a){a.openTab(d)},"BrowserPushMessageRedirectUtil");return!1};e.exports=a}),null);
__d("BrowserPushMessageHandler",["BrowserPushCommands","BrowserPushMessageRedirectUtil","EventListener","URI","URISchemes","isFacebookURI"],(function(a,b,c,d,e,f){var g,h;function i(a){if(a.data.command&&a.data.command===b("BrowserPushCommands").REDIRECT){if(window.onbeforeunload()===void 0)a.ports[0].postMessage({command:b("BrowserPushCommands").ACK,success:!0});else{a.ports[0].postMessage({command:b("BrowserPushCommands").ACK,success:!1});return}a=a.data.uri;if(/^([^.:/?#]+):/.test(a)&&!(g||(g=b("URISchemes"))).isAllowed(/^([^.:/?#]+):/.exec(a)[1])||!b("isFacebookURI")(new(h||(h=b("URI")))(a)))throw new Error("goURI: URI scheme rejected, URI: "+a);b("BrowserPushMessageRedirectUtil")(a)&&(window.location.href=a)}}a={registerRedirectHandler:function(){b("EventListener").listen(window,"message",function(a){a.origin===""&&i(a)}),navigator.serviceWorker&&navigator.serviceWorker.addEventListener&&navigator.serviceWorker.addEventListener("message",function(a){(navigator.serviceWorker&&navigator.serviceWorker.controller&&a.target&&a.target.controller&&a.target.controller===navigator.serviceWorker.controller||new RegExp("^"+window.location.protocol+"//"+window.location.host+"$").test(a.origin))&&i(a)})}};e.exports=a}),null);
__d("BrowserPushVisibilityChanger",["BrowserPushCommands","ClientServiceWorkerMessage","Visibility"],(function(a,b,c,d,e,f){function g(){new(b("ClientServiceWorkerMessage"))(b("BrowserPushCommands").WINDOW_VISIBLE,null).sendViaController()}a={listenForVisibility:function(){b("Visibility").isHidden()||g(),b("Visibility").addListener(b("Visibility").VISIBLE,g)}};e.exports=a}),null);
__d("MPushPermissionUtil",["BanzaiLogger","gkx"],(function(a,b,c,d,e,f){function a(a,c){c===void 0&&(c=!1);var d=b("gkx")("910664");d&&b("BanzaiLogger").log("ChromePushPermissionEventsLoggerConfig",{event:a});if(c){d=null;c="step";a==="allow"?(d="allow",c="conversion"):a==="deny"?d="deny":a==="install_ignore"?d="ignore":a==="turn_on_attempt"&&(d="show_browser_dialog");d!==null&&b("BanzaiLogger").log("NUXWizardLoggerConfig",{event:d,event_type:c,platform:"mobile",step:"turn_on_notification"})}}e.exports={logEvent:a}}),null);
__d("PushRegistrationUtils",[],(function(a,b,c,d,e,f){"use strict";var g={normalizeSubscriptionEndpoint:function(a){var b=a.endpoint;"subscriptionId"in a&&!new RegExp("/"+a.subscriptionId+"$").test(b)&&(b+="/"+a.subscriptionId);return b},setupPushRegistrationData:function(a,b){var c=g.normalizeSubscriptionEndpoint(a),d=null;a.toJSON?d=a.toJSON().keys:a.keys&&(d=a.keys);return{app_id:b,push_endpoint:c,subscription_keys:JSON.stringify(d)}}};e.exports=g}),null);
__d("XAsyncPushMuteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/settings/push/mute/",{appid:{type:"Int",required:!0},push_endpoint:{type:"String",required:!0},mute_for:{type:"Enum",enumType:0}})}),null);
__d("XAsyncPushMuteStateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/settings/push/mute/state/",{appid:{type:"Int",required:!0},push_endpoint:{type:"String",required:!0}})}),null);
__d("PushRegistration",["Promise","BrowserPushMessageHandler","BrowserPushPubKey","BrowserPushVisibilityChanger","MPushPermissionUtil","PushRegistrationUtils","ServiceWorkerRegistration","XAsyncPushMuteController","XAsyncPushMuteStateController","emptyFunction","promiseDone"],(function(a,b,c,d,e,f){var g=window.Notification,h=new Map();a=function(){"use strict";a.get=function(b,c){if(h.has(c))return h.get(c);b=new a(b,c);h.set(c,b);return b};function a(b,c){this.$3=b,this.appID=c,!a.$1&&!a.$2&&(a.$1=!1,a.$2=!1)}var c=a.prototype;c.getPushSubscription=function(){var c=this;return new(b("Promise"))(function(d,e){a.pushPermissionIsDenied()&&(b("MPushPermissionUtil").logEvent("permission_denied_or_blocked"),e(new Error("No permission or not supported"))),b("ServiceWorkerRegistration").getWorkerRegistration(c.$3).then(function(a){if(!a){d(null);return}a.pushManager.getSubscription().then(function(a){d(a)})["catch"](e)})["catch"](e)})};c.$4=function(a,c,d,e){a=a.getURIBuilder().getURI();c=new c(a);c.setData(b("PushRegistrationUtils").setupPushRegistrationData(d,this.appID));c.setMethod("post");c.setHandler&&c.setHandler(function(a){a.payload&&a.payload.session_change&&e()});c.send()};c.getMutedUntilInServer=function(a){var c=this;return new(b("Promise"))(function(d,e){c.getPushSubscription().then(function(f){if(f){f=b("PushRegistrationUtils").normalizeSubscriptionEndpoint(f);f=b("XAsyncPushMuteStateController").getURIBuilder().setString("push_endpoint",f).setInt("appid",c.appID).getURI();f=new a(f);f.listen("done",function(a){d(a.payload.muteUntilTimestampSec)});f.send()}else e("cannot check mute status for unsubscribed endpoint")})["catch"](e)})};c.muteNotifications=function(a,c){var d=this;return new(b("Promise"))(function(e,f){d.getPushSubscription().then(function(g){if(g){g=b("PushRegistrationUtils").normalizeSubscriptionEndpoint(g);g=b("XAsyncPushMuteController").getURIBuilder().setEnum("mute_for",a).setString("push_endpoint",g).setInt("appid",d.appID).getURI();g=new c(g);g.setMethod("POST");g.listen("done",function(b){a!==0&&b.payload.muteUntilTimestampSec===0?f("operation failed in server"):e(b.payload.muteUntilTimestampSec)});g.send()}else f("no subscription found")})["catch"](f)})};c.getSubscription=function(){var a=this;return new(b("Promise"))(function(c,d){a.getPushSubscription().then(function(a){a?c(b("PushRegistrationUtils").normalizeSubscriptionEndpoint(a)):c(null)})["catch"](d)})};c.maybeRegisterPushAgain=function(a,c,d){var e=this;return new(b("Promise"))(function(f,g){e.getPushSubscription().then(function(g){g?(e.$4(a,c,g,d),f(b("PushRegistrationUtils").normalizeSubscriptionEndpoint(g))):f(null)})["catch"](function(){f(null)})})};c.$5=function(c,d,e){var f=this;return new(b("Promise"))(function(b,g){if(a.$2&&!e){g(new Error("sending disable info already"));return}a.$2=!0;var h=c.getURIBuilder().getURI();h=new d(h.toString());h.setData({appid:f.appID,from_browser_settings:e});h.setMethod("post");h.listen?(h.listen("finally",b),h.listen("fail",function(){a.$2=!1,g()})):h.setErrorHandler&&h.setHandler?(h.setErrorHandler(function(){a.$2=!1,g()}),h.setHandler(b)):b();h.send()})};c.isPushRegistered=function(c,d,e,f,g,h,i){var j=this;g===void 0&&(g=!1);h===void 0&&(h=b("emptyFunction"));i===void 0&&(i=!1);b("BrowserPushMessageHandler").registerRedirectHandler();return new(b("Promise"))(function(k,l){j.getPushSubscription().then(function(l){k(!!l||c&&!a.pushPermissionIsPending()),l?g?j.$4(d,f,l,h):b("BrowserPushVisibilityChanger").listenForVisibility():!l&&c&&(a.pushPermissionIsOn()?j.registerPush(d,f,h,i)["catch"](function(){}):j.$5(e,f,!1))})["catch"](function(){c&&j.$5(e,f,!1),i&&b("ServiceWorkerRegistration").unregisterControllingWorker(),l()})})};c.$6=function(){return new(b("Promise"))(function(a,b){g.requestPermission(a)})};c.registerPushAndWaitForEndpoint=function(a,c,d,e){var f=this;e===void 0&&(e=!1);return new(b("Promise"))(function(b,g){f.$7(a,c,d,!0,null,e).then(function(a){if(typeof a!=="string"){g(new Error("registerPushImpl did not return an endpoint"));return}b(a)})["catch"](g)})};c.registerPushOnKaiOS=function(a,c,d){var e=this;return new(b("Promise"))(function(f,g){d.waitForKaiOS().done(function(){d.registerPush(function(d){d=JSON.parse(d.get("push_endpoint"));e.$4(a,c,d,b("emptyFunction"));f(b("PushRegistrationUtils").normalizeSubscriptionEndpoint(d))})})})};c.registerPush=function(a,c,d,e,f){d===void 0&&(d=b("emptyFunction"));e===void 0&&(e=!1);f===void 0&&(f=b("emptyFunction"));return this.registerPushWithFinishedCallBack(a,c,d,f,e)};c.registerPushWithFinishedCallBack=function(a,c,d,e,f){var g=this;f===void 0&&(f=!1);return new(b("Promise"))(function(b,h){g.$7(a,c,d,!1,e,f).then(function(a){if(typeof a!=="boolean"){h(new Error("registerPushImpl did not return a boolean"));return}b(a)})["catch"](h)})};c.$7=function(c,d,e,f,g,h){var i=this;if(a.$1)return new(b("Promise"))(function(a,b){b(new Error("registering already"))});if(!self.PushManager)return b("Promise").reject(new Error("PushManager not found."));a.$1=!0;return new(b("Promise"))(function(j,k){var l=b("ServiceWorkerRegistration").registerWorkerIfUnregistered(i.$3),m=i.$6();b("Promise").all([l,m]).then(function(l){var m=l[0];if(!a.pushPermissionIsOn()){h&&m.unregister();throw new Error("Push permission was denied")}f||j(!0);l=b("BrowserPushPubKey").appServerKey;l=l!=null&&l!=""?{userVisibleOnly:!0,applicationServerKey:l}:{userVisibleOnly:!0};m.pushManager.subscribe(l).then(function(a){f&&j(b("PushRegistrationUtils").normalizeSubscriptionEndpoint(a)),i.$4(c,d,a,e),g&&g(),b("BrowserPushVisibilityChanger").listenForVisibility()})["catch"](function(b){a.$1=!1,h&&m.unregister(),k(b)})})["catch"](function(b){a.$1=!1,k(b)})})};c.unregisterPushAndSWOnKaiOS=function(a,c,d,e){var f=this;return new(b("Promise"))(function(b,g){f.$5(a,c,e).then(function(){d.unregisterPush(),b()})["catch"](g)})};c.unregisterPushAndSW=function(a,c){var d=this;return new(b("Promise"))(function(e,f){d.$5(a,c,!0).then(function(){b("promiseDone")(b("ServiceWorkerRegistration").unregisterControllingWorker(),e)})["catch"](f)})};c.unregisterPushOnly=function(a,c){var d=this;return new(b("Promise"))(function(b,e){d.getPushSubscription().then(function(f){f?f.unsubscribe().then(d.$5(a,c,!0)).then(function(){b(!0)})["catch"](e):e()})["catch"](e)})};a.pushPermissionIsPending=function(){return window.Notification&&window.Notification.permission==="default"};a.pushPermissionIsOn=function(){return window.Notification&&window.Notification.permission==="granted"};a.pushPermissionIsDenied=function(){return window.Notification&&window.Notification.permission==="denied"};return a}();e.exports=a}),null);
__d("XBrowserPushMuteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/push/mute/",{appid:{type:"Int",required:!0},push_endpoint:{type:"String",required:!0},surface:{type:"Enum",required:!0,enumType:1},mute_for:{type:"Enum",enumType:0},__asyncDialog:{type:"Int"}})}),null);
__d("BrowserPushMuteOptionsLink",["fbt","regeneratorRuntime","AsyncRequest","PushRegistration","React","ReactDOM","XBrowserPushMuteController","promiseDone"],(function(a,b,c,d,e,f,g){var h=b("React");function i(a,c,d){c=b("PushRegistration").get(c,d);b("promiseDone")(c.getPushSubscription(),function(c){if(c){c=b("XBrowserPushMuteController").getURIBuilder().setEnum("surface","jewel").setString("push_endpoint",c.endpoint).setInt("appid",d).getURI();new(b("AsyncRequest"))().setURI(c).setRelativeTo(a).send()}})}a={showMuteOptions:function(a,c,d){var e,f;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=b("PushRegistration").get(c,d);j.prev=1;j.next=4;return b("regeneratorRuntime").awrap(e.getPushSubscription());case 4:f=j.sent;j.next=10;break;case 7:j.prev=7,j.t0=j["catch"](1),f=null;case 10:if(!(!b("PushRegistration").pushPermissionIsOn()||!f)){j.next=12;break}return j.abrupt("return");case 12:b("ReactDOM").render(h.jsx("a",{href:"#",onClick:function(){i(a,c,d)},children:g._("Mute")}),a);case 13:case"end":return j.stop()}},null,this,[[1,7]])}};e.exports=a}),null);
__d("ViewasChromeBar",["csx","cx","Arbiter","AsyncRequest","CSS","DOM","Event","Focus","ModalMask","PageTransitionsRegistrar","Parent"],(function(a,b,c,d,e,f,g,h){var i="ViewasChromeBar/initialized",j=null,k=!1;function l(a){b("Arbiter").subscribe(i,a)}function m(a){b("CSS").addClass(a,"_7g7");a=b("DOM").find(a,"._7g0");b("Focus").set(b("DOM").find(a,".textInput"))}a={initChromeBar:function(a){if(k)return;j=a;k=!0;b("Arbiter").inform(i,null,"state")},update:function(a,c){l(function(){b("DOM").setContent(j,a),c&&new(b("AsyncRequest"))("/ajax/privacy/glasgow/viewas_bar_flyout_open").send()})},registerSpecificModeOnClick:function(a){b("Event").listen(a,"click",function(){var c=b("Parent").bySelector(a,"._7f-");c instanceof HTMLElement&&m(c)})},registerFlyoutModalMask:function(){b("ModalMask").show(),b("PageTransitionsRegistrar").registerHandler(b("ModalMask").hide,10)}};e.exports=a}),null);
__d("ResponsiveSidebar",["AjaxPipeRequest","Arbiter","Bootloader","ChatConfig","ChatSidebarVisibility","CSS","Event","Run","URI","getOrCreateDOMID","qex","setImmediate","throttle"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ChatConfig").get("sidebar.hide_divebar_off_homepage"),i=b("ChatConfig").get("sidebar.hide_buddylist_off_homepage"),j=b("qex")._("1211266")||!1,k="buddylistOff",l=!0;a={init:function(a){var c=this;if(this.shouldLoadContent(a))b("setImmediate")(function(){c.loadContentForConfig(a)});else{var d=document.documentElement||"";(h||j)&&!this.isOnHomepage()&&b("CSS").removeClass(d,"sidebarMode");var e=b("Event").listen(window,"resize",b("throttle")(function(){l&&(c.shouldLoadContent(a)&&(l=!1,e.remove(),c.loadContentForConfig(a)))},50));this.loadOnTransition(a);b("Run").onCleanupOrLeave(a.container,function(){l&&(l=!1,e.remove())})}},loadOnTransition:function(a){var c=this;if(h||i||j)var d=b("Arbiter").subscribe("page_transition",function(e,f){e=document.documentElement||"";!c.isOnHomepage(f.uri.getPath())?(i||j)&&b("CSS").addClass(e,k):(i&&(b("CSS").removeClass(e,k),b("Bootloader").loadModules(["Dock"],function(a){a.resizeAllFlyouts()},"ResponsiveSidebar")),b("ChatSidebarVisibility").shouldShowSidebar(null,function(b,e){l&&setTimeout(function(){c.loadContentForConfig(a)}),l=!1,d.unsubscribe()},f.uri))})},isOnHomepage:function(a){return(a||new(g||(g=b("URI")))(window.location.href).getPath())==="/"},shouldLoadContent:function(a){var b=(h||i||j)&&!this.isOnHomepage();return!b&&a.triggerWidth<window.innerWidth},loadContentForConfig:function(a){var c="/ajax/pagelet/generic.php/SidebarPagelet";new(b("AjaxPipeRequest"))(b("getOrCreateDOMID")(a.container),c).send()}};e.exports=a}),null);
__d("Spotlight",["csx","cx","Arbiter","ArbiterMixin","DOM","JSXDOM","Layer","LayerAutoFocus","LayerButtons","LayerTabIsolation","ModalLayer","Vector","classWithMixins","joinClasses","mixin"],(function(a,b,c,d,e,f,g,h){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c,d){c=a.call(this,c,d)||this;c.stageMinSize=new(b("Vector"))(0,0);c.stagePadding=new(b("Vector"))(0,0);return c}var d=c.prototype;d._buildWrapper=function(a,c){a=b("joinClasses")("_n8"+(a.wash==="dark"||!a.wash?" _3qx":"")+(a.wash==="xui"?" _4-hy":""),a.rootClassName);return b("JSXDOM").div({className:a},b("JSXDOM").div({className:"_n9"},c))};d._getDefaultBehaviors=function(){return a.prototype._getDefaultBehaviors.call(this).concat([i,b("LayerAutoFocus"),b("LayerButtons"),b("LayerTabIsolation"),b("ModalLayer")])};d.getContentRoot=function(){this._content||(this._content=b("DOM").find(this.getRoot(),"div._n3"));return this._content};d.configure=function(a){a.stageMinSize&&(this.stageMinSize=a.stageMinSize),a.stagePadding&&(this.stagePadding=a.stagePadding)};d.onContentLoaded=function(){this.inform("content-load")};d.updatePermalink=function(a){this.inform("permalinkchange",a)};return c}(b("classWithMixins")(b("Layer"),b("mixin")(b("ArbiterMixin"))));Object.assign(a.prototype,{stageMinSize:null,stagePadding:null});var i=function(){"use strict";function a(a){this._layer=a}var c=a.prototype;c.enable=function(){this._subscription=this._layer.subscribe(["show","hide"],function(a,c){a==="show"?b("Arbiter").inform("layer_shown",{type:"Spotlight"}):b("Arbiter").inform("layer_hidden",{type:"Spotlight"})})};c.disable=function(){this._subscription.unsubscribe(),this._subscription=null};return a}();Object.assign(i.prototype,{_subscription:null});e.exports=a}),null);
__d("XUIBadge",["cx","invariant","CSS","DOM","formatNumber"],(function(a,b,c,d,e,f,g,h){function i(a){return parseInt(a,10)===a}a=function(){"use strict";function a(a){this.target=a.target,this.count=a.count,this.maxcount=a.maxcount}var c=a.prototype;c.getCount=function(){return this.count};c.setCount=function(a){i(a)||h(0,186),a>=0||h(0,3502),this.count=a,b("CSS").conditionClass(this.target,"hidden_elem",this.count===0),b("DOM").setContent(this.target,b("formatNumber").withMaxLimit(a,this.maxcount)),a>this.maxcount?b("CSS").addClass(this.target,"_5ugi"):b("CSS").removeClass(this.target,"_5ugi")};c.setLegacyContent=function(a){typeof a==="string"?(b("CSS").conditionClass(this.target,"hidden_elem",a==0),b("DOM").setContent(this.target,a),b("CSS").removeClass(this.target,"_5ugi")):this.setCount(a)};c.increment=function(){this.setCount(this.getCount()+1)};return a}();e.exports=a}),null);
__d("RangedCallbackManager",["CallbackManagerController","arrayStableSort","createObjectFrom"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a,c,d){this.$1=[],this.$2=!1,this.$3=!1,this.$4={},this.$5=new(b("CallbackManagerController"))(this.$6.bind(this)),this.$7=a,this.$8=c,this.$9=d}var c=a.prototype;c.executeOrEnqueue=function(a,b,c,d,e){return this.$5.executeOrEnqueue({start:a,limit:b},c,{strict:!!d,skipOnStrictHandler:e})};c.unsubscribe=function(a){this.$5.unsubscribe(a)};c.getUnavailableResources=function(a){a=this.$5.getRequest(a);var b=[];if(a&&!this.$2){var c=a.request;a=this.$10(a.options);c=c.start+c.limit;for(var a=a.length;a<c;a++)b.push(a)}return b};c.addResources=function(a){var b=this;a.forEach(function(a){b.$4[a]||(b.$4[a]=!0,b.$1.push(a),b.$3=null)});this.resortResources();this.$5.runPossibleCallbacks()};c.addResourcesWithoutSorting=function(a,c){var d=this.$1.slice(0,c);d=d.concat(a);d=d.concat(this.$1.slice(c));this.$1=d;Object.assign(this.$4,b("createObjectFrom")(a,!0));this.$3=null;this.$5.runPossibleCallbacks()};c.removeResources=function(a){var b=this;a.forEach(function(a){if(b.$4[a]){b.$4[a]=!1;a=b.$1.indexOf(a);a!=-1&&b.$1.splice(a,1)}})};c.removeAllResources=function(){this.$1=[],this.$4={}};c.resortResources=function(){var a=this;this.$1=b("arrayStableSort")(this.$1,function(b,c){return a.$8(a.$7(b),a.$7(c))})};c.setReachedEndOfArray=function(){this.$2||(this.$2=!0,this.$3=null,this.$5.runPossibleCallbacks())};c.hasReachedEndOfArray=function(){return this.$2};c.forceRunCallbacks=function(){this.$5.runPossibleCallbacks({force:!0})};c.setError=function(a){this.$3!==a&&(this.$3=a,this.$5.runPossibleCallbacks())};c.getError=function(a,b,c){c=this.$10({strict:c});return a+b>c.length?this.$3:null};c.hasResource=function(a){return this.$4[a]};c.getResourceAtIndex=function(a){return this.$1[a]};c.getAllResources=function(){return this.$1.concat()};c.getCurrentArraySize=function(a){return this.$10(a).length};c.$10=function(a){var b=this.$1;if(a&&a.strict){a=a.skipOnStrictHandler||this.$9;a&&(b=b.filter(a))}return b};c.$6=function(a,b){var c=this.$10(b),d=a.start;a=a.start+a.limit;b=!!(b&&b.force);if(!b&&!this.$2&&!this.$3&&a>c.length)return!1;else{b=c.slice(d,a);d=a>c.length?this.$3:null;return[b,d]}};c.getElementsUntil=function(a){var b=[];for(var c=0;c<this.$1.length;c++){var d=this.$7(this.$1[c]);if(this.$8(d,a)>0)break;b.push(this.$1[c])}return b};return a}();e.exports=a}),null);
__d("incognito",["regeneratorRuntime","Promise","UserAgent","WebStorage","gkx"],(function(a,b,c,d,e,f){"use strict";var g;function a(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:a=window.RequestFileSystem||window.webkitRequestFileSystem;if(!a){c.next=3;break}return c.abrupt("return",new(b("Promise"))(function(b){return a(window.TEMPORARY,10,function(){return b(!1)},function(){return b(!0)})}));case 3:if(!(b("UserAgent").isBrowser("IE >= 10")||b("UserAgent").isBrowser("Edge"))){c.next=5;break}return c.abrupt("return",!window.indexedDB);case 5:if(!b("UserAgent").isBrowser("Firefox >= 16")){c.next=7;break}return c.abrupt("return",new(b("Promise"))(function(a){var b=window.indexedDB.open("__test__");b.onsuccess=function(){return a(!1)};b.onerror=function(b){b.preventDefault(),a(!0)}}));case 7:if(!(b("gkx")("676917")&&(b("UserAgent").isPlatform("iOS")&&b("UserAgent").isBrowser("Safari >= 10.3")||b("UserAgent").isPlatform("Mac OS X")&&b("UserAgent").isBrowser("Safari >= 11.1")))){c.next=18;break}c.prev=8;window.openDatabase("sid","1.0","",0);c.next=16;break;case 12:c.prev=12;c.t0=c["catch"](8);if(!(c.t0.name==="SecurityError")){c.next=16;break}return c.abrupt("return",!0);case 16:c.next=20;break;case 18:if(!b("UserAgent").isBrowser("Safari")){c.next=20;break}return c.abrupt("return",!(g||(g=b("WebStorage"))).getLocalStorage());case 20:return c.abrupt("return",!1);case 21:case"end":return c.stop()}},null,this,[[8,12]])}e.exports=a}),null);
__d("XPushRegisterServiceWorkerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/push/register/service_worker/",{})}),null);